(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{1001:function(e,t,a){"use strict";a.d(t,"a",function(){return m});var n=a(16),s=a.n(n),i=a(5),o=a.n(i),r=a(14),l=a(1184);function c(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class m extends o.a.PureComponent{constructor(e){super(e),d(this,"handleLoad",e=>{if(this.mounted){const t=e.target;this.props.onImageLoaded&&t.naturalHeight&&this.props.onImageLoaded({height:t.naturalHeight,width:t.naturalWidth}),this.setState({loaded:!0,error:!1})}}),d(this,"handleError",()=>{this.mounted&&(this.props.onImageLoadFail&&this.props.onImageLoadFail(),this.setState({error:!0}))}),d(this,"onEnterKeyDown",e=>{"Enter"===e.key&&this.props.onClick(e)}),d(this,"renderImageLoaderIfNeeded",()=>this.state.loaded||!this.props.showLoader||this.state.error?null:o.a.createElement("div",{style:{position:"absolute",top:"50%",transform:"translate(-50%, -50%)",left:"50%"}},o.a.createElement(l.a,{containerClass:"file__image-loading"}))),d(this,"renderImageOrPlaceholder",()=>{const e=this.props,{dimensions:t,fileInfo:a,src:n}=e,s=c(e,["dimensions","fileInfo","src"]);let i,l={},d=Object(r.fb)("file_attachment.thumbnail","file thumbnail");return a&&(d+=" ".concat(a.name).toLowerCase()),t&&t.width&&!this.state.loaded&&(i=o.a.createElement("div",{className:"image-loading__container ".concat(this.props.className),style:{maxWidth:t.width}},o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(t.width," ").concat(t.height),style:{verticalAlign:"middle",maxHeight:t.height,maxWidth:t.width}}))),Reflect.deleteProperty(s,"showLoader"),Reflect.deleteProperty(s,"onImageLoaded"),Reflect.deleteProperty(s,"onImageLoadFail"),!this.state.loaded&&t&&(l={position:"absolute",top:0,height:1,width:1,visibility:"hidden",overflow:"hidden"}),o.a.createElement(o.a.Fragment,null,i,o.a.createElement("div",{className:"style--none file-preview__button",style:l},o.a.createElement("img",Object.assign({},s,{"aria-label":d,tabIndex:"0",onKeyDown:this.onEnterKeyDown,className:this.props.className,src:n,onError:this.handleError,onLoad:this.handleLoad}))))}),this.state={loaded:!1},this.heightTimeout=0}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}render(){return o.a.createElement(o.a.Fragment,null,this.renderImageLoaderIfNeeded(),this.renderImageOrPlaceholder())}}d(m,"propTypes",{src:s.a.string.isRequired,dimensions:s.a.object,fileInfo:s.a.object,showLoader:s.a.bool,onImageLoaded:s.a.func,onImageLoadFail:s.a.func,onClick:s.a.func,className:s.a.string})},1004:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a(5),s=a.n(n),i=a(28);class o extends s.a.PureComponent{render(){return s.a.createElement(i.c,{id:"generic_icons.success",defaultMessage:"Success Icon"},e=>s.a.createElement("i",{className:"fa fa-check",title:e}))}}},1006:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a(5),s=a.n(n),i=a(28);class o extends s.a.PureComponent{render(){return s.a.createElement("span",this.props,s.a.createElement(i.c,{id:"generic_icons.search",defaultMessage:"Search Icon"},e=>s.a.createElement("svg",{width:"14px",height:"14px",viewBox:"0 0 19 18",role:"icon","aria-label":e},s.a.createElement("g",{stroke:"inherit",strokeWidth:"1",fill:"none",fillRule:"evenodd"},s.a.createElement("g",{transform:"translate(-719.000000, -20.000000)",strokeWidth:"1.5"},s.a.createElement("g",{transform:"translate(0.000000, 1.000000)"},s.a.createElement("g",{transform:"translate(63.000000, 10.000000)"},s.a.createElement("g",{transform:"translate(657.000000, 10.000000)"},s.a.createElement("circle",{cx:"7",cy:"7",r:"7"}),s.a.createElement("path",{d:"M12.5,11.5 L16.5,15.5",strokeLinecap:"round"})))))))))}}},1008:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a(5),s=a.n(n),i=a(28);class o extends s.a.PureComponent{render(){return s.a.createElement(i.c,{id:"generic_icons.back",defaultMessage:"Back Icon"},e=>s.a.createElement("i",{className:"fa fa-angle-left",title:e}))}}},1010:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a(5),s=a.n(n),i=a(28);class o extends s.a.PureComponent{render(){return s.a.createElement(i.c,{id:"generic_icons.add",defaultMessage:"Add Icon"},e=>s.a.createElement("i",{className:"fa fa-plus",title:e}))}}},1011:function(e,t,a){"use strict";a(47);var n=a(16),s=a.n(n),i=a(5),o=a.n(i),r=a(14);a(1527);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class c extends o.a.PureComponent{render(){const{name:e,url:t,size:a,withHover:n}=this.props;if(!e&&!t)throw new Error("Either `url` or `name` prop is required ");const s=n?"":"no-hover",i=t||Object(r.M)({display_name:e});let l=null;return l=i?o.a.createElement("div",{className:"TeamIcon__image TeamIcon__".concat(a),"aria-label":"Team Icon",style:{backgroundImage:"url('".concat(i,"')")}}):o.a.createElement("div",{className:"TeamIcon__initials TeamIcon__initials__".concat(a),"aria-label":"Team Initials"},e?e.replace(/\s/g,"").substring(0,2):"??"),o.a.createElement("div",{className:"TeamIcon ".concat(s," TeamIcon__").concat(a)},o.a.createElement("div",{className:"TeamIcon__content ".concat(s)},l))}}l(c,"propTypes",{url:s.a.string,name:s.a.string.isRequired,size:s.a.oneOf(["sm","md","lg"]),withHover:s.a.bool}),l(c,"defaultProps",{size:"md"}),t.a=c},1012:function(e,t,a){"use strict";a.d(t,"a",function(){return c});var n=a(16),s=a.n(n),i=a(5),o=a.n(i);function r(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class c extends o.a.Component{constructor(e){super(e),l(this,"show",e=>{e&&e.preventDefault(),this.setState({show:!0})}),l(this,"hide",()=>{this.setState({show:!1})}),this.state={show:!1}}render(){const e=this.props,{children:t,dialogType:a,dialogProps:n,onClick:s}=e,i=r(e,["children","dialogType","dialogProps","onClick"]);let l,c=this.show;return s&&(c=e=>{s(),this.show(e)}),this.state.show&&(l=o.a.createElement(a,Object.assign({},n,{onHide:()=>{this.hide(),n.onHide&&n.onHide()}}))),o.a.createElement("button",Object.assign({},i,{className:"style--none "+i.className,onClick:c}),t,l)}}c.propTypes={children:s.a.node.isRequired,dialogType:s.a.func.isRequired,dialogProps:s.a.object,onClick:s.a.func,className:s.a.string},c.defaultProps={dialogProps:{},className:""}},1024:function(e,t,a){"use strict";var n=a(16),s=a.n(n),i=a(5),o=a.n(i),r=a(28);class l extends o.a.PureComponent{render(){return o.a.createElement("span",this.props,o.a.createElement(r.c,{id:"mobile.set_status.away.icon",defaultMessage:"Away Icon"},e=>o.a.createElement("svg",{width:"13px",height:"13px",viewBox:"0 0 12 12",style:c,role:"icon","aria-label":e},o.a.createElement("path",{className:"away--icon",d:"M9.081,5.712C9.267,5.712 9.417,5.863 9.417,6.048L9.417,9.086L11.864,10.499C12.025,10.592 12.08,10.797 11.987,10.958L11.482,11.832C11.39,11.993 11.184,12.048 11.023,11.955L7.904,10.154C7.788,10.087 7.727,9.961 7.737,9.836C7.736,9.827 7.736,9.818 7.736,9.809L7.736,6.048C7.736,5.863 7.886,5.712 8.072,5.712L9.081,5.712ZM4.812,11.513L4.605,11.513C2.325,11.41 0.253,10.374 0.046,9.027C-0.058,8.923 0.046,8.509 0.046,8.405C0.15,7.576 0.357,6.437 0.771,5.815C0.978,5.401 2.015,5.297 2.015,5.297C2.015,5.297 2.015,7.369 4.605,7.369L5.019,7.369C4.915,7.784 4.812,8.198 4.812,8.612C4.812,9.648 5.226,10.581 5.848,11.41C5.537,11.513 5.123,11.513 4.812,11.513ZM4.605,0.117C6.034,0.117 7.195,1.277 7.195,2.707C7.195,4.136 6.034,5.297 4.605,5.297C3.175,5.297 2.015,4.136 2.015,2.707C2.015,1.277 3.175,0.117 4.605,0.117Z"}))))}}const c={fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:1.41421};class d extends o.a.PureComponent{render(){return o.a.createElement("span",this.props,o.a.createElement(r.c,{id:"mobile.set_status.away.icon",defaultMessage:"Away Icon"},e=>o.a.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 20 20",style:m,role:"icon","aria-label":e},o.a.createElement("path",{className:"away--icon",d:"M10,0C15.519,0 20,4.481 20,10C20,15.519 15.519,20 10,20C4.481,20 0,15.519 0,10C0,4.481 4.481,0 10,0ZM10.27,3C10.949,3 11.5,3.586 11.5,4.307L11.5,9.379L15.002,12.881C15.492,13.37 15.499,14.158 15.019,14.638L14.638,15.019C14.158,15.499 13.37,15.492 12.881,15.002L8.887,11.008C8.739,10.861 8.636,10.686 8.576,10.501C8.528,10.402 8.5,10.299 8.5,10.193L8.5,4.307C8.5,3.586 9.051,3 9.73,3L10.27,3Z"}))))}}const m={fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:1.41421};class u extends o.a.PureComponent{render(){return o.a.createElement("span",this.props,o.a.createElement(r.c,{id:"mobile.set_status.dnd.icon",defaultMessage:"Do Not Disturb Icon"},e=>o.a.createElement("svg",{id:"Layer_1",x:"0px",y:"0px",width:"13px",height:"13px",viewBox:"-299 391 12 12",style:p,role:"icon","aria-label":e},o.a.createElement("g",null,o.a.createElement("ellipse",{className:"dnd--icon",cx:"-294.6",cy:"394",rx:"2.5",ry:"2.5"}),o.a.createElement("path",{className:"dnd--icon",d:"M-293.8,399.4c0-0.4,0.1-0.7,0.2-1c-0.3,0.1-0.6,0.2-1,0.2c-2.5,0-2.5-2-2.5-2s-1,0.1-1.2,0.5c-0.4,0.6-0.6,1.7-0.7,2.5 c0,0.1-0.1,0.5,0,0.6c0.2,1.3,2.2,2.3,4.4,2.4c0,0,0.1,0,0.1,0c0,0,0.1,0,0.1,0c0.7,0,1.4-0.1,2-0.3 C-293.3,401.5-293.8,400.5-293.8,399.4z"})),o.a.createElement("path",{className:"dnd--icon",d:"M-287,400c0,0.1-0.1,0.1-0.1,0.1l-4.9,0c-0.1,0-0.1-0.1-0.1-0.1v-1.6c0-0.1,0.1-0.1,0.1-0.1l4.9,0c0.1,0,0.1,0.1,0.1,0.1 V400z"}))))}}const p={enableBackground:"new -299 391 12 12"};class h extends o.a.PureComponent{render(){return o.a.createElement("span",this.props,o.a.createElement(r.c,{id:"mobile.set_status.dnd.icon",defaultMessage:"Do Not Disturb Icon"},e=>o.a.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 20 20",style:g,role:"icon","aria-label":e},o.a.createElement("path",{className:"dnd--icon",d:"M10,0c5.519,0 10,4.481 10,10c0,5.519 -4.481,10 -10,10c-5.519,0 -10,-4.481 -10,-10c0,-5.519 4.481,-10 10,-10Zm5.25,8.5l-10.5,0c-0.414,0 -0.75,0.336 -0.75,0.75l0,1.5c0,0.414 0.336,0.75 0.75,0.75l10.5,0c0.414,0 0.75,-0.336 0.75,-0.75l0,-1.5c0,-0.414 -0.336,-0.75 -0.75,-0.75Z"}))))}}const g={fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:1.41421};class b extends o.a.PureComponent{render(){return o.a.createElement("span",this.props,o.a.createElement(r.c,{id:"mobile.set_status.offline.icon",defaultMessage:"Offline Icon"},e=>o.a.createElement("svg",{id:"Layer_1",x:"0px",y:"0px",width:"13px",height:"13px",viewBox:"-299 391 12 12",style:f,role:"icon","aria-label":e},o.a.createElement("g",null,o.a.createElement("g",null,o.a.createElement("ellipse",{className:"offline--icon",cx:"-294.5",cy:"394",rx:"2.5",ry:"2.5"}),o.a.createElement("path",{className:"offline--icon",d:"M-294.3,399.7c0-0.4,0.1-0.8,0.2-1.2c-0.1,0-0.2,0-0.4,0c-2.5,0-2.5-2-2.5-2s-1,0.1-1.2,0.5c-0.4,0.6-0.6,1.7-0.7,2.5 c0,0.1-0.1,0.5,0,0.6c0.2,1.3,2.2,2.3,4.4,2.4h0.1h0.1c0.3,0,0.7,0,1-0.1C-293.9,401.6-294.3,400.7-294.3,399.7z"}))),o.a.createElement("g",null,o.a.createElement("path",{className:"offline--icon",d:"M-288.9,399.4l1.8-1.8c0.1-0.1,0.1-0.3,0-0.3l-0.7-0.7c-0.1-0.1-0.3-0.1-0.3,0l-1.8,1.8l-1.8-1.8c-0.1-0.1-0.3-0.1-0.3,0 l-0.7,0.7c-0.1,0.1-0.1,0.3,0,0.3l1.8,1.8l-1.8,1.8c-0.1,0.1-0.1,0.3,0,0.3l0.7,0.7c0.1,0.1,0.3,0.1,0.3,0l1.8-1.8l1.8,1.8 c0.1,0.1,0.3,0.1,0.3,0l0.7-0.7c0.1-0.1,0.1-0.3,0-0.3L-288.9,399.4z"})))))}}const f={enableBackground:"new -299 391 12 12"};class E extends o.a.PureComponent{render(){return o.a.createElement("span",this.props,o.a.createElement(r.c,{id:"mobile.set_status.offline.icon",defaultMessage:"Offline Icon"},e=>o.a.createElement("svg",{width:"100%",height:"100%",className:"offline--icon",viewBox:"0 0 20 20",style:_,role:"icon","aria-label":e},o.a.createElement("path",{d:"M10,0c5.519,0 10,4.481 10,10c0,5.519 -4.481,10 -10,10c-5.519,0 -10,-4.481 -10,-10c0,-5.519 4.481,-10 10,-10Zm0,2c4.415,0 8,3.585 8,8c0,4.415 -3.585,8 -8,8c-4.415,0 -8,-3.585 -8,-8c0,-4.415 3.585,-8 8,-8Z"}))))}}const _={fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:1.41421};class v extends o.a.PureComponent{render(){return o.a.createElement("span",this.props,o.a.createElement(r.c,{id:"mobile.set_status.online.icon",defaultMessage:"Online Icon"},e=>o.a.createElement("svg",{id:"Layer_1",x:"0px",y:"0px",width:"13px",height:"13px",viewBox:"-243 245 12 12",style:y,role:"icon","aria-label":e},o.a.createElement("g",null,o.a.createElement("path",{className:"online--icon",d:"M-236,250.5C-236,250.5-236,250.5-236,250.5C-236,250.5-236,250.5-236,250.5C-236,250.5-236,250.5-236,250.5z"}),o.a.createElement("ellipse",{className:"online--icon",cx:"-238.5",cy:"248",rx:"2.5",ry:"2.5"})),o.a.createElement("path",{className:"online--icon",d:"M-238.9,253.8c0-0.4,0.1-0.9,0.2-1.3c-2.2-0.2-2.2-2-2.2-2s-1,0.1-1.2,0.5c-0.4,0.6-0.6,1.7-0.7,2.5c0,0.1-0.1,0.5,0,0.6 c0.2,1.3,2.2,2.3,4.4,2.4c0,0,0.1,0,0.1,0c0,0,0.1,0,0.1,0c0,0,0.1,0,0.1,0C-238.7,255.7-238.9,254.8-238.9,253.8z"}),o.a.createElement("g",null,o.a.createElement("g",null,o.a.createElement("path",{className:"online--icon",d:"M-232.3,250.1l1.3,1.3c0,0,0,0.1,0,0.1l-4.1,4.1c0,0,0,0-0.1,0c0,0,0,0,0,0l-2.7-2.7c0,0,0-0.1,0-0.1l1.2-1.2 c0,0,0.1,0,0.1,0l1.4,1.4l2.9-2.9C-232.4,250.1-232.3,250.1-232.3,250.1z"}))))))}}const y={enableBackground:"new -243 245 12 12"};class C extends o.a.PureComponent{render(){return o.a.createElement("span",this.props,o.a.createElement(r.c,{id:"mobile.set_status.online.icon",defaultMessage:"Online Icon"},e=>o.a.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 20 20",style:w,role:"icon","aria-label":e},o.a.createElement("path",{className:"online--icon",d:"M10,0c5.519,0 10,4.481 10,10c0,5.519 -4.481,10 -10,10c-5.519,0 -10,-4.481 -10,-10c0,-5.519 4.481,-10 10,-10Zm6.19,7.18c0,0.208 -0.075,0.384 -0.224,0.53l-5.782,5.64l-1.087,1.059c-0.149,0.146 -0.33,0.218 -0.543,0.218c-0.213,0 -0.394,-0.072 -0.543,-0.218l-1.086,-1.059l-2.891,-2.82c-0.149,-0.146 -0.224,-0.322 -0.224,-0.53c0,-0.208 0.075,-0.384 0.224,-0.53l1.086,-1.059c0.149,-0.146 0.33,-0.218 0.543,-0.218c0.213,0 0.394,0.072 0.543,0.218l2.348,2.298l5.24,-5.118c0.149,-0.146 0.33,-0.218 0.543,-0.218c0.213,0 0.394,0.072 0.543,0.218l1.086,1.059c0.149,0.146 0.224,0.322 0.224,0.53Z"}))))}}const w={fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:1.41421};function T(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,"a",function(){return O});class O extends o.a.PureComponent{render(){const{button:e,status:t,type:a}=this.props;if(!t)return null;let n="status "+this.props.className;e&&(n=this.props.className);let s="span";return s="avatar"===a?"online"===t?v:"away"===t?l:"dnd"===t?u:b:"online"===t?C:"away"===t?d:"dnd"===t?h:E,o.a.createElement(s,{className:n})}}T(O,"propTypes",{button:s.a.bool,status:s.a.string,className:s.a.string,type:s.a.string}),T(O,"defaultProps",{className:"",button:!1})},1026:function(e,t,a){"use strict";var n=a(223),s=a(15),i=(a(8),a(16)),o=a.n(i),r=a(5),l=a.n(r),c=a(226);function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class m extends l.a.PureComponent{constructor(...e){super(...e),d(this,"isSVGImage",()=>this.props.imageMetadata?"svg"===this.props.imageMetadata.format:-1!==this.props.src.indexOf(".svg")),d(this,"shouldRenderImage",()=>this.props.enableSVGs||!this.isSVGImage())}render(){let e=Object(c.f)(this.props.src,this.props.hasImageProxy);return this.shouldRenderImage()||(e=""),this.props.children(e)}}d(m,"propTypes",{children:o.a.func.isRequired,enableSVGs:o.a.bool.isRequired,hasImageProxy:o.a.bool.isRequired,imageMetadata:o.a.object,src:o.a.string.isRequired});t.a=Object(n.connect)(function(e){const t=Object(s.getConfig)(e);return{enableSVGs:"true"===t.EnableSVGs,hasImageProxy:"true"===t.HasImageProxy}})(m)},1027:function(e,t,a){"use strict";a.d(t,"a",function(){return c}),a.d(t,"c",function(){return m}),a.d(t,"d",function(){return u}),a.d(t,"b",function(){return p});a(21),a(8);var n=a(569),s=a(22),i=a(19),o=a(0),r=a(1302),l=a(162);function c(){return async e=>{const t=[e(Object(n.getClientConfig)()),e(Object(n.getLicenseConfig)())],a=await Promise.all(t);return document.cookie.indexOf("MMUSERID=")>-1&&a.push(await e(s.loadMe())),a}}const d={};function m(e,t){return d[e]=t,(e,a)=>{const n=a(),s=Object(l.a)(n),i=Object(l.b)(n,s),o={};Object.assign(o,i),i&&h(e,o,t(s),s)}}function u(e){Reflect.deleteProperty(d,e)}function p(e,t){return a=>{const n={};Object.values(d).forEach(t=>{Object.assign(n,t(e))}),"en"!==e?i.Client4.getTranslations(t).then(t=>{h(a,n,t,e)}).catch(()=>{}):h(a,n,r,e)}}function h(e,t,a,n){Object.assign(t,a),e({type:o.e.RECEIVED_TRANSLATIONS,data:{locale:n,translations:t}})}},1032:function(e,t,a){"use strict";a.d(t,"a",function(){return l});var n=a(16),s=a.n(n),i=a(5),o=a.n(i);a(1350);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class l extends o.a.Component{render(){return this.props.show?o.a.createElement("div",{className:"Badge"},o.a.createElement("div",{className:"Badge__box "+this.props.className},this.props.children)):null}}r(l,"propTypes",{show:s.a.bool,children:s.a.node.isRequired,className:s.a.string}),r(l,"defaultProps",{show:!0,className:""})},1033:function(e,t,a){"use strict";a.d(t,"a",function(){return d});a(8);var n=a(16),s=a.n(n),i=a(5),o=a.n(i);function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function l(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class d extends o.a.PureComponent{constructor(...e){super(...e),c(this,"updateInputFromProps",()=>{this.input&&this.input.value!==this.props.value&&(this.input.value=this.props.value)}),c(this,"getInput",()=>this.input),c(this,"setInput",e=>{this.input=e})}componentDidUpdate(e){e.value!==this.props.value&&(this.props.delayInputUpdate?requestAnimationFrame(this.updateInputFromProps):this.updateInputFromProps())}get value(){return this.input.value}set value(e){this.input.value=e}focus(){this.input.focus()}blur(){this.input.blur()}render(){const e=this.props,{value:t,inputComponent:a}=e,n=l(e,["value","inputComponent"]);return Reflect.deleteProperty(n,"delayInputUpdate"),o.a.createElement(a||"input",function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(a,!0).forEach(function(t){c(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},n,{ref:this.setInput,defaultValue:t}))}}c(d,"propTypes",{delayInputUpdate:s.a.bool,inputComponent:s.a.func,value:s.a.string.isRequired}),c(d,"defaultProps",{delayInputUpdate:!1,value:""})},1034:function(e,t,a){"use strict";var n=a(64),s=a(105),i=a(78),o=a(10),r=a(0),l=a(14);const c=o.a.dispatch,d=o.a.getState;var m=new class{setItem(e,t){c(i.f(e,t))}getItem(e,t){return s.d(e,t)(d())}removeItem(e){c(i.d(e))}setGlobalItem(e,t){c(i.e(e,t))}getGlobalItem(e,t=null){return s.c(e,t)(d())}removeGlobalItem(e){c(i.c(e))}signalLogout(){if(this.isLocalStorageSupported()){const e=l.r();l.kb(r.H.ANNOUNCEMENT),sessionStorage.setItem(r.H.LOGOUT,e),localStorage.setItem(r.H.LOGOUT,e),localStorage.removeItem(r.H.LOGOUT)}}isSignallingLogout(e){return e===sessionStorage.getItem(r.H.LOGOUT)}signalLogin(){if(this.isLocalStorageSupported()){const e=l.r();sessionStorage.setItem(r.H.LOGIN,e),localStorage.setItem(r.H.LOGIN,e),localStorage.removeItem(r.H.LOGIN)}}isSignallingLogin(e){return e===sessionStorage.getItem(r.H.LOGIN)}clear(e){c(i.b(e))}isLocalStorageSupported(){if(this.hasCheckedLocalStorage)return this.localStorageSupported;this.localStorageSupported=!1;try{localStorage.setItem("__testLocal__","1"),"1"===localStorage.getItem("__testLocal__")&&(this.localStorageSupported=!0),localStorage.removeItem("__testLocal__","1")}catch(e){this.localStorageSupported=!1}try{sessionStorage.setItem("__testSession__","1"),sessionStorage.removeItem("__testSession__")}catch(e){n.a.push("/error?type="+r.k.LOCAL_STORAGE)}return this.hasCheckedLocalStorage=!0,this.localStorageSupported}hasSeenLandingPage(){return localStorage.getItem(r.H.LANDING_PAGE_SEEN)}setLandingPageSeen(e){localStorage.setItem(r.H.LANDING_PAGE_SEEN,e)}};t.a=m},1035:function(e,t,a){"use strict";function n(e,t){return e?e.filter(e=>e&&!e.delete_at>0&&null!=e.display_name).sort((e,a)=>(function(e,t,a){return t.display_name!==a.display_name?t.display_name.localeCompare(a.display_name,e,{numeric:!0}):t.name.localeCompare(a.name,e,{numeric:!0})})(t,e,a)):[]}a.d(t,"a",function(){return n})},1051:function(e,t,a){e.exports=a.p+"files/73209f482a967f9379602dc6253cf768.png"},1052:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a(5),s=a.n(n),i=a(28);class o extends s.a.PureComponent{render(){return s.a.createElement("span",this.props,s.a.createElement(i.c,{id:"generic_icons.menu",defaultMessage:"Menu Icon"},e=>s.a.createElement("svg",{width:"16px",height:"10px",viewBox:"0 0 16 10",version:"1.1",role:"icon",title:e},s.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"inherit",fillRule:"evenodd"},s.a.createElement("g",{transform:"translate(-188.000000, -38.000000)",fillRule:"nonzero",fill:"inherit"},s.a.createElement("g",null,s.a.createElement("g",null,s.a.createElement("g",{transform:"translate(188.000000, 38.000000)"},s.a.createElement("path",{d:"M15.5,0 C15.776,0 16,0.224 16,0.5 L16,1.5 C16,1.776 15.776,2 15.5,2 L0.5,2 C0.224,2 0,1.776 0,1.5 L0,0.5 C0,0.224 0.224,0 0.5,0 L15.5,0 Z M15.5,4 C15.776,4 16,4.224 16,4.5 L16,5.5 C16,5.776 15.776,6 15.5,6 L0.5,6 C0.224,6 0,5.776 0,5.5 L0,4.5 C0,4.224 0.224,4 0.5,4 L15.5,4 Z M15.5,8 C15.776,8 16,8.224 16,8.5 L16,9.5 C16,9.776 15.776,10 15.5,10 L0.5,10 C0.224,10 0,9.776 0,9.5 L0,8.5 C0,8.224 0.224,8 0.5,8 L15.5,8 Z"})))))))))}}},1068:function(e,t,a){"use strict";var n,s,i,o=a(5),r=a.n(o),l=a(1355),c=a(1294),d=(a(21),a(16)),m=a.n(d),u=a(28);class p extends r.a.Component{constructor(e){super(e),this.state={katex:null}}componentDidMount(){a.e(32).then(a.t.bind(null,1862,7)).then(e=>{this.setState({katex:e})})}render(){if(null==this.state.katex)return r.a.createElement("div",{className:"post-body--code tex"},this.props.content);try{const e=this.state.katex.renderToString(this.props.content,{throwOnError:!1,displayMode:!0});return r.a.createElement("div",{className:"post-body--code tex",dangerouslySetInnerHTML:{__html:e}})}catch(e){return r.a.createElement("div",{className:"post-body--code tex"},r.a.createElement(u.c,{id:"katex.error",defaultMessage:"Couldn't compile your Latex code. Please review the syntax and try again."}))}}}n=p,s="propTypes",i={content:m.a.string.isRequired},s in n?Object.defineProperty(n,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[s]=i;var h=a(1400),g=a(1026),b=a(1001);function f(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function E(e){let{imageMetadata:t,src:a}=e,n=f(e,["imageMetadata","src"]);return r.a.createElement(g.a,{src:a,imageMetadata:t},e=>e?r.a.createElement(b.a,Object.assign({},n,{src:e,dimensions:t})):r.a.createElement("a",{className:"theme markdown__link",href:a,rel:"noopener noreferrer",target:"_blank",title:n.title},n.alt))}E.propTypes={alt:m.a.string,imageMetadata:m.a.object,src:m.a.string.isRequired,title:m.a.string};var _=a(223),v=a(131),y=a(68);class C extends r.a.PureComponent{render(){const e=":"+this.props.name+":";return this.props.imageUrl?r.a.createElement("span",{alt:e,className:"emoticon",title:e,style:{backgroundImage:"url("+this.props.imageUrl+")"}}):e}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(C,"propTypes",{name:m.a.string.isRequired,imageUrl:m.a.string.isRequired});var w=Object(_.connect)(function(e,t){const a=Object(y.a)(e).get(t.name);return{imageUrl:a?Object(v.getEmojiImageUrl)(a):""}})(C);function T(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function S(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}t.a=function(e,t,a={}){if(!e)return null;const n=new l.Parser,s=new l.ProcessNodeDefinitions(r.a),i=[{replaceChildren:!1,shouldProcessNode:e=>"tag"===e.type&&"input"===e.name&&"checkbox"===e.attribs.type,processNode:e=>{const t=e.attribs||{};return e.attribs.checked=Boolean(t.checked),r.a.createElement("input",function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(a,!0).forEach(function(t){S(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e.attribs))}}];if(a.hasPluginTooltips){const e="href";i.push({replaceChildren:!0,shouldProcessNode:t=>"tag"===t.type&&"a"===t.name&&t.attribs[e],processNode:(t,a)=>r.a.createElement(h.a,{href:t.attribs[e],title:a[0]})})}if(!("mentions"in a)||a.mentions){const e="data-mention";i.push({replaceChildren:!0,shouldProcessNode:t=>t.attribs&&t.attribs[e],processNode:(a,n)=>{const s=a.attribs[e];return r.a.createElement(c.a,{mentionName:s,isRHS:t,hasMention:!0},n)}})}if(!("emoji"in a)||a.emoji){const e="data-emoticon";i.push({replaceChildren:!0,shouldProcessNode:t=>t.attribs&&t.attribs[e],processNode:t=>{const a=t.attribs[e];return r.a.createElement(w,{name:a})}})}return"images"in a&&!a.images||i.push({shouldProcessNode:e=>"tag"===e.type&&"img"===e.name,processNode:e=>{const t=e.attribs,{class:n}=t,s=T(t,["class"]);return r.a.createElement(E,Object.assign({className:n,imageMetadata:a.imagesMetadata&&a.imagesMetadata[s.src]},s,a.imageProps))}}),"latex"in a&&!a.latex||i.push({shouldProcessNode:e=>e.attribs&&e.attribs["data-latex"],processNode:e=>r.a.createElement(p,{content:e.attribs["data-latex"]})}),i.push({shouldProcessNode:()=>!0,processNode:s.processDefaultNode}),n.parseWithInstructions(e,function(){return!0},i)}},1069:function(e,t,a){"use strict";var n=a(223),s=a(6),i=a(907),o=a(16),r=a.n(o),l=a(5),c=a.n(l),d=a(28);function m(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class p extends c.a.Component{show(e){e&&e.preventDefault();const{modalId:t,dialogProps:a,dialogType:n}=this.props,s={modalId:t,dialogProps:a,dialogType:n};this.props.actions.openModal(s)}render(){const e=this.props,{children:t,onClick:a}=e,n=m(e,["children","onClick"]),{formatMessage:s}=this.context.intl,i="".concat(n.accessibilityLabel," ").concat(s({id:"accessibility.button.dialog",defaultMessage:"Dialog"}));delete n.modalId,delete n.dialogType,delete n.dialogProps,delete n.accessibilityLabel;let o=()=>this.show();return a&&(o=e=>{a(),this.show(e)}),c.a.createElement("button",Object.assign({},n,{className:"style--none "+n.className,"data-toggle":"modal toggle","aria-label":i,onClick:o}),t)}}u(p,"propTypes",{accessibilityLabel:r.a.string,children:r.a.node.isRequired,modalId:r.a.string.isRequired,dialogType:r.a.func.isRequired,dialogProps:r.a.object,onClick:r.a.func,className:r.a.string,actions:r.a.shape({openModal:r.a.func.isRequired}).isRequired}),u(p,"defaultProps",{dialogProps:{},className:""}),u(p,"contextTypes",{intl:d.i.isRequired});t.a=Object(n.connect)(null,function(e){return{actions:Object(s.bindActionCreators)({openModal:i.b},e)}})(p)},1070:function(e,t,a){"use strict";var n=a(223),s=a(6),i=a(22),o=a(15),r=a(11),l=a(94),c=a.n(l),d=a(5),m=a.n(d),u=a(1152),p=a(224),h=a.n(p),g=a(28),b=a(16),f=a.n(b),E=a(0),_=a(14),v=a(29),y=a(903),C=a(232),w=a(1394),T=a.n(w),O=a(1176),S=a.n(O);function P(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const M=Object(g.g)({general:{id:Object(v.b)("user.settings.modal.general"),defaultMessage:"General"},security:{id:Object(v.b)("user.settings.modal.security"),defaultMessage:"Security"},notifications:{id:Object(v.b)("user.settings.modal.notifications"),defaultMessage:"Notifications"},display:{id:Object(v.b)("user.settings.modal.display"),defaultMessage:"Display"},sidebar:{id:Object(v.b)("user.settings.modal.sidebar"),defaultMessage:"Sidebar"},advanced:{id:Object(v.b)("user.settings.modal.advanced"),defaultMessage:"Advanced"},checkEmail:{id:"user.settings.general.checkEmail",defaultMessage:"Check your email at {email} to verify the address. Cannot find the email?"},confirmTitle:{id:Object(v.b)("user.settings.modal.confirmTitle"),defaultMessage:"Discard Changes?"},confirmMsg:{id:Object(v.b)("user.settings.modal.confirmMsg"),defaultMessage:"You have unsaved changes, are you sure you want to discard them?"},confirmBtns:{id:Object(v.b)("user.settings.modal.confirmBtns"),defaultMessage:"Yes, Discard"}});class N extends m.a.Component{constructor(e){super(e),P(this,"handleResend",e=>{this.setState({resendStatus:"sending"}),this.props.actions.sendVerificationEmail(e).then(({data:e,error:t})=>{e?this.setState({resendStatus:"success"}):t&&this.setState({resendStatus:"failure"})})}),P(this,"handleKeyDown",e=>{_.e(e)&&e.shiftKey&&_.X(e,E.Q.KeyCodes.A)&&this.handleHide()}),P(this,"handleHide",()=>{this.requireConfirm?this.showConfirmModal(()=>this.handleHide()):this.setState({show:!1})}),P(this,"handleHidden",()=>{this.setState({active_tab:"general",active_section:""}),this.props.onHide()}),P(this,"handleCollapse",()=>{c()(h.a.findDOMNode(this.modalBodyRef.current)).closest(".modal-dialog").removeClass("display--content"),this.setState({active_tab:"",active_section:""})}),P(this,"handleConfirm",()=>{this.setState({showConfirmModal:!1,enforceFocus:!0}),this.requireConfirm=!1,this.customConfirmAction=null,this.afterConfirm&&(this.afterConfirm(),this.afterConfirm=null)}),P(this,"handleCancelConfirmation",()=>{this.setState({showConfirmModal:!1,enforceFocus:!0}),this.afterConfirm=null}),P(this,"showConfirmModal",e=>{e&&(this.afterConfirm=e),this.customConfirmAction?this.customConfirmAction(this.handleConfirm):this.setState({showConfirmModal:!0,enforceFocus:!1})}),P(this,"closeModal",()=>{this.requireConfirm?this.showConfirmModal(this.closeModal):this.handleHide()}),P(this,"collapseModal",()=>{this.requireConfirm?this.showConfirmModal(this.collapseModal):this.handleCollapse()}),P(this,"updateTab",(e,t)=>{!t&&this.requireConfirm?this.showConfirmModal(()=>this.updateTab(e,!0)):this.setState({active_tab:e,active_section:""})}),P(this,"updateSection",(e,t)=>{!t&&this.requireConfirm?this.showConfirmModal(()=>this.updateSection(e,!0)):this.setState({active_section:e})}),this.state={active_tab:"general",active_section:"",showConfirmModal:!1,enforceFocus:!0,show:!0},this.requireConfirm=!1,this.customConfirmAction=null,this.modalBodyRef=m.a.createRef()}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(e,t){_.Z()||c()(".settings-content .minimize-settings").perfectScrollbar("update"),this.state.active_tab!==t.active_tab&&c()(h.a.findDOMNode(this.modalBodyRef.current)).scrollTop(0)}render(){const{formatMessage:e}=this.props.intl;if(null==this.props.currentUser)return m.a.createElement("div",null);var t=[];return t.push({name:"general",uiName:e(M.general),icon:"icon fa fa-gear",iconTitle:_.fb("user.settings.general.icon","General Settings Icon")}),t.push({name:"security",uiName:e(M.security),icon:"icon fa fa-lock",iconTitle:_.fb("user.settings.security.icon","Security Settings Icon")}),t.push({name:"notifications",uiName:e(M.notifications),icon:"icon fa fa-exclamation-circle",iconTitle:_.fb("user.settings.notifications.icon","Notification Settings Icon")}),t.push({name:"display",uiName:e(M.display),icon:"icon fa fa-eye",iconTitle:_.fb("user.settings.display.icon","Display Settings Icon")}),t.push({name:"sidebar",uiName:e(M.sidebar),icon:"icon fa fa-columns",iconTitle:_.fb("user.settings.sidebar.icon","Sidebar Settings Icon")}),t.push({name:"advanced",uiName:e(M.advanced),icon:"icon fa fa-list-alt",iconTitle:_.fb("user.settings.advance.icon","Advanced Settings Icon")}),m.a.createElement(u.a,{id:"accountSettingsModal",dialogClassName:"a11y__modal settings-modal",show:this.state.show,onHide:this.handleHide,onExited:this.handleHidden,enforceFocus:this.state.enforceFocus,role:"dialog","aria-labelledby":"accountSettingsModalLabel"},m.a.createElement(u.a.Header,{id:"accountSettingsHeader",closeButton:!0},m.a.createElement(u.a.Title,{componentClass:"h1",id:"accountSettingsModalLabel"},m.a.createElement(g.c,{id:"user.settings.modal.title",defaultMessage:"Account Settings"}))),m.a.createElement(u.a.Body,{ref:this.modalBodyRef},m.a.createElement("div",{className:"settings-table"},m.a.createElement("div",{className:"settings-links"},m.a.createElement(C.a,{doLoad:S.a,tabs:t,activeTab:this.state.active_tab,updateTab:this.updateTab})),m.a.createElement("div",{className:"settings-content minimize-settings"},m.a.createElement(C.a,{doLoad:T.a,activeTab:this.state.active_tab,activeSection:this.state.active_section,updateSection:this.updateSection,updateTab:this.updateTab,closeModal:this.closeModal,collapseModal:this.collapseModal,setEnforceFocus:e=>this.setState({enforceFocus:e}),setRequireConfirm:(e,t)=>{this.requireConfirm=e,this.customConfirmAction=t}})))),m.a.createElement(y.a,{title:e(M.confirmTitle),message:e(M.confirmMsg),confirmButtonText:e(M.confirmBtns),show:this.state.showConfirmModal,onConfirm:this.handleConfirm,onCancel:this.handleCancelConfirmation}))}}P(N,"propTypes",{currentUser:f.a.object.isRequired,onHide:f.a.func.isRequired,intl:g.i.isRequired,actions:f.a.shape({sendVerificationEmail:f.a.func.isRequred}).isRequired});var I=Object(g.h)(N);t.a=Object(n.connect)(function(e){const t=Object(o.getConfig)(e),a="true"===t.CloseUnusedDirectMessages,n="true"===t.ExperimentalChannelOrganization,s="true"===t.SendEmailNotifications,i="true"===t.RequireEmailVerification;return{currentUser:Object(r.getCurrentUser)(e),closeUnusedDirectMessages:a,experimentalChannelOrganization:n,sendEmailNotifications:s,requireEmailVerification:i}},function(e){return{actions:Object(s.bindActionCreators)({sendVerificationEmail:i.sendVerificationEmail},e)}})(I)},1071:function(e,t,a){"use strict";a(167),a(71),a(109);var n=a(223),s=a(6),i=a(977),o=a(1009),r=a(17),l=a(964),c=(a(21),a(8),a(16)),d=a.n(c),m=a(5),u=a.n(m),p=a(1152),h=a(28),g=a(12),b=a(0),f=a(14),E=a(995),_=a(1051),v=a.n(_),y=a(1010);function C(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const w=50,T=10;class O extends u.a.Component{constructor(e){super(e),C(this,"handleHide",()=>{this.props.actions.setModalSearchTerm(""),this.setState({show:!1})}),C(this,"handleExit",()=>{this.props.onHide&&this.props.onHide()}),C(this,"handleResponse",e=>{let t=null;e&&e.message&&(t=e.message),this.setState({saving:!1,addError:t})}),C(this,"handleSubmit",async e=>{e&&e.preventDefault();const t=this.state.values.map(e=>e.id);if(0!==t.length){if(this.props.skipCommit)return this.props.onAddCallback&&this.props.onAddCallback(t),void this.handleHide();this.setState({saving:!0}),t.forEach(async e=>{const{error:t}=await this.props.actions.linkGroupSyncable(e,this.props.currentTeamId,g.Groups.SYNCABLE_TYPE_TEAM,{auto_add:!0});this.handleResponse(t),t||this.handleHide()})}}),C(this,"addValue",e=>{const t=Object.assign([],this.state.values),a=t.map(e=>e.id);e&&e.id&&-1===a.indexOf(e.id)&&t.push(e),this.setState({values:t})}),C(this,"setGroupsLoadingState",e=>{this.setState({loadingGroups:e})}),C(this,"handlePageChange",(e,t)=>{e>t&&(this.setGroupsLoadingState(!0),this.props.actions.getGroupsNotAssociatedToTeam(this.props.currentTeamId,this.props.searchTerm,e,w+1).then(()=>{this.setGroupsLoadingState(!1)}))}),C(this,"handleDelete",e=>{this.setState({values:e})}),C(this,"search",e=>{this.props.actions.setModalSearchTerm(e)}),this.searchTimeoutId=0,this.state={values:[],show:!0,search:!1,saving:!1,addError:null,loadingGroups:!0}}componentDidMount(){Promise.all([this.props.actions.getGroupsNotAssociatedToTeam(this.props.currentTeamId,"",0,w+1),this.props.actions.getAllGroupsAssociatedToTeam(this.props.currentTeamId)]).then(()=>{this.setGroupsLoadingState(!1)})}UNSAFE_componentWillReceiveProps(e){if(this.props.searchTerm!==e.searchTerm){clearTimeout(this.searchTimeoutId);const t=e.searchTerm;if(""===t)return;this.searchTimeoutId=setTimeout(async()=>{this.setGroupsLoadingState(!0),await this.props.actions.getGroupsNotAssociatedToTeam(this.props.currentTeamId,t),this.setGroupsLoadingState(!1)},b.Q.SEARCH_TIMEOUT_MILLISECONDS)}}renderOption(e,t,a){const n=t?"more-modal__row--selected":"";return u.a.createElement("div",{key:e.id,ref:t?"selected":e.id,className:"more-modal__row clickable "+n,onClick:()=>a(e)},u.a.createElement("img",{className:"more-modal__image",src:v.a,alt:"group picture",width:"32",height:"32"}),u.a.createElement("div",{className:"more-modal__details"},u.a.createElement("div",{className:"more-modal__name"},e.display_name," ","-"," ",u.a.createElement("span",{className:"more-modal__name_sub"},u.a.createElement(h.c,{id:"numMembers",defaultMessage:"{num, number} {num, plural, one {member} other {members}}",values:{num:e.member_count}})))),u.a.createElement("div",{className:"more-modal__actions"},u.a.createElement("div",{className:"more-modal__actions--round"},u.a.createElement(y.a,null))))}renderValue(e){return e.data.display_name}render(){const e=u.a.createElement("div",{id:"numGroupsRemaining"},u.a.createElement(h.c,{id:"multiselect.numGroupsRemaining",defaultMessage:"Use ↑↓ to browse, ↵ to select. You can add {num, number} more {num, plural, one {group} other {groups}}. ",values:{num:T-this.state.values.length}})),t=Object(f.fb)("multiselect.add","Add"),a=Object(f.fb)("multiselect.adding","Adding...");let n=null;this.state.addError&&(n=u.a.createElement("div",{className:"has-error col-sm-12"},u.a.createElement("label",{className:"control-label font-weight--normal"},this.state.addError)));let s=this.props.groups;if(this.props.excludeGroups){const e=e=>!this.props.excludeGroups.find(t=>t.id===e.id);s=s.filter(e)}if(this.props.includeGroups){const e=e=>this.props.includeGroups.find(t=>t.id===e.id);s=[...s,...this.props.includeGroups.filter(e)]}return u.a.createElement(p.a,{id:"addGroupsToTeamModal",dialogClassName:"a11y__modal more-modal more-direct-channels",show:this.state.show,onHide:this.handleHide,onExited:this.handleExit},u.a.createElement(p.a.Header,{closeButton:!0},u.a.createElement(p.a.Title,{componentClass:"h1"},u.a.createElement(h.c,{id:"add_groups_to_team.title",defaultMessage:"Add New Groups To {teamName} Team",values:{teamName:u.a.createElement("strong",null,this.props.currentTeamName)}}))),u.a.createElement(p.a.Body,null,n,u.a.createElement(E.a,{key:"addGroupsToTeamKey",options:s,optionRenderer:this.renderOption,values:this.state.values,valueRenderer:this.renderValue,perPage:w,handlePageChange:this.handlePageChange,handleInput:this.search,handleDelete:this.handleDelete,handleAdd:this.addValue,handleSubmit:this.handleSubmit,maxValues:T,numRemainingText:e,buttonSubmitText:t,buttonSubmitLoadingText:a,saving:this.state.saving,loading:this.state.loadingGroups,placeholderText:Object(f.fb)("multiselect.addGroupsPlaceholder","Search and add groups")})))}}C(O,"propTypes",{currentTeamName:d.a.string.isRequired,currentTeamId:d.a.string.isRequired,searchTerm:d.a.string.isRequired,groups:d.a.array.isRequired,excludeGroups:d.a.arrayOf(d.a.object),includeGroups:d.a.arrayOf(d.a.object),onHide:d.a.func,skipCommit:d.a.bool,onAddCallback:d.a.func,actions:d.a.shape({getGroupsNotAssociatedToTeam:d.a.func.isRequired,setModalSearchTerm:d.a.func.isRequired,linkGroupSyncable:d.a.func.isRequired,getAllGroupsAssociatedToTeam:d.a.func.isRequired}).isRequired});t.a=Object(n.connect)(function(e,t){const a=e.views.search.modalSearch,n=t.team||Object(r.getCurrentTeam)(e)||{};let s=Object(o.getGroupsNotAssociatedToTeam)(e,n.id);if(a){const e=RegExp(a,"i");s=s.filter(t=>e.test(t.display_name)||e.test(t.name))}return{currentTeamName:n.display_name,currentTeamId:n.id,skipCommit:t.skipCommit,onAddCallback:t.onAddCallback,excludeGroups:t.excludeGroups,searchTerm:a,groups:s}},function(e){return{actions:Object(s.bindActionCreators)({getGroupsNotAssociatedToTeam:i.getGroupsNotAssociatedToTeam,setModalSearchTerm:l.a,linkGroupSyncable:i.linkGroupSyncable,getAllGroupsAssociatedToTeam:i.getAllGroupsAssociatedToTeam},e)}})(O)},1072:function(e,t,a){"use strict";a(167),a(71),a(109);var n=a(223),s=a(6),i=a(977),o=a(1009),r=a(13),l=a(964),c=(a(21),a(8),a(16)),d=a.n(c),m=a(5),u=a.n(m),p=a(1152),h=a(28),g=a(12),b=a(0),f=a(14),E=a(995),_=a(1051),v=a.n(_),y=a(1010);function C(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const w=50,T=10;class O extends u.a.Component{constructor(e){super(e),C(this,"handleHide",()=>{this.props.actions.setModalSearchTerm(""),this.setState({show:!1})}),C(this,"handleExit",()=>{this.props.onHide&&this.props.onHide()}),C(this,"handleResponse",e=>{let t=null;e&&e.message&&(t=e.message),this.setState({saving:!1,addError:t})}),C(this,"handleSubmit",async e=>{e&&e.preventDefault();const t=this.state.values.map(e=>e.id);if(0!==t.length){if(this.props.skipCommit)return this.props.onAddCallback&&this.props.onAddCallback(t),void this.handleHide();this.setState({saving:!0}),t.forEach(async e=>{const{error:t}=await this.props.actions.linkGroupSyncable(e,this.props.currentChannelId,g.Groups.SYNCABLE_TYPE_CHANNEL,{auto_add:!0});this.handleResponse(t),t||this.handleHide()})}}),C(this,"addValue",e=>{const t=Object.assign([],this.state.values),a=t.map(e=>e.id);e&&e.id&&-1===a.indexOf(e.id)&&t.push(e),this.setState({values:t})}),C(this,"setGroupsLoadingState",e=>{this.setState({loadingGroups:e})}),C(this,"handlePageChange",(e,t)=>{e>t&&(this.setGroupsLoadingState(!0),this.props.actions.getGroupsNotAssociatedToChannel(this.props.currentChannelId,this.props.searchTerm,e,w+1).then(()=>{this.setGroupsLoadingState(!1)}))}),C(this,"handleDelete",e=>{this.setState({values:e})}),C(this,"search",e=>{this.props.actions.setModalSearchTerm(e)}),this.searchTimeoutId=0,this.state={values:[],show:!0,search:!1,saving:!1,addError:null,loadingGroups:!0}}componentDidMount(){Promise.all([this.props.actions.getGroupsNotAssociatedToChannel(this.props.currentChannelId,"",0,w+1),this.props.actions.getAllGroupsAssociatedToChannel(this.props.currentChannelId)]).then(()=>{this.setGroupsLoadingState(!1)})}UNSAFE_componentWillReceiveProps(e){if(this.props.searchTerm!==e.searchTerm){clearTimeout(this.searchTimeoutId);const t=e.searchTerm;if(""===t)return;this.searchTimeoutId=setTimeout(async()=>{this.setGroupsLoadingState(!0),await this.props.actions.getGroupsNotAssociatedToChannel(this.props.currentChannelId,t),this.setGroupsLoadingState(!1)},b.Q.SEARCH_TIMEOUT_MILLISECONDS)}}renderOption(e,t,a){const n=t?"more-modal__row--selected":"";return u.a.createElement("div",{key:e.id,ref:t?"selected":e.id,className:"more-modal__row clickable "+n,onClick:()=>a(e)},u.a.createElement("img",{className:"more-modal__image",src:v.a,alt:"group picture",width:"32",height:"32"}),u.a.createElement("div",{className:"more-modal__details"},u.a.createElement("div",{className:"more-modal__name"},e.display_name," ","-"," ",u.a.createElement("span",{className:"more-modal__name_sub"},u.a.createElement(h.c,{id:"numMembers",defaultMessage:"{num, number} {num, plural, one {member} other {members}}",values:{num:e.member_count}})))),u.a.createElement("div",{className:"more-modal__actions"},u.a.createElement("div",{className:"more-modal__actions--round"},u.a.createElement(y.a,null))))}renderValue(e){return e.data.display_name}render(){const e=u.a.createElement("div",{id:"numGroupsRemaining"},u.a.createElement(h.c,{id:"multiselect.numGroupsRemaining",defaultMessage:"Use ↑↓ to browse, ↵ to select. You can add {num, number} more {num, plural, one {group} other {groups}}. ",values:{num:T-this.state.values.length}})),t=Object(f.fb)("multiselect.add","Add"),a=Object(f.fb)("multiselect.adding","Adding...");let n=null;this.state.addError&&(n=u.a.createElement("div",{className:"has-error col-sm-12"},u.a.createElement("label",{className:"control-label font-weight--normal"},this.state.addError)));let s=this.props.groups;if(this.props.excludeGroups){const e=e=>!this.props.excludeGroups.find(t=>t.id===e.id);s=s.filter(e)}if(this.props.includeGroups){const e=e=>this.props.includeGroups.find(t=>t.id===e.id);s=[...s,...this.props.includeGroups.filter(e)]}return u.a.createElement(p.a,{id:"addGroupsToChannelModal",dialogClassName:"a11y__modal more-modal more-direct-channels",show:this.state.show,onHide:this.handleHide,onExited:this.handleExit},u.a.createElement(p.a.Header,{closeButton:!0},u.a.createElement(p.a.Title,null,u.a.createElement(h.c,{id:"add_groups_to_channel.title",defaultMessage:"Add New Groups To {channelName} Channel",values:{channelName:u.a.createElement("strong",null,this.props.currentChannelName)}}))),u.a.createElement(p.a.Body,null,n,u.a.createElement(E.a,{key:"addGroupsToChannelKey",options:s,optionRenderer:this.renderOption,values:this.state.values,valueRenderer:this.renderValue,perPage:w,handlePageChange:this.handlePageChange,handleInput:this.search,handleDelete:this.handleDelete,handleAdd:this.addValue,handleSubmit:this.handleSubmit,maxValues:T,numRemainingText:e,buttonSubmitText:t,buttonSubmitLoadingText:a,saving:this.state.saving,loading:this.state.loadingGroups,placeholderText:Object(f.fb)("multiselect.addGroupsPlaceholder","Search and add groups")})))}}C(O,"propTypes",{currentChannelName:d.a.string.isRequired,currentChannelId:d.a.string.isRequired,searchTerm:d.a.string.isRequired,groups:d.a.array.isRequired,excludeGroups:d.a.arrayOf(d.a.object),includeGroups:d.a.arrayOf(d.a.object),onHide:d.a.func,skipCommit:d.a.bool,onAddCallback:d.a.func,actions:d.a.shape({getGroupsNotAssociatedToChannel:d.a.func.isRequired,setModalSearchTerm:d.a.func.isRequired,linkGroupSyncable:d.a.func.isRequired,getAllGroupsAssociatedToChannel:d.a.func.isRequired}).isRequired});t.a=Object(n.connect)(function(e,t){const a=e.views.search.modalSearch,n=t.channel||Object(r.getCurrentChannel)(e)||{};let s=Object(o.getGroupsNotAssociatedToChannel)(e,n.id);if(a){const e=RegExp(a,"i");s=s.filter(t=>e.test(t.display_name)||e.test(t.name))}return{currentChannelName:n.display_name,currentChannelId:n.id,skipCommit:t.skipCommit,onAddCallback:t.onAddCallback,excludeGroups:t.excludeGroups,searchTerm:a,groups:s}},function(e){return{actions:Object(s.bindActionCreators)({getGroupsNotAssociatedToChannel:i.getGroupsNotAssociatedToChannel,setModalSearchTerm:l.a,linkGroupSyncable:i.linkGroupSyncable,getAllGroupsAssociatedToChannel:i.getAllGroupsAssociatedToChannel},e)}})(O)},1073:function(e,t,a){"use strict";var n,s,i,o=a(223),r=a(15),l=a(948),c=a(16),d=a.n(c),m=a(5),u=a.n(m),p=a(14);class h extends u.a.PureComponent{render(){const e=this.props.fileInfo,t=this.props.fileUrl,a=[];""!==e.extension&&a.push(p.fb("file_info_preview.type","File type ")+e.extension.toUpperCase()),a.push(p.fb("file_info_preview.size","Size ")+p.p(e.size));const n=a.join(", ");let s=null;return s=this.props.canDownloadFiles?u.a.createElement("a",{className:"file-details__preview",href:t,target:"_blank",rel:"noopener noreferrer"},u.a.createElement("span",{className:"file-details__preview-helper"}),u.a.createElement("img",{alt:"file preview",src:p.y(e)})):u.a.createElement("span",{className:"file-details__preview"},u.a.createElement("span",{className:"file-details__preview-helper"}),u.a.createElement("img",{alt:"file preview",src:p.y(e)})),u.a.createElement("div",{className:"file-details__container"},s,u.a.createElement("div",{className:"file-details"},u.a.createElement("div",{className:"file-details__name"},e.name),u.a.createElement("div",{className:"file-details__info"},n)))}}n=h,s="propTypes",i={fileInfo:d.a.object.isRequired,fileUrl:d.a.string.isRequired,canDownloadFiles:d.a.bool.isRequired},s in n?Object.defineProperty(n,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[s]=i;t.a=Object(o.connect)(function(e){const t=Object(r.getConfig)(e);return{canDownloadFiles:Object(l.a)(t)}})(h)},1075:function(e,t,a){"use strict";a.d(t,"a",function(){return o}),a.d(t,"c",function(){return r}),a.d(t,"b",function(){return l});var n=a(17),s=a(11),i=a(114);const o=e=>{const t=Object(s.getCurrentUserId)(e),a=Object(n.getCurrentTeamId)(e);return i.a.getPreviousChannelName(t,a)},r=e=>{const t=Object(s.getCurrentUserId)(e),a=Object(n.getCurrentTeamId)(e);return i.a.getPenultimateChannelName(t,a)},l=(e,t)=>{const a=Object(s.getCurrentUserId)(e),o=Object(n.getTeamByName)(e,t),r=o&&o.id;return i.a.getPreviousChannelName(a,r)}},1090:function(e,t,a){"use strict";a.d(t,"a",function(){return h});var n=a(5),s=a.n(n),i=a(19),o=a(163),r=a(14),l=a(941),c=a(913),d=a(919),m=a(922),u=a(923);class p extends u.a{render(){const{item:e,isSelection:t}=this.props;let a="suggestion-list__item mentions__name";t&&(a+=" suggestion--selected");const n=e.username;let o="";return(e.first_name||e.last_name)&&e.nickname?o="- ".concat(r.A(e)," (").concat(e.nickname,")"):e.nickname?o="- (".concat(e.nickname,")"):(e.first_name||e.last_name)&&(o="- ".concat(r.A(e))),s.a.createElement("div",Object.assign({className:a,onClick:this.handleClick},u.a.baseProps),s.a.createElement(d.a,{size:"xs",username:n,url:i.Client4.getUsersRoute()+"/"+e.id+"/image?_="+(e.last_picture_update||0)}),s.a.createElement("span",{className:"admin-setting-user--align"},"@"+n),s.a.createElement("span",{className:"admin-setting-user__fullname"}," ",o),s.a.createElement(c.a,{show:Boolean(e.is_bot)}),s.a.createElement(l.a,{show:r.W(e)}))}}class h extends m.a{handlePretextChanged(e,t){const a=e.toLowerCase();return this.startNewRequest(a),Object(o.b)(a,e=>{if(this.shouldCancelDispatch(a))return;const n=Object.assign([],e.users);t({matchedPretext:a,terms:n.map(e=>e.username),items:n,component:p})}),!0}}},1091:function(e,t,a){"use strict";var n=a(5),s=a.n(n),i=a(16),o=a.n(i);const r=e=>{const{children:t,footer:a,helpText:n,inputId:i,label:o,labelClassName:r,inputClassName:l}=e;return s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"control-label "+r,htmlFor:i},o),s.a.createElement("div",{className:l},t,s.a.createElement("div",{className:"help-text"},n),a))};r.propTypes={inputId:o.a.string,label:o.a.node.isRequired,labelClassName:o.a.string,inputClassName:o.a.string,children:o.a.node.isRequired,helpText:o.a.node,footer:o.a.node},t.a=r},1092:function(e,t,a){"use strict";var n=a(1352);const s=a(0).Q.PayloadSources,i=Object.assign(new n.Dispatcher,{handleServerAction:function(e){e.type||console.warn("handleServerAction called with undefined action type");var t={source:s.SERVER_ACTION,action:e};this.dispatch(t)},handleViewAction:function(e){e.type||console.warn("handleViewAction called with undefined action type");var t={source:s.VIEW_ACTION,action:e};this.dispatch(t)}});t.a=i},1105:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a(0);function s(e){return t=>(t({type:n.e.DISMISS_NOTICE,data:e}),{data:!0})}},1106:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a(5),s=a.n(n),i=a(28);class o extends s.a.PureComponent{render(){return s.a.createElement("span",this.props,s.a.createElement(i.c,{id:"generic_icons.mattermost",defaultMessage:"Vue Logo"},e=>s.a.createElement("svg",{version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 600 600",style:r.background,role:"icon","aria-label":e},s.a.createElement("g",{id:"Page-1",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},s.a.createElement("rect",{id:"Rectangle",stroke:"#000000","stroke-width":"33",x:"17",y:"17",width:"500",height:"500",rx:"250"})))))}}const r={background:{enableBackground:"new 0 0 600 600"},st0:{fillRule:"evenodd",clipRule:"evenodd"}}},1107:function(e,t,a){e.exports=a.p+"files/fb02f374b8f73825415db1bccd4bd76d.gif"},1147:function(e,t,a){"use strict";var n=a(223),s=a(6),i=a(11),o=a(17),r=a(13),l=a(933),c=(a(21),a(8),a(160)),d=a(46),m=a(48);function u(e){return async(t,a)=>{const n=a(),s=Object(o.getCurrentTeamId)(n),i=Object(m.o)(n),l=Object(r.getCurrentChannel)(n);let u;return u=!1===i.exists?l.id:i.channel_id,Promise.all([t(Object(c.getTeamMember)(s,e)),t(Object(d.getChannelMember)(u,e))])}}var p=a(907),h=a(124),g=a(16),b=a.n(g),f=a(5),E=a.n(f),_=a(1177),v=a(1180),y=a(1181),C=a(28),w=a(229),T=a.n(w),O=a(1296),S=a(1070),P=a(64),M=a(900),N=a(0),I=a(14),A=a(956),j=a(1152),R=a(59),k=(a(39),a(42),a(110)),L=a(15),x=a(237),D=a(51),U=a(12),q=a(97),H=a(58),F=a(953),B=a(954),G=a(986),V=a(10),W=a(922),z=a(923);function Y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function K(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Q extends z.a{static get propTypes(){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Y(a,!0).forEach(function(t){K(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Y(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},super.propTypes)}render(){const{item:e,isSelection:t}=this.props,a=e.channel,n=a.delete_at&&0!==a.delete_at;let s="mentions__name";t&&(s+=" suggestion--selected");const i=a.display_name;let o=null;return n?o=E.a.createElement(G.a,{className:"icon icon__archive"}):a.type===N.i.OPEN_CHANNEL?o=E.a.createElement(F.a,{className:"icon icon__globe icon--body"}):a.type===N.i.PRIVATE_CHANNEL&&(o=E.a.createElement(B.a,{className:"icon icon__lock icon--body"})),E.a.createElement("div",Object.assign({onClick:this.handleClick,className:s},z.a.baseProps),o,i)}}let Z="";function J(e,t){const a=!!e.channel.delete_at&&0!==e.channel.delete_at,n=!!t.channel.delete_at&&0!==t.channel.delete_at;if(a&&!n)return 1;if(!a&&n)return-1;const s=Object(x.getCurrentUserLocale)(V.a.getState()),i=e.channel,o=t.channel,r=i.display_name.toLowerCase(),l=o.display_name.toLowerCase(),c=r.startsWith(Z),d=l.startsWith(Z);return c&&d?Object(q.sortChannelsByTypeAndDisplayName)(s,i,o):c||d?c?-1:1:Object(q.sortChannelsByTypeAndDisplayName)(s,i,o)}class X extends W.a{makeChannelSearchFilter(e){const t=e.toLowerCase();return e=>{const a=V.a.getState(),n=e.id,s=Object(o.getCurrentTeamId)(a),i=e.display_name;return e.type===N.i.OPEN_CHANNEL&&Object(D.haveIChannelPermission)(a,{channel:n,team:s,permission:U.Permissions.MANAGE_PUBLIC_CHANNEL_MEMBERS})?i.toLowerCase().includes(t):!(e.type!==N.i.PRIVATE_CHANNEL||!Object(D.haveIChannelPermission)(a,{channel:n,team:s,permission:U.Permissions.MANAGE_PRIVATE_CHANNEL_MEMBERS}))&&i.toLowerCase().includes(t)}}handlePretextChanged(e,t){if(e){Z=e,this.startNewRequest(e);const a=V.a.getState(),n=Object(r.getChannelsInCurrentTeam)(a);this.formatChannelsAndDispatch(e,t,n),this.fetchChannels(e,t)}return!0}async fetchChannels(e,t){const a=V.a.getState(),n=Object(o.getCurrentTeamId)(a);if(!n)return;const s=d.autocompleteChannelsForSearch(n,e)(V.a.dispatch,V.a.getState);let i=[];try{const{data:e}=await s;i=e}catch(e){V.a.dispatch(Object(H.logError)(e))}if(this.shouldCancelDispatch(e))return;const l=Object(r.getChannelsInCurrentTeam)(a).concat(i);this.formatChannelsAndDispatch(e,t,l)}formatChannelsAndDispatch(e,t,a){const n=[],s=V.a.getState(),i=Object(k.getMyChannelMemberships)(s);if(this.shouldCancelDispatch(e))return;const o={},r=this.makeChannelSearchFilter(e),l="true"===Object(L.getConfig)(s).ExperimentalViewArchivedChannels;for(const e of Object.keys(a)){const t=a[e];if(t&&(!o[t.id]&&r(t))){const e=Object.assign({},t),a=0!==t.delete_at,s={channel:e,name:e.name,deactivated:!1};if(!l&&a)continue;if(!i[t.id])continue;if(a&&!i[t.id])continue;if(t.type===N.i.OPEN_CHANNEL)s.type=N.i.OPEN_CHANNEL;else{if(t.type!==N.i.PRIVATE_CHANNEL)continue;s.type=N.i.PRIVATE_CHANNEL}o[t.id]=!0,n.push(s)}}t({matchedPretext:e,terms:n.sort(J).map(e=>e.channel.name),items:n,component:Q})}}var $=a(971),ee=a(972);function te(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ae extends E.a.Component{constructor(e){super(e),te(this,"enableChannelProvider",()=>{this.suggestionProviders[0].disableDispatches=!1}),te(this,"focusTextbox",()=>{if(null==this.channelSearchBox)return;const e=this.channelSearchBox.getTextbox();document.activeElement!==e&&(e.focus(),Object(I.jb)(e))}),te(this,"onInputChange",e=>{this.setState({text:e.target.value,selectedChannelId:null})}),te(this,"onHide",()=>{this.setState({show:!1}),this.props.onHide()}),te(this,"setSearchBoxRef",e=>{this.channelSearchBox=e,this.focusTextbox()}),te(this,"handleSubmitError",e=>{e&&this.setState({submitError:e.message,saving:!1})}),te(this,"didSelectChannel",e=>{const t=e.channel,a=this.props.user.id;this.setState({text:t.display_name,selectedChannelId:t.id,checkingForMembership:!0,submitError:""}),this.props.actions.getChannelMember(t.id,a).then(()=>{this.setState({checkingForMembership:!1})})}),te(this,"handleSubmit",e=>{e&&e.preventDefault&&e.preventDefault();const t=this.state.selectedChannelId,a=this.props.user;t&&(this.isUserMemberOfChannel(t)||this.state.saving||(this.setState({saving:!0}),this.props.actions.addChannelMember(t,a.id).then(({error:e})=>{e?this.handleSubmitError(e):this.onHide()})))}),te(this,"isUserMemberOfChannel",e=>{const t=this.props.user,a=this.props.channelMembers;return!!e&&(!!a[e]&&Boolean(a[e][t.id]))}),this.state={show:!0,saving:!1,checkingForMembership:!1,text:"",selectedChannelId:null,submitError:""},this.suggestionProviders=[new X],this.enableChannelProvider()}render(){const e=this.props.user,t=this.state.selectedChannelId,a=this.isUserMemberOfChannel(t);let n,s=Object(R.getFullName)(e);s||(s="@".concat(e.username)),this.state.saving||(this.state.submitError?n=E.a.createElement("label",{id:"add-user-to-channel-modal__invite-error",className:"modal__error has-error control-label"},this.state.submitError):a&&(n=E.a.createElement("label",{id:"add-user-to-channel-modal__user-is-member",className:"modal__error has-error control-label"},E.a.createElement(C.c,{id:"add_user_to_channel_modal.membershipExistsError",defaultMessage:"{name} is already a member of that channel",values:{name:s}}))));const i=E.a.createElement(C.c,{id:"add_user_to_channel_modal.help",defaultMessage:"Type to find a channel. Use ↑↓ to browse, ↵ to select, ESC to dismiss."}),o=E.a.createElement($.a,{ref:this.setSearchBoxRef,className:"form-control focused",onChange:this.onInputChange,value:this.state.text,onKeyDown:this.handleKeyDown,onItemSelected:this.didSelectChannel,listComponent:ee.a,maxLength:"64",providers:this.suggestionProviders,listStyle:"bottom",completeOnTab:!1,renderDividers:!1,delayInputUpdate:!0,openWhenEmpty:!0}),r=a||this.state.checkingForMembership||Boolean(!this.state.selectedChannelId)||this.state.saving;return E.a.createElement(j.a,{dialogClassName:"a11y__modal modal--overflow",show:this.state.show,onHide:this.onHide,onExited:this.props.onHide,ref:"modal",enforceFocus:!0,role:"dialog","aria-labelledby":"addChannelModalLabel"},E.a.createElement(j.a.Header,{closeButton:!0},E.a.createElement(j.a.Title,{componentClass:"h1",id:"addChannelModalLabel"},E.a.createElement(C.c,{id:"add_user_to_channel_modal.title",defaultMessage:"Add {name} to a channel",values:{name:s}}))),E.a.createElement("form",{role:"form",onSubmit:this.handleSubmit},E.a.createElement(j.a.Body,null,E.a.createElement("div",{className:"modal__hint"},i),o,E.a.createElement("div",null,n,E.a.createElement("br",null))),E.a.createElement(j.a.Footer,null,E.a.createElement("button",{type:"button",className:"btn btn-link",onClick:this.onHide},E.a.createElement(C.c,{id:"add_user_to_channel_modal.cancel",defaultMessage:"Cancel"})),E.a.createElement("button",{type:"button",id:"add-user-to-channel-modal__add-button",className:"btn btn-primary",onClick:this.handleSubmit,disabled:r},E.a.createElement(C.c,{id:"add_user_to_channel_modal.add",defaultMessage:"Add"})))))}}te(ae,"propTypes",{onHide:b.a.func.isRequired,user:b.a.object.isRequired,channelMembers:b.a.object.isRequired,actions:b.a.shape({addChannelMember:b.a.func.isRequired,getChannelMember:b.a.func.isRequired}).isRequired});var ne=Object(n.connect)(function(e){return{channelMembers:Object(r.getChannelMembersInChannels)(e)||{}}},function(e){return{actions:Object(s.bindActionCreators)({addChannelMember:d.addChannelMember,getChannelMember:d.getChannelMember},e)}})(ae),se=a(1069),ie=a(919);function oe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function re(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class le extends E.a.PureComponent{static getComponentName(){return"ProfilePopover"}constructor(e){super(e),re(this,"handleShowDirectChannel",e=>{const{actions:t}=this.props;if(e.preventDefault(),!this.props.user)return;const a=this.props.user;-1===this.state.loadingDMChannel&&(this.setState({loadingDMChannel:a.id}),t.openDirectChannelToUserId(a.id).then(e=>{e.error||(I.Z()&&M.c(),this.setState({loadingDMChannel:-1}),this.props.hide&&this.props.hide(),P.a.push("".concat(this.props.teamUrl,"/messages/@").concat(a.username)))}))}),re(this,"handleMentionKeyClick",e=>{e.preventDefault(),this.props.user&&(this.props.hide&&this.props.hide(),T.a.emit("mention_key_click",this.props.user.username,this.props.isRHS))}),re(this,"handleEditAccountSettings",e=>{e.preventDefault(),this.props.user&&(this.props.hide&&this.props.hide(),this.props.actions.openModal({ModalId:N.s.USER_SETTINGS,dialogType:S.a}))}),this.state={loadingDMChannel:-1}}componentDidMount(){this.props.actions.getMembershipForCurrentEntities(this.props.userId)}render(){if(!this.props.user)return null;const e=Object.assign({},this.props);delete e.user,delete e.userId,delete e.src,delete e.status,delete e.hideStatus,delete e.isBusy,delete e.hide,delete e.isRHS,delete e.hasMention,delete e.dispatch,delete e.enableTimezone,delete e.currentUserId,delete e.currentTeamId,delete e.teamUrl,delete e.actions,delete e.isTeamAdmin,delete e.isChannelAdmin,delete e.canManageAnyChannelMembersInCurrentTeam,delete e.intl;const{formatMessage:t}=this.props.intl;var a=[];a.push(E.a.createElement(ie.a,{size:"xxl",username:this.props.user.username,url:this.props.src,key:"user-popover-image"}));const n=I.A(this.props.user);if((n||this.props.user.position)&&a.push(E.a.createElement("hr",{key:"user-popover-hr",className:"divider divider--expanded"})),n&&a.push(E.a.createElement(_.a,{delayShow:N.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:E.a.createElement(v.a,{id:"fullNameTooltip"},n),key:"user-popover-fullname"},E.a.createElement("div",{className:"overflow--ellipsis text-nowrap"},E.a.createElement("strong",null,n)))),this.props.user.is_bot&&a.push(E.a.createElement("div",{key:"bot-description",className:"overflow--ellipsis text-nowrap"},this.props.user.bot_description)),this.props.user.position){const e=this.props.user.position.substring(0,N.Q.MAX_POSITION_LENGTH);a.push(E.a.createElement(_.a,{delayShow:N.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:E.a.createElement(v.a,{id:"positionTooltip"},e),key:"user-popover-position"},E.a.createElement("div",{className:"overflow--ellipsis text-nowrap padding-bottom padding-top half"},e)))}const s=this.props.user.email;if(s&&!this.props.user.is_bot&&(a.push(E.a.createElement("hr",{key:"user-popover-hr2",className:"divider divider--expanded"})),a.push(E.a.createElement("div",{"data-toggle":"tooltip",title:s,key:"user-popover-email"},E.a.createElement("a",{href:"mailto:"+s,className:"text-nowrap text-lowercase user-popover__email padding-bottom half"},s)))),a.push(E.a.createElement(A.a,{key:"profilePopoverPluggable2",pluggableName:"PopoverUserAttributes",user:this.props.user,hide:this.props.hide,status:this.props.hideStatus?null:this.props.status})),this.props.enableTimezone&&this.props.user.timezone&&a.push(E.a.createElement("div",{key:"user-popover-local-time",className:"padding-bottom half"},E.a.createElement(C.c,{id:"user_profile.account.localTime",defaultMessage:"Local Time: "}),E.a.createElement(O.a,{userTimezone:this.props.user.timezone}))),this.props.user.id===this.props.currentUserId&&a.push(E.a.createElement("div",{"data-toggle":"tooltip",key:"user-popover-settings",className:"popover__row first"},E.a.createElement("a",{href:"#",onClick:this.handleEditAccountSettings},E.a.createElement("i",{className:"fa fa-pencil-square-o",title:t({id:"generic_icons.edit",defaultMessage:"Edit Icon"})}),E.a.createElement(C.c,{id:"user_profile.account.editSettings",defaultMessage:"Edit Account Settings"})))),this.props.user.id!==this.props.currentUserId&&(a.push(E.a.createElement("div",{"data-toggle":"tooltip",key:"user-popover-dm",className:"popover__row first"},E.a.createElement("a",{href:"#",className:"text-nowrap user-popover__email",onClick:this.handleShowDirectChannel},E.a.createElement("i",{className:"fa fa-paper-plane",title:t({id:"user_profile.send.dm.icon",defaultMessage:"Send Message Icon"})}),E.a.createElement(C.c,{id:"user_profile.send.dm",defaultMessage:"Send Message"})))),this.props.canManageAnyChannelMembersInCurrentTeam&&this.props.isInCurrentTeam)){const e=t({id:"user_profile.add_user_to_channel",defaultMessage:"Add to a Channel"});a.push(E.a.createElement("div",{"data-toggle":"tooltip",className:"popover__row first",key:"user-popover-add-to-channel"},E.a.createElement("a",{href:"#",className:"text-nowrap"},E.a.createElement(se.a,{accessibilityLabel:e,ref:"addUserToChannelModalButton",modalId:N.s.ADD_USER_TO_CHANNEL,role:"menuitem",dialogType:ne,dialogProps:{user:this.props.user},onClick:this.props.hide},E.a.createElement("i",{className:"fa fa-user-plus",title:t({id:"user_profile.add_user_to_channel.icon",defaultMessage:"Add User to Channel Icon"})}),e))))}let i;a.push(E.a.createElement(A.a,{key:"profilePopoverPluggable3",pluggableName:"PopoverUserActions",user:this.props.user,hide:this.props.hide,status:this.props.hideStatus?null:this.props.status})),this.props.user.is_bot?i=E.a.createElement("span",{className:"user-popover__role"},I.fb("bots.is_bot","BOT")):I.W(this.props.user)?i=E.a.createElement("span",{className:"user-popover__role"},I.fb("post_info.guest","GUEST")):I.bb(this.props.user.roles)?i=E.a.createElement("span",{className:"user-popover__role"},I.fb("admin.permissions.roles.system_admin.name","System Admin")):this.props.isTeamAdmin?i=E.a.createElement("span",{className:"user-popover__role"},I.fb("admin.permissions.roles.team_admin.name","Team Admin")):this.props.isChannelAdmin&&(i=E.a.createElement("span",{className:"user-popover__role"},I.fb("admin.permissions.roles.channel_admin.name","Channel Admin")));let o="@".concat(this.props.user.username);return this.props.hasMention&&(o=E.a.createElement("a",{onClick:this.handleMentionKeyClick},o)),o=E.a.createElement("span",{"data-testid":"profilePopoverTitle_".concat(this.props.user.username)},E.a.createElement("span",{className:"user-popover__username"},o),i),E.a.createElement(y.a,Object.assign({},e,{title:o,id:"user-profile-popover"}),a)}}re(le,"propTypes",function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?oe(a,!0).forEach(function(t){re(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):oe(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({src:b.a.string.isRequired,user:b.a.object,status:b.a.string,hideStatus:b.a.bool,hide:b.a.func,isRHS:b.a.bool,currentTeamId:b.a.string.isRequired,currentUserId:b.a.string.isRequired,hasMention:b.a.bool,isInCurrentTeam:b.a.bool.isRequired,teamUrl:b.a.string.isRequired,isTeamAdmin:b.a.bool.isRequired,isChannelAdmin:b.a.bool.isRequired,canManageAnyChannelMembersInCurrentTeam:b.a.bool.isRequired,actions:b.a.shape({getMembershipForCurrentEntities:b.a.func.isRequired,openDirectChannelToUserId:b.a.func.isRequired,openModal:b.a.func.isRequired}).isRequired,intl:C.i.isRequired},y.a.propTypes)),re(le,"defaultProps",{isRHS:!1,hasMention:!1,status:N.O.OFFLINE}),delete le.propTypes.id;var ce=Object(C.h)(le);t.a=Object(n.connect)(function(e,t){const a=t.userId,n=Object(o.getCurrentTeam)(e),s=Object(o.getTeamMember)(e,n.id,a);let l=!1;s&&s.scheme_admin&&(l=!0);const c=Object(m.o)(e),d=Object(r.getCurrentChannel)(e);let u;u=!1===c.exists?d.id:c.channel_id;const p=Object(r.getChannelMembersInChannels)(e)[u][a];let g=!1;return"search"!==Object(m.k)(e)&&null!=p&&p.scheme_admin&&(g=!0),{currentTeamId:n.id,currentUserId:Object(i.getCurrentUserId)(e),enableTimezone:Object(h.a)(e),isTeamAdmin:l,isChannelAdmin:g,isInCurrentTeam:Boolean(s),canManageAnyChannelMembersInCurrentTeam:Object(r.canManageAnyChannelMembersInCurrentTeam)(e),status:Object(i.getStatusForUserId)(e,a),teamUrl:Object(o.getCurrentRelativeTeamUrl)(e),user:Object(i.getUser)(e,a)}},function(e){return{actions:Object(s.bindActionCreators)({openDirectChannelToUserId:l.e,openModal:p.b,getMembershipForCurrentEntities:u},e)}})(ce)},1148:function(e,t,a){"use strict";var n=a(223),s=a(25),i=a(6),o=a(18),r=a(15),l=a(51),c=a(72),d=a(12),m=a(928),u=a(1105),p=a(0),h=a(5),g=a.n(h),b=a(896),f=a(1192),E=a(20),_=a(236),v=a.n(_),y=[{name:"apiv3_deprecation",adminOnly:!0,title:g.a.createElement(b.b,{id:"system_notice.title",defaultMessage:"**Notice**\\nfrom Vue"}),icon:v.a,body:g.a.createElement(b.b,{id:"system_notice.body.api3",defaultMessage:"If you’ve created or installed integrations in the last two years, find out how [recent changes](!https://about.vueteams.com/default-apiv3-deprecation-guide) may have affected them."}),allowForget:!0,show:(e,t)=>!(t.InstallationDate>=new Date(2018,5,16,0,0,0,0).getTime())},{name:"advanced_permissions",adminOnly:!0,title:g.a.createElement(b.b,{id:"system_notice.title",defaultMessage:"**Notice**\\nfrom Vue"}),icon:v.a,body:g.a.createElement(b.b,{id:"system_notice.body.permissions",defaultMessage:"Some policy and permission System Console settings have moved with the release of [advanced permissions](!https://about.vueteams.com/default-advanced-permissions) in Enterprise E10 and E20."}),allowForget:!0,show:(e,t,a)=>"false"!==a.IsLicensed&&(!(t.InstallationDate>new Date(2018,5,16,0,0,0,0).getTime())&&!("true"===a.IsLicensed&&a.IssuedAt>new Date(2018,5,16,0,0,0,0).getTime()))},{name:"ee_upgrade_advice",adminOnly:!0,title:g.a.createElement(b.b,{id:"system_notice.title",defaultMessage:"**Notice**\\nfrom Vue"}),icon:v.a,body:g.a.createElement(b.b,{id:"system_notice.body.ee_upgrade_advice",defaultMessage:"Enterprise Edition is recommended to ensure optimal operation and reliability. [Learn more](!https://mattermost.com/performance)."}),allowForget:!1,show:(e,t,a,n)=>{return!!n.hasOwnProperty("TOTAL_USERS")&&(!(n.TOTAL_USERS<1e4)&&("true"!==a.IsLicensed||"true"!==a.Cluster))}},{name:"ie11_deprecation",title:g.a.createElement(b.b,{id:"system_notice.title",defaultMessage:"**Notice**\\nfrom Vue"}),icon:v.a,allowForget:!1,body:g.a.createElement(b.b,{id:"system_notice.body.ie11_deprecation",defaultMessage:"Your browser, IE11, will no longer be supported in an upcoming release. [Find out how to move to another browser in one simple step](!https://forum.vueteams.com/t/mattermost-is-dropping-support-for-internet-explorer-ie11-in-v5-16/7575)."}),show:e=>!f.b(e,"5.16.0")&&!!E.f()}],C=(a(8),a(16)),w=a.n(C),T=a(28),O=a(1106);function S(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class P extends g.a.PureComponent{constructor(...e){super(...e),S(this,"getCurrentNotice",()=>{for(const e of this.props.notices)if(!this.props.dismissedNotices[e.name]&&!this.props.preferences[e.name]&&(!e.adminOnly||this.props.isSystemAdmin)&&e.show(this.props.serverVersion,this.props.config,this.props.license,this.props.analytics))return e;return null}),S(this,"hide",(e=!1)=>{const t=this.getCurrentNotice();t&&(e||this.props.actions.savePreferences(this.props.currentUserId,[{user_id:this.props.currentUserId,category:p.A.CATEGORY_SYSTEM_NOTICE,name:t.name,value:"dismissed"}]),this.props.actions.dismissNotice(t.name))}),S(this,"hideAndRemind",()=>{this.hide(!0)}),S(this,"hideAndForget",()=>{this.hide(!1)})}componentDidMount(){this.props.isSystemAdmin&&this.props.actions.getStandardAnalytics()}componentDidUpdate(e){e.isSystemAdmin!==this.props.isSystemAdmin&&this.props.isSystemAdmin&&this.props.actions.getStandardAnalytics()}render(){const e=this.getCurrentNotice(),{formatMessage:t}=this.context.intl;if(null==e)return null;let a;return e.adminOnly&&(a=g.a.createElement("div",{className:"system-notice__info"},g.a.createElement("i",{className:"fa fa-eye",title:t({id:"system_notice.adminVisible.icon",defaultMessage:"Only visible to System Admins Icon"})}),g.a.createElement(T.c,{id:"system_notice.adminVisible",defaultMessage:"Only visible to System Admins"}))),g.a.createElement("div",{className:"system-notice bg--white shadow--2"},g.a.createElement("div",{className:"system-notice__header"},g.a.createElement("div",{className:"system-notice__logo"},g.a.createElement(O.a,null)),g.a.createElement("div",{className:"system-notice__title"},e.title)),g.a.createElement("div",{className:"system-notice__body"},e.body),a,g.a.createElement("div",{className:"system-notice__footer"},g.a.createElement("button",{id:"systemnotice_remindme",className:"btn btn-transparent",onClick:this.hideAndRemind},g.a.createElement(T.c,{id:"system_notice.remind_me",defaultMessage:"Remind me later"})),e.allowForget&&g.a.createElement("button",{id:"systemnotice_dontshow",className:"btn btn-transparent",onClick:this.hideAndForget},g.a.createElement(T.c,{id:"system_notice.dont_show",defaultMessage:"Don't show again"}))))}}S(P,"propTypes",{currentUserId:w.a.string.isRequired,notices:w.a.arrayOf(w.a.object).isRequired,preferences:w.a.object.isRequired,dismissedNotices:w.a.object.isRequired,isSystemAdmin:w.a.bool,serverVersion:w.a.string.isRequired,config:w.a.object.isRequired,license:w.a.object.isRequired,analytics:w.a.object,actions:w.a.shape({savePreferences:w.a.func.isRequired,dismissNotice:w.a.func.isRequired,getStandardAnalytics:w.a.func.isRequired}).isRequired}),S(P,"contextTypes",{intl:T.i.isRequired});t.a=Object(n.connect)(function(){const e=Object(o.makeGetCategory)(),t=Object(s.createSelector)(e,e=>{const t={};return e.forEach(e=>{t[e.name]=e}),t});return function(e){const a=Object(r.getLicense)(e),n=Object(r.getConfig)(e),s=e.entities.general.serverVersion,i=e.entities.admin.analytics;return{currentUserId:e.entities.users.currentUserId,preferences:t(e,p.A.CATEGORY_SYSTEM_NOTICE),dismissedNotices:e.views.notice.hasBeenDismissed,isSystemAdmin:Object(l.haveISystemPermission)(e,{permission:d.Permissions.MANAGE_SYSTEM}),notices:y,config:n,license:a,serverVersion:s,analytics:i}}},function(e){return{actions:Object(i.bindActionCreators)({savePreferences:c.savePreferences,dismissNotice:u.a,getStandardAnalytics:m.getStandardAnalytics},e)}})(P)},1149:function(e,t,a){"use strict";const n=7,s=3e3,i=3e5;var o=new class{constructor(){this.conn=null,this.connectionUrl=null,this.sequence=1,this.eventSequence=0,this.connectFailCount=0,this.eventCallback=null,this.responseCallbacks={},this.firstConnectCallback=null,this.reconnectCallback=null,this.missedEventCallback=null,this.errorCallback=null,this.closeCallback=null}initialize(e=this.connectionUrl,t){this.conn||(null!=e?(0===this.connectFailCount&&console.log("websocket connecting to "+e),this.conn=new WebSocket(e),this.connectionUrl=e,this.conn.onopen=()=>{this.eventSequence=0,t&&this.sendMessage("authentication_challenge",{token:t}),this.connectFailCount>0?(console.log("websocket re-established connection"),this.reconnectCallback&&this.reconnectCallback()):this.firstConnectCallback&&this.firstConnectCallback(),this.connectFailCount=0},this.conn.onclose=()=>{this.conn=null,this.sequence=1,0===this.connectFailCount&&console.log("websocket closed"),this.connectFailCount++,this.closeCallback&&this.closeCallback(this.connectFailCount);let a=s;this.connectFailCount>n&&(a=s*this.connectFailCount*this.connectFailCount)>i&&(a=i),setTimeout(()=>{this.initialize(e,t)},a)},this.conn.onerror=e=>{this.connectFailCount<=1&&(console.log("websocket error"),console.log(e)),this.errorCallback&&this.errorCallback(e)},this.conn.onmessage=e=>{const t=JSON.parse(e.data);t.seq_reply?(t.error&&console.log(t),this.responseCallbacks[t.seq_reply]&&(this.responseCallbacks[t.seq_reply](t),Reflect.deleteProperty(this.responseCallbacks,t.seq_reply))):this.eventCallback&&(t.seq!==this.eventSequence&&this.missedEventCallback&&(console.log("missed websocket event, act_seq="+t.seq+" exp_seq="+this.eventSequence),this.missedEventCallback()),this.eventSequence=t.seq+1,this.eventCallback(t))}):console.log("websocket must have connection url"))}setEventCallback(e){this.eventCallback=e}setFirstConnectCallback(e){this.firstConnectCallback=e}setReconnectCallback(e){this.reconnectCallback=e}setMissedEventCallback(e){this.missedEventCallback=e}setErrorCallback(e){this.errorCallback=e}setCloseCallback(e){this.closeCallback=e}close(){this.connectFailCount=0,this.sequence=1,this.conn&&this.conn.readyState===WebSocket.OPEN&&(this.conn.onclose=()=>{},this.conn.close(),this.conn=null,console.log("websocket closed"))}sendMessage(e,t,a){const n={action:e,seq:this.sequence++,data:t};a&&(this.responseCallbacks[n.seq]=a),this.conn&&this.conn.readyState===WebSocket.OPEN?this.conn.send(JSON.stringify(n)):this.conn&&this.conn.readyState!==WebSocket.CLOSED||(this.conn=null,this.initialize())}userTyping(e,t,a){const n={};n.channel_id=e,n.parent_id=t,this.sendMessage("user_typing",n,a)}userUpdateActiveStatus(e,t,a){const n={user_is_active:e,manual:t};this.sendMessage("user_update_active_status",n,a)}getStatuses(e){this.sendMessage("get_statuses",null,e)}getStatusesByIds(e,t){const a={};a.user_ids=e,this.sendMessage("get_statuses_by_ids",a,t)}};t.a=o},1151:function(e,t,a){"use strict";a.d(t,"a",function(){return n});const n=e=>e.websocket},1164:function(e,t,a){"use strict";a.d(t,"a",function(){return l});a(21);var n=a(5),s=a.n(n),i=a(922),o=a(923);class r extends o.a{render(){const{item:e,isSelection:t}=this.props;let a="mentions__name";return t&&(a+=" suggestion--selected"),s.a.createElement("div",Object.assign({className:a,onClick:this.handleClick},o.a.baseProps),e.text)}}class l extends i.a{constructor(e){super(),this.options=e}handlePretextChanged(e,t){return 0===e.length?(this.displayAllOptions(t),!0):!!e&&(this.filterOptions(e,t),!0)}async displayAllOptions(e){e({matchedPretext:"",terms:this.options.map(e=>e.text),items:this.options,component:r})}async filterOptions(e,t){const a=this.options.filter(t=>t.text.toLowerCase().indexOf(e)>=0),n=a.map(e=>e.text);t({matchedPretext:e,terms:n,items:a,component:r})}}},1165:function(e,t,a){"use strict";a.d(t,"a",function(){return c});var n=a(5),s=a.n(n),i=a(933),o=a(922),r=a(923);class l extends r.a{render(){const e=this.props.isSelection,t=this.props.item,a=t.display_name,n=t.purpose;let i="mentions__name no-flex";e&&(i+=" suggestion--selected");const o="(~"+t.name+")";return s.a.createElement("div",Object.assign({className:i,onClick:this.handleClick},r.a.baseProps),s.a.createElement("div",{className:"mention__align"},s.a.createElement("span",null,a),s.a.createElement("span",{className:"mention__channelname"}," ",o)),s.a.createElement("div",{className:"mention__purpose"},n))}}class c extends o.a{handlePretextChanged(e,t){const a=e.toLowerCase();return this.startNewRequest(a),Object(i.b)(a,e=>{if(this.shouldCancelDispatch(a))return;const n=Object.assign([],e);t({matchedPretext:a,terms:n.map(e=>e.display_name),items:n,component:l})}),!0}}},1166:function(e,t,a){"use strict";a.d(t,"a",function(){return c});a(8);var n=a(16),s=a.n(n),i=a(5),o=a.n(i),r=a(1091);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class c extends o.a.Component{constructor(...e){super(...e),l(this,"handleChange",e=>{"number"===this.props.type?this.props.onChange(this.props.id,parseInt(e.target.value,10)):this.props.onChange(this.props.id,e.target.value)})}render(){const{resizable:e}=this.props;let{type:t}=this.props,a=null;if("textarea"===t){const t={};e||(t.resize="none"),a=o.a.createElement("textarea",{id:this.props.id,style:t,className:"form-control",rows:"5",placeholder:this.props.placeholder,value:this.props.value,maxLength:this.props.maxLength,onChange:this.handleChange,disabled:this.props.disabled})}else t=["input","email","tel","number","url","password"].includes(t)?t:"input",a=o.a.createElement("input",{id:this.props.id,className:"form-control",type:t,placeholder:this.props.placeholder,value:this.props.value,maxLength:this.props.maxLength,onChange:this.handleChange,disabled:this.props.disabled});return o.a.createElement(r.a,{label:this.props.label,labelClassName:this.props.labelClassName,inputClassName:this.props.inputClassName,helpText:this.props.helpText,inputId:this.props.id,footer:this.props.footer},a)}}l(c,"validTypes",["input","textarea","number","email","tel","url","password"]),l(c,"propTypes",{id:s.a.string.isRequired,label:s.a.node.isRequired,labelClassName:s.a.string,placeholder:s.a.string,helpText:s.a.node,footer:s.a.node,value:s.a.oneOfType([s.a.string,s.a.number]).isRequired,inputClassName:s.a.string,maxLength:s.a.number,resizable:s.a.bool,onChange:s.a.func,disabled:s.a.bool,type:s.a.oneOf(c.validTypes)}),l(c,"defaultProps",{labelClassName:"",inputClassName:"",type:"input",maxLength:null,resizable:!0})},1167:function(e,t,a){"use strict";a.d(t,"a",function(){return d});var n=a(16),s=a.n(n),i=a(5),o=a.n(i),r=a(971),l=a(972);function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class d extends o.a.PureComponent{constructor(e){super(e),c(this,"onChange",e=>{e&&e.target&&this.setState({input:e.target.value})}),c(this,"handleSelected",e=>{this.setState({input:""}),this.props.onSelected&&this.props.onSelected(e),requestAnimationFrame(()=>{this.suggestionRef&&this.suggestionRef.blur()})}),c(this,"setSuggestionRef",e=>{this.suggestionRef=e}),c(this,"onFocus",()=>{this.setState({focused:!0})}),c(this,"onBlur",()=>{this.setState({focused:!1})}),this.state={input:""}}render(){const{providers:e,placeholder:t,footer:a,label:n,labelClassName:s,helpText:i,inputClassName:c,value:d}=this.props,{focused:m}=this.state;let u,p,{input:h}=this.state;return m||(h=d),n&&(u=o.a.createElement("label",{className:"control-label "+s},n)),i&&(p=o.a.createElement("div",{className:"help-text"},i)),o.a.createElement("div",{"data-testid":"autoCompleteSelector",className:"form-group"},u,o.a.createElement("div",{className:c},o.a.createElement(r.a,{placeholder:t,ref:this.setSuggestionRef,listComponent:l.a,className:"form-control",containerClass:"select-suggestion-container",value:h,onChange:this.onChange,onItemSelected:this.handleSelected,onFocus:this.onFocus,onBlur:this.onBlur,providers:e,completeOnTab:!0,renderDividers:!1,renderNoResults:!0,openOnFocus:!0,openWhenEmpty:!0,replaceAllInputOnSelect:!0}),p,a))}}c(d,"propTypes",{providers:s.a.array.isRequired,value:s.a.string.isRequired,onSelected:s.a.func,label:s.a.node,labelClassName:s.a.string,inputClassName:s.a.string,helpText:s.a.node,placeholder:s.a.string,footer:s.a.node}),c(d,"defaultProps",{value:"",id:"",labelClassName:"",inputClassName:""})},1176:function(e,t,a){e.exports=function(e){a.e(31).then(function(t){e(a(1737))}.bind(null,a)).catch(a.oe)}},1182:function(e,t,a){"use strict";function n(e,t,a){const{above:n,below:s}=a;let i;return i=e.top>n?"top":t-e.bottom>(s||n)?"bottom":"left"}a.d(t,"a",function(){return n})},1184:function(e,t,a){"use strict";a.d(t,"a",function(){return l});var n=a(16),s=a.n(n),i=a(5),o=a.n(i),r=a(935);function l({loading:e,progress:t,containerClass:a}){let n=o.a.createElement("span",{className:"loader-percent"});return t&&(n=o.a.createElement("span",{className:"loader-percent"},"".concat(e," ").concat(t,"%"))),o.a.createElement("div",{className:a},o.a.createElement(r.a,null),n)}l.propTypes={progress:s.a.number,loading:s.a.string,containerClass:s.a.string},l.defaultProps={containerClass:"view-image__loading"}},1190:function(e,t,a){e.exports=function(e){a.e(24).then(function(t){e(a(1853))}.bind(null,a)).catch(a.oe)}},1191:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a(0),s=a(14);n.k.PAGE_NOT_FOUND;const i=["/mfa/setup","/mfa/confirm"],o=["","email","ldap"];function r(e,t,a,n){if("true"===t.MFA&&"true"===a.EnableMultifactorAuthentication&&"true"===a.EnforceMultifactorAuthentication&&-1===i.indexOf(n)){if(Object(s.W)(e)&&"true"!==a.GuestAccountsEnforceMultifactorAuthentication)return!1;if(e&&!e.mfa_active&&-1!==o.indexOf(e.auth_service))return!0}return!1}},1192:function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"b",function(){return s});a(30);function n(e,t){if(e===t)return!0;return(e||"").split(".").slice(0,-2).join(".")===(t||"").split(".").slice(0,-2).join(".")}function s(e,t){if(e===t)return!0;const a=(e||"").split(".").filter(e=>null!==/^[0-9]+$/.exec(e)),n=(t||"").split(".").filter(e=>null!==/^[0-9]+$/.exec(e));for(var s=0;s<Math.max(a.length,n.length);s++){if((a[s]||0)>(n[s]||0))return!0;if((a[s]||0)<(n[s]||0))return!1}return!0}},1196:function(e,t,a){"use strict";a.d(t,"a",function(){return d});var n=a(16),s=a.n(n),i=a(5),o=a.n(i);function r(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class d extends o.a.Component{constructor(e){super(e),c(this,"recalculateSize",()=>{if(!this.refs.reference||!this.refs.textarea)return;const e=this.refs.reference.scrollHeight,t=this.refs.textarea;if(e>0&&e!==this.height){const a=getComputedStyle(t),n=parseInt(a.borderTopWidth,10)+parseInt(a.borderBottomWidth,10);t.style.height=String(e+n)+"px",this.height=e,this.props.onHeightChange&&this.props.onHeightChange(e,parseInt(a.maxHeight,10))}}),c(this,"getDOMNode",()=>this.refs.textarea),c(this,"handleChange",e=>{this.props.onChange&&this.props.onChange(e)}),this.height=0}get value(){return this.refs.textarea.value}set value(e){this.refs.textarea.value=e}get selectionStart(){return this.refs.textarea.selectionStart}set selectionStart(e){this.refs.textarea.selectionStart=e}get selectionEnd(){return this.refs.textarea.selectionEnd}set selectionEnd(e){this.refs.textarea.selectionEnd=e}focus(){this.refs.textarea.focus()}blur(){this.refs.textarea.blur()}componentDidMount(){this.recalculateSize()}componentDidUpdate(){this.recalculateSize()}render(){const e=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(a,!0).forEach(function(t){c(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},this.props);Reflect.deleteProperty(e,"onHeightChange"),Reflect.deleteProperty(e,"providers"),Reflect.deleteProperty(e,"channelId");const{value:t,defaultValue:a,placeholder:n,disabled:s,onInput:i,id:d}=e,u=r(e,["value","defaultValue","placeholder","disabled","onInput","id"]),p={};this.height<=0?p.rows=1:p.height=this.height;let h=null;const g=n.toLowerCase();return this.props.value||this.props.defaultValue||(h=o.a.createElement("div",Object.assign({},u,{style:m.placeholder}),n)),o.a.createElement("div",null,h,o.a.createElement("textarea",Object.assign({ref:"textarea",id:d},p,u,{role:"textbox","aria-label":g,disabled:s,onChange:this.handleChange,onInput:i,value:t,defaultValue:a})),o.a.createElement("div",{style:m.container},o.a.createElement("textarea",Object.assign({ref:"reference",id:d+"-reference",style:m.reference,disabled:!0,rows:"1"},u,{value:t||a}))))}}c(d,"propTypes",{value:s.a.string,defaultValue:s.a.string,placeholder:s.a.string,onChange:s.a.func,onHeightChange:s.a.func}),c(d,"defaultProps",{placeholder:""});const m={container:{height:0,overflow:"hidden"},reference:{height:"auto",width:"100%"},placeholder:{overflow:"hidden",textOverflow:"ellipsis",opacity:.5,pointerEvents:"none",position:"absolute",whiteSpace:"nowrap",background:"none"}}},1220:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a(5),s=a.n(n),i=a(28);class o extends s.a.PureComponent{render(){return s.a.createElement(i.c,{id:"generic_icons.edit",defaultMessage:"Edit Icon"},e=>s.a.createElement("i",{className:"fa fa-pencil",title:e}))}}},1221:function(e,t,a){"use strict";a.d(t,"a",function(){return E});a(8),a(568);var n=a(16),s=a.n(n),i=a(5),o=a.n(i),r=a(28),l=a(1177),c=a(1180),d=a(0),m=a(14),u=a(948),p=a(940),h=a(908),g=a(896);function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function f(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class E extends i.Component{constructor(e){super(e),f(this,"handleCancel",e=>{this.setState({removeSrc:!1,setDefaultSrc:!1}),this.props.updateSection(e)}),f(this,"handleFileSelected",()=>{this.confirmButton.current&&this.confirmButton.current.focus()}),f(this,"handleSave",e=>{e.preventDefault(),this.state.removeSrc?this.props.onRemove():this.state.setDefaultSrc?this.props.onSetDefault():this.props.onSubmit()}),f(this,"handleRemoveSrc",e=>{e.preventDefault(),this.setState({removeSrc:!0}),this.focusFirstElement()}),f(this,"handleSetDefaultSrc",e=>{e.preventDefault(),this.setState({setDefaultSrc:!0}),this.focusFirstElement()}),f(this,"handleFileChange",e=>{this.setState({removeSrc:!1,setDefaultSrc:!1}),this.props.onFileChange(e)}),f(this,"handleInputFile",()=>{this.selectInput.current.value="",this.selectInput.current.click()}),f(this,"setPicture",e=>{if(e){this.previewBlob=URL.createObjectURL(e);var t=new FileReader;t.onload=e=>{const t=u.c(e.target.result),a=u.e(t);this.setState({image:this.previewBlob,orientationStyles:a})},t.readAsArrayBuffer(e)}}),f(this,"renderImg",()=>{const e=this.props.imageContext;if(this.props.file){const t=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(a,!0).forEach(function(t){f(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({backgroundImage:"url("+this.state.image+")"},this.state.orientationStyles);return o.a.createElement("div",{className:"".concat(e,"-img-preview")},o.a.createElement("div",{className:"img-preview__image"},o.a.createElement("div",{alt:"".concat(e," image preview"),style:t,className:"".concat(e,"-img-preview")})))}if(this.state.setDefaultSrc)return o.a.createElement("img",{className:"".concat(e,"-img"),alt:"".concat(e," image"),src:this.props.defaultImageSrc});if(this.props.src&&!this.state.removeSrc){const t=o.a.createElement("img",{className:"".concat(e,"-img"),alt:"".concat(e," image"),src:this.props.src});if(!this.props.onRemove&&!this.props.onSetDefault)return t;let a,n;return this.props.onRemove?(a=o.a.createElement(r.c,{id:"setting_picture.remove",defaultMessage:"Remove this icon"}),n=this.handleRemoveSrc):this.props.onSetDefault&&(a=o.a.createElement(r.c,{id:"setting_picture.remove_profile_picture",defaultMessage:"Remove profile picture"}),n=this.handleSetDefaultSrc),o.a.createElement("div",{className:"".concat(e,"-img__container")},o.a.createElement("div",{className:"img-preview__image","aria-hidden":!0},t),o.a.createElement(l.a,{delayShow:d.i.OVERLAY_TIME_DELAY,placement:"right",overlay:o.a.createElement(c.a,{id:"removeIcon"},o.a.createElement("div",{"aria-hidden":!0},a))},o.a.createElement("button",{className:"".concat(e,"-img__remove"),onClick:n},o.a.createElement("span",{"aria-hidden":!0},"×"),o.a.createElement("span",{className:"sr-only"},a))))}return null}),this.settingList=o.a.createRef(),this.selectInput=o.a.createRef(),this.confirmButton=o.a.createRef(),this.state={image:null,removeSrc:!1,setDefaultSrc:!1}}focusFirstElement(){this.settingList.current&&this.settingList.current.focus()}componentDidMount(){this.focusFirstElement(),this.selectInput.current&&this.selectInput.current.addEventListener("input",this.handleFileSelected)}UNSAFE_componentWillReceiveProps(e){e.file!==this.props.file&&(this.setState({image:null}),this.setPicture(e.file))}componentWillUnmount(){this.previewBlob&&URL.revokeObjectURL(this.previewBlob),this.selectInput.current&&this.selectInput.current.removeEventListener("input",this.handleFileSelected)}render(){const e=this.props.imageContext,t=this.renderImg();let a,n,s="btn btn-sm",i=!1;return this.props.submitActive||this.state.removeSrc||this.state.setDefaultSrc?s+=" btn-primary":(s+=" btn-inactive disabled",i=!0),a="team"===e?o.a.createElement(g.b,{id:"setting_picture.help.team",defaultMessage:"Upload a team icon in BMP, JPG or PNG format.\\nSquare images with a solid background color are recommended."}):o.a.createElement(r.c,{id:"setting_picture.help.profile",defaultMessage:"Upload a picture in BMP, JPG or PNG format. Maximum file size: {max}",values:{max:Object(m.p)(this.props.maxFileSize)}}),t&&(n=o.a.createElement("li",{className:"setting-list-item",role:"presentation"},t)),o.a.createElement("ul",{className:"section-max form-horizontal"},o.a.createElement("li",{className:"col-xs-12 section-title"},this.props.title),o.a.createElement("li",{className:"col-xs-offset-3 col-xs-8"},o.a.createElement("ul",{className:"setting-list",ref:this.settingList,tabIndex:"-1","aria-label":this.props.title,"aria-describedby":"setting-picture__helptext"},n,o.a.createElement("li",{id:"setting-picture__helptext",className:"setting-list-item padding-top x2",role:"presentation"},a),o.a.createElement("li",{className:"setting-list-item",role:"presentation"},o.a.createElement("hr",null),o.a.createElement(h.a,{errors:[this.props.clientError,this.props.serverError],type:"modal"}),o.a.createElement("input",{ref:this.selectInput,className:"hidden",accept:".jpg,.png,.bmp",type:"file",onChange:this.handleFileChange,disabled:this.props.loadingPicture,"aria-hidden":!0,tabIndex:"-1"}),o.a.createElement("button",{className:"btn btn-sm btn-primary btn-file sel-btn",disabled:this.props.loadingPicture,onClick:this.handleInputFile,"aria-label":Object(m.fb)("setting_picture.select","Select")},o.a.createElement(r.c,{id:"setting_picture.select",defaultMessage:"Select"})),o.a.createElement("button",{tabIndex:i?"-1":"0",ref:this.confirmButton,className:s,onClick:this.props.loadingPicture?()=>!0:this.handleSave,"aria-label":this.props.loadingPicture?Object(m.fb)("setting_picture.uploading","Uploading..."):Object(m.fb)("setting_picture.save","Save")},o.a.createElement(p.a,{loading:this.props.loadingPicture,text:Object(m.fb)("setting_picture.uploading","Uploading...")},o.a.createElement(r.c,{id:"setting_picture.save",defaultMessage:"Save"}))),o.a.createElement("button",{className:"btn btn-link btn-sm theme",href:"#",onClick:this.handleCancel,"aria-label":Object(m.fb)("setting_picture.cancel","Cancel")},o.a.createElement(r.c,{id:"setting_picture.cancel",defaultMessage:"Cancel"}))))))}}f(E,"defaultProps",{imageContext:"profile"}),f(E,"propTypes",{clientError:s.a.string,serverError:s.a.string,src:s.a.string,defaultImageSrc:s.a.string,file:s.a.object,loadingPicture:s.a.bool,submitActive:s.a.bool,onRemove:s.a.func,onSetDefault:s.a.func,onSubmit:s.a.func,title:s.a.string,onFileChange:s.a.func,updateSection:s.a.func,imageContext:s.a.string,maxFileSize:s.a.number})},1292:function(e,t,a){"use strict";var n=a(223),s=a(6),i=a(918),o=(a(21),a(8),a(5)),r=a.n(o),l=a(16),c=a.n(l),d=a(1152),m=a(28),u=a(1349),p=a(970),h=a(14),g=(a(39),a(1164)),b=a(1090),f=a(1165),E=a(1166),_=a(1167),v=a(1091);function y(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class C extends r.a.Component{constructor(...e){super(...e),y(this,"handleChange",e=>{this.props.onChange(this.props.id,e.target.checked)})}render(){return r.a.createElement(v.a,{label:this.props.label,labelClassName:this.props.labelClassName,inputClassName:this.props.inputClassName,helpText:this.props.helpText,inputId:this.props.id},r.a.createElement("div",{className:"checkbox"},r.a.createElement("label",null,r.a.createElement("input",{id:this.props.id,type:"checkbox",checked:this.props.value,onChange:this.handleChange}),r.a.createElement("span",null,this.props.placeholder))))}}function w(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}y(C,"propTypes",{id:c.a.string.isRequired,label:c.a.node.isRequired,labelClassName:c.a.string,helpText:c.a.node,placeholder:c.a.string.isRequired,value:c.a.bool.isRequired,inputClassName:c.a.string,onChange:c.a.func}),y(C,"defaultProps",{labelClassName:"",inputClassName:""});class T extends r.a.Component{constructor(...e){super(...e),w(this,"handleChange",e=>{this.props.onChange(this.props.id,e.target.value)})}render(){return r.a.createElement(v.a,{label:this.props.label,labelClassName:this.props.labelClassName,inputClassName:this.props.inputClassName,helpText:this.props.helpText,inputId:this.props.id},this.props.options.map(({value:e,text:t})=>r.a.createElement("div",{className:"radio",key:e},r.a.createElement("label",null,r.a.createElement("input",{type:"radio",value:e,name:this.props.id,checked:e===this.props.value,onChange:this.handleChange}),t))))}}function O(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}w(T,"propTypes",{id:c.a.string.isRequired,options:c.a.arrayOf(c.a.shape({text:c.a.string,value:c.a.string})),label:c.a.node.isRequired,onChange:c.a.func.isRequired,value:c.a.string,labelClassName:c.a.string,inputClassName:c.a.string,helpText:c.a.node}),w(T,"defaultProps",{labelClassName:"",inputClassName:"",options:[]});const S=150,P=3e3;class M extends r.a.PureComponent{constructor(e){super(e),O(this,"handleSelected",e=>{const{name:t,dataSource:a,onChange:n}=this.props;"users"===a?(n(t,e.id),this.setState({value:e.username})):"channels"===a?(n(t,e.id),this.setState({value:e.display_name})):(n(t,e.value),this.setState({value:e.text}))}),this.providers=[],"select"===e.type&&("users"===e.dataSource?this.providers=[new b.a]:"channels"===e.dataSource?this.providers=[new f.a]:e.options&&(this.providers=[new g.a(e.options)])),this.state={value:""}}render(){const{name:e,subtype:t,displayName:a,value:n,placeholder:s,onChange:i,helpText:o,errorText:l,optional:c,options:d}=this.props;let{type:u,maxLength:p}=this.props,h=a;h=c?r.a.createElement(r.a.Fragment,null,a+" ",r.a.createElement("span",{className:"font-weight--normal light"},r.a.createElement(m.c,{id:"interactive_dialog.element.optional",defaultMessage:"(optional)"}))):r.a.createElement(r.a.Fragment,null,a,r.a.createElement("span",{className:"error-text"}," *"));let g=o;return l&&(g=r.a.createElement(r.a.Fragment,null,o,r.a.createElement("div",{className:"error-text margin-top x2"},l))),"text"===u||"textarea"===u?("text"===u?(p=p||S,u=t&&E.a.validTypes.includes(t)?t:"input"):p=p||P,r.a.createElement(E.a,{id:e,type:u,label:h,maxLength:p,value:n||"",placeholder:s,helpText:g,onChange:i,resizable:!1})):"select"===u?r.a.createElement(_.a,{id:e,providers:this.providers,onSelected:this.handleSelected,label:h,helpText:g,placeholder:s,value:this.state.value}):"bool"===u?r.a.createElement(C,{id:e,label:h,value:n||!1,helpText:g,placeholder:s,onChange:i}):"radio"===u?r.a.createElement(T,{id:e,label:h,helpText:g,options:d,value:n||d&&d[0].value,onChange:i}):null}}O(M,"propTypes",{displayName:c.a.string.isRequired,name:c.a.string.isRequired,type:c.a.string.isRequired,subtype:c.a.string,placeholder:c.a.string,helpText:c.a.string,errorText:c.a.node,maxLength:c.a.number,dataSource:c.a.string,optional:c.a.bool,options:c.a.arrayOf(c.a.object),value:c.a.any,onChange:c.a.func});var N,I,A,j=a(79);class R extends r.a.PureComponent{render(){const e=j.a(this.props.value,{breaks:!0,sanitize:!0,gfm:!0});return r.a.createElement("span",{id:this.props.id,dangerouslySetInnerHTML:{__html:e}})}}function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function L(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}N=R,I="propTypes",A={id:c.a.string,value:c.a.string.isRequired},I in N?Object.defineProperty(N,I,{value:A,enumerable:!0,configurable:!0,writable:!0}):N[I]=A;class x extends r.a.Component{constructor(e){super(e),L(this,"handleSubmit",async e=>{e.preventDefault();const{elements:t}=this.props,a=this.state.values,n={};if(t&&t.forEach(e=>{const t=Object(u.checkDialogElementForError)(e,a[e.name]);t&&(n[e.name]=r.a.createElement(m.c,{id:t.id,defaultMessage:t.defaultMessage,values:t.values}))}),this.setState({errors:n}),0!==Object.keys(n).length)return;const{url:s,callbackId:i,state:o}=this.props,l={url:s,callback_id:i,state:o,submission:a};this.setState({submitting:!0});const{data:c}=await this.props.actions.submitInteractiveDialog(l);this.setState({submitting:!1}),c&&c.errors&&0!==Object.keys(c.errors).length&&Object(u.checkIfErrorsMatchElements)(c.errors,t)?this.setState({errors:c.errors}):this.handleHide(!0)}),L(this,"onHide",()=>{this.handleHide(!1)}),L(this,"handleHide",(e=!1)=>{const{url:t,callbackId:a,state:n,notifyOnCancel:s}=this.props;if(!e&&s){const e={url:t,callback_id:a,state:n,cancelled:!0};this.props.actions.submitInteractiveDialog(e)}this.setState({show:!1})}),L(this,"onChange",(e,t)=>{const a=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(a,!0).forEach(function(t){L(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},this.state.values,{[e]:t});this.setState({values:a})});const t={};null!=e.elements&&e.elements.forEach(e=>{t[e.name]=e.default||null}),this.state={show:!0,values:t,errors:{},submitting:!1}}render(){const{title:e,introductionText:t,iconUrl:a,submitLabel:n,elements:s}=this.props;let i,o=r.a.createElement(m.c,{id:"interactive_dialog.submit",defaultMessage:"Submit"});return n&&(o=n),a&&(i=r.a.createElement("img",{id:"interactiveDialogIconUrl",alt:"modal title icon",className:"more-modal__image",width:"36",height:"36",src:a})),r.a.createElement(d.a,{id:"interactiveDialogModal",dialogClassName:"a11y__modal about-modal",show:this.state.show,onHide:this.onHide,onExited:this.props.onHide,backdrop:"static",role:"dialog","aria-labelledby":"interactiveDialogModalLabel"},r.a.createElement(d.a.Header,{closeButton:!0,style:{borderBottom:null==s&&"0px"}},r.a.createElement(d.a.Title,{componentClass:"h1",id:"interactiveDialogModalLabel"},i,e)),(s||t)&&r.a.createElement(d.a.Body,null,t&&r.a.createElement(R,{id:"interactiveDialogModalIntroductionText",value:t}),s&&s.map(e=>r.a.createElement(M,{key:"dialogelement"+e.name,displayName:e.display_name,name:e.name,type:e.type,subtype:e.subtype,helpText:e.help_text,errorText:this.state.errors[e.name],placeholder:e.placeholder,minLength:e.min_length,maxLength:e.max_length,dataSource:e.data_source,optional:e.optional,options:e.options,value:this.state.values[e.name],onChange:this.onChange}))),r.a.createElement(d.a.Footer,null,r.a.createElement("button",{id:"interactiveDialogCancel",type:"button",className:"btn btn-link cancel-button",onClick:this.onHide},r.a.createElement(m.c,{id:"interactive_dialog.cancel",defaultMessage:"Cancel"})),r.a.createElement(p.a,{id:"interactiveDialogSubmit",type:"button",className:"btn btn-primary save-button",onClick:this.handleSubmit,spinning:this.state.submitting,spinningText:Object(h.fb)("interactive_dialog.submitting","Submitting...")},o)))}}L(x,"propTypes",{url:c.a.string.isRequired,callbackId:c.a.string,elements:c.a.arrayOf(c.a.object),title:c.a.string.isRequired,introductionText:c.a.string,iconUrl:c.a.string,submitLabel:c.a.string,notifyOnCancel:c.a.bool,state:c.a.string,onHide:c.a.func,actions:c.a.shape({submitInteractiveDialog:c.a.func.isRequired}).isRequired});t.a=Object(n.connect)(function(e){const t=e.entities.integrations.dialog;return t&&t.dialog?{url:t.url,callbackId:t.dialog.callback_id,elements:t.dialog.elements,title:t.dialog.title,introductionText:t.dialog.introduction_text,iconUrl:t.dialog.icon_url,submitLabel:t.dialog.submit_label,notifyOnCancel:t.dialog.notify_on_cancel,state:t.dialog.state}:{}},function(e){return{actions:Object(s.bindActionCreators)({submitInteractiveDialog:i.submitInteractiveDialog},e)}})(x)},1293:function(e,t,a){"use strict";a(109);var n=a(94),s=a.n(n),i=a(16),o=a.n(i),r=a(5),l=a.n(r),c=a(224),d=a.n(c),m=a(28),u=a(1033),p=(a(8),a(0)),h=a(899),g=a(223),b=a(11),f=(a(71),a(19)),E=a(14),_=a(963),v=a(941),y=a(913),C=a(896);function w(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class T extends l.a.Component{render(){let e=null;this.props.actions&&(e=this.props.actions.map((e,t)=>l.a.createElement(e,Object.assign({key:t.toString(),user:this.props.user,index:this.props.index,totalUsers:this.props.totalUsers},this.props.actionProps,this.props.actionUserProps))));let t,a=this.props.user.email,n="more-modal__description";this.props.extraInfo&&this.props.extraInfo.length>0?(a=l.a.createElement(C.b,{id:"admin.user_item.emailTitle",defaultMessage:"**Email:** {email}",values:{email:this.props.user.email}}),n=""):t=this.props.user.status?this.props.user.status:this.props.status,this.props.user.is_bot&&(t=null,a=null);let s=null,i=null;return this.props.userCount>=0&&(s=E.h("userListRowName"+this.props.userCount),i=E.h("userListRowEmail"+this.props.userCount)),l.a.createElement("div",{key:this.props.user.id,className:"more-modal__row"},l.a.createElement(_.a,{src:f.Client4.getProfilePictureUrl(this.props.user.id,this.props.user.last_picture_update),status:t,size:"md"}),l.a.createElement("div",{className:"more-modal__details"},l.a.createElement("div",{id:s,className:"more-modal__name"},E.m(this.props.user),l.a.createElement(y.a,{className:"badge-popoverlist",show:Boolean(this.props.user.is_bot)}),l.a.createElement(v.a,{className:"badge-popoverlist",show:E.W(this.props.user)})),l.a.createElement("div",{id:i,className:n},a),this.props.extraInfo),l.a.createElement("div",{className:"more-modal__actions"},e))}}w(T,"propTypes",{user:o.a.object.isRequired,status:o.a.string,extraInfo:o.a.arrayOf(o.a.object),actions:o.a.arrayOf(o.a.func),actionProps:o.a.object,actionUserProps:o.a.object,index:o.a.number,totalUsers:o.a.number,userCount:o.a.number}),w(T,"defaultProps",{extraInfo:[],actions:[],actionProps:{},actionUserProps:{}});var O=Object(g.connect)(function(e,t){const a=t.user||{};return{status:Object(b.getStatusForUserId)(e,a.id)}})(T);function S(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class P extends l.a.Component{constructor(...e){super(...e),S(this,"scrollToTop",()=>{this.refs.container&&(this.refs.container.scrollTop=0)})}render(){const e=this.props.users,t=this.props.rowComponentType;let a;return null==e?l.a.createElement(h.a,null):(a=e.length>0?e.map((a,n)=>l.a.createElement(t,{key:a.id,user:a,extraInfo:this.props.extraInfo[a.id],actions:this.props.actions,actionProps:this.props.actionProps,actionUserProps:this.props.actionUserProps[a.id],index:n,totalUsers:e.length,userCount:n>=0&&n<p.Q.TEST_ID_COUNT?n:-1})):l.a.createElement("div",{key:"no-users-found",className:"more-modal__placeholder-row"},l.a.createElement("p",null,l.a.createElement(m.c,{id:"user_list.notFound",defaultMessage:"No users found"}))),l.a.createElement("div",{ref:"container"},a))}}S(P,"propTypes",{users:o.a.arrayOf(o.a.object),extraInfo:o.a.object,actions:o.a.arrayOf(o.a.func),actionProps:o.a.object,actionUserProps:o.a.object,rowComponentType:o.a.func}),S(P,"defaultProps",{users:[],extraInfo:{},actions:[],actionProps:{},rowComponentType:O});var M=a(905),N=a(29);function I(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,"a",function(){return j});const A=500;class j extends l.a.Component{constructor(e){super(e),I(this,"nextPage",e=>{e.preventDefault(),this.setState({nextDisabled:!0}),this.nextTimeoutId=setTimeout(()=>this.setState({nextDisabled:!1}),A),this.props.nextPage(),s()(d.a.findDOMNode(this.refs.channelListScroll)).scrollTop(0)}),I(this,"previousPage",e=>{e.preventDefault(),this.props.previousPage(),s()(d.a.findDOMNode(this.refs.channelListScroll)).scrollTop(0)}),I(this,"focusSearchBar",()=>{this.props.focusOnMount&&this.refs.filter.focus()}),I(this,"handleInput",e=>{this.props.onTermChange(e.target.value),this.props.search(e.target.value)}),I(this,"renderCount",e=>{if(!e)return null;if(this.props.filter)return null;const t=e.length,a=this.props.total,n=Boolean(this.props.term);let s,i;return n?(s=-1,i=-1):(s=this.props.page*this.props.usersPerPage,i=Math.min(s+this.props.usersPerPage,a)),this.props.renderCount?this.props.renderCount(t,this.props.total,s,i,n):this.props.total?n?l.a.createElement(m.c,{id:"filtered_user_list.countTotal",defaultMessage:"{count, number} {count, plural, one {member} other {members}} of {total, number} total",values:{count:t,total:a}}):l.a.createElement(m.c,{id:"filtered_user_list.countTotalPage",defaultMessage:"{startCount, number} - {endCount, number} {count, plural, one {member} other {members}} of {total, number} total",values:{count:t,startCount:s+1,endCount:i,total:a}}):null}),this.nextTimeoutId=0,this.state={nextDisabled:!1}}componentDidMount(){this.focusSearchBar()}componentDidUpdate(e){this.props.page===e.page&&this.props.term===e.term||this.refs.userList.scrollToTop()}componentWillUnmount(){clearTimeout(this.nextTimeoutId)}render(){let e,t,a,n;if(this.props.term||!this.props.users)a=this.props.users;else if(!this.props.term){const n=this.props.page*this.props.usersPerPage,s=n+this.props.usersPerPage;a=this.props.users.slice(n,s),s<this.props.users.length&&(e=l.a.createElement("button",{id:"searchableUserListNextBtn",className:"btn btn-link filter-control filter-control__next",onClick:this.nextPage,disabled:this.state.nextDisabled},l.a.createElement(m.c,{id:"filtered_user_list.next",defaultMessage:"Next"}))),this.props.page>0&&(t=l.a.createElement("button",{id:"searchableUserListPrevBtn",className:"btn btn-link filter-control filter-control__prev",onClick:this.previousPage},l.a.createElement(m.c,{id:"filtered_user_list.prev",defaultMessage:"Previous"})))}return n=this.props.renderFilterRow?this.props.renderFilterRow(this.handleInput):l.a.createElement("div",{className:"col-xs-12"},l.a.createElement(u.a,{id:"searchUsersInput",ref:"filter",className:"form-control filter-textbox",placeholder:{id:Object(N.b)("filtered_user_list.search"),defaultMessage:"Search users"},inputComponent:M.a,value:this.props.term,onInput:this.handleInput})),l.a.createElement("div",{className:"filtered-user-list"},l.a.createElement("div",{className:"filter-row"},n,l.a.createElement("div",{className:"col-sm-12"},l.a.createElement("span",{id:"searchableUserListTotal",className:"member-count pull-left","aria-live":"polite"},this.renderCount(a)))),l.a.createElement("div",{className:"more-modal__list"},l.a.createElement(P,{ref:"userList",users:a,extraInfo:this.props.extraInfo,actions:this.props.actions,actionProps:this.props.actionProps,actionUserProps:this.props.actionUserProps,rowComponentType:this.props.rowComponentType})),l.a.createElement("div",{className:"filter-controls"},t,e))}}I(j,"propTypes",{users:o.a.arrayOf(o.a.object),usersPerPage:o.a.number,total:o.a.number,extraInfo:o.a.object,nextPage:o.a.func.isRequired,previousPage:o.a.func.isRequired,search:o.a.func.isRequired,actions:o.a.arrayOf(o.a.func),actionProps:o.a.object,actionUserProps:o.a.object,focusOnMount:o.a.bool,renderCount:o.a.func,filter:o.a.string,renderFilterRow:o.a.func,page:o.a.number.isRequired,term:o.a.string.isRequired,onTermChange:o.a.func.isRequired,rowComponentType:o.a.func}),I(j,"defaultProps",{users:[],usersPerPage:50,extraInfo:{},actions:[],actionProps:{},actionUserProps:{},showTeamToggle:!1,focusOnMount:!1})},1294:function(e,t,a){"use strict";var n=a(223),s=a(18),i=a(11),o=a(16),r=a.n(o),l=a(5),c=a.n(l),d=a(1098),m=a(19),u=a(59),p=a(1147),h=a(1182);function g(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const b=300;class f extends c.a.PureComponent{constructor(e){super(e),g(this,"handleClick",e=>{const t=this.overlayRef.current.getBoundingClientRect(),a=Object(h.a)(t,window.innerHeight,{above:b});this.setState({target:e.target,show:!this.state.show,placement:a})}),g(this,"hideOverlay",()=>{this.setState({show:!1})}),this.state={user:this.getUserFromMentionName(e),show:!1},this.overlayRef=c.a.createRef()}UNSAFE_componentWillReceiveProps(e){e.mentionName===this.props.mentionName&&e.usersByUsername===this.props.usersByUsername||this.setState({user:this.getUserFromMentionName(e)})}getUserFromMentionName(e){const t=e.usersByUsername;let a=e.mentionName.toLowerCase();for(;a.length>0;){if(t.hasOwnProperty(a))return t[a];if(!/[._-]$/.test(a))break;a=a.substring(0,a.length-1)}return""}render(){if(!this.state.user)return c.a.createElement(c.a.Fragment,null,this.props.children);const e=this.state.user,t=this.props.mentionName.substring(e.username.length);let a="mention-link";return e.id===this.props.currentUserId&&(a+=" mention--highlight"),c.a.createElement("span",null,c.a.createElement(d.a,{placement:this.state.placement,show:this.state.show,target:this.state.target,rootClose:!0,onHide:this.hideOverlay},c.a.createElement(p.a,{userId:e.id,src:m.Client4.getProfilePictureUrl(e.id,e.last_picture_update),isRHS:this.props.isRHS,hasMention:this.props.hasMention,hide:this.hideOverlay})),c.a.createElement("a",{className:a,onClick:this.handleClick,ref:this.overlayRef},"@"+Object(u.displayUsername)(e,this.props.teammateNameDisplay)),t)}}g(f,"propTypes",{children:r.a.node,currentUserId:r.a.string.isRequired,hasMention:r.a.bool,isRHS:r.a.bool,mentionName:r.a.string.isRequired,teammateNameDisplay:r.a.string.isRequired,usersByUsername:r.a.object.isRequired}),g(f,"defaultProps",{isRHS:!1,hasMention:!1});t.a=Object(n.connect)(function(e){return{currentUserId:Object(i.getCurrentUserId)(e),teammateNameDisplay:Object(s.getTeammateNameDisplaySetting)(e),usersByUsername:Object(i.getUsersByUsername)(e)}})(f)},1295:function(e,t,a){"use strict";var n,s,i,o=a(223),r=a(6),l=a(907),c=a(16),d=a.n(c),m=a(5),u=a.n(m);function p(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}class h extends u.a.PureComponent{render(){const e=this.props,{modals:t}=e,a=p(e,["modals"]),{modalState:n}=t;if(!t)return u.a.createElement("div",null);const s=[];for(const e in n)if(n.hasOwnProperty(e)){const t=n[e];if(t.open){const n=u.a.createElement(t.dialogType,Object.assign({},t.dialogProps,{onHide:a.actions.closeModal.bind(this,e),key:"".concat(e,"_modal")}));s.push(n)}}return u.a.createElement("div",null,s)}}n=h,s="propTypes",i={modals:d.a.object.isRequired,actions:d.a.shape({closeModal:d.a.func.isRequired}).isRequired},s in n?Object.defineProperty(n,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[s]=i;t.a=Object(o.connect)(function(e){return{modals:e.views.modals}},function(e){return{actions:Object(r.bindActionCreators)({closeModal:l.a},e)}})(h)},1296:function(e,t,a){"use strict";var n,s,i,o=a(223),r=a(11),l=a(166),c=a(165),d=a(18),m=a(124),u=a(0),p=(a(71),a(16)),h=a.n(p),g=a(5),b=a.n(g),f=a(28),E=a(126),_=a.n(E);class v extends b.a.PureComponent{render(){const{enableTimezone:e,eventTime:t,timeZone:a,useMilitaryTime:n}=this.props,s=t?new Date(t):new Date;let i=_()(s);e&&a?(i.tz(a),i=i.toString()+" ("+i.tz()+")"):i=i.toString();const o=e&&a?{timeZone:a}:{};return b.a.createElement("time",{"aria-label":s,className:"post__time",dateTime:s.toISOString(),title:i,id:"localDateTime"},b.a.createElement(f.d,Object.assign({},o,{hour12:!n,value:s})))}}n=v,s="propTypes",i={eventTime:h.a.number,useMilitaryTime:h.a.bool,timeZone:h.a.string,enableTimezone:h.a.bool},s in n?Object.defineProperty(n,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[s]=i;t.a=Object(o.connect)(function(e,t){const a=Object(r.getCurrentUserId)(e);let n;return n=t.userTimezone?t.userTimezone:Object(l.getUserTimezone)(e,a),{enableTimezone:Object(m.a)(e),useMilitaryTime:Object(d.getBool)(e,u.A.CATEGORY_DISPLAY_SETTINGS,u.A.USE_MILITARY_TIME,!1),timeZone:Object(c.getUserCurrentTimezone)(n)}})(v)},1297:function(e,t,a){"use strict";var n=a(223),s=a(15),i=a(0),o=a(976),r=(a(8),a(16)),l=a.n(r),c=a(5),d=a.n(c),m=a(1152),u=a(28),p=a(896),h=a(1106);function g(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class b extends d.a.PureComponent{constructor(...e){super(...e),g(this,"doHide",()=>{this.props.onHide()})}render(){const e=this.props.config,t=this.props.license;let a,n,s,i,o=d.a.createElement(u.c,{id:"about.teamEditiont0",defaultMessage:"Team Edition"}),r=d.a.createElement(u.c,{id:"about.teamEditionSt",defaultMessage:"All your team communication in one place, instantly searchable and accessible anywhere."}),l=d.a.createElement("div",null,d.a.createElement(u.c,{id:"about.teamEditionLearn",defaultMessage:"Join the Vue community at "}),d.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"http://www.vueteams.com/"},"vueteams.com"));"true"===e.BuildEnterpriseReady&&(o=d.a.createElement(u.c,{id:"about.teamEditiont1",defaultMessage:"Enterprise Edition"}),r=d.a.createElement(u.c,{id:"about.enterpriseEditionSt",defaultMessage:"Modern communication from behind your firewall."}),l=d.a.createElement("div",null,d.a.createElement(u.c,{id:"about.enterpriseEditionLearn",defaultMessage:"Learn more about Enterprise Edition at "}),d.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"http://about.vueteams.com/"},"about.vueteams.com")),"true"===t.IsLicensed&&(o=d.a.createElement(u.c,{id:"about.enterpriseEditione1",defaultMessage:"Enterprise Edition"}),a=d.a.createElement("div",{className:"form-group"},d.a.createElement(u.c,{id:"about.licensed",defaultMessage:"Licensed to:"})," ",t.Company))),e.TermsOfServiceLink&&(n=d.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:e.TermsOfServiceLink},d.a.createElement(u.c,{id:"about.tos",defaultMessage:"Terms of Service"}))),e.PrivacyPolicyLink&&(s=d.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:e.PrivacyPolicyLink},d.a.createElement(u.c,{id:"about.privacy",defaultMessage:"Privacy Policy"}))),e.TermsOfServiceLink&&e.PrivacyPolicyLink&&(i=d.a.createElement("span",null," - "));let c=d.a.createElement("div",null,d.a.createElement(u.c,{id:"about.buildnumber",defaultMessage:"Build Number:"}),d.a.createElement("span",{id:"buildnumberString"}," "+e.BuildNumber));isNaN(e.BuildNumber)&&(c=null);let g=e.BuildNumber;return isNaN(e.BuildNumber)||(g="ci"),d.a.createElement(m.a,{dialogClassName:"a11y__modal about-modal",show:this.props.show,onHide:this.doHide,role:"dialog","aria-labelledby":"aboutModalLabel"},d.a.createElement(m.a.Header,{closeButton:!0},d.a.createElement(m.a.Title,{componentClass:"h1",id:"aboutModalLabel"},d.a.createElement(u.c,{id:"about.title",values:{appTitle:e.SiteName||"Vue"},defaultMessage:"About {appTitle}"}))),d.a.createElement(m.a.Body,null,d.a.createElement("div",{className:"about-modal__content"},d.a.createElement("div",{className:"about-modal__logo"},d.a.createElement(h.a,null)),d.a.createElement("div",null,d.a.createElement("h3",{className:"about-modal__title"},"Vue"," ",o),d.a.createElement("p",{className:"about-modal__subtitle padding-bottom"},r),d.a.createElement("div",{className:"form-group less"},d.a.createElement("div",null,d.a.createElement(u.c,{id:"about.version",defaultMessage:"Vue Version:"}),d.a.createElement("span",{id:"versionString"}," "+g)),d.a.createElement("div",null,d.a.createElement(u.c,{id:"about.dbversion",defaultMessage:"Database Schema Version:"}),d.a.createElement("span",{id:"dbversionString"}," "+e.Version)),c,d.a.createElement("div",null,d.a.createElement(u.c,{id:"about.database",defaultMessage:"Database:"})," "+e.SQLDriverName)),a)),d.a.createElement("div",{className:"about-modal__footer"},l,d.a.createElement("div",{className:"form-group"},d.a.createElement("div",{className:"about-modal__copyright"},d.a.createElement(u.c,{id:"about.copyright",defaultMessage:"Copyright 2015 - {currentYear} Vue, Inc. All rights reserved",values:{currentYear:(new Date).getFullYear()}})),d.a.createElement("div",{className:"about-modal__links"},n,i,s))),d.a.createElement("div",{className:"about-modal__notice form-group padding-top x2"},d.a.createElement("p",null,d.a.createElement(p.b,{id:"about.notice",defaultMessage:"Vue is made possible by the open source software used in our [server](!https://about.vueteams.com/platform-notice-txt/), [desktop](!https://about.vueteams.com/desktop-notice-txt/) and [mobile](!https://about.vueteams.com/mobile-notice-txt/) apps."}))),d.a.createElement("div",{className:"about-modal__hash"},d.a.createElement("p",null,d.a.createElement(u.c,{id:"about.hash",defaultMessage:"Build Hash:"})," ",e.BuildHash,d.a.createElement("br",null),d.a.createElement(u.c,{id:"about.hashee",defaultMessage:"EE Build Hash:"})," ",e.BuildHashEnterprise,d.a.createElement("br",null),d.a.createElement(u.c,{id:"about.hashwebapp",defaultMessage:"Webapp Build Hash:"})," ",this.props.webappBuildHash||"7c2d816669887e6b8b323b20241639a24e846f85\n"),d.a.createElement("p",null,d.a.createElement(u.c,{id:"about.date",defaultMessage:"Build Date:"})," ",e.BuildDate))))}}g(b,"defaultProps",{show:!1}),g(b,"propTypes",{show:l.a.bool.isRequired,onHide:l.a.func.isRequired,config:l.a.object.isRequired,license:l.a.object.isRequired,webappBuildHash:l.a.string});t.a=Object(n.connect)(function(e){const t=i.s.ABOUT;return{config:Object(s.getConfig)(e),license:Object(s.getLicense)(e),show:Object(o.a)(e,t)}})(b)},1298:function(e,t,a){"use strict";a(21),a(39),a(47),a(8);var n=a(1322),s=a.n(n),i=a(19),o=a(10),r=a(0),l=a(158),c=a(5),d=a.n(c),m=a(246),u=a.n(m),p=a(997),h=a(161),g=a(1027),b=a(901),f=a(14);function E(e,t,a,n=Object(f.r)()){return o.a.dispatch({type:r.e.RECEIVED_PLUGIN_COMPONENT,name:e,data:{id:n,pluginId:t,component:a}}),n}const _=e=>"function"==typeof e?d.a.createElement(e):e;class v{constructor(e){this.id=e}registerRootComponent(e){return E("Root",this.id,e)}registerPopoverUserAttributesComponent(e){return E("PopoverUserAttributes",this.id,e)}registerPopoverUserActionsComponent(e){return E("PopoverUserActions",this.id,e)}registerLeftSidebarHeaderComponent(e){return E("LeftSidebarHeader",this.id,e)}registerBottomTeamSidebarComponent(e){return E("BottomTeamSidebar",this.id,e)}registerPostMessageAttachmentComponent(e){return E("PostMessageAttachment",this.id,e)}registerLinkTooltipComponent(e){return E("LinkTooltip",this.id,e)}registerChannelHeaderButtonAction(e,t,a,n){const s=Object(f.r)(),i={id:s,pluginId:this.id,icon:_(e),action:t,dropdownText:_(a),tooltipText:n};return o.a.dispatch({type:r.e.RECEIVED_PLUGIN_COMPONENT,name:"ChannelHeaderButton",data:i}),o.a.dispatch({type:r.e.RECEIVED_PLUGIN_COMPONENT,name:"MobileChannelHeaderButton",data:i}),s}registerPostTypeComponent(e,t){const a=Object(f.r)();return o.a.dispatch({type:r.e.RECEIVED_PLUGIN_POST_COMPONENT,data:{id:a,pluginId:this.id,type:e,component:t}}),a}registerPostCardTypeComponent(e,t){const a=Object(f.r)();return o.a.dispatch({type:r.e.RECEIVED_PLUGIN_POST_CARD_COMPONENT,data:{id:a,pluginId:this.id,type:e,component:t}}),a}registerPostWillRenderEmbedComponent(e,t,a){const n=Object(f.r)();return o.a.dispatch({type:r.e.RECEIVED_PLUGIN_COMPONENT,name:"PostWillRenderEmbedComponent",data:{id:n,pluginId:this.id,component:t,match:e,toggleable:a}}),n}registerMainMenuAction(e,t,a){const n=Object(f.r)();return o.a.dispatch({type:r.e.RECEIVED_PLUGIN_COMPONENT,name:"MainMenu",data:{id:n,pluginId:this.id,text:_(e),action:t,mobileIcon:_(a)}}),n}registerPostDropdownMenuAction(e,t,a){const n=Object(f.r)();return o.a.dispatch({type:r.e.RECEIVED_PLUGIN_COMPONENT,name:"PostDropdownMenu",data:{id:n,pluginId:this.id,text:_(e),action:t,filter:a}}),n}registerPostDropdownMenuComponent(e){return E("PostDropdownMenuItem",this.id,e)}registerFileUploadMethod(e,t,a){const n=Object(f.r)();return o.a.dispatch({type:r.e.RECEIVED_PLUGIN_COMPONENT,name:"FileUploadMethod",data:{id:n,pluginId:this.id,text:a,action:t,icon:e}}),n}registerFilesWillUploadHook(e){const t=Object(f.r)();return o.a.dispatch({type:r.e.RECEIVED_PLUGIN_COMPONENT,name:"FilesWillUploadHook",data:{id:t,pluginId:this.id,hook:e}}),t}unregisterComponent(e){o.a.dispatch({type:r.e.REMOVED_PLUGIN_COMPONENT,id:e})}unregisterPostTypeComponent(e){o.a.dispatch({type:r.e.REMOVED_PLUGIN_POST_COMPONENT,id:e})}registerReducer(e){u.a.register("plugins-"+this.id,e)}registerWebSocketEventHandler(e,t){Object(p.e)(this.id,e,t)}unregisterWebSocketEventHandler(e){Object(p.j)(this.id,e)}registerReconnectHandler(e){Object(p.d)(this.id,e)}unregisterReconnectHandler(){Object(p.i)(this.id)}registerMessageWillBePostedHook(e){const t=Object(f.r)();return o.a.dispatch({type:r.e.RECEIVED_PLUGIN_COMPONENT,name:"MessageWillBePosted",data:{id:t,pluginId:this.id,hook:e}}),t}registerSlashCommandWillBePostedHook(e){const t=Object(f.r)();return o.a.dispatch({type:r.e.RECEIVED_PLUGIN_COMPONENT,name:"SlashCommandWillBePosted",data:{id:t,pluginId:this.id,hook:e}}),t}registerMessageWillFormatHook(e){const t=Object(f.r)();return o.a.dispatch({type:r.e.RECEIVED_PLUGIN_COMPONENT,name:"MessageWillFormat",data:{id:t,pluginId:this.id,hook:e}}),t}registerFilePreviewComponent(e,t){const a=Object(f.r)();return o.a.dispatch({type:r.e.RECEIVED_PLUGIN_COMPONENT,name:"FilePreview",data:{id:a,pluginId:this.id,override:e,component:t}}),a}registerTranslations(e){o.a.dispatch(Object(g.c)(this.id,e))}registerAdminConsolePlugin(e){o.a.dispatch(Object(b.y)(this.id,e))}unregisterAdminConsolePlugin(){o.a.dispatch(Object(b.H)(this.id))}registerRightHandSidebarComponent(e,t){const a=Object(f.r)();return o.a.dispatch({type:r.e.RECEIVED_PLUGIN_COMPONENT,name:"RightHandSidebarComponent",data:{id:a,pluginId:this.id,component:e,title:t}}),{id:a,showRHSPlugin:Object(h.n)(a),hideRHSPlugin:Object(h.c)(a),toggleRHSPlugin:Object(h.q)(a)}}}async function y(){if("true"!==o.a.getState().entities.general.config.PluginsEnabled)return;const{data:e,error:t}=await C()(o.a.dispatch);t?console.error(t):null!=e&&0!==e.length&&await Promise.all(e.map(e=>T(e).catch(e=>{console.error(e.message)})))}function C(){return async e=>{let t;try{t=await i.Client4.getWebappPlugins()}catch(e){return{error:e}}return e({type:r.e.RECEIVED_WEBAPP_PLUGINS,data:t}),{data:t}}}a.d(t,"a",function(){return y}),a.d(t,"b",function(){return T}),a.d(t,"d",function(){return O}),a.d(t,"c",function(){return S}),window.regeneratorRuntime=s.a,window.plugins={},window.registerPlugin=function(e,t){window.plugins[e]=t};const w={};function T(e){return new Promise((t,a)=>{const n=w[e.id];if(n&&n.webapp.bundle_path===e.webapp.bundle_path)return void t();n&&o.a.dispatch({type:r.e.REMOVED_WEBAPP_PLUGIN,data:e});let s=e.webapp.bundle_path;s.includes("/static/")&&!s.includes("/static/plugins/")&&(s=s.replace("/static/","/static/plugins/")),console.log("Loading "+e.id+" plugin");const i=document.createElement("script");i.id="plugin_"+e.id,i.type="text/javascript",i.src=Object(l.e)()+s,i.onload=function(){!function(e){const t=window.plugins[e.id],a=new v(e.id);t&&t.initialize&&t.initialize(a,o.a)}(e),console.log("Loaded "+e.id+" plugin"),t()},i.onerror=function(){a(new Error("Unable to load bundle for plugin "+e.id))},document.getElementsByTagName("head")[0].appendChild(i),w[e.id]=e})}function O(e){if(!w[e.id])return;console.log("Removing "+e.id+" plugin"),delete w[e.id],o.a.dispatch({type:r.e.REMOVED_WEBAPP_PLUGIN,data:e});const t=window.plugins[e.id];t&&t.uninitialize?t.uninitialize():t&&t.deinitialize&&t.deinitialize(),Object(p.h)(e.id),Object(p.i)(e.id),o.a.dispatch(Object(b.H)(e.id)),Object(g.d)(e.id);const a=document.getElementById("plugin_"+e.id);a&&(a.parentNode.removeChild(a),console.log("Removed "+e.id+" plugin"))}async function S(){if("true"!==o.a.getState().entities.general.config.PluginsEnabled)return;const e=o.a.getState().plugins.plugins,{error:t}=await C()(o.a.dispatch);if(t)return void console.error(t);const a=o.a.getState().plugins.plugins;Object.values(a).forEach(t=>{const a=e[t.id];a&&a.version===t.version||T(t).catch(e=>{console.error(e.message)})}),Object.keys(e).forEach(t=>{if(!a.hasOwnProperty(t)){const a=e[t];o.a.dispatch({type:r.e.REMOVED_WEBAPP_PLUGIN,data:a}),O(a)}})}},1302:function(e){e.exports=JSON.parse('{"about.buildnumber":"Build Number:","about.copyright":"Copyright 2015 - {currentYear} Vue, Inc. All rights reserved","about.database":"Database:","about.date":"Build Date:","about.dbversion":"Database Schema Version:","about.enterpriseEditione1":"Enterprise Edition","about.enterpriseEditionLearn":"Learn more about Enterprise Edition at ","about.enterpriseEditionSt":"Modern communication from behind your firewall.","about.hash":"Build Hash:","about.hashee":"EE Build Hash:","about.hashwebapp":"Webapp Build Hash:","about.licensed":"Licensed to:","about.notice":"Vue is made possible by the open source software used in our [server](!https://about.vueteams.com/platform-notice-txt/), [desktop](!https://about.vueteams.com/desktop-notice-txt/) and [mobile](!https://about.vueteams.com/mobile-notice-txt/) apps.","about.privacy":"Privacy Policy","about.teamEditionLearn":"Join the Vue community at ","about.teamEditionSt":"All your team communication in one place, instantly searchable and accessible anywhere.","about.teamEditiont0":"Team Edition","about.teamEditiont1":"Enterprise Edition","about.title":"About {appTitle}","about.tos":"Terms of Service","about.version":"Vue Version:","access_history.title":"Access History","accessibility.button.attachment":"attachment","accessibility.button.dialog":"dialog","accessibility.sections.centerContent":"message list main region","accessibility.sections.centerFooter":"message input complimentary region","accessibility.sections.channelHeader":"channel header region","accessibility.sections.lhsHeader":"team menu region","accessibility.sections.lhsList":"channel sidebar region","accessibility.sections.rhsContent":"message details complimentary region","accessibility.sections.rhsFooter":"reply input region","accessibility.sidebar.types.mention":"mention","accessibility.sidebar.types.mentions":"mentions","accessibility.sidebar.types.private":"private channel","accessibility.sidebar.types.public":"public channel","accessibility.sidebar.types.unread":"unread","activity_log_modal.android":"Android","activity_log_modal.androidNativeApp":"Android Native App","activity_log_modal.androidNativeClassicApp":"Android Native Classic App","activity_log_modal.desktop":"Native Desktop App","activity_log_modal.iphoneNativeApp":"iPhone Native App","activity_log_modal.iphoneNativeClassicApp":"iPhone Native Classic App","activity_log.activeSessions":"Active Sessions","activity_log.browser":"Browser: {browser}","activity_log.firstTime":"First time active: {date}, {time}","activity_log.lastActivity":"Last activity: {date}, {time}","activity_log.logout":"Logout","activity_log.moreInfo":"More info","activity_log.os":"OS: {os}","activity_log.sessionId":"Session ID: {id}","activity_log.sessionsDescription":"Sessions are created when you log in to a new browser on a device. Sessions let you use Vue without having to log in again for a time period specified by the System Admin. If you want to log out sooner, use the \'Logout\' button below to end a session.","add_channels_to_scheme.title":"Add Channels To **Channel Selection** List","add_command.autocomplete":"Autocomplete","add_command.autocomplete.help":"(Optional) Show slash command in autocomplete list.","add_command.autocompleteDescription":"Autocomplete Description","add_command.autocompleteDescription.help":"(Optional) Short description of slash command for the autocomplete list.","add_command.autocompleteDescription.placeholder":"Example: \\"Returns search results for patient records\\"","add_command.autocompleteHint":"Autocomplete Hint","add_command.autocompleteHint.help":"(Optional) Arguments associated with your slash command, displayed as help in the autocomplete list.","add_command.autocompleteHint.placeholder":"Example: [Patient Name]","add_command.cancel":"Cancel","add_command.description":"Description","add_command.description.help":"Description for your incoming webhook.","add_command.displayName":"Title","add_command.displayName.help":"Choose a title to be displayed on the slash command settings page. Maximum 64 characters.","add_command.doneHelp":"Your slash command has been set up. The following token will be sent in the outgoing payload. Please use it to verify the request came from your Vue team (see [documentation](!https://docs.vueteams.com/developer/slash-commands.html) for further details).","add_command.iconUrl":"Response Icon","add_command.iconUrl.help":"(Optional) Choose a profile picture override for the post responses to this slash command. Enter the URL of a .png or .jpg file at least 128 pixels by 128 pixels.","add_command.iconUrl.placeholder":"https://www.example.com/myicon.png","add_command.method":"Request Method","add_command.method.get":"GET","add_command.method.help":"The type of command request issued to the Request URL.","add_command.method.post":"POST","add_command.save":"Save","add_command.saving":"Saving...","add_command.token":"**Token**: {token}","add_command.trigger":"Command Trigger Word","add_command.trigger.help":"Trigger word must be unique, and cannot begin with a slash or contain any spaces.","add_command.trigger.helpExamples":"Examples: client, employee, patient, weather","add_command.trigger.helpReserved":"Reserved: {link}","add_command.trigger.helpReservedLinkText":"see list of built-in slash commands","add_command.trigger.placeholder":"Command trigger e.g. \\"hello\\" not including the slash","add_command.triggerInvalidLength":"A trigger word must contain between {min} and {max} characters","add_command.triggerInvalidSlash":"A trigger word cannot begin with a /","add_command.triggerInvalidSpace":"A trigger word must not contain spaces","add_command.triggerRequired":"A trigger word is required","add_command.url":"Request URL","add_command.url.help":"The callback URL to receive the HTTP POST or GET event request when the slash command is run.","add_command.url.placeholder":"Must start with http:// or https://","add_command.urlRequired":"A request URL is required","add_command.username":"Response Username","add_command.username.help":"(Optional) Choose a username override for responses for this slash command. Usernames can consist of up to 22 characters consisting of lowercase letters, numbers and they symbols \\"-\\", \\"_\\", and \\".\\" .","add_command.username.placeholder":"Username","add_emoji.cancel":"Cancel","add_emoji.header":"Add","add_emoji.image":"Image","add_emoji.image.button":"Select","add_emoji.image.help":"Choose the image for your emoji. The image can be a gif, png, or jpeg file with a max size of 1 MB. Dimensions will automatically resize to fit 128 by 128 pixels but keeping aspect ratio.","add_emoji.imageRequired":"An image is required for the emoji","add_emoji.name":"Name","add_emoji.name.help":"Choose a name for your emoji made of up to 64 characters consisting of lowercase letters, numbers, and the symbols \'-\' and \'_\'.","add_emoji.nameInvalid":"An emoji\'s name can only contain numbers, letters, and the symbols \'-\' and \'_\'.","add_emoji.nameRequired":"A name is required for the emoji","add_emoji.nameTaken":"This name is already in use by a system emoji. Please choose another name.","add_emoji.preview":"Preview","add_emoji.preview.sentence":"This is a sentence with {image} in it.","add_emoji.save":"Save","add_emoji.saving":"Saving...","add_groups_to_channel.title":"Add New Groups To {channelName} Channel","add_groups_to_team.title":"Add New Groups To {teamName} Team","add_incoming_webhook.cancel":"Cancel","add_incoming_webhook.channel":"Channel","add_incoming_webhook.channel.help":"The default public or private channel that receives the webhook payloads. You must belong to the private channel when setting up the webhook.","add_incoming_webhook.channelLocked":"Lock to this channel","add_incoming_webhook.channelLocked.help":"If set, the incoming webhook can only post to the channel selected above.","add_incoming_webhook.channelRequired":"A valid channel is required","add_incoming_webhook.description":"Description","add_incoming_webhook.description.help":"Description for your incoming webhook.","add_incoming_webhook.displayName":"Title","add_incoming_webhook.displayName.help":"Choose a title to be displayed on the webhook settings page. Maximum 64 characters.","add_incoming_webhook.doneHelp":"Your incoming webhook has been set up. Please send data to the following URL (see [documentation](!https://docs.vueteams.com/developer/webhooks-incoming.html) for further details).","add_incoming_webhook.icon_url":"Profile Picture","add_incoming_webhook.icon_url.help":"Choose the profile picture this integration will use when posting. Enter the URL of a .png or .jpg file at least 128 pixels by 128 pixels.","add_incoming_webhook.save":"Save","add_incoming_webhook.saving":"Saving...","add_incoming_webhook.url":"**URL**: {url}","add_incoming_webhook.username":"Username","add_incoming_webhook.username.help":"Choose the username this integration will post as. Usernames can be up to 22 characters, and may contain lowercase letters, numbers and the symbols \\"-\\", \\"_\\", and \\".\\" .","add_oauth_app.callbackUrls.help":"The redirect URIs to which the service will redirect users after accepting or denying authorization of your application, and which will handle authorization codes or access tokens. Must be a valid URL and start with http:// or https://.","add_oauth_app.callbackUrlsRequired":"One or more callback URLs are required","add_oauth_app.clientId":"**Client ID**: {id}","add_oauth_app.clientSecret":"**Client Secret**: {secret}","add_oauth_app.description.help":"Description for your OAuth 2.0 application.","add_oauth_app.descriptionRequired":"Description for the OAuth 2.0 application is required.","add_oauth_app.doneHelp":"Your OAuth 2.0 application has been set up. Please use the following Client ID and Client Secret when requesting authorization for your application (see [documentation](!https://docs.vueteams.com/developer/oauth-2-0-applications.html) for further details).","add_oauth_app.doneUrlHelp":"The following are your authorized redirect URL(s).","add_oauth_app.header":"Add","add_oauth_app.homepage.help":"The URL for the homepage of the OAuth 2.0 application. Make sure you use HTTP or HTTPS in your URL depending on your server configuration.","add_oauth_app.homepageRequired":"Homepage for the OAuth 2.0 application is required.","add_oauth_app.icon.help":"(Optional) The URL of the image used for your OAuth 2.0 application. Make sure you use HTTP or HTTPS in your URL.","add_oauth_app.name.help":"Display name for your OAuth 2.0 application made of up to 64 characters.","add_oauth_app.nameRequired":"Name for the OAuth 2.0 application is required.","add_oauth_app.trusted.help":"When true, the OAuth 2.0 application is considered trusted by the Vue server and doesn\'t require the user to accept authorization. When false, an additional window will appear, asking the user to accept or deny the authorization.","add_oauth_app.url":"**URL(s)**: {url}","add_outgoing_webhook.callbackUrls":"Callback URLs (One Per Line)","add_outgoing_webhook.callbackUrls.help":"The URL that messages will be sent to. If the URL is private, add it as a {link}.","add_outgoing_webhook.callbackUrls.helpLinkText":"trusted internal connection","add_outgoing_webhook.callbackUrlsRequired":"One or more callback URLs are required","add_outgoing_webhook.cancel":"Cancel","add_outgoing_webhook.channel":"Channel","add_outgoing_webhook.channel.help":"Public channel that delivers payload to webhook. Optional if at least one Trigger Word is specified.","add_outgoing_webhook.content_Type":"Content Type","add_outgoing_webhook.contentType.help1":"Choose the content type by which the request will be sent.","add_outgoing_webhook.contentType.help2":"If application/x-www-form-urlencoded is chosen, the server will encode the parameters in a URL format in the request body.","add_outgoing_webhook.contentType.help3":"If application/json is chosen, the server will format the request body as JSON.","add_outgoing_webhook.description":"Description","add_outgoing_webhook.description.help":"Description for your outgoing webhook.","add_outgoing_webhook.displayName":"Title","add_outgoing_webhook.displayName.help":"Choose a title to be displayed on the webhook settings page. Maximum 64 characters.","add_outgoing_webhook.doneHelp":"Your outgoing webhook has been set up. The following token will be sent in the outgoing payload. Please use it to verify the request came from your Vue team (see [documentation](!https://docs.vueteams.com/developer/webhooks-outgoing.html) for further details).","add_outgoing_webhook.icon_url":"Profile Picture","add_outgoing_webhook.icon_url.help":"Choose the profile picture this integration will use when posting. Enter the URL of a .png or .jpg file at least 128 pixels by 128 pixels.","add_outgoing_webhook.save":"Save","add_outgoing_webhook.saving":"Saving...","add_outgoing_webhook.token":"**Token**: {token}","add_outgoing_webhook.token.message":"Make sure to add this bot account to teams and channels you want it to interact in. See [documentation](https://mattermost.com/pl/default-bot-accounts) to learn more.","add_outgoing_webhook.triggerWords":"Trigger Words (One Per Line)","add_outgoing_webhook.triggerWords.help":"Messages that start with one of the specified words will trigger the outgoing webhook. Optional if Channel is selected.","add_outgoing_webhook.triggerWordsOrChannelRequired":"A valid channel or a list of trigger words is required","add_outgoing_webhook.triggerWordsTriggerWhen":"Trigger When","add_outgoing_webhook.triggerWordsTriggerWhen.help":"Choose when to trigger the outgoing webhook; if the first word of a message matches a Trigger Word exactly, or if it starts with a Trigger Word.","add_outgoing_webhook.triggerWordsTriggerWhenFullWord":"First word matches a trigger word exactly","add_outgoing_webhook.triggerWordsTriggerWhenStartsWith":"First word starts with a trigger word","add_outgoing_webhook.username":"Username","add_outgoing_webhook.username.help":"Choose the username this integration will post as. Usernames can be up to 22 characters, and may contain lowercase letters, numbers and the symbols \\"-\\", \\"_\\", and \\".\\".","add_teams_to_scheme.confirmation.accept":"Yes, Move Team","add_teams_to_scheme.confirmation.message":"This team is already selected in another team scheme, are you sure you want to move it to this team scheme?","add_teams_to_scheme.confirmation.title":"Team Override Scheme Change?","add_teams_to_scheme.title":"Add Teams To **Team Selection** List","add_user_to_channel_modal.add":"Add","add_user_to_channel_modal.cancel":"Cancel","add_user_to_channel_modal.help":"Type to find a channel. Use ↑↓ to browse, ↵ to select, ESC to dismiss.","add_user_to_channel_modal.membershipExistsError":"{name} is already a member of that channel","add_user_to_channel_modal.title":"Add {name} to a channel","admin.advance.cluster":"High Availability","admin.advance.metrics":"Performance Monitoring","admin.audits.reload":"Reload User Activity Logs","admin.authentication.email":"Email Authentication","admin.authentication.gitlab":"GitLab","admin.authentication.guest_access":"Guest Access (Beta)","admin.authentication.ldap":"AD/LDAP","admin.authentication.mfa":"Multi-factor Authentication","admin.authentication.oauth":"OAuth 2.0","admin.authentication.saml":"SAML 2.0","admin.authentication.signup":"Signup","admin.banner.heading":"Note:","admin.channel_settings.channel_detail.channel_configuration":"Channel Configuration","admin.channel_settings.channel_detail.channelName":"**Name**","admin.channel_settings.channel_detail.channelTeam":"**Team**","admin.channel_settings.channel_detail.groupsDescription":"Group members will be added to the channel based on your sync schedule.","admin.channel_settings.channel_detail.groupsTitle":"Groups","admin.channel_settings.channel_detail.manageDescription":"Choose between inviting members manually or syncing members automatically from groups.","admin.channel_settings.channel_detail.manageTitle":"Channel Management","admin.channel_settings.channel_detail.profileDescription":"Summary of the channel, including the channel name.","admin.channel_settings.channel_detail.profileTitle":"Channel Profile","admin.channel_settings.channel_detail.syncedGroupsDescription":"Add and remove team members based on their group membership on the next scheduled sync.","admin.channel_settings.channel_detail.syncedGroupsTitle":"Synced Groups","admin.channel_settings.channel_details.add_group":"Add Group","admin.channel_settings.channel_details.isPublic":"Public channel or private channel","admin.channel_settings.channel_details.isPublicDescr":"If `public` the channel is discoverable and any user can join, or if `private` invitations are required. Toggle to convert public channels to private.  Converting private channels to public will be available in a future release.","admin.channel_settings.channel_details.syncGroupMembers":"Sync Group Members","admin.channel_settings.channel_details.syncGroupMembersDescr":"When enabled, adding and removing users from groups will add or remove them from this channel. The only way of inviting members to this channel is by adding the groups they belong to. [Learn More](!https://www.vueteams.com/pl/default-ldap-group-constrained-team-channel.html)","admin.channel_settings.channel_list.managementHeader":"Management","admin.channel_settings.channel_list.nameHeader":"Name","admin.channel_settings.channel_list.no_channels_found":"No channels found","admin.channel_settings.channel_list.teamHeader":"Team","admin.channel_settings.channel_row.configure":"Edit","admin.channel_settings.description":"Showing {startCount, number} - {endCount, number} of {total, number} channels. Manage channel settings.","admin.channel_settings.groupsPageTitle":"{siteName} Channels","admin.channel_settings.title":"Channels","admin.cluster.ClusterName":"Cluster Name:","admin.cluster.ClusterNameDesc":"The cluster to join by name.  Only nodes with the same cluster name will join together.  This is to support Blue-Green deployments or staging pointing to the same database.","admin.cluster.ClusterNameEx":"E.g.: \\"Production\\" or \\"Staging\\"","admin.cluster.enableDescription":"When true, Vue will run in High Availability mode. Please see [documentation](!http://docs..vueteams.com/deployment/cluster.html) to learn more about configuring High Availability for Vue.","admin.cluster.enableTitle":"Enable High Availability Mode:","admin.cluster.GossipPort":"Gossip Port:","admin.cluster.GossipPortDesc":"The port used for the gossip protocol.  Both UDP and TCP should be allowed on this port.","admin.cluster.GossipPortEx":"E.g.: \\"8074\\"","admin.cluster.loadedFrom":"This configuration file was loaded from Node ID {clusterId}. Please see the Troubleshooting Guide in our [documentation](!http://docs..vueteams.com/deployment/cluster.html) if you are accessing the System Console through a load balancer and experiencing issues.","admin.cluster.noteDescription":"Changing properties in this section will require a server restart before taking effect.","admin.cluster.OverrideHostname":"Override Hostname:","admin.cluster.OverrideHostnameDesc":"The default value of <blank> will attempt to get the Hostname from the OS or use the IP Address.  You can override the hostname of this server with this property.  It is not recommended to override the Hostname unless needed. This property can also be set to a specific IP Address if needed.","admin.cluster.OverrideHostnameEx":"E.g.: \\"app-server-01\\"","admin.cluster.should_not_change":"WARNING: These settings may not sync with the other servers in the cluster. High Availability inter-node communication will not start until you modify the config.json to be identical on all servers and restart Vue. Please see the [documentation](!http://docs..vueteams.com/deployment/cluster.html) on how to add or remove a server from the cluster. If you are accessing the System Console through a load balancer and experiencing issues, please see the Troubleshooting Guide in our [documentation](!http://docs..vueteams.com/deployment/cluster.html).","admin.cluster.status_table.config_hash":"Config File MD5","admin.cluster.status_table.hostname":"Hostname","admin.cluster.status_table.reload":" Reload Cluster Status","admin.cluster.status_table.status":"Status","admin.cluster.status_table.url":"Gossip Address","admin.cluster.status_table.version":"Version","admin.cluster.StreamingPort":"Streaming Port:","admin.cluster.StreamingPortDesc":"The port used for streaming data between servers.","admin.cluster.StreamingPortEx":"E.g.: \\"8075\\"","admin.cluster.unknown":"unknown","admin.cluster.UseExperimentalGossip":"Use Experimental Gossip:","admin.cluster.UseExperimentalGossipDesc":"When true, the server will attempt to communicate via the gossip protocol over the gossip port.  When false the server will attempt to communicate over the streaming port. When false the gossip port and protocol are still used to determine cluster health.","admin.cluster.UseIpAddress":"Use IP Address:","admin.cluster.UseIpAddressDesc":"When true, the cluster will attempt to communicate via IP Address vs using the hostname.","admin.compliance_reports.desc":"Job Name:","admin.compliance_reports.desc_placeholder":"E.g. \\"Audit 445 for HR\\"","admin.compliance_reports.emails":"Emails:","admin.compliance_reports.emails_placeholder":"E.g. \\"bill@example.com, bob@example.com\\"","admin.compliance_reports.from":"From:","admin.compliance_reports.from_placeholder":"E.g. \\"2016-03-11\\"","admin.compliance_reports.keywords":"Keywords:","admin.compliance_reports.keywords_placeholder":"E.g. \\"shorting stock\\"","admin.compliance_reports.reload":"Reload Completed Compliance Reports","admin.compliance_reports.run":"Run Compliance Report","admin.compliance_reports.title":"Compliance Reports","admin.compliance_reports.to":"To:","admin.compliance_reports.to_placeholder":"E.g. \\"2016-03-15\\"","admin.compliance_table.desc":"Description","admin.compliance_table.download":"Download","admin.compliance_table.params":"Params","admin.compliance_table.records":"Records","admin.compliance_table.status":"Status","admin.compliance_table.timestamp":"Timestamp","admin.compliance_table.type":"Type","admin.compliance_table.userId":"Requested By","admin.compliance.complianceMonitoring":"Compliance Monitoring","admin.compliance.directoryDescription":"Directory to which compliance reports are written. If blank, will be set to ./data/.","admin.compliance.directoryExample":"E.g.: \\"./data/\\"","admin.compliance.directoryTitle":"Compliance Report Directory:","admin.compliance.enableDailyDesc":"When true, Vue will generate a daily compliance report.","admin.compliance.enableDailyTitle":"Enable Daily Report:","admin.compliance.enableDesc":"When true, Vue allows compliance reporting from the **Compliance and Auditing** tab. See [documentation](!https://docs.vueteams.com/administration/compliance.html) to learn more.","admin.compliance.enableTitle":"Enable Compliance Reporting:","admin.compliance.newComplianceExportBanner":"This feature is replaced by a new [Compliance Export]({siteURL}/admin_console/compliance/export) feature, and will be removed in a future release. We recommend migrating to the new system.","admin.complianceExport.createJob.help":"Initiates a Compliance Export job immediately.","admin.complianceExport.createJob.title":"Run Compliance Export Job Now","admin.complianceExport.exportFormat.actiance":"Actiance XML","admin.complianceExport.exportFormat.csv":"CSV","admin.complianceExport.exportFormat.description":"Format of the compliance export. Corresponds to the system that you want to import the data into.\\n \\nFor Actiance XML, compliance export files are written to the \\"exports\\" subdirectory of the configured [Local Storage Directory]({siteURL}/admin_console/environment/file_storage). For Global Relay EML, they are emailed to the configured email address.","admin.complianceExport.exportFormat.globalrelay":"Global Relay EML","admin.complianceExport.exportFormat.title":"Export Format:","admin.complianceExport.exportJobStartTime.description":"Set the start time of the daily scheduled compliance export job. Choose a time when fewer people are using your system. Must be a 24-hour time stamp in the form HH:MM.","admin.complianceExport.exportJobStartTime.example":"E.g.: \\"02:00\\"","admin.complianceExport.exportJobStartTime.title":"Compliance Export time:","admin.complianceExport.globalRelayCustomerType.a10.description":"A10/Type 10","admin.complianceExport.globalRelayCustomerType.a9.description":"A9/Type 9","admin.complianceExport.globalRelayCustomerType.description":"Type of Global Relay customer account your organization has.","admin.complianceExport.globalRelayCustomerType.title":"Global Relay Customer Account:","admin.complianceExport.globalRelayEmailAddress.description":"The email address your Global Relay server monitors for incoming compliance exports.","admin.complianceExport.globalRelayEmailAddress.example":"E.g.: \\"globalrelay@mattermost.com\\"","admin.complianceExport.globalRelayEmailAddress.title":"Global Relay Email Address:","admin.complianceExport.globalRelaySmtpPassword.description":"The password associated with the SMTP username.","admin.complianceExport.globalRelaySmtpPassword.example":"E.g.: \\"globalRelayPassword\\"","admin.complianceExport.globalRelaySmtpPassword.title":"Global Relay SMTP Password:","admin.complianceExport.globalRelaySmtpUsername.description":"The username for authenticating to the Global Relay SMTP server.","admin.complianceExport.globalRelaySmtpUsername.example":"E.g.: \\"globalRelayUser\\"","admin.complianceExport.globalRelaySmtpUsername.title":"Global Relay SMTP Username:","admin.complianceExport.messagesExportedCount":"{count} messages exported.","admin.complianceExport.title":"Compliance Export (Beta)","admin.complianceMonitoring.userActivityLogsTitle":"User Activity Logs","admin.connectionSecurityNone":"None","admin.connectionSecurityNoneDescription":"Vue will connect over an insecure connection.","admin.connectionSecurityStart":"STARTTLS","admin.connectionSecurityStartDescription":"Takes an existing insecure connection and attempts to upgrade it to a secure connection using TLS.","admin.connectionSecurityTitle":"Connection Security:","admin.connectionSecurityTls":"TLS","admin.connectionSecurityTlsDescription":"Encrypts the communication between Vue and your server.","admin.customization.androidAppDownloadLinkDesc":"Add a link to download the Android app. Users who access the site on a mobile web browser will be prompted with a page giving them the option to download the app. Leave this field blank to prevent the page from appearing.","admin.customization.androidAppDownloadLinkTitle":"Android App Download Link:","admin.customization.announcement.allowBannerDismissalDesc":"When true, users can dismiss the banner until its next update. When false, the banner is permanently visible until it is turned off by the System Admin.","admin.customization.announcement.allowBannerDismissalTitle":"Allow Banner Dismissal:","admin.customization.announcement.bannerColorTitle":"Banner Color:","admin.customization.announcement.bannerTextColorTitle":"Banner Text Color:","admin.customization.announcement.bannerTextDesc":"Text that will appear in the announcement banner.","admin.customization.announcement.bannerTextTitle":"Banner Text:","admin.customization.announcement.enableBannerDesc":"Enable an announcement banner across all teams.","admin.customization.announcement.enableBannerTitle":"Enable Announcement Banner:","admin.customization.appDownloadLinkDesc":"Add a link to a download page for the Vue apps. When a link is present, an option to \\"Download Vue Apps\\" will be added in the Main Menu so users can find the download page. Leave this field blank to hide the option from the Main Menu.","admin.customization.appDownloadLinkTitle":"Vue Apps Download Page Link:","admin.customization.customUrlSchemes":"Custom URL Schemes:","admin.customization.customUrlSchemesDesc":"Allows message text to link if it begins with any of the comma-separated URL schemes listed. By default, the following schemes will create links: \\"http\\", \\"https\\", \\"ftp\\", \\"tel\\", and \\"mailto\\".","admin.customization.customUrlSchemesPlaceholder":"E.g.: \\"git,smtp\\"","admin.customization.enableCustomEmojiDesc":"Enable users to create custom emoji for use in messages. When enabled, Custom Emoji settings can be accessed by switching to a team and clicking the three dots above the channel sidebar, and selecting \\"Custom Emoji\\".","admin.customization.enableCustomEmojiTitle":"Enable Custom Emoji:","admin.customization.enableEmojiPickerDesc":"The emoji picker allows users to select emoji to add as reactions or use in messages. Enabling the emoji picker with a large number of custom emoji may slow down performance.","admin.customization.enableEmojiPickerTitle":"Enable Emoji Picker:","admin.customization.enableGifPickerDesc":"Allow users to select GIFs from the emoji picker via a Gfycat integration.","admin.customization.enableGifPickerTitle":"Enable GIF Picker:","admin.customization.enableLinkPreviewsDesc":"Display a preview of website content, image links and YouTube links below the message when available. The server must be connected to the internet and have access through the firewall (if applicable) to the websites from which previews are expected. Users can disable these previews from Account Settings > Display > Website Link Previews.","admin.customization.enableLinkPreviewsTitle":"Enable Link Previews:","admin.customization.enableSVGsDesc":"Enable previews for SVG file attachments and allow them to appear in messages.","admin.customization.enableSVGsTitle":"Enable SVGs:","admin.customization.gfycatApiKey":"Gfycat API Key:","admin.customization.gfycatApiKeyDescription":"Request an API key at [https://developers.gfycat.com/signup/#](!https://developers.gfycat.com/signup/#). Enter the client ID you receive via email to this field. When blank, uses the default API key provided by Gfycat.","admin.customization.gfycatApiSecret":"Gfycat API Secret:","admin.customization.gfycatApiSecretDescription":"The API secret generated by Gfycat for your API key. When blank, uses the default API secret provided by Gfycat.","admin.customization.iosAppDownloadLinkDesc":"Add a link to download the iOS app. Users who access the site on a mobile web browser will be prompted with a page giving them the option to download the app. Leave this field blank to prevent the page from appearing.","admin.customization.iosAppDownloadLinkTitle":"iOS App Download Link:","admin.data_retention.confirmChangesModal.clarification":"Once deleted, messages and files cannot be retrieved.","admin.data_retention.confirmChangesModal.confirm":"Confirm Settings","admin.data_retention.confirmChangesModal.description":"Are you sure you want to apply the following data retention policy:","admin.data_retention.confirmChangesModal.description.itemFileDeletion":"All files will be permanently deleted after {days} days.","admin.data_retention.confirmChangesModal.description.itemFileIndefinite":"All files will be retained indefinitely.","admin.data_retention.confirmChangesModal.description.itemMessageDeletion":"All messages will be permanently deleted after {days} days.","admin.data_retention.confirmChangesModal.description.itemMessageIndefinite":"All messages will be retained indefinitely.","admin.data_retention.confirmChangesModal.title":"Confirm data retention policy","admin.data_retention.createJob.help":"Initiates a Data Retention deletion job immediately.","admin.data_retention.createJob.title":"Run Deletion Job Now","admin.data_retention.deletionJobStartTime.description":"Set the start time of the daily scheduled data retention job. Choose a time when fewer people are using your system. Must be a 24-hour time stamp in the form HH:MM.","admin.data_retention.deletionJobStartTime.example":"E.g.: \\"02:00\\"","admin.data_retention.deletionJobStartTime.title":"Data Deletion Time:","admin.data_retention.enableFileDeletion.description":"Set how long Vue keeps file uploads in channels and direct messages.","admin.data_retention.enableFileDeletion.title":"File Retention:","admin.data_retention.enableMessageDeletion.description":"Set how long Vue keeps messages in channels and direct messages.","admin.data_retention.enableMessageDeletion.title":"Message Retention:","admin.data_retention.fileRetentionDays.description":"Set how many days file uploads are kept in Vue. Files older than the duration you set will be deleted nightly. The minimum time is one day.","admin.data_retention.fileRetentionDays.example":"E.g.: \\"60\\"","admin.data_retention.keepFilesForTime":"Keep files for a set amount of time","admin.data_retention.keepFilesIndefinitely":"Keep all files indefinitely","admin.data_retention.keepMessageForTime":"Keep messages for a set amount of time","admin.data_retention.keepMessagesIndefinitely":"Keep all messages indefinitely","admin.data_retention.messageRetentionDays.description":"Set how many days messages are kept in Vue. Messages, including file attachments older than the duration you set will be deleted nightly. The minimum time is one day.","admin.data_retention.messageRetentionDays.example":"E.g.: \\"60\\"","admin.data_retention.note.description":"Caution: Once a message or a file is deleted, the action is irreversible. Please be careful when setting up a custom data retention policy. See {documentationLink} to learn more.","admin.data_retention.note.description.documentationLinkText":"documentation","admin.data_retention.title":"Data Retention Policy","admin.database.title":"Database","admin.developer.title":"Developer Settings","admin.elasticsearch.bulkIndexingTitle":"Bulk Indexing:","admin.elasticsearch.connectionUrlDescription":"The address of the Elasticsearch server. {documentationLink}","admin.elasticsearch.connectionUrlExample":"E.g.: \\"https://elasticsearch.example.org:9200\\"","admin.elasticsearch.connectionUrlExample.documentationLinkText":"Please see documentation with server setup instructions.","admin.elasticsearch.connectionUrlTitle":"Server Connection Address:","admin.elasticsearch.createJob.help":"All users, channels and posts in the database will be indexed from oldest to newest. Elasticsearch is available during indexing but search results may be incomplete until the indexing job is complete.","admin.elasticsearch.createJob.title":"Index Now","admin.elasticsearch.elasticsearch_test_button":"Test Connection","admin.elasticsearch.enableAutocompleteDescription":"Requires a successful connection to the Elasticsearch server. When true, Elasticsearch will be used for all autocompletion queries on users and channels using the latest index. Autocompletion results may be incomplete until a bulk index of the existing users and channels database is finished. When false, database autocomplete is used.","admin.elasticsearch.enableAutocompleteTitle":"Enable Elasticsearch for autocomplete queries:","admin.elasticsearch.enableIndexingDescription":"When true, indexing of new posts occurs automatically. Search queries will use database search until \\"Enable Elasticsearch for search queries\\" is enabled. {documentationLink}","admin.elasticsearch.enableIndexingDescription.documentationLinkText":"Learn more about Elasticsearch in our documentation.","admin.elasticsearch.enableIndexingTitle":"Enable Elasticsearch Indexing:","admin.elasticsearch.enableSearchingDescription":"Requires a successful connection to the Elasticsearch server. When true, Elasticsearch will be used for all search queries using the latest index. Search results may be incomplete until a bulk index of the existing post database is finished. When false, database search is used.","admin.elasticsearch.enableSearchingTitle":"Enable Elasticsearch for search queries:","admin.elasticsearch.password":"E.g.: \\"yourpassword\\"","admin.elasticsearch.passwordDescription":"(Optional) The password to authenticate to the Elasticsearch server.","admin.elasticsearch.passwordTitle":"Server Password:","admin.elasticsearch.percentComplete":"{percent}% Complete","admin.elasticsearch.purgeIndexesButton":"Purge Indexes","admin.elasticsearch.purgeIndexesButton.error":"Failed to purge indexes: {error}","admin.elasticsearch.purgeIndexesButton.label":"Purge Indexes:","admin.elasticsearch.purgeIndexesButton.success":"Indexes purged successfully.","admin.elasticsearch.purgeIndexesHelpText":"Purging will entirely remove the indexes on the Elasticsearch server. Search results may be incomplete until a bulk index of the existing database is rebuilt.","admin.elasticsearch.skipTLSVerificationDescription":"When true, Vue will not require the Elasticsearch certificate to be signed by a trusted Certificate Authority.","admin.elasticsearch.skipTLSVerificationTitle":"Skip TLS Verification:","admin.elasticsearch.sniffDescription":"When true, sniffing finds and connects to all data nodes in your cluster automatically.","admin.elasticsearch.sniffTitle":"Enable Cluster Sniffing:","admin.elasticsearch.testConfigSuccess":"Test successful. Configuration saved.","admin.elasticsearch.testHelpText":"Tests if the Vue server can connect to the Elasticsearch server specified. Testing the connection only saves the configuration if the test is successful. See log file for more detailed error messages.","admin.elasticsearch.title":"Elasticsearch","admin.elasticsearch.usernameDescription":"(Optional) The username to authenticate to the Elasticsearch server.","admin.elasticsearch.usernameExample":"E.g.: \\"elastic\\"","admin.elasticsearch.usernameTitle":"Server Username:","admin.email.agreeHPNS":" I understand and accept the Vue Hosted Push Notification Service [Terms of Service](!https://about.vueteams.com/hpns-terms/) and [Privacy Policy](!https://about.vueteams.com/hpns-privacy/).","admin.email.allowEmailSignInDescription":"When true, Vue allows users to sign in using their email and password.","admin.email.allowEmailSignInTitle":"Enable sign-in with email: ","admin.email.allowSignupDescription":"When true, Vue allows account creation using email and password. This value should be false only when you want to limit sign up to a single sign-on service like AD/LDAP, SAML or GitLab.","admin.email.allowSignupTitle":"Enable account creation with email: ","admin.email.allowUsernameSignInDescription":"When true, users with email login can sign in using their username and password. This setting does not affect AD/LDAP login.","admin.email.allowUsernameSignInTitle":"Enable sign-in with username: ","admin.email.easHelp":"Learn more about compiling and deploying your own mobile apps from an [Enterprise App Store](!https://about.vueteams.com/default-enterprise-app-store).","admin.email.mhpns":"Use HPNS connection with uptime SLA to send notifications to iOS and Android apps","admin.email.mhpnsHelp":"Download [Vue iOS app](!https://about.vueteams.com/mattermost-ios-app/) from iTunes. Download [Vue Android app](!https://about.vueteams.com/mattermost-android-app/) from Google Play. Learn more about [HPNS](!https://about.vueteams.com/default-hpns/).","admin.email.mtpns":"Use TPNS connection to send notifications to iOS and Android apps","admin.email.mtpnsHelp":"Download [Vue iOS app](!https://about.vueteams.com/mattermost-ios-app/) from iTunes. Download [Vue Android app](!https://about.vueteams.com/mattermost-android-app/) from Google Play. Learn more about [TPNS](!https://about.vueteams.com/default-tpns/).","admin.email.pushOff":"Do not send push notifications","admin.email.pushOffHelp":"Please see [documentation on push notifications](!https://about.vueteams.com/default-mobile-push-notifications/) to learn more about setup options.","admin.email.pushServerEx":"E.g.: \\"https://push-test.vueteams.com\\"","admin.email.pushServerTitle":"Push Notification Server:","admin.email.pushTitle":"Enable Push Notifications: ","admin.email.requireVerificationDescription":"Typically set to true in production. When true, Vue requires email verification after account creation prior to allowing login. Developers may set this field to false to skip sending verification emails for faster development.","admin.email.requireVerificationTitle":"Require Email Verification: ","admin.email.selfPush":"Manually enter Push Notification Service location","admin.environment.fileStorage":"File Storage","admin.environment.imageProxy":"Image Proxy","admin.environment.notifications":"Notifications","admin.environment.notifications.contents.full":"Send full message contents","admin.environment.notifications.contents.generic":"Send generic description with only sender name","admin.environment.notifications.contents.help":"**Send full message contents** - Sender name and channel are included in email notifications. Typically used for compliance reasons if Vue contains confidential information and policy dictates it cannot be stored in email.\\n  **Send generic description with only sender name** - Only the name of the person who sent the message, with no information about channel name or message contents are included in email notifications. Typically used for compliance reasons if Vue contains confidential information and policy dictates it cannot be stored in email.","admin.environment.notifications.contents.label":"Email Notification Contents:","admin.environment.notifications.enable.help":"Typically set to true in production. When true, Vue attempts to send email notifications. When false, email invitations and user account setting change emails are still sent as long as the SMTP server is configured. Developers may set this field to false to skip email setup for faster development.","admin.environment.notifications.enable.label":"Enable Email Notifications:","admin.environment.notifications.enableConfirmNotificationsToChannel.help":"When true, users will be prompted to confirm when posting @channel and @all in channels with over five members. When false, no confirmation is required.","admin.environment.notifications.enableConfirmNotificationsToChannel.label":"Show @channel and @all confirmation dialog:","admin.environment.notifications.enableEmailBatching.help":"When true, users will have email notifications for multiple direct messages and mentions combined into a single email. Batching will occur at a default interval of 15 minutes, configurable in Account Settings > Notifications.","admin.environment.notifications.enableEmailBatching.label":"Enable Email Batching:","admin.environment.notifications.enablePreviewModeBanner.help":"When true, the Preview Mode banner is displayed so users are aware that email notifications are disabled. When false, the Preview Mode banner is not displayed to users.","admin.environment.notifications.enablePreviewModeBanner.label":"Enable Preview Mode Banner:","admin.environment.notifications.feedbackEmail.help":"Email address displayed on email account used when sending notification emails from Vue.","admin.environment.notifications.feedbackEmail.label":"Notification From Address:","admin.environment.notifications.feedbackEmail.placeholder":"Ex: \\"mattermost@yourcompany.com\\", \\"admin@yourcompany.com\\"","admin.environment.notifications.feedbackOrganization.help":"Organization name and address displayed on email notifications from Vue, such as \\"© ABC Corporation, 565 Knight Way, Palo Alto, California, 94305, USA\\". If the field is left empty, the organization name and address will not be displayed.","admin.environment.notifications.feedbackOrganization.label":"Notification Footer Mailing Address:","admin.environment.notifications.feedbackOrganization.placeholder":"Ex: \\"© ABC Corporation, 565 Knight Way, Palo Alto, California, 94305, USA\\"","admin.environment.notifications.notificationDisplay.help":"Display name on email account used when sending notification emails from Vue.","admin.environment.notifications.notificationDisplay.label":"Notification Display Name:","admin.environment.notifications.notificationDisplay.placeholder":"Ex: \\"Vue Notification\\", \\"System\\", \\"No-Reply\\"","admin.environment.notifications.pushContents.full":"Send full message snippet","admin.environment.notifications.pushContents.generic":"Send generic description with sender and channel names","admin.environment.notifications.pushContents.genericNoChannel":"Send generic description with only sender name","admin.environment.notifications.pushContents.help":"**Send generic description with only sender name** - Includes only the name of the person who sent the message in push notifications, with no information about channel name or message contents.\\n **Send generic description with sender and channel names** - Includes the name of the person who sent the message and the channel it was sent in, but not the message text.\\n **Send full message snippet** - Includes a message excerpt in push notifications, which may contain confidential information sent in messages. If your Push Notification Service is outside your firewall, it is *highly recommended* this option only be used with an \\"https\\" protocol to encrypt the connection.","admin.environment.notifications.pushContents.label":"Push Notification Contents:","admin.environment.notifications.replyToAddress.help":"Email address used in the Reply-To header when sending notification emails from Vue.","admin.environment.notifications.replyToAddress.label":"Notification Reply-To Address:","admin.environment.notifications.replyToAddress.placeholder":"Ex: \\"mattermost@yourcompany.com\\", \\"admin@yourcompany.com\\"","admin.environment.pushNotificationServer":"Push Notification Server","admin.environment.sessionLengths":"Session Lengths","admin.environment.smtp":"SMTP","admin.environment.smtp.connectionSecurity.option.none":"None","admin.environment.smtp.connectionSecurity.option.starttls":"STARTTLS","admin.environment.smtp.connectionSecurity.option.tls":"TLS (Recommended)","admin.environment.smtp.connectionSecurity.title":"Connection Security:","admin.environment.smtp.connectionSmtpTest":"Test Connection","admin.environment.smtp.enableSecurityFixAlert.description":"When true, System Administrators are notified by email if a relevant security fix alert has been announced in the last 12 hours. Requires email to be enabled.","admin.environment.smtp.enableSecurityFixAlert.title":"Enable Security Alerts:","admin.environment.smtp.skipServerCertificateVerification.description":"When true, Vue will not verify the email server certificate.","admin.environment.smtp.skipServerCertificateVerification.title":"Skip Server Certificate Verification:","admin.environment.smtp.smtpAuth.description":"When true, SMTP Authentication is enabled.","admin.environment.smtp.smtpAuth.title":"Enable SMTP Authentication:","admin.environment.smtp.smtpFail":"Connection unsuccessful: {error}","admin.environment.smtp.smtpPassword.description":"Obtain this credential from administrator setting up your email server.","admin.environment.smtp.smtpPassword.placeholder":"Ex: \\"yourpassword\\", \\"jcuS8PuvcpGhpgHhlcpT1Mx42pnqMxQY\\"","admin.environment.smtp.smtpPassword.title":"SMTP Server Password:","admin.environment.smtp.smtpPort.description":"Port of SMTP email server.","admin.environment.smtp.smtpPort.placeholder":"Ex: \\"25\\", \\"465\\", \\"587\\"","admin.environment.smtp.smtpPort.title":"SMTP Server Port:","admin.environment.smtp.smtpServer.description":"Location of SMTP email server.","admin.environment.smtp.smtpServer.placeholder":"Ex: \\"smtp.yourcompany.com\\", \\"email-smtp.us-east-1.amazonaws.com\\"","admin.environment.smtp.smtpServer.title":"SMTP Server:","admin.environment.smtp.smtpSuccess":"No errors were reported while sending an email. Please check your inbox to make sure.","admin.environment.smtp.smtpUsername.description":"Obtain this credential from administrator setting up your email server.","admin.environment.smtp.smtpUsername.placeholder":"Ex: \\"admin@yourcompany.com\\", \\"AKIADTOVBGERKLCBV\\"","admin.environment.smtp.smtpUsername.title":"SMTP Server Username:","admin.environment.smtp.testing":"Testing...","admin.environment.webServer":"Web Server","admin.experimental.allowCustomThemes.desc":"Enables the **Display > Theme > Custom Theme** section in Account Settings.","admin.experimental.allowCustomThemes.title":"Allow Custom Themes:","admin.experimental.clientSideCertCheck.desc":"When **primary**, after the client side certificate is verified, user’s email is retrieved from the certificate and is used to log in without a password. When **secondary**, after the client side certificate is verified, user’s email is retrieved from the certificate and matched against the one supplied by the user. If they match, the user logs in with regular email/password credentials.","admin.experimental.clientSideCertCheck.title":"Client-Side Certification Login Method:","admin.experimental.clientSideCertEnable.desc":"Enables client-side certification for your Vue server. See [documentation](!https://docs.vueteams.com/deployment/certificate-based-authentication.html) to learn more.","admin.experimental.clientSideCertEnable.title":"Enable Client-Side Certification:","admin.experimental.closeUnusedDirectMessages.desc":"When true, direct message conversations with no activity for 7 days will be hidden from the sidebar. When false, conversations remain in the sidebar until they are manually closed.","admin.experimental.closeUnusedDirectMessages.title":"Autoclose Direct Messages in Sidebar:","admin.experimental.defaultTheme.desc":"Set a default theme that applies to all new users on the system.","admin.experimental.defaultTheme.title":"Default Theme:","admin.experimental.emailBatchingBufferSize.desc":"Specify the maximum number of notifications batched into a single email.","admin.experimental.emailBatchingBufferSize.example":"E.g.: \\"256\\"","admin.experimental.emailBatchingBufferSize.title":"Email Batching Buffer Size:","admin.experimental.emailBatchingInterval.desc":"Specify the maximum frequency, in seconds, which the batching job checks for new notifications. Longer batching intervals will increase performance.","admin.experimental.emailBatchingInterval.example":"E.g.: \\"30\\"","admin.experimental.emailBatchingInterval.title":"Email Batching Interval:","admin.experimental.emailSettingsLoginButtonBorderColor.desc":"Specify the color of the email login button border for white labeling purposes. Use a hex code with a #-sign before the code. This setting only applies to the mobile apps.","admin.experimental.emailSettingsLoginButtonBorderColor.title":"Email Login Button Border Color:","admin.experimental.emailSettingsLoginButtonColor.desc":"Specify the color of the email login button for white labeling purposes. Use a hex code with a #-sign before the code. This setting only applies to the mobile apps.","admin.experimental.emailSettingsLoginButtonColor.title":"Email Login Button Color:","admin.experimental.emailSettingsLoginButtonTextColor.desc":"Specify the color of the email login button text for white labeling purposes. Use a hex code with a #-sign before the code. This setting only applies to the mobile apps.","admin.experimental.emailSettingsLoginButtonTextColor.title":"Email Login Button Text Color:","admin.experimental.enableChannelViewedMessages.desc":"This setting determines whether `channel_viewed` WebSocket events are sent, which synchronize unread notifications across clients and devices. Disabling the setting in larger deployments may improve server performance.","admin.experimental.enableChannelViewedMessages.title":"Enable Channel Viewed WebSocket Messages:","admin.experimental.enablePreviewFeatures.desc":"When true, preview features can be enabled from **Account Settings > Advanced > Preview pre-release features**. When false, disables and hides preview features from **Account Settings > Advanced > Preview pre-release features**.","admin.experimental.enablePreviewFeatures.title":"Enable Preview Features:","admin.experimental.enableThemeSelection.desc":"Enables the **Display > Theme** tab in Account Settings so users can select their theme.","admin.experimental.enableThemeSelection.title":"Enable Theme Selection:","admin.experimental.enableTutorial.desc":"When true, users are prompted with a tutorial when they open Vue for the first time after account creation. When false, the tutorial is disabled, and users are placed in Town Square when they open Vue for the first time after account creation.","admin.experimental.enableTutorial.title":"Enable Tutorial:","admin.experimental.enableUserDeactivation.desc":"When true, users may deactivate their own account from **Account Settings > Advanced**. If a user deactivates their own account, they will get an email notification confirming they were deactivated. When false, users may not deactivate their own account.","admin.experimental.enableUserDeactivation.title":"Enable Account Deactivation:","admin.experimental.enableUserTypingMessages.desc":"This setting determines whether \\"user is typing...\\" messages are displayed below the message box. Disabling the setting in larger deployments may improve server performance.","admin.experimental.enableUserTypingMessages.title":"Enable User Typing Messages:","admin.experimental.enableXToLeaveChannelsFromLHS.desc":"When true, users can leave Public and Private Channels by clicking the “x” beside the channel name. When false, users must use the **Leave Channel** option from the channel menu to leave channels.","admin.experimental.enableXToLeaveChannelsFromLHS.title":"Enable X to Leave Channels from Left-Hand Sidebar:","admin.experimental.experimentalChannelOrganization.desc":"Enables channel sidebar organization options in **Account Settings > Sidebar > Channel grouping and sorting** including options for grouping unread channels, sorting channels by most recent post and combining all channel types into a single list.","admin.experimental.experimentalChannelOrganization.title":"Sidebar Organization:","admin.experimental.experimentalEnableAuthenticationTransfer.desc":"When true, users can change their sign-in method to any that is enabled on the server, either via Account Settings or the APIs. When false, Users cannot change their sign-in method, regardless of which authentication options are enabled.","admin.experimental.experimentalEnableAuthenticationTransfer.title":"Allow Authentication Transfer:","admin.experimental.experimentalEnableAutomaticReplies.desc":"When true, users can enable Automatic Replies in **Account Settings > Notifications**. Users set a custom message that will be automatically sent in response to Direct Messages. When false, disables the Automatic Direct Message Replies feature and hides it from Account Settings.","admin.experimental.experimentalEnableAutomaticReplies.title":"Enable Automatic Replies:","admin.experimental.experimentalEnableDefaultChannelLeaveJoinMessages.desc":"This setting determines whether team leave/join system messages are posted in the default town-square channel.","admin.experimental.experimentalEnableDefaultChannelLeaveJoinMessages.title":"Enable Default Channel Leave/Join System Messages:","admin.experimental.experimentalEnableHardenedMode.desc":"Enables a hardened mode for Vue that makes user experience trade-offs in the interest of security. See [documentation](!https://docs.vueteams.com/administration/config-settings.html#enable-hardened-mode-experimental) to learn more.","admin.experimental.experimentalEnableHardenedMode.title":"Enable Hardened Mode:","admin.experimental.experimentalFeatures":"Experimental Features","admin.experimental.experimentalHideTownSquareinLHS.desc":"When true, hides Town Square in the left-hand sidebar if there are no unread messages in the channel. When false, Town Square is always visible in the left-hand sidebar even if all messages have been read.","admin.experimental.experimentalHideTownSquareinLHS.title":"Town Square is Hidden in Left-Hand Sidebar:","admin.experimental.experimentalLdapGroupSync.desc":"When true, enables **AD/LDAP Group Sync** configurable under **User Management > Groups**. See [documentation](!https://mattermost.com/pl/default-ldap-group-sync) to learn more.","admin.experimental.experimentalLdapGroupSync.title":"Enable AD/LDAP Group Sync:","admin.experimental.experimentalPrimaryTeam.desc":"The primary team of which users on the server are members. When a primary team is set, the options to join other teams or leave the primary team are disabled.","admin.experimental.experimentalPrimaryTeam.example":"E.g.: \\"teamname\\"","admin.experimental.experimentalPrimaryTeam.title":"Primary Team:","admin.experimental.experimentalTimezone.desc":"Select the timezone used for timestamps in the user interface and email notifications. When true, the Timezone setting is visible in the Account Settings and a time zone is automatically assigned in the next active session. When false, the Timezone setting is hidden in the Account Settings.","admin.experimental.experimentalTimezone.title":"Timezone:","admin.experimental.experimentalTownSquareIsReadOnly.desc":"When true, only System Admins can post in Town Square. Other members are not able to post, reply, upload files, emoji react or pin messages to Town Square, nor are they able to change the channel name, header or purpose. When false, anyone can post in Town Square.","admin.experimental.experimentalTownSquareIsReadOnly.title":"Town Square is Read-Only:","admin.experimental.ldapSettingsLoginButtonBorderColor.desc":"Specify the color of the AD/LDAP login button border for white labeling purposes. Use a hex code with a #-sign before the code. This setting only applies to the mobile apps.","admin.experimental.ldapSettingsLoginButtonBorderColor.title":"AD/LDAP Login Button Border Color:","admin.experimental.ldapSettingsLoginButtonColor.desc":"Specify the color of the AD/LDAP login button for white labeling purposes. Use a hex code with a #-sign before the code. This setting only applies to the mobile apps.","admin.experimental.ldapSettingsLoginButtonColor.title":"AD/LDAP Login Button Color:","admin.experimental.ldapSettingsLoginButtonTextColor.desc":"Specify the color of the AD/LDAP login button text for white labeling purposes. Use a hex code with a #-sign before the code. This setting only applies to the mobile apps.","admin.experimental.ldapSettingsLoginButtonTextColor.title":"AD/LDAP Login Button Text Color:","admin.experimental.linkMetadataTimeoutMilliseconds.desc":"The number of milliseconds to wait for metadata from a third-party link. Used with Post Metadata.","admin.experimental.linkMetadataTimeoutMilliseconds.example":"E.g.: \\"5000\\"","admin.experimental.linkMetadataTimeoutMilliseconds.title":"Link Metadata Timeout:","admin.experimental.samlSettingsLoginButtonBorderColor.desc":"Specify the color of the SAML login button border for white labeling purposes. Use a hex code with a #-sign before the code. This setting only applies to the mobile apps.","admin.experimental.samlSettingsLoginButtonBorderColor.title":"SAML login Button Border Color:","admin.experimental.samlSettingsLoginButtonColor.desc":"Specify the color of the SAML login button for white labeling purposes. Use a hex code with a #-sign before the code. This setting only applies to the mobile apps.","admin.experimental.samlSettingsLoginButtonColor.title":"SAML Login Button Color:","admin.experimental.samlSettingsLoginButtonTextColor.desc":"Specify the color of the SAML login button text for white labeling purposes. Use a hex code with a #-sign before the code. This setting only applies to the mobile apps.","admin.experimental.samlSettingsLoginButtonTextColor.title":"SAML login Button Text Color:","admin.experimental.timeBetweenUserTypingUpdatesMilliseconds.desc":"The number of milliseconds to wait between emitting user typing websocket events.","admin.experimental.timeBetweenUserTypingUpdatesMilliseconds.example":"E.g.: \\"5000\\"","admin.experimental.timeBetweenUserTypingUpdatesMilliseconds.title":"User Typing Timeout:","admin.experimental.useChannelInEmailNotifications.desc":"When true, channel and team name appears in email notification subject lines. Useful for servers using only one team. When false, only team name appears in email notification subject line.","admin.experimental.useChannelInEmailNotifications.title":"Use Channel Name in Email Notifications:","admin.experimental.userStatusAwayTimeout.desc":"This setting defines the number of seconds after which the user’s status indicator changes to \\"Away\\", when they are away from Vue.","admin.experimental.userStatusAwayTimeout.example":"E.g.: \\"300\\"","admin.experimental.userStatusAwayTimeout.title":"User Status Away Timeout:","admin.false":"false","admin.field_names.allowBannerDismissal":"Allow banner dismissal","admin.field_names.bannerColor":"Banner color","admin.field_names.bannerText":"Banner text","admin.field_names.bannerTextColor":"Banner text color","admin.field_names.enableBanner":"Enable Announcement banner","admin.field_names.enableCommands":"Enable Custom Slash Commands","admin.field_names.enableConfirmNotificationsToChannel":"Show @channel and @all confirmation dialog","admin.field_names.enableIncomingWebhooks":"Enable Incoming Webhooks","admin.field_names.enableOAuthServiceProvider":"Enable OAuth 2.0 Service Provider","admin.field_names.enableOutgoingWebhooks":"Enable Outgoing Webhooks","admin.field_names.enablePostIconOverride":"Enable integrations to override profile picture icons","admin.field_names.enablePostUsernameOverride":"Enable integrations to override usernames","admin.field_names.enableUserAccessTokens":"Enable Personal Access Tokens","admin.field_names.enableUserCreation":"Enable Account Creation","admin.field_names.maxChannelsPerTeam":"Max Channels Per Team","admin.field_names.maxNotificationsPerChannel":"Max Notifications Per Channel","admin.field_names.maxUsersPerTeam":"Max Users Per Team","admin.field_names.postEditTimeLimit":"Edit post time limit","admin.field_names.restrictCreationToDomains":"Restrict account creation to specified email domains","admin.field_names.restrictDirectMessage":"Enable users to open Direct Message channels with","admin.field_names.teammateNameDisplay":"Teammate Name Display","admin.file_upload.chooseFile":"Choose File","admin.file_upload.noFile":"No file uploaded","admin.file_upload.uploadFile":"Upload","admin.file.enableFileAttachments":"Allow File Sharing:","admin.file.enableFileAttachmentsDesc":"When false, disables file sharing on the server. All file and image uploads on messages are forbidden across clients and devices, including mobile.","admin.file.enableMobileDownloadDesc":"When false, disables file downloads on mobile apps. Users can still download files from a mobile web browser.","admin.file.enableMobileDownloadTitle":"Allow File Downloads on Mobile:","admin.file.enableMobileUploadDesc":"When false, disables file uploads on mobile apps. If Allow File Sharing is set to true, users can still upload files from a mobile web browser.","admin.file.enableMobileUploadTitle":"Allow File Uploads on Mobile:","admin.general.localization.availableLocalesDescription":"Set which languages are available for users in Account Settings (leave this field blank to have all supported languages available). If you\'re manually adding new languages, the **Default Client Language** must be added before saving this setting.\\n \\nWould like to help with translations? Join the [Vue Translation Server](!http://translate.vueteams.com/) to contribute.","admin.general.localization.availableLocalesNoResults":"No results found","admin.general.localization.availableLocalesNotPresent":"The default client language must be included in the available list","admin.general.localization.availableLocalesTitle":"Available Languages:","admin.general.localization.clientLocaleDescription":"Default language for newly created users and pages where the user hasn\'t logged in.","admin.general.localization.clientLocaleTitle":"Default Client Language:","admin.general.localization.serverLocaleDescription":"Default language for system messages. Changing this will require a server restart before taking effect.","admin.general.localization.serverLocaleTitle":"Default Server Language:","admin.general.log":"Logging","admin.gitlab.authTitle":"Auth Endpoint:","admin.gitlab.clientIdDescription":"Obtain this value via the instructions above for logging into GitLab.","admin.gitlab.clientIdExample":"E.g.: \\"jcuS8PuvcpGhpgHhlcpT1Mx42pnqMxQY\\"","admin.gitlab.clientIdTitle":"Application ID:","admin.gitlab.clientSecretDescription":"Obtain this value via the instructions above for logging into GitLab.","admin.gitlab.clientSecretExample":"E.g.: \\"jcuS8PuvcpGhpgHhlcpT1Mx42pnqMxQY\\"","admin.gitlab.clientSecretTitle":"Application Secret Key:","admin.gitlab.enableDescription":"When true, Vue allows team creation and account signup using GitLab OAuth.\\n \\n1. Log in to your GitLab account and go to Profile Settings -> Applications.\\n2. Enter Redirect URIs \\"<your-mattermost-url>/login/gitlab/complete\\" (example: http://localhost:8065/login/gitlab/complete) and \\"<your-mattermost-url>/signup/gitlab/complete\\".\\n3. Then use \\"Application Secret Key\\" and \\"Application ID\\" fields from GitLab to complete the options below.\\n4. Complete the Endpoint URLs below.","admin.gitlab.EnableMarkdownDesc":"1. Log in to your GitLab account and go to Profile Settings -> Applications.\\n2. Enter Redirect URIs \\"<your-mattermost-url>/login/gitlab/complete\\" (example: http://localhost:8065/login/gitlab/complete) and \\"<your-mattermost-url>/signup/gitlab/complete\\".\\n3. Then use \\"Application Secret Key\\" and \\"Application ID\\" fields from GitLab to complete the options below.\\n4. Complete the Endpoint URLs below.","admin.gitlab.enableTitle":"Enable authentication with GitLab: ","admin.gitlab.siteUrl":"GitLab Site URL: ","admin.gitlab.siteUrlDescription":"Enter the URL of your GitLab instance, e.g. https://example.com:3000. If your GitLab instance is not set up with SSL, start the URL with http:// instead of https://.","admin.gitlab.siteUrlExample":"E.g.: https://","admin.gitlab.tokenTitle":"Token Endpoint:","admin.gitlab.userTitle":"User API Endpoint:","admin.google.authTitle":"Auth Endpoint:","admin.google.clientIdDescription":"The Client ID you received when registering your application with Google.","admin.google.clientIdExample":"E.g.: \\"7602141235235-url0fhs1mayfasbmop5qlfns8dh4.apps.googleusercontent.com\\"","admin.google.clientIdTitle":"Client ID:","admin.google.clientSecretDescription":"The Client Secret you received when registering your application with Google.","admin.google.clientSecretExample":"E.g.: \\"H8sz0Az-dDs2p15-7QzD231\\"","admin.google.clientSecretTitle":"Client Secret:","admin.google.EnableMarkdownDesc":"1. [Log in](!https://accounts.google.com/login) to your Google account.\\n2. Go to [https://console.developers.google.com](!https://console.developers.google.com), click **Credentials** in the left hand sidebar and enter \\"Vue - your-company-name\\" as the **Project Name**, then click **Create**.\\n3. Click the **OAuth consent screen** header and enter \\"Vue\\" as the **Product name shown to users**, then click **Save**.\\n4. Under the **Credentials** header, click **Create credentials**, choose **OAuth client ID** and select **Web Application**.\\n5. Under **Restrictions** and **Authorized redirect URIs** enter **your-mattermost-url/signup/google/complete** (example: http://localhost:8065/signup/google/complete). Click **Create**.\\n6. Paste the **Client ID** and **Client Secret** to the fields below, then click **Save**.\\n7. Finally, go to [Google+ API](!https://console.developers.google.com/apis/api/plus/overview) and click *Enable*. This might take a few minutes to propagate through Google`s systems.","admin.google.tokenTitle":"Token Endpoint:","admin.google.userTitle":"User API Endpoint:","admin.group_settings.filters.isConfigured":"Is Configured","admin.group_settings.filters.isLinked":"Is Linked","admin.group_settings.filters.isUnconfigured":"Is Not Configured","admin.group_settings.filters.isUnlinked":"Is Not Linked","admin.group_settings.group_detail.group_configuration":"Group Configuration","admin.group_settings.group_detail.groupProfileDescription":"The name for this group.","admin.group_settings.group_detail.groupProfileTitle":"Group Profile","admin.group_settings.group_detail.groupTeamsAndChannelsDescription":"Set default teams and channels for group members. Teams added will include default channels, town-square, and off-topic. Adding a channel without setting the team will add the implied team to the listing below.","admin.group_settings.group_detail.groupTeamsAndChannelsTitle":"Team and Channel Membership","admin.group_settings.group_detail.groupUsersDescription":"Listing of users in Vue associated with this group.","admin.group_settings.group_detail.groupUsersTitle":"Users","admin.group_settings.group_detail.introBanner":"Configure default teams and channels and view users belonging to this group.","admin.group_settings.group_details.add_channel":"Add Channel","admin.group_settings.group_details.add_team":"Add Team","admin.group_settings.group_details.add_team_or_channel":"Add Team or Channel","admin.group_settings.group_details.group_profile.name":"Name:","admin.group_settings.group_details.group_teams_and_channels_row.remove":"Remove","admin.group_settings.group_details.group_teams_and_channels_row.remove.confirm_body":"Removing this membership will prevent future users in this group from being added to the \'{name}\' {displayType}.","admin.group_settings.group_details.group_teams_and_channels_row.remove.confirm_button":"Yes, Remove","admin.group_settings.group_details.group_teams_and_channels_row.remove.confirm_header":"Remove Membership from the \'{name}\' {displayType}?","admin.group_settings.group_details.group_teams_and_channels.no-teams-or-channels-speicified":"No teams or channels specified yet","admin.group_settings.group_details.group_users.email":"Email:","admin.group_settings.group_details.group_users.no-users-found":"No users found","admin.group_settings.group_details.menuAriaLabel":"Add Team or Channel Menu","admin.group_settings.group_profile.group_teams_and_channels.name":"Name","admin.group_settings.group_profile.group_users.ldapConnector":"AD/LDAP Connector is configured to sync and manage this group and its users. [Click here to view]({siteURL}/admin_console/authentication/ldap)","admin.group_settings.group_row.configure":"Configure","admin.group_settings.group_row.edit":"Edit","admin.group_settings.group_row.link_failed":"Link failed","admin.group_settings.group_row.linked":"Linked","admin.group_settings.group_row.linking":"Linking","admin.group_settings.group_row.not_linked":"Not Linked","admin.group_settings.group_row.unlink_failed":"Unlink failed","admin.group_settings.group_row.unlinking":"Unlinking","admin.group_settings.groups_list.link_selected":"Link Selected Groups","admin.group_settings.groups_list.mappingHeader":"Vue Linking","admin.group_settings.groups_list.nameHeader":"Name","admin.group_settings.groups_list.no_groups_found":"No groups found","admin.group_settings.groups_list.paginatorCount":"{startCount, number} - {endCount, number} of {total, number}","admin.group_settings.groups_list.unlink_selected":"Unlink Selected Groups","admin.group_settings.groupsPageTitle":"Groups","admin.group_settings.introBanner":"Groups are a way to organize users and apply actions to all users within that group.\\nFor more information on Groups, please see [documentation](!https://www.vueteams.com/default-ad-ldap-groups).","admin.group_settings.ldapGroupsDescription":"Link and configure groups from your AD/LDAP to Vue. Please ensure you have configured a [group filter]({siteURL}/admin_console/authentication/ldap).","admin.group_settings.ldapGroupsTitle":"AD/LDAP Groups","admin.guest_access.enableDescription":"When true, external guest can be invited to channels within teams. Please see [Permissions Schemes](../user_management/permissions/system_scheme) for which roles can invite guests.","admin.guest_access.enableTitle":"Enable Guest Access: ","admin.guest_access.mfaDescription":"When true, [multi-factor authentication](!https://docs.vueteams.com/deployment/auth.html) for guests is required for login. New guest users will be required to configure MFA on signup. Logged in guest users without MFA configured are redirected to the MFA setup page until configuration is complete.\\n \\nIf your system has guest users with login methods other than AD/LDAP and email, MFA must be enforced with the authentication provider outside of Vue.","admin.guest_access.mfaDescriptionMFANotEnabled":"[Multi-factor authentication](./mfa) is currently not enabled.","admin.guest_access.mfaDescriptionMFANotEnforced":"[Multi-factor authentication](./mfa) is currently not enforced.","admin.guest_access.mfaTitle":"Enforce Multi-factor Authentication: ","admin.guest_access.whitelistedDomainsDescription":"(Optional) Guest accounts can be created at the system level from this list of allowed guest domains.","admin.guest_access.whitelistedDomainsExample":"E.g.: \\"company.com, othercorp.org\\"","admin.guest_access.whitelistedDomainsTitle":"Whitelisted Guest Domains:","admin.image.amazonS3BucketDescription":"Name you selected for your S3 bucket in AWS.","admin.image.amazonS3BucketExample":"E.g.: \\"mattermost-media\\"","admin.image.amazonS3BucketTitle":"Amazon S3 Bucket:","admin.image.amazonS3EndpointDescription":"Hostname of your S3 Compatible Storage provider. Defaults to \\"s3.amazonaws.com\\".","admin.image.amazonS3EndpointExample":"E.g.: \\"s3.amazonaws.com\\"","admin.image.amazonS3EndpointTitle":"Amazon S3 Endpoint:","admin.image.amazonS3IdDescription":"(Optional) Only required if you do not want to authenticate to S3 using an [IAM role](!https://about.vueteams.com/default-iam-role). Enter the Access Key ID provided by your Amazon EC2 administrator.","admin.image.amazonS3IdExample":"E.g.: \\"AKIADTOVBGERKLCBV\\"","admin.image.amazonS3IdTitle":"Amazon S3 Access Key ID:","admin.image.amazonS3RegionDescription":"AWS region you selected when creating your S3 bucket. If no region is set, Vue attempts to get the appropriate region from AWS, or sets it to \'us-east-1\' if none found.","admin.image.amazonS3RegionExample":"E.g.: \\"us-east-1\\"","admin.image.amazonS3RegionTitle":"Amazon S3 Region:","admin.image.amazonS3SecretDescription":"(Optional) The secret access key associated with your Amazon S3 Access Key ID.","admin.image.amazonS3SecretExample":"E.g.: \\"jcuS8PuvcpGhpgHhlcpT1Mx42pnqMxQY\\"","admin.image.amazonS3SecretTitle":"Amazon S3 Secret Access Key:","admin.image.amazonS3SSEDescription":"When true, encrypt files in Amazon S3 using server-side encryption with Amazon S3-managed keys. See [documentation](!https://about.vueteams.com/default-server-side-encryption) to learn more.","admin.image.amazonS3SSETitle":"Enable Server-Side Encryption for Amazon S3:","admin.image.amazonS3SSLDescription":"When false, allow insecure connections to Amazon S3. Defaults to secure connections only.","admin.image.amazonS3SSLTitle":"Enable Secure Amazon S3 Connections:","admin.image.amazonS3TraceDescription":"(Development Mode) When true, log additional debugging information to the system logs.","admin.image.amazonS3TraceTitle":"Enable Amazon S3 Debugging:","admin.image.enableProxy":"Enable Image Proxy:","admin.image.enableProxyDescription":"When true, enables an image proxy for loading all Markdown images.","admin.image.localDescription":"Directory to which files and images are written. If blank, defaults to ./data/.","admin.image.localExample":"E.g.: \\"./data/\\"","admin.image.localTitle":"Local Storage Directory:","admin.image.maxFileSizeDescription":"Maximum file size for message attachments in megabytes. Caution: Verify server memory can support your setting choice. Large file sizes increase the risk of server crashes and failed uploads due to network interruptions.","admin.image.maxFileSizeExample":"50","admin.image.maxFileSizeTitle":"Maximum File Size:","admin.image.proxyOptions":"Remote Image Proxy Options:","admin.image.proxyOptionsDescription":"Additional options such as the URL signing key. Refer to your image proxy documentation to learn more about what options are supported.","admin.image.proxyType":"Image Proxy Type:","admin.image.proxyTypeDescription":"Configure an image proxy to load all Markdown images through a proxy. The image proxy prevents users from making insecure image requests, provides caching for increased performance, and automates image adjustments such as resizing. See [documentation](!https://about.vueteams.com/default-image-proxy-documentation) to learn more.","admin.image.proxyURL":"Remote Image Proxy URL:","admin.image.proxyURLDescription":"URL of your remote image proxy server.","admin.image.publicLinkDescription":"32-character salt added to signing of public image links. Randomly generated on install. Click \\"Regenerate\\" to create new salt.","admin.image.publicLinkTitle":"Public Link Salt:","admin.image.shareDescription":"Allow users to share public links to files and images.","admin.image.shareTitle":"Enable Public File Links: ","admin.image.storeAmazonS3":"Amazon S3","admin.image.storeDescription":"Storage system where files and image attachments are saved.\\n \\nSelecting \\"Amazon S3\\" enables fields to enter your Amazon credentials and bucket details.\\n \\nSelecting \\"Local File System\\" enables the field to specify a local file directory.","admin.image.storeLocal":"Local File System","admin.image.storeTitle":"File Storage System:","admin.integrations.botAccounts":"Bot Accounts","admin.integrations.botAccounts.title":"Bot Accounts","admin.integrations.cors":"CORS","admin.integrations.gif":"GIF (Beta)","admin.integrations.integrationManagement":"Integration Management","admin.integrations.integrationManagement.title":"Integration Management","admin.jobTable.cancelButton":"Cancel","admin.jobTable.headerExtraInfo":"Details","admin.jobTable.headerFinishAt":"Finish Time","admin.jobTable.headerRunTime":"Run Time","admin.jobTable.headerStatus":"Status","admin.jobTable.jobId":"Job ID: ","admin.jobTable.lastActivityAt":"Last Activity: ","admin.jobTable.runLengthMinutes":" minutes","admin.jobTable.runLengthSeconds":" seconds","admin.jobTable.statusCanceled":"Canceled","admin.jobTable.statusCanceling":"Canceling...","admin.jobTable.statusError":"Error","admin.jobTable.statusInProgress":"In Progress","admin.jobTable.statusPending":"Pending","admin.jobTable.statusSuccess":"Success","admin.ldap.baseDesc":"The Base DN is the Distinguished Name of the location where Vue should start its search for users in the AD/LDAP tree.","admin.ldap.baseEx":"E.g.: \\"ou=Unit Name,dc=corp,dc=example,dc=com\\"","admin.ldap.baseTitle":"BaseDN:","admin.ldap.bindPwdDesc":"Password of the user given in \\"Bind Username\\".","admin.ldap.bindPwdTitle":"Bind Password:","admin.ldap.bindUserDesc":"The username used to perform the AD/LDAP search. This should typically be an account created specifically for use with Vue. It should have access limited to read the portion of the AD/LDAP tree specified in the BaseDN field.","admin.ldap.bindUserTitle":"Bind Username:","admin.ldap.emailAttrDesc":"The attribute in the AD/LDAP server used to populate the email address field in Vue.","admin.ldap.emailAttrEx":"E.g.: \\"mail\\" or \\"userPrincipalName\\"","admin.ldap.emailAttrTitle":"Email Attribute:","admin.ldap.enableDesc":"When true, Vue allows login using AD/LDAP","admin.ldap.enableSyncDesc":"When true, Vue periodically synchronizes users from AD/LDAP. When false, user attributes are updated from AD/LDAP during user login only.","admin.ldap.enableSyncTitle":"Enable Synchronization with AD/LDAP:","admin.ldap.enableTitle":"Enable sign-in with AD/LDAP:","admin.ldap.firstnameAttrDesc":"(Optional) The attribute in the AD/LDAP server used to populate the first name of users in Vue. When set, users cannot edit their first name, since it is synchronized with the LDAP server. When left blank, users can set their first name in Account Settings.","admin.ldap.firstnameAttrEx":"E.g.: \\"givenName\\"","admin.ldap.firstnameAttrTitle":"First Name Attribute:","admin.ldap.groupDisplayNameAttributeDesc":"The attribute in the AD/LDAP server used to populate the group display names.","admin.ldap.groupDisplayNameAttributeEx":"E.g.: \\"cn\\"","admin.ldap.groupDisplayNameAttributeTitle":"Group Display Name Attribute:","admin.ldap.groupFilterEx":"E.g.: \\"(objectClass=group)\\"","admin.ldap.groupFilterFilterDesc":"(Optional) Enter an AD/LDAP filter to use when searching for group objects. Only the groups selected by the query will be available to Vue. From [User Management > Groups]({siteURL}/admin_console/user_management/groups), select which AD/LDAP groups should be linked and configured.","admin.ldap.groupFilterTitle":"Group Filter:","admin.ldap.groupIdAttributeDesc":"The attribute in the AD/LDAP server used as a unique identifier for Groups. This should be a AD/LDAP attribute with a value that does not change such as `entryUUID` for LDAP or `objectGUID` for Active Directory.","admin.ldap.groupIdAttributeEx":"E.g.: \\"objectGUID\\" or \\"entryUUID\\"","admin.ldap.groupIdAttributeTitle":"Group ID Attribute:","admin.ldap.idAttrDesc":"The attribute in the AD/LDAP server used as a unique identifier in Vue. It should be an AD/LDAP attribute with a value that does not change such as `entryUUID` for LDAP or `objectGUID` for Active Directory. If a user\'s ID Attribute changes, it will create a new Vue account unassociated with their old one.\\n \\nIf you need to change this field after users have already logged in, use the [mattermost ldap idmigrate](!https://about.vueteams.com/default-mattermost-ldap-idmigrate) CLI tool.","admin.ldap.idAttrEx":"E.g.: \\"objectGUID\\" or \\"entryUUID\\"","admin.ldap.idAttrTitle":"ID Attribute: ","admin.ldap.jobExtraInfo.addedGroupMembers":"Added {groupMemberAddCount, number} group members.","admin.ldap.jobExtraInfo.deactivatedUsers":"Deactivated {deleteCount, number} users.","admin.ldap.jobExtraInfo.deletedGroupMembers":"Deleted {groupMemberDeleteCount, number} group members.","admin.ldap.jobExtraInfo.deletedGroups":"Deleted {groupDeleteCount, number} groups.","admin.ldap.jobExtraInfo.updatedUsers":"Updated {updateCount, number} users.","admin.ldap.lastnameAttrDesc":"(Optional) The attribute in the AD/LDAP server used to populate the last name of users in Vue. When set, users cannot edit their last name, since it is synchronized with the LDAP server. When left blank, users can set their last name in Account Settings.","admin.ldap.lastnameAttrEx":"E.g.: \\"sn\\"","admin.ldap.lastnameAttrTitle":"Last Name Attribute:","admin.ldap.ldap_test_button":"AD/LDAP Test","admin.ldap.loginAttrDesc":"The attribute in the AD/LDAP server used to log in to Vue. Normally this attribute is the same as the \\"Username Attribute\\" field above.\\n \\nIf your team typically uses domain/username to log in to other services with AD/LDAP, you may enter domain/username in this field to maintain consistency between sites.","admin.ldap.loginAttrTitle":"Login ID Attribute: ","admin.ldap.loginIdAttrEx":"E.g.: \\"sAMAccountName\\"","admin.ldap.loginNameDesc":"The placeholder text that appears in the login field on the login page. Defaults to \\"AD/LDAP Username\\".","admin.ldap.loginNameEx":"E.g.: \\"AD/LDAP Username\\"","admin.ldap.loginNameTitle":"Login Field Name:","admin.ldap.maxPageSizeEx":"E.g.: \\"2000\\"","admin.ldap.maxPageSizeHelpText":"The maximum number of users the Vue server will request from the AD/LDAP server at one time. 0 is unlimited.","admin.ldap.maxPageSizeTitle":"Maximum Page Size:","admin.ldap.nicknameAttrDesc":"(Optional) The attribute in the AD/LDAP server used to populate the nickname of users in Vue. When set, users cannot edit their nickname, since it is synchronized with the LDAP server. When left blank, users can set their nickname in Account Settings.","admin.ldap.nicknameAttrEx":"E.g.: \\"nickname\\"","admin.ldap.nicknameAttrTitle":"Nickname Attribute:","admin.ldap.portDesc":"The port Vue will use to connect to the AD/LDAP server. Default is 389.","admin.ldap.portEx":"E.g.: \\"389\\"","admin.ldap.portTitle":"AD/LDAP Port:","admin.ldap.positionAttrDesc":"(Optional) The attribute in the AD/LDAP server used to populate the position field in Vue. When set, users cannot edit their position, since it is synchronized with the LDAP server. When left blank, users can set their position in Account Settings.","admin.ldap.positionAttrEx":"E.g.: \\"title\\"","admin.ldap.positionAttrTitle":"Position Attribute:","admin.ldap.queryDesc":"The timeout value for queries to the AD/LDAP server. Increase if you are getting timeout errors caused by a slow AD/LDAP server.","admin.ldap.queryEx":"E.g.: \\"60\\"","admin.ldap.queryTitle":"Query Timeout (seconds):","admin.ldap.serverDesc":"The domain or IP address of AD/LDAP server.","admin.ldap.serverEx":"E.g.: \\"10.0.0.23\\"","admin.ldap.serverTitle":"AD/LDAP Server:","admin.ldap.skipCertificateVerification":"Skip Certificate Verification:","admin.ldap.skipCertificateVerificationDesc":"Skips the certificate verification step for TLS or STARTTLS connections. Skipping certificate verification is not recommended for production environments where TLS is required.","admin.ldap.sync_button":"AD/LDAP Synchronize Now","admin.ldap.syncIntervalHelpText":"AD/LDAP Synchronization updates Vue user information to reflect updates on the AD/LDAP server. For example, when a user\'s name changes on the AD/LDAP server, the change updates in Vue when synchronization is performed. Accounts removed from or disabled in the AD/LDAP server have their Vue accounts set to \\"Inactive\\" and have their account sessions revoked. Vue performs synchronization on the interval entered. For example, if 60 is entered, Vue synchronizes every 60 minutes.","admin.ldap.syncIntervalTitle":"Synchronization Interval (minutes):","admin.ldap.syncNowHelpText":"Initiates an AD/LDAP synchronization immediately. See the table below for status of each synchronization. Please review \\"System Console > Logs\\" and [documentation](!https://mattermost.com/default-ldap-docs) to troubleshoot errors.","admin.ldap.testFailure":"AD/LDAP Test Failure: {error}","admin.ldap.testHelpText":"Tests if the Mattemost server can connect to the AD/LDAP server specified. Please review \\"System Console > Logs\\" and [documentation](!https://mattermost.com/default-ldap-docs) to troubleshoot errors.","admin.ldap.testSuccess":"AD/LDAP Test Successful","admin.ldap.userFilterDisc":"(Optional) Enter an AD/LDAP filter to use when searching for user objects. Only the users selected by the query will be able to access Vue. For Active Directory, the query to filter out disabled users is (&(objectCategory=Person)(!(UserAccountControl:1.2.840.113556.1.4.803:=2))).","admin.ldap.userFilterEx":"E.g.: \\"(objectClass=user)\\"","admin.ldap.userFilterTitle":"User Filter:","admin.ldap.usernameAttrDesc":"The attribute in the AD/LDAP server used to populate the username field in Vue. This may be the same as the Login ID Attribute.","admin.ldap.usernameAttrEx":"E.g.: \\"sAMAccountName\\"","admin.ldap.usernameAttrTitle":"Username Attribute:","admin.license.choose":"Choose File","admin.license.edition":"Edition: ","admin.license.key":"License Key: ","admin.license.keyRemove":"Remove Enterprise License and Downgrade Server","admin.license.noFile":"No file uploaded","admin.license.removing":"Removing License...","admin.license.title":"Edition and License","admin.license.type":"License: ","admin.license.upload":"Upload","admin.license.uploadDesc":"Upload a license key for Vue Enterprise Edition to upgrade this server. [Visit us online](!http://mattermost.com) to learn more about the benefits of Enterprise Edition or to purchase a key.","admin.license.uploading":"Uploading License...","admin.log.consoleDescription":"Typically set to false in production. Developers may set this field to true to output log messages to console based on the console level option.  If true, server writes messages to the standard output stream (stdout). Changing this setting requires a server restart before taking effect.","admin.log.consoleJsonTitle":"Output console logs as JSON:","admin.log.consoleTitle":"Output logs to console: ","admin.log.enableDiagnostics":"Enable Diagnostics and Error Reporting:","admin.log.enableDiagnosticsDescription":"Enable this feature to improve the quality and performance of Vue by sending error reporting and diagnostic information to Vue, Inc. Read our [privacy policy](!https://about.vueteams.com/default-privacy-policy/) to learn more.","admin.log.enableWebhookDebugging":"Enable Webhook Debugging:","admin.log.enableWebhookDebuggingDescription":"When true, sends webhook debug messages to the server logs. To also output the request body of incoming webhooks, set {boldedLogLevel} to \'DEBUG\'.","admin.log.fileDescription":"Typically set to true in production. When true, logged events are written to the mattermost.log file in the directory specified in the File Log Directory field. The logs are rotated at 10,000 lines and archived to a file in the same directory, and given a name with a datestamp and serial number. For example, mattermost.2017-03-31.001. Changing this setting requires a server restart before taking effect.","admin.log.fileJsonTitle":"Output file logs as JSON:","admin.log.fileLevelDescription":"This setting determines the level of detail at which log events are written to the log file. ERROR: Outputs only error messages. INFO: Outputs error messages and information around startup and initialization. DEBUG: Prints high detail for developers working on debugging issues.","admin.log.fileLevelTitle":"File Log Level:","admin.log.fileTitle":"Output logs to file: ","admin.log.jsonDescription":"When true, logged events are written in a machine readable JSON format. Otherwise they are printed as plain text. Changing this setting requires a server restart before taking effect.","admin.log.levelDescription":"This setting determines the level of detail at which log events are written to the console. ERROR: Outputs only error messages. INFO: Outputs error messages and information around startup and initialization. DEBUG: Prints high detail for developers working on debugging issues.","admin.log.levelTitle":"Console Log Level:","admin.log.locationDescription":"The location of the log files. If blank, they are stored in the ./logs directory. The path that you set must exist and Vue must have write permissions in it. Changing this setting requires a server restart before taking effect.","admin.log.locationPlaceholder":"Enter your file location","admin.log.locationTitle":"File Log Directory:","admin.log.logLevel":"Log Level","admin.logs.bannerDesc":"To look up users by User ID or Token ID, go to Reporting > Users and paste the ID into the search filter.","admin.logs.next":"Next","admin.logs.prev":"Previous","admin.logs.reload":"Reload","admin.logs.title":"Server Logs","admin.manage_roles.additionalRoles":"Select additional permissions for the account. [Read more about roles and permissions](!https://about.vueteams.com/default-permissions).","admin.manage_roles.allowUserAccessTokens":"Allow this account to generate [personal access tokens](!https://about.vueteams.com/default-user-access-tokens).","admin.manage_roles.allowUserAccessTokensDesc":"Removing this permission doesn\'t delete existing tokens. To delete them, go to the user\'s Manage Tokens menu.","admin.manage_roles.cancel":"Cancel","admin.manage_roles.manageRolesTitle":"Manage Roles","admin.manage_roles.postAllPublicRole":"Access to post to all Vue public channels.","admin.manage_roles.postAllPublicRoleTitle":"post:channels","admin.manage_roles.postAllRole":"Access to post to all Vue channels including direct messages.","admin.manage_roles.postAllRoleTitle":"post:all","admin.manage_roles.save":"Save","admin.manage_roles.saveError":"Unable to save roles.","admin.manage_roles.systemAdmin":"System Admin","admin.manage_roles.systemMember":"Member","admin.manage_tokens.manageTokensTitle":"Manage Personal Access Tokens","admin.manage_tokens.userAccessTokensDescription":"Personal access tokens function similarly to session tokens and can be used by integrations to [interact with this Vue server](!https://about.vueteams.com/default-api-authentication). Tokens are disabled if the user is deactivated. Learn more about [personal access tokens](!https://about.vueteams.com/default-user-access-tokens).","admin.manage_tokens.userAccessTokensIdLabel":"Token ID: ","admin.manage_tokens.userAccessTokensNameLabel":"Token Description: ","admin.manage_tokens.userAccessTokensNone":"No personal access tokens.","admin.metrics.enableDescription":"When true, Vue will enable performance monitoring collection and profiling. Please see [documentation](!http://docs..vueteams.com/deployment/metrics.html) to learn more about configuring performance monitoring for Vue.","admin.metrics.enableTitle":"Enable Performance Monitoring:","admin.metrics.listenAddressDesc":"The address the server will listen on to expose performance metrics.","admin.metrics.listenAddressEx":"E.g.: \\":8067\\"","admin.metrics.listenAddressTitle":"Listen Address:","admin.mfa.bannerDesc":"[Multi-factor authentication](!https://docs.vueteams.com/deployment/auth.html) is available for accounts with AD/LDAP or email login. If other login methods are used, MFA should be configured with the authentication provider.","admin.nav.administratorsGuide":"Administrator\'s Guide","admin.nav.commercialSupport":"Commercial Support","admin.nav.menuAriaLabel":"Admin Console Menu","admin.nav.switch":"Team Selection","admin.nav.troubleshootingForum":"Troubleshooting Forum","admin.oauth.gitlab":"GitLab","admin.oauth.google":"Google Apps","admin.oauth.off":"Do not allow sign-in via an OAuth 2.0 provider","admin.oauth.office365":"Office 365","admin.oauth.providerDescription":"When true, Vue can act as an OAuth 2.0 service provider allowing Vue to authorize API requests from external applications. See [documentation](!https://docs.vueteams.com/developer/oauth-2-0-applications.html) to learn more.","admin.oauth.providerTitle":"Enable OAuth 2.0 Service Provider: ","admin.oauth.select":"Select OAuth 2.0 service provider:","admin.office365.authTitle":"Auth Endpoint:","admin.office365.clientIdDescription":"The Application/Client ID you received when registering your application with Microsoft.","admin.office365.clientIdExample":"E.g.: \\"adf3sfa2-ag3f-sn4n-ids0-sh1hdax192qq\\"","admin.office365.clientIdTitle":"Application ID:","admin.office365.clientSecretDescription":"The Application Secret Password you generated when registering your application with Microsoft.","admin.office365.clientSecretExample":"E.g.: \\"shAieM47sNBfgl20f8ci294\\"","admin.office365.clientSecretTitle":"Application Secret Password:","admin.office365.EnableMarkdownDesc":"1. [Log in](!https://login.microsoftonline.com/) to your Microsoft or Office 365 account. Make sure it`s the account on the same [tenant](!https://msdn.microsoft.com/en-us/library/azure/jj573650.aspx#Anchor_0) that you would like users to log in with.\\n2. Go to [https://apps.dev.microsoft.com](!https://apps.dev.microsoft.com), click **Go to app list** > **Add an app** and use \\"Vue - your-company-name\\" as the **Application Name**.\\n3. Under **Application Secrets**, click **Generate New Password** and paste it to the **Application Secret Password** field below.\\n4. Under **Platforms**, click **Add Platform**, choose **Web** and enter **your-mattermost-url/signup/office365/complete** (example: http://localhost:8065/signup/office365/complete) under **Redirect URIs**. Also uncheck **Allow Implicit Flow**.\\n5. Finally, click **Save** and then paste the **Application ID** below.","admin.office365.tokenTitle":"Token Endpoint:","admin.office365.userTitle":"User API Endpoint:","admin.password.lowercase":"At least one lowercase letter","admin.password.minimumLength":"Minimum Password Length:","admin.password.minimumLengthDescription":"Minimum number of characters required for a valid password. Must be a whole number greater than or equal to {min} and less than or equal to {max}.","admin.password.minimumLengthExample":"E.g.: \\"5\\"","admin.password.number":"At least one number","admin.password.preview":"Error message preview","admin.password.symbol":"At least one symbol (e.g. \\"~!@#$%^&*()\\")","admin.password.uppercase":"At least one uppercase letter","admin.permissions.documentationLinkText":"documentation","admin.permissions.group.delete_posts.description":"Delete own and others\' posts.","admin.permissions.group.delete_posts.name":"Delete Posts","admin.permissions.group.edit_posts.description":"Edit own and others\' posts.","admin.permissions.group.edit_posts.name":"Edit Posts","admin.permissions.group.integrations.description":"Manage OAuth 2.0, slash commands, webhooks and emoji.","admin.permissions.group.integrations.name":"Integrations & Customizations","admin.permissions.group.posts.description":"Write, edit and delete posts.","admin.permissions.group.posts.name":"Manage Posts","admin.permissions.group.private_channel.description":"Create and archive channels, manage settings and members.","admin.permissions.group.private_channel.name":"Manage Private Channels","admin.permissions.group.public_channel.description":"Join, create and archive channels, manage settings and members.","admin.permissions.group.public_channel.name":"Manage Public Channels","admin.permissions.group.reactions.description":"Add and delete reactions on posts.","admin.permissions.group.reactions.name":"Post Reactions","admin.permissions.group.send_invites.description":"Add team members, send email invites and share team invite link.","admin.permissions.group.send_invites.name":"Add Team Members","admin.permissions.group.teams_team_scope.description":"Manage team members.","admin.permissions.group.teams_team_scope.name":"Teams","admin.permissions.group.teams.description":"Create teams and manage members.","admin.permissions.group.teams.name":"Teams","admin.permissions.inherited_from":"Inherited from <a>{name}</a>.","admin.permissions.introBanner":"Permission Schemes set the default permissions for Team Admins, Channel Admins and everyone else. Learn more about permission schemes in our [documentation](!https://about.vueteams.com/default-advanced-permissions).","admin.permissions.loadingMoreSchemes":"Loading...","admin.permissions.loadMoreSchemes":"Load more schemes","admin.permissions.permission.assign_system_admin_role.description":"Assign system admin role","admin.permissions.permission.assign_system_admin_role.name":"Assign system admin role","admin.permissions.permission.create_direct_channel.description":"Create direct channel","admin.permissions.permission.create_direct_channel.name":"Create direct channel","admin.permissions.permission.create_emojis.description":"Allow users to create custom emoji.","admin.permissions.permission.create_emojis.name":"Create Custom Emoji","admin.permissions.permission.create_group_channel.description":"Create group channel","admin.permissions.permission.create_group_channel.name":"Create group channel","admin.permissions.permission.create_private_channel.description":"Create new private channels.","admin.permissions.permission.create_private_channel.name":"Create Channels","admin.permissions.permission.create_public_channel.description":"Create new public channels.","admin.permissions.permission.create_public_channel.name":"Create Channels","admin.permissions.permission.create_team.description":"Create new teams.","admin.permissions.permission.create_team.name":"Create Teams","admin.permissions.permission.create_user_access_token.description":"Create user access token","admin.permissions.permission.create_user_access_token.name":"Create user access token","admin.permissions.permission.delete_emojis.description":"Allow users to delete custom emoji that they created.","admin.permissions.permission.delete_emojis.name":"Delete Own Custom Emoji","admin.permissions.permission.delete_others_emojis.description":"Allow users to delete custom emoji that were created by other users.","admin.permissions.permission.delete_others_emojis.name":"Delete Others\' Custom Emoji","admin.permissions.permission.delete_others_posts.description":"Posts made by other users can be deleted.","admin.permissions.permission.delete_others_posts.name":"Delete Others\' Posts","admin.permissions.permission.delete_post.description":"Author\'s own posts can be deleted.","admin.permissions.permission.delete_post.name":"Delete Own Posts","admin.permissions.permission.delete_private_channel.description":"Archive private channels.","admin.permissions.permission.delete_private_channel.name":"Archive Channels","admin.permissions.permission.delete_public_channel.description":"Archive public channels.","admin.permissions.permission.delete_public_channel.name":"Archive Channels","admin.permissions.permission.edit_other_users.description":"Edit other users","admin.permissions.permission.edit_other_users.name":"Edit other users","admin.permissions.permission.edit_others_posts.description":"Allow users to edit others\' posts.","admin.permissions.permission.edit_others_posts.name":"Edit Others\' Posts","admin.permissions.permission.edit_post.description":"{editTimeLimitButton} after posting, allow users to edit their own posts.","admin.permissions.permission.edit_post.name":"Edit Own Posts","admin.permissions.permission.import_team.description":"Import team","admin.permissions.permission.import_team.name":"Import team","admin.permissions.permission.invite_guest.description":"Invite guests to channels and send guest email invites.","admin.permissions.permission.invite_guest.name":"Invite guests","admin.permissions.permission.list_team_channels.description":"List team channels","admin.permissions.permission.list_team_channels.name":"List team channels","admin.permissions.permission.list_users_without_team.description":"List users without team","admin.permissions.permission.list_users_without_team.name":"List users without team","admin.permissions.permission.manage_channel_roles.description":"Manage channel roles","admin.permissions.permission.manage_channel_roles.name":"Manage channel roles","admin.permissions.permission.manage_incoming_webhooks.description":"Create, edit, and delete incoming webhooks.","admin.permissions.permission.manage_incoming_webhooks.name":"Manage Incoming Webhooks","admin.permissions.permission.manage_jobs.description":"Manage jobs","admin.permissions.permission.manage_jobs.name":"Manage jobs","admin.permissions.permission.manage_oauth.description":"Create, edit and delete OAuth 2.0 application tokens.","admin.permissions.permission.manage_oauth.name":"Manage OAuth Applications","admin.permissions.permission.manage_outgoing_webhooks.description":"Create, edit, and delete outgoing webhooks.","admin.permissions.permission.manage_outgoing_webhooks.name":"Manage Outgoing Webhooks","admin.permissions.permission.manage_private_channel_members.description":"Add and remove private channel members.","admin.permissions.permission.manage_private_channel_members.name":"Manage Channel Members","admin.permissions.permission.manage_private_channel_properties.description":"Update private channel names, headers and purposes.","admin.permissions.permission.manage_private_channel_properties.name":"Manage Channel Settings","admin.permissions.permission.manage_public_channel_members.description":"Add and remove public channel members.","admin.permissions.permission.manage_public_channel_members.name":"Manage Channel Members","admin.permissions.permission.manage_public_channel_properties.description":"Update public channel names, headers and purposes.","admin.permissions.permission.manage_public_channel_properties.name":"Manage Channel Settings","admin.permissions.permission.manage_roles.description":"Manage roles","admin.permissions.permission.manage_roles.name":"Manage roles","admin.permissions.permission.manage_slash_commands.description":"Create, edit and delete custom slash commands.","admin.permissions.permission.manage_slash_commands.name":"Manage Slash Commands","admin.permissions.permission.manage_system.description":"Manage system","admin.permissions.permission.manage_system.name":"Manage system","admin.permissions.permission.manage_team_roles.description":"Manage team roles","admin.permissions.permission.manage_team_roles.name":"Manage team roles","admin.permissions.permission.manage_team.description":"Manage team","admin.permissions.permission.manage_team.name":"Manage team","admin.permissions.permission.permanent_delete_user.description":"Permanent delete user","admin.permissions.permission.permanent_delete_user.name":"Permanent delete user","admin.permissions.permission.read_channel.description":"Read channel","admin.permissions.permission.read_channel.name":"Read channel","admin.permissions.permission.read_user_access_token.description":"Read user access token","admin.permissions.permission.read_user_access_token.name":"Read user access token","admin.permissions.permission.remove_user_from_team.description":"Remove user from team","admin.permissions.permission.remove_user_from_team.name":"Remove user from team","admin.permissions.permission.revoke_user_access_token.description":"Revoke user access token","admin.permissions.permission.revoke_user_access_token.name":"Revoke user access token","admin.permissions.permission.upload_file.description":"Upload file","admin.permissions.permission.upload_file.name":"Upload file","admin.permissions.permission.view_team.description":"View team","admin.permissions.permission.view_team.name":"View team","admin.permissions.permissionSchemes":"Permission Schemes","admin.permissions.permissionSchemes.cancel":"Cancel","admin.permissions.permissionsSchemeSummary.delete":"Delete","admin.permissions.permissionsSchemeSummary.deleteConfirmButton":"Yes, Delete","admin.permissions.permissionsSchemeSummary.deleteConfirmQuestion":"The permissions in the teams using this scheme will reset to the defaults in the System Scheme. Are you sure you want to delete the {schemeName} scheme?","admin.permissions.permissionsSchemeSummary.deleteSchemeTitle":"Delete {scheme} scheme?","admin.permissions.permissionsSchemeSummary.deleting":"Deleting...","admin.permissions.permissionsSchemeSummary.edit":"Edit","admin.permissions.permissionsSchemeSummary.moreTeams":"+{number} more","admin.permissions.permissionsTree.description":"Description","admin.permissions.permissionsTree.permission":"Permission","admin.permissions.roles.all_users.name":"All Members","admin.permissions.roles.channel_admin.name":"Channel Admin","admin.permissions.roles.channel_user.name":"Channel User","admin.permissions.roles.system_admin.name":"System Admin","admin.permissions.roles.system_user.name":"System User","admin.permissions.roles.team_admin.name":"Team Admin","admin.permissions.roles.team_user.name":"Team User","admin.permissions.systemScheme":"System Scheme","admin.permissions.systemScheme.allMembersDescription":"Permissions granted to all members, including administrators and newly created users.","admin.permissions.systemScheme.allMembersTitle":"All Members","admin.permissions.systemScheme.channelAdminsDescription":"Permissions granted to channel creators and any users promoted to Channel Administrator.","admin.permissions.systemScheme.channelAdminsTitle":"Channel Administrators","admin.permissions.systemScheme.GuestsDescription":"Permissions granted to guest users.","admin.permissions.systemScheme.GuestsTitle":"Guests","admin.permissions.systemScheme.introBanner":"Configure the default permissions for Team Admins, Channel Admins and other members. This scheme is inherited by all teams unless a [Team Override Scheme](!https://about.vueteams.com/default-team-override-scheme) is applied in specific teams.","admin.permissions.systemScheme.resetDefaultsButton":"Reset to Defaults","admin.permissions.systemScheme.resetDefaultsButtonModalBody":"This will reset all selections on this page to their default settings. Are you sure you want to reset?","admin.permissions.systemScheme.resetDefaultsButtonModalTitle":"Reset to Default?","admin.permissions.systemScheme.resetDefaultsConfirmationButton":"Yes, Reset","admin.permissions.systemScheme.systemAdminsDescription":"Full permissions granted to System Administrators.","admin.permissions.systemScheme.systemAdminsTitle":"System Administrators","admin.permissions.systemScheme.teamAdminsDescription":"Permissions granted to team creators and any users promoted to Team Administrator.","admin.permissions.systemScheme.teamAdminsTitle":"Team Administrators","admin.permissions.systemSchemeBannerButton":"Edit Scheme","admin.permissions.systemSchemeBannerText":"Set the default permissions inherited by all teams unless a [Team Override Scheme](!https://about.vueteams.com/default-team-override-scheme) is applied.","admin.permissions.systemSchemeBannerTitle":"System Scheme","admin.permissions.teamOverrideSchemesBannerText":"Use when specific teams need permission exceptions to the [System Scheme](!https://about.vueteams.com/default-system-scheme).","admin.permissions.teamOverrideSchemesInProgress":"Migration job in progress: Team Override Schemes are not available until the job server completes the permissions migration. Learn more in the {documentationLink}.","admin.permissions.teamOverrideSchemesNewButton":"New Team Override Scheme","admin.permissions.teamOverrideSchemesNoJobsEnabled":"Migration job on hold: Team Override Schemes are not available until the job server can execute the permissions migration. The job will be automatically started when the job server is enabled. Learn more in the {documentationLink}.","admin.permissions.teamOverrideSchemesNoSchemes":"No team override schemes created.","admin.permissions.teamOverrideSchemesTitle":"Team Override Schemes","admin.permissions.teamScheme":"Team Scheme","admin.permissions.teamScheme.addTeams":"Add Teams","admin.permissions.teamScheme.introBanner":"[Team Override Schemes](!https://about.vueteams.com/default-team-override-scheme) set the permissions for Team Admins, Channel Admins and other members in specific teams. Use a Team Override Scheme when specific teams need permission exceptions to the [System Scheme](!https://about.vueteams.com/default-system-scheme).","admin.permissions.teamScheme.noTeams":"No team selected. Please add teams to this list.","admin.permissions.teamScheme.removeTeam":"Remove","admin.permissions.teamScheme.schemeDescriptionLabel":"Scheme Description:","admin.permissions.teamScheme.schemeDescriptionPlaceholder":"Scheme Description","admin.permissions.teamScheme.schemeDetailsDescription":"Set the name and description for this scheme.","admin.permissions.teamScheme.schemeDetailsTitle":"Scheme Details","admin.permissions.teamScheme.schemeNameLabel":"Scheme Name:","admin.permissions.teamScheme.schemeNamePlaceholder":"Scheme Name","admin.permissions.teamScheme.selectTeamsDescription":"Select teams where permission exceptions are required.","admin.permissions.teamScheme.selectTeamsTitle":"Select teams to override permissions","admin.plugin.choose":"Choose File","admin.plugin.cluster_instance":"Cluster Instance","admin.plugin.disable":"Disable","admin.plugin.disabling":"Disabling...","admin.plugin.enable":"Enable","admin.plugin.enable_plugin":"Enable Plugin: ","admin.plugin.enable_plugin.help":"When true, this plugin is enabled.","admin.plugin.enabling":"Enabling...","admin.plugin.error.activate":"Unable to upload the plugin. It may conflict with another plugin on your server.","admin.plugin.error.extract":"Encountered an error when extracting the plugin. Review your plugin file content and try again.","admin.plugin.installedDesc":"Installed plugins on your Vue server. Pre-packaged plugins are installed by default, and can be disabled but not removed.","admin.plugin.installedTitle":"Installed Plugins: ","admin.plugin.management.title":"Plugin Management","admin.plugin.multiple_versions_warning":"There are multiple versions of this plugin installed across your cluster. Re-install this plugin to ensure it works consistently.","admin.plugin.no_plugins":"No installed plugins.","admin.plugin.prepackaged":"pre-packaged","admin.plugin.remove":"Remove","admin.plugin.removing":"Removing...","admin.plugin.settingsButton":"Settings","admin.plugin.state":"State","admin.plugin.state.failed_to_start":"Failed to start","admin.plugin.state.failed_to_start.description":"This plugin failed to start. Check your system logs for errors.","admin.plugin.state.failed_to_stay_running":"Crashing","admin.plugin.state.failed_to_stay_running.description":"This plugin crashed multiple times and is no longer running. Check your system logs for errors.","admin.plugin.state.not_running":"Not running","admin.plugin.state.not_running.description":"This plugin is not enabled.","admin.plugin.state.running":"Running","admin.plugin.state.running.description":"This plugin is running.","admin.plugin.state.starting":"Starting","admin.plugin.state.starting.description":"This plugin is starting.","admin.plugin.state.stopping":"Stopping","admin.plugin.state.stopping.description":"This plugin is stopping.","admin.plugin.state.unknown":"Unknown","admin.plugin.upload":"Upload","admin.plugin.upload.overwrite_modal.desc":"A plugin with this ID already exists. Would you like to overwrite it?","admin.plugin.upload.overwrite_modal.overwrite":"Overwrite","admin.plugin.upload.overwrite_modal.title":"Overwrite existing plugin?","admin.plugin.uploadAndPluginDisabledDesc":"To enable plugins, set **Enable Plugins** to true. See [documentation](!https://about.vueteams.com/default-plugin-uploads) to learn more.","admin.plugin.uploadDesc":"Upload a plugin for your Vue server. See [documentation](!https://about.vueteams.com/default-plugin-uploads) to learn more.","admin.plugin.uploadDisabledDesc":"Enable plugin uploads in config.json. See [documentation](!https://about.vueteams.com/default-plugin-uploads) to learn more.","admin.plugin.uploading":"Uploading...","admin.plugin.uploadTitle":"Upload Plugin: ","admin.plugin.version_title":"Version","admin.plugins.pluginManagement":"Plugin Management","admin.plugins.settings.enable":"Enable Plugins: ","admin.plugins.settings.enableDesc":"When true, enables plugins on your Vue server. Use plugins to integrate with third-party systems, extend functionality, or customize the user interface of your Vue server. See [documentation](!https://about.vueteams.com/default-plugins) to learn more.","admin.plugins.settings.enableMarketplace":"Enable Marketplace:","admin.plugins.settings.enableMarketplaceDesc":"When true, enables System Administrators to install plugins from the [marketplace](https://mattermost.com/pl/default-mattermost-marketplace.html).","admin.plugins.settings.marketplaceUrl":"Marketplace URL:","admin.plugins.settings.marketplaceUrlDesc":"URL of the marketplace server.","admin.privacy.showEmailDescription":"When false, hides the email address of members from everyone except System Administrators.","admin.privacy.showEmailTitle":"Show Email Address: ","admin.privacy.showFullNameDescription":"When false, hides the full name of members from everyone except System Administrators. Username is shown in place of full name.","admin.privacy.showFullNameTitle":"Show Full Name: ","admin.purge.button":"Purge All Caches","admin.purge.purgeDescription":"This will purge all the in-memory caches for things like sessions, accounts, channels, etc. Deployments using High Availability will attempt to purge all the servers in the cluster. Purging the caches may adversely impact performance.","admin.purge.purgeFail":"Purging unsuccessful: {error}","admin.rate.enableLimiterDescription":"When true, APIs are throttled at rates specified below.","admin.rate.enableLimiterTitle":"Enable Rate Limiting: ","admin.rate.httpHeaderDescription":"When filled in, vary rate limiting by HTTP header field specified (e.g. when configuring NGINX set to \\"X-Real-IP\\", when configuring AmazonELB set to \\"X-Forwarded-For\\").","admin.rate.httpHeaderExample":"E.g.: \\"X-Real-IP\\", \\"X-Forwarded-For\\"","admin.rate.httpHeaderTitle":"Vary rate limit by HTTP header:","admin.rate.maxBurst":"Maximum Burst Size:","admin.rate.maxBurstDescription":"Maximum number of requests allowed beyond the per second query limit.","admin.rate.maxBurstExample":"E.g.: \\"100\\"","admin.rate.memoryDescription":"Maximum number of users sessions connected to the system as determined by \\"Vary rate limit by remote address\\" and \\"Vary rate limit by HTTP header\\" settings below.","admin.rate.memoryExample":"E.g.: \\"10000\\"","admin.rate.memoryTitle":"Memory Store Size:","admin.rate.noteDescription":"Changing properties in this section will require a server restart before taking effect.","admin.rate.queriesDescription":"Throttles API at this number of requests per second.","admin.rate.queriesExample":"E.g.: \\"10\\"","admin.rate.queriesTitle":"Maximum Queries per Second:","admin.rate.remoteDescription":"When true, rate limit API access by IP address.","admin.rate.remoteTitle":"Vary rate limit by remote address: ","admin.rate.title":"Rate Limiting","admin.rate.varyByUser":"Vary rate limit by user: ","admin.rate.varyByUserDescription":"When true, rate limit API access by user authentication token.","admin.recycle.button":"Recycle Database Connections","admin.recycle.recycleDescription":"Deployments using multiple databases can switch from one master database to another without restarting the Vue server by updating \\"config.json\\" to the new desired configuration and using the {reloadConfiguration} feature to load the new settings while the server is running. The administrator should then use {featureName} feature to recycle the database connections based on the new settings.","admin.recycle.recycleDescription.featureName":"Recycle Database Connections","admin.recycle.recycleDescription.reloadConfiguration":"Environment > Web Server > Reload Configuration from Disk","admin.recycle.reloadFail":"Recycling unsuccessful: {error}","admin.regenerate":"Regenerate","admin.reload.button":"Reload Configuration From Disk","admin.reload.reloadDescription":"Deployments using multiple databases can switch from one master database to another without restarting the Vue server by updating \\"config.json\\" to the new desired configuration and using the {featureName} feature to load the new settings while the server is running. The administrator should then use the {recycleDatabaseConnections} feature to recycle the database connections based on the new settings.","admin.reload.reloadDescription.featureName":"Reload Configuration from Disk","admin.reload.reloadDescription.recycleDatabaseConnections":"Environment > Database > Recycle Database Connections","admin.reload.reloadFail":"Reloading unsuccessful: {error}","admin.requestButton.loading":" Loading...","admin.requestButton.requestFailure":"Test Failure: {error}","admin.requestButton.requestSuccess":"Test Successful","admin.reset_email.cancel":"Cancel","admin.reset_email.newEmail":"New Email","admin.reset_email.reset":"Reset","admin.reset_email.titleReset":"Update Email","admin.reset_password.cancel":"Cancel","admin.reset_password.curentPassword":"Current Password","admin.reset_password.missing_current":"Please enter your current password.","admin.reset_password.newPassword":"New Password","admin.reset_password.reset":"Reset","admin.reset_password.titleReset":"Reset Password","admin.reset_password.titleSwitch":"Switch Account to Email/Password","admin.revoke_token_button.delete":"Delete","admin.s3.connectionS3Test":"Test Connection","admin.s3.s3Fail":"Connection unsuccessful: {error}","admin.s3.s3Success":"Connection was successful","admin.s3.testing":"Testing...","admin.saml.assertionConsumerServiceURLEx":"E.g.: \\"https://<your-mattermost-url>/login/sso/saml\\"","admin.saml.assertionConsumerServiceURLPopulatedDesc":"This field is also known as the Assertion Consumer Service URL.","admin.saml.assertionConsumerServiceURLTitle":"Service Provider Login URL:","admin.saml.emailAttrDesc":"The attribute in the SAML Assertion that will be used to populate the email addresses of users in Vue.","admin.saml.emailAttrEx":"E.g.: \\"Email\\" or \\"PrimaryEmail\\"","admin.saml.emailAttrTitle":"Email Attribute:","admin.saml.enableDescription":"When true, Vue allows login using SAML 2.0. Please see [documentation](!http://docs..vueteams.com/deployment/sso-saml.html) to learn more about configuring SAML for Vue.","admin.saml.enableSyncWithLdapDescription":"When true, Vue periodically synchronizes SAML user attributes, including user deactivation and removal, from AD/LDAP. Enable and configure synchronization settings at **Authentication > AD/LDAP**. When false, user attributes are updated from SAML during user login. See [documentation](!https://about.vueteams.com/default-saml-ldap-sync) to learn more.","admin.saml.enableSyncWithLdapIncludeAuthDescription":"When true, Vue will override the SAML ID attribute with the AD/LDAP ID attribute if configured or override the SAML Email attribute with the AD/LDAP Email attribute if SAML ID attribute is not present.  This will allow you automatically migrate users from Email binding to ID binding to prevent creation of new users when an email address changes for a user. Moving from true to false, will remove the override from happening.\\n \\n**Note:** SAML IDs must match the LDAP IDs to prevent disabling of user accounts.  Please review [documentation](!https://docs.vueteams.com/deployment/sso-saml-ldapsync.html) for more information.","admin.saml.enableSyncWithLdapIncludeAuthTitle":"Override SAML bind data with AD/LDAP information:","admin.saml.enableSyncWithLdapTitle":"Enable Synchronizing SAML Accounts With AD/LDAP:","admin.saml.enableTitle":"Enable Login With SAML 2.0:","admin.saml.encryptDescription":"When false, Vue will not decrypt SAML Assertions encrypted with your Service Provider Public Certificate. Disabling encryption is not recommended for production environments.","admin.saml.encryptTitle":"Enable Encryption:","admin.saml.firstnameAttrDesc":"(Optional) The attribute in the SAML Assertion that will be used to populate the first name of users in Vue.","admin.saml.firstnameAttrEx":"E.g.: \\"FirstName\\"","admin.saml.firstnameAttrTitle":"First Name Attribute:","admin.saml.idAttrDesc":"(Optional) The attribute in the SAML Assertion that will be used to bind users from SAML to users in Vue.","admin.saml.idAttrEx":"E.g.: \\"Id\\"","admin.saml.idAttrTitle":"Id Attribute:","admin.saml.idpCertificateFileDesc":"The public authentication certificate issued by your Identity Provider.","admin.saml.idpCertificateFileRemoveDesc":"Remove the public authentication certificate issued by your Identity Provider.","admin.saml.idpCertificateFileTitle":"Identity Provider Public Certificate:","admin.saml.idpDescriptorUrlDesc":"The issuer URL for the Identity Provider you use for SAML requests.","admin.saml.idpDescriptorUrlEx":"E.g.: \\"https://idp.example.org/SAML2/issuer\\"","admin.saml.idpDescriptorUrlTitle":"Identity Provider Issuer URL:","admin.saml.idpUrlDesc":"The URL where Vue sends a SAML request to start login sequence.","admin.saml.idpUrlEx":"E.g.: \\"https://idp.example.org/SAML2/SSO/Login\\"","admin.saml.idpUrlTitle":"SAML SSO URL:","admin.saml.lastnameAttrDesc":"(Optional) The attribute in the SAML Assertion that will be used to populate the last name of users in Vue.","admin.saml.lastnameAttrEx":"E.g.: \\"LastName\\"","admin.saml.lastnameAttrTitle":"Last Name Attribute:","admin.saml.localeAttrDesc":"(Optional) The attribute in the SAML Assertion that will be used to populate the language of users in Vue.","admin.saml.localeAttrEx":"E.g.: \\"Locale\\" or \\"PrimaryLanguage\\"","admin.saml.localeAttrTitle":"Preferred Language Attribute:","admin.saml.loginButtonTextDesc":"(Optional) The text that appears in the login button on the login page. Defaults to \\"SAML\\".","admin.saml.loginButtonTextEx":"E.g.: \\"OKTA\\"","admin.saml.loginButtonTextTitle":"Login Button Text:","admin.saml.nicknameAttrDesc":"(Optional) The attribute in the SAML Assertion that will be used to populate the nickname of users in Vue.","admin.saml.nicknameAttrEx":"E.g.: \\"Nickname\\"","admin.saml.nicknameAttrTitle":"Nickname Attribute:","admin.saml.positionAttrDesc":"(Optional) The attribute in the SAML Assertion that will be used to populate the position of users in Vue.","admin.saml.positionAttrEx":"E.g.: \\"Role\\"","admin.saml.positionAttrTitle":"Position Attribute:","admin.saml.privateKeyFileFileDesc":"The private key used to decrypt SAML Assertions from the Identity Provider.","admin.saml.privateKeyFileFileRemoveDesc":"Remove the private key used to decrypt SAML Assertions from the Identity Provider.","admin.saml.privateKeyFileTitle":"Service Provider Private Key:","admin.saml.publicCertificateFileDesc":"The certificate used to generate the signature on a SAML request to the Identity Provider for a service provider initiated SAML login, when Vue is the Service Provider.","admin.saml.publicCertificateFileRemoveDesc":"Remove the certificate used to generate the signature on a SAML request to the Identity Provider for a service provider initiated SAML login, when Vue is the Service Provider.","admin.saml.publicCertificateFileTitle":"Service Provider Public Certificate:","admin.saml.remove.idp_certificate":"Remove Identity Provider Certificate","admin.saml.remove.privKey":"Remove Service Provider Private Key","admin.saml.remove.sp_certificate":"Remove Service Provider Certificate","admin.saml.removing.certificate":"Removing Certificate...","admin.saml.removing.privKey":"Removing Private Key...","admin.saml.signRequestDescription":"When true, Vue will sign the SAML request using your private key. When false, Vue will not sign the SAML request.","admin.saml.signRequestTitle":"Sign Request:","admin.saml.uploading.certificate":"Uploading Certificate...","admin.saml.uploading.privateKey":"Uploading Private Key...","admin.saml.usernameAttrDesc":"The attribute in the SAML Assertion that will be used to populate the username field in Vue.","admin.saml.usernameAttrEx":"E.g.: \\"Username\\"","admin.saml.usernameAttrTitle":"Username Attribute:","admin.saml.verifyDescription":"When false, Vue will not verify that the signature sent from a SAML Response matches the Service Provider Login URL. Disabling verification is not recommended for production environments.","admin.saml.verifyTitle":"Verify Signature:","admin.saving":"Saving Config...","admin.security.password":"Password","admin.security.requireEmailVerification.disabled":"Email verification cannot be changed while sending emails is disabled.","admin.service.attemptDescription":"Number of login attempts allowed before a user is locked out and required to reset their password via email.","admin.service.attemptExample":"E.g.: \\"10\\"","admin.service.attemptTitle":"Maximum Login Attempts:","admin.service.cmdsDesc":"When true, custom slash commands will be allowed. See [documentation](!http://docs..vueteams.com/developer/slash-commands.html) to learn more.","admin.service.cmdsTitle":"Enable Custom Slash Commands: ","admin.service.complianceExportDesc":"When true, Vue will export all messages that were posted in the last 24 hours. The export task is scheduled to run once per day. See [the documentation](!https://about.vueteams.com/default-compliance-export-documentation) to learn more.","admin.service.complianceExportTitle":"Enable Compliance Export:","admin.service.corsAllowCredentialsDescription":"When true, requests that pass validation will include the Access-Control-Allow-Credentials header.","admin.service.corsAllowCredentialsLabel":"CORS Allow Credentials:","admin.service.corsDebugDescription":"When true, prints messages to the logs to help when developing an integration that uses CORS. These messages will include the structured key value pair \\"source\\":\\"cors\\".","admin.service.CorsDebugLabel":"CORS Debug:","admin.service.corsDescription":"Enable HTTP Cross origin request from a specific domain. Use \\"*\\" if you want to allow CORS from any domain or leave it blank to disable it. Should not be set to \\"*\\" in production.","admin.service.corsEx":"http://example.com","admin.service.corsExposedHeadersDescription":"Whitelist of headers that will be accessible to the requester.","admin.service.corsExposedHeadersTitle":"CORS Exposed Headers:","admin.service.corsHeadersEx":"X-My-Header","admin.service.corsTitle":"Enable cross-origin requests from:","admin.service.developerDesc":"When true, JavaScript errors are shown in a purple bar at the top of the user interface. Not recommended for use in production. ","admin.service.developerTitle":"Enable Developer Mode: ","admin.service.disableBotOwnerDeactivatedTitle":"Disable bot accounts when owner is deactivated:","admin.service.disableBotWhenOwnerIsDeactivated":"When a user is deactivated, disables all bot accounts managed by the user. To re-enable bot accounts, go to [Integrations > Bot Accounts]({siteURL}/_redirect/integrations/bots).","admin.service.enableBotAccountCreation":"When true, users can create bot accounts for integrations in [Integrations > Bot Accounts]({siteURL}/_redirect/integrations/bots). Bot accounts are similar to user accounts except they cannot be used to log in. See [documentation](https://mattermost.com/pl/default-bot-accounts) to learn more.","admin.service.enableBotTitle":"Enable Bot Account Creation: ","admin.service.enforceMfaDesc":"When true, [multi-factor authentication](!https://docs.vueteams.com/deployment/auth.html) is required for login. New users will be required to configure MFA on signup. Logged in users without MFA configured are redirected to the MFA setup page until configuration is complete.\\n \\nIf your system has users with login methods other than AD/LDAP and email, MFA must be enforced with the authentication provider outside of Vue.","admin.service.enforceMfaTitle":"Enforce Multi-factor Authentication:","admin.service.forward80To443":"Forward port 80 to 443:","admin.service.forward80To443Description":"Forwards all insecure traffic from port 80 to secure port 443. Not recommended when using a proxy server.","admin.service.forward80To443Description.disabled":"Forwards all insecure traffic from port 80 to secure port 443. Not recommended when using a proxy server.\\n \\nThis setting cannot be enabled until your server is [listening](#ListenAddress) on port 443.","admin.service.googleDescription":"Set this key to enable the display of titles for embedded YouTube video previews. Without the key, YouTube previews will still be created based on hyperlinks appearing in messages or comments but they will not show the video title. View a [Google Developers Tutorial](!https://www.youtube.com/watch?v=Im69kzhpR3I) for instructions on how to obtain a key and add YouTube Data API v3 as a service to your key.","admin.service.googleExample":"E.g.: \\"7rAh6iwQCkV4cA1Gsg3fgGOXJAQ43QV\\"","admin.service.googleTitle":"Google API Key:","admin.service.iconDescription":"When true, webhooks, slash commands and other integrations, such as [Zapier](!https://docs.vueteams.com/integrations/zapier.html), will be allowed to change the profile picture they post with. Note: Combined with allowing integrations to override usernames, users may be able to perform phishing attacks by attempting to impersonate other users.","admin.service.iconTitle":"Enable integrations to override profile picture icons:","admin.service.insecureTlsDesc":"When true, any outgoing HTTPS requests will accept unverified, self-signed certificates. For example, outgoing webhooks to a server with a self-signed TLS certificate, using any domain, will be allowed. Note that this makes these connections susceptible to man-in-the-middle attacks.","admin.service.insecureTlsTitle":"Enable Insecure Outgoing Connections: ","admin.service.integrationAdmin":"Restrict managing integrations to Admins:","admin.service.integrationAdminDesc":"When true, webhooks and slash commands can only be created, edited and viewed by Team and System Admins, and OAuth 2.0 applications by System Admins. Integrations are available to all users after they have been created by the Admin.","admin.service.internalConnectionsDesc":"A whitelist of local network addresses that can be requested by the Vue server on behalf of a client. Care should be used when configuring this setting to prevent unintended access to your local network. See [documentation](https://mattermost.com/pl/default-allow-untrusted-internal-connections) to learn more.","admin.service.internalConnectionsEx":"webhooks.internal.example.com 127.0.0.1 10.0.16.0/28","admin.service.internalConnectionsTitle":"Allow untrusted internal connections to: ","admin.service.letsEncryptCertificateCacheFile":"Let\'s Encrypt Certificate Cache File:","admin.service.letsEncryptCertificateCacheFileDescription":"Certificates retrieved and other data about the Let\'s Encrypt service will be stored in this file.","admin.service.listenAddress":"Listen Address:","admin.service.listenDescription":"The address and port to which to bind and listen. Specifying \\":8065\\" will bind to all network interfaces. Specifying \\"127.0.0.1:8065\\" will only bind to the network interface having that IP address. If you choose a port of a lower level (called \\"system ports\\" or \\"well-known ports\\", in the range of 0-1023), you must have permissions to bind to that port. On Linux you can use: \\"sudo setcap cap_net_bind_service=+ep ./bin/mattermost\\" to allow Vue to bind to well-known ports.","admin.service.listenExample":"E.g.: \\":8065\\"","admin.service.mfaDesc":"When true, users with AD/LDAP or email login can add multi-factor authentication to their account using Google Authenticator.","admin.service.mfaTitle":"Enable Multi-factor Authentication:","admin.service.minimumHashtagLengthDescription":"Minimum number of characters in a hashtag. This must be greater than or equal to 2. MySQL databases must be configured to support searching strings shorter than three characters, [see documentation](!https://dev.mysql.com/doc/refman/8.0/en/fulltext-fine-tuning.html).","admin.service.minimumHashtagLengthExample":"E.g.: \\"3\\"","admin.service.minimumHashtagLengthTitle":"Minimum Hashtag Length:","admin.service.mobileSessionDays":"Session Length Mobile (days):","admin.service.mobileSessionDaysDesc":"The number of days from the last time a user entered their credentials to the expiry of the user\'s session. After changing this setting, the new session length will take effect after the next time the user enters their credentials.","admin.service.outWebhooksDesc":"When true, outgoing webhooks will be allowed. See [documentation](!http://docs..vueteams.com/developer/webhooks-outgoing.html) to learn more.","admin.service.outWebhooksTitle":"Enable Outgoing Webhooks: ","admin.service.overrideDescription":"When true, webhooks, slash commands and other integrations, such as [Zapier](!https://docs.vueteams.com/integrations/zapier.html), will be allowed to change the username they are posting as. Note: Combined with allowing integrations to override profile picture icons, users may be able to perform phishing attacks by attempting to impersonate other users.","admin.service.overrideTitle":"Enable integrations to override usernames:","admin.service.readTimeout":"Read Timeout:","admin.service.readTimeoutDescription":"Maximum time allowed from when the connection is accepted to when the request body is fully read.","admin.service.sessionCache":"Session Cache (minutes):","admin.service.sessionCacheDesc":"The number of minutes to cache a session in memory.","admin.service.sessionDaysEx":"E.g.: \\"30\\"","admin.service.sessionIdleTimeout":"Session Idle Timeout (minutes):","admin.service.sessionIdleTimeoutDesc":"The number of minutes from the last time a user was active on the system to the expiry of the user\'s session. Once expired, the user will need to log in to continue. Minimum is 5 minutes, and 0 is unlimited.\\n \\nApplies to the desktop app and browsers. For mobile apps, use an EMM provider to lock the app when not in use. In High Availability mode, enable IP hash load balancing for reliable timeout measurement.","admin.service.sessionIdleTimeoutEx":"E.g.: \\"60\\"","admin.service.siteURL":"Site URL:","admin.service.siteURLDescription":"The URL that users will use to access Vue. Standard ports, such as 80 and 443, can be omitted, but non-standard ports are required. For example: http://example.com:8065. This setting is required.\\n \\nVue may be hosted at a subpath. For example: http://example.com:8065/company/mattermost. A restart is required before the server will work correctly.","admin.service.siteURLExample":"E.g.: \\"http://example.com:8065\\"","admin.service.ssoSessionDays":"Session Length SSO (days):","admin.service.ssoSessionDaysDesc":"The number of days from the last time a user entered their credentials to the expiry of the user\'s session. If the authentication method is SAML or GitLab, the user may automatically be logged back in to Vue if they are already logged in to SAML or GitLab. After changing this setting, the setting will take effect after the next time the user enters their credentials.","admin.service.testingDescription":"When true, /test slash command is enabled to load test accounts, data and text formatting. Changing this requires a server restart before taking effect.","admin.service.testingTitle":"Enable Testing Commands: ","admin.service.tlsCertFile":"TLS Certificate File:","admin.service.tlsCertFileDescription":"The certificate file to use.","admin.service.tlsKeyFile":"TLS Key File:","admin.service.tlsKeyFileDescription":"The private key file to use.","admin.service.useLetsEncrypt":"Use Let\'s Encrypt:","admin.service.useLetsEncryptDescription":"Enable the automatic retrieval of certificates from Let\'s Encrypt. The certificate will be retrieved when a client attempts to connect from a new domain. This will work with multiple domains.","admin.service.useLetsEncryptDescription.disabled":"Enable the automatic retrieval of certificates from Let\'s Encrypt. The certificate will be retrieved when a client attempts to connect from a new domain. This will work with multiple domains.\\n \\nThis setting cannot be enabled unless the [Forward port 80 to 443](#Forward80To443) setting is set to true.","admin.service.userAccessTokensDescription":"When true, users can create [user access tokens](!https://about.vueteams.com/default-user-access-tokens) for integrations in **Account Settings > Security**. They can be used to authenticate against the API and give full access to the account.\\n\\n To manage who can create personal access tokens or to search users by token ID, go to the **User Management > Users** page.","admin.service.userAccessTokensTitle":"Enable Personal Access Tokens: ","admin.service.webhooksDescription":"When true, incoming webhooks will be allowed. To help combat phishing attacks, all posts from webhooks will be labelled by a BOT tag. See [documentation](!http://docs..vueteams.com/developer/webhooks-incoming.html) to learn more.","admin.service.webhooksTitle":"Enable Incoming Webhooks: ","admin.service.webSessionDays":"Session Length AD/LDAP and Email (days):","admin.service.webSessionDaysDesc":"The number of days from the last time a user entered their credentials to the expiry of the user\'s session. After changing this setting, the new session length will take effect after the next time the user enters their credentials.","admin.service.writeTimeout":"Write Timeout:","admin.service.writeTimeoutDescription":"If using HTTP (insecure), this is the maximum time allowed from the end of reading the request headers until the response is written. If using HTTPS, it is the total time from when the connection is accepted until the response is written.","admin.set_by_env":"This setting has been set through an environment variable. It cannot be changed through the System Console.","admin.sidebar.about":"About","admin.sidebar.announcement":"Announcement Banner","admin.sidebar.authentication":"Authentication","admin.sidebar.channels":"Channels","admin.sidebar.compliance":"Compliance","admin.sidebar.complianceExport":"Compliance Export (Beta)","admin.sidebar.complianceMonitoring":"Compliance Monitoring","admin.sidebar.cors":"CORS","admin.sidebar.customization":"Customization","admin.sidebar.customTermsOfService":"Custom Terms of Service (Beta)","admin.sidebar.database":"Database","admin.sidebar.dataRetentionPolicy":"Data Retention Policy","admin.sidebar.developer":"Developer","admin.sidebar.elasticsearch":"Elasticsearch","admin.sidebar.email":"Email","admin.sidebar.emoji":"Emoji","admin.sidebar.environment":"Environment","admin.sidebar.experimental":"Experimental","admin.sidebar.experimentalFeatures":"Features","admin.sidebar.fileSharingDownloads":"File Sharing and Downloads","admin.sidebar.fileStorage":"File Storage","admin.sidebar.filter":"Find settings","admin.sidebar.filter-clear":"Clear search","admin.sidebar.gif":"GIF (Beta)","admin.sidebar.gitlab":"GitLab","admin.sidebar.groups":"Groups","admin.sidebar.guest_access":"Guest Access (Beta)","admin.sidebar.highAvailability":"High Availability","admin.sidebar.imageProxy":"Image Proxy","admin.sidebar.integrations":"Integrations","admin.sidebar.ldap":"AD/LDAP","admin.sidebar.license":"Edition and License","admin.sidebar.localization":"Localization","admin.sidebar.logging":"Logging","admin.sidebar.logs":"Server Logs","admin.sidebar.metrics":"Performance Monitoring","admin.sidebar.mfa":"MFA","admin.sidebar.notifications":"Notifications","admin.sidebar.oauth":"OAuth 2.0","admin.sidebar.password":"Password","admin.sidebar.permissions":"Permissions","admin.sidebar.plugins":"Plugins (Beta)","admin.sidebar.posts":"Posts","admin.sidebar.publicLinks":"Public Links","admin.sidebar.pushNotificationServer":"Push Notification Server","admin.sidebar.rateLimiting":"Rate Limiting","admin.sidebar.reporting":"Reporting","admin.sidebar.saml":"SAML 2.0","admin.sidebar.sessionLengths":"Session Lengths","admin.sidebar.signup":"Signup","admin.sidebar.site":"Site Configuration","admin.sidebar.siteStatistics":"Site Statistics","admin.sidebar.smtp":"SMTP","admin.sidebar.teams":"Teams","admin.sidebar.teamStatistics":"Team Statistics","admin.sidebar.userManagement":"User Management","admin.sidebar.users":"Users","admin.sidebar.usersAndTeams":"Users and Teams","admin.sidebar.webServer":"Web Server","admin.sidebarHeader.systemConsole":"System Console","admin.site.announcementBanner":"Announcement Banner","admin.site.customization":"Customization","admin.site.emoji":"Emoji","admin.site.fileSharingDownloads":"File Sharing and Downloads","admin.site.localization":"Localization","admin.site.posts":"Posts","admin.site.public_links":"Public Links","admin.site.usersAndTeams":"Users and Teams","admin.sql.connMaxLifetimeDescription":"Maximum lifetime (in milliseconds) for a connection to the database.","admin.sql.connMaxLifetimeExample":"E.g.: \\"3600000\\"","admin.sql.connMaxLifetimeTitle":"Maximum Connection Lifetime:","admin.sql.dataSource":"Data Source:","admin.sql.dataSourceDescription":"Set the database source in the config.json file.","admin.sql.driverName":"Driver Name:","admin.sql.driverNameDescription":"Set the database driver in the config.json file.","admin.sql.maxConnectionsDescription":"Maximum number of idle connections held open to the database.","admin.sql.maxConnectionsExample":"E.g.: \\"10\\"","admin.sql.maxConnectionsTitle":"Maximum Idle Connections:","admin.sql.maxOpenDescription":"Maximum number of open connections held open to the database.","admin.sql.maxOpenExample":"E.g.: \\"10\\"","admin.sql.maxOpenTitle":"Maximum Open Connections:","admin.sql.noteDescription":"Changing properties in this section will require a server restart before taking effect.","admin.sql.queryTimeoutDescription":"The number of seconds to wait for a response from the database after opening a connection and sending the query. Errors that you see in the UI or in the logs as a result of a query timeout can vary depending on the type of query.","admin.sql.queryTimeoutExample":"E.g.: \\"30\\"","admin.sql.queryTimeoutTitle":"Query Timeout:","admin.sql.traceDescription":"(Development Mode) When true, executing SQL statements are written to the log.","admin.sql.traceTitle":"SQL Statement Logging: ","admin.support.aboutDesc":"The URL for the About link on the Vue login and sign-up pages. If this field is empty, the About link is hidden from users.","admin.support.aboutTitle":"About Link:","admin.support.emailHelp":"Email address displayed on email notifications and during tutorial for end users to ask support questions.","admin.support.emailTitle":"Support Email:","admin.support.enableTermsOfServiceHelp":"When true, new users must accept the terms of service before accessing any Vue teams on desktop, web or mobile. Existing users must accept them after login or a page refresh.\\n \\nTo update terms of service link displayed in account creation and login pages, go to [Site Configuration > Customization](../site_config/customization).","admin.support.enableTermsOfServiceTitle":"Enable Custom Terms of Service:","admin.support.helpDesc":"The URL for the Help link on the Vue login page, sign-up pages, and Main Menu. If this field is empty, the Help link is hidden from users.","admin.support.helpTitle":"Help Link:","admin.support.privacyDesc":"The URL for the Privacy link on the login and sign-up pages. If this field is empty, the Privacy link is hidden from users.","admin.support.privacyTitle":"Privacy Policy Link:","admin.support.problemDesc":"The URL for the Report a Problem link in the Main Menu. If this field is empty, the link is removed from the Main Menu.","admin.support.problemTitle":"Report a Problem Link:","admin.support.termsDesc":"Link to the terms under which users may use your online service. By default, this includes the \\"Vue Conditions of Use (End Users)\\" explaining the terms under which Vue software is provided to end users. If you change the default link to add your own terms for using the service you provide, your new terms must include a link to the default terms so end users are aware of the Vue Conditions of Use (End User) for Vue software.","admin.support.termsOfServiceReAcceptanceHelp":"The number of days before Terms of Service acceptance expires, and the terms must be re-accepted.","admin.support.termsOfServiceReAcceptanceTitle":"Re-Acceptance Period:","admin.support.termsOfServiceTextHelp":"Text that will appear in your custom Terms of Service. Supports Markdown-formatted text.","admin.support.termsOfServiceTextTitle":"Custom Terms of Service Text:","admin.support.termsOfServiceTitle":"Custom Terms of Service (Beta)","admin.support.termsTitle":"Terms of Service Link:","admin.system_users.allUsers":"All Users","admin.system_users.guest":"Guest","admin.system_users.inactive":"Inactive","admin.system_users.noTeams":"No Teams","admin.system_users.revoke_all_sessions_button":"Revoke All Sessions","admin.system_users.revoke_all_sessions_modal_message":"This action revokes all sessions in the system. All users will be logged out from all devices. Are you sure you want to revoke all sessions?","admin.system_users.revoke_all_sessions_modal_title":"Revoke all sessions in the system","admin.system_users.revokeAllSessions":"Revoke All Sessions","admin.system_users.system_admin":"System Admin","admin.system_users.title":"{siteName} Users","admin.systemUserDetail.title":"User Configuration","admin.team_channel_settings.cancel":"Cancel","admin.team_channel_settings.convertAndRemoveConfirmModal.cancel":"No, cancel","admin.team_channel_settings.convertAndRemoveConfirmModal.toPrivateConfirm":"Yes, convert channel to private and remove {amount, number} {amount, plural, one {user} other {users}}","admin.team_channel_settings.convertAndRemoveConfirmModal.toPrivateTitle":"Convert channel to a private and remove {amount, number} {amount, plural, one {user} other {users}}?","admin.team_channel_settings.convertAndRemoveConfirmModal.toPublicConfirm":"Yes, convert channel to public and remove {amount, number} {amount, plural, one {user} other {users}}","admin.team_channel_settings.convertAndRemoveConfirmModal.toPublicTitle":"Convert channel to public and remove {amount, number} {amount, plural, one {user} other {users}}","admin.team_channel_settings.convertConfirmModal.cancel":"No, cancel","admin.team_channel_settings.convertConfirmModal.toPrivateConfirm":"Yes, convert to private channel","admin.team_channel_settings.convertConfirmModal.toPrivateMessage":"When you convert **{displayName}** to a private channel, history and membership are preserved. Publicly shared files remain accessible to anyone with the link. Membership in a private channel is by invitation only.  \\n \\nAre you sure you want to convert **{displayName}** to a private channel?","admin.team_channel_settings.convertConfirmModal.toPrivateTitle":"Convert {displayName} to a private channel?","admin.team_channel_settings.convertConfirmModal.toPublicConfirm":"Yes, convert to public channel","admin.team_channel_settings.convertConfirmModal.toPublicMessage":"When you convert **{displayName}** to a public channel, history and membership are preserved. Public channels are discoverable and can by joined by users on the system without invitation.  \\n \\nAre you sure you want to convert **{displayName}** to a public channel?","admin.team_channel_settings.convertConfirmModal.toPublicTitle":"Convert {displayName} to a public channel?","admin.team_channel_settings.group_list.membersHeader":"Member Count","admin.team_channel_settings.group_list.nameHeader":"Name","admin.team_channel_settings.group_list.no-groups":"No groups specified yet","admin.team_channel_settings.group_list.no-synced-groups":"At least one group must be specified","admin.team_channel_settings.group_row.members":"{memberCount, number} {memberCount, plural, one {member} other {members}}","admin.team_channel_settings.group_row.remove":"Remove","admin.team_channel_settings.list.paginatorCount":"{startCount, number} - {endCount, number} of {total, number}","admin.team_channel_settings.need_domains":"Please specify emails domains.","admin.team_channel_settings.need_groups":"You must add at least one group to manage this team by sync group members.","admin.team_channel_settings.removeConfirmModal.messageChannel":"{amount, number} {amount, plural, one {user} other {users}} will be removed on the next AD/LDAP synchronization. They are not in groups linked to this channel. Are you sure you wish to remove these users?","admin.team_channel_settings.removeConfirmModal.messageGroup":"{amount, number} {amount, plural, one {user} other {users}} will be removed on the next AD/LDAP synchronization. They are not in groups linked to this group. Are you sure you wish to remove these users?","admin.team_channel_settings.removeConfirmModal.remove":"Save and remove {amount, plural, one {user} other {users}}","admin.team_channel_settings.removeConfirmModal.title":"Save and remove {amount, number} {amount, plural, one {user} other {users}}?","admin.team_channel_settings.saving":"Saving Config...","admin.team_channel_settings.user_list.groupsHeader":"Groups","admin.team_channel_settings.user_list.nameHeader":"Name","admin.team_channel_settings.user_list.roleHeader":"Role","admin.team_channel_settings.users_will_be_removed":"{amount, number} {amount, plural, one {user} other {users}} will be removed from this team. They are not in groups linked to this team.","admin.team_channel_settings.usersToBeRemovedModal.close":"Close","admin.team_channel_settings.usersToBeRemovedModal.message":"The members listed below are not in any of the groups currently linked to this team. Because this team is set to be managed by group sync they will all be removed once saved.","admin.team_channel_settings.usersToBeRemovedModal.title":"**{total, number} {total, plural, one {User} other {Users}}** To Be Removed","admin.team_channel_settings.view_removed_users":"View These Users","admin.team_settings.description":"Showing {startCount, number} - {endCount, number} of {total, number} teams. Manage team settings.","admin.team_settings.groupsPageTitle":"{siteName} Teams","admin.team_settings.team_detail.group_configuration":"Team Configuration","admin.team_settings.team_detail.groupsDescription":"Group members will be added to the team.","admin.team_settings.team_detail.groupsTitle":"Groups","admin.team_settings.team_detail.manageDescription":"Choose between inviting members manually or syncing members automatically from groups.","admin.team_settings.team_detail.manageTitle":"Team Management","admin.team_settings.team_detail.profileDescription":"Summary of the team, including team name and description.","admin.team_settings.team_detail.profileNoDescription":"No team description added.","admin.team_settings.team_detail.profileTitle":"Team Profile","admin.team_settings.team_detail.syncedGroupsDescription":"Add and remove team members based on their group membership.","admin.team_settings.team_detail.syncedGroupsTitle":"Synced Groups","admin.team_settings.team_detail.teamDescription":"**Team Description**:","admin.team_settings.team_detail.teamName":"**Team Name**:","admin.team_settings.team_details.add_group":"Add Group","admin.team_settings.team_details.anyoneCanJoin":"Anyone can join this team","admin.team_settings.team_details.anyoneCanJoinDescr":"This team can be discovered allowing anyone with an account to join this team.","admin.team_settings.team_details.csvDomains":"Comma Separated Email Domain List","admin.team_settings.team_details.specificDomains":"Only specific email domains can join this team","admin.team_settings.team_details.specificDomainsDescr":"Users can only join the team if their email matches one of the specified domains","admin.team_settings.team_details.syncGroupMembers":"Sync Group Members","admin.team_settings.team_details.syncGroupMembersDescr":"When enabled, adding and removing users from groups will add or remove them from this team. The only way of inviting members to this team is by adding the groups they belong to. [Learn More](!https://www.vueteams.com/pl/default-ldap-group-constrained-team-channel.html)","admin.team_settings.team_list.mappingHeader":"Management","admin.team_settings.team_list.nameHeader":"Name","admin.team_settings.team_list.no_teams_found":"No teams found","admin.team_settings.team_row.configure":"Edit","admin.team_settings.title":"Teams","admin.team.brandDesc":"Enable custom branding to show an image of your choice, uploaded below, and some help text, written below, on the login page.","admin.team.brandDescriptionHelp":"Description of service shown in login screens and UI. When not specified, \\"All team communication in one place, searchable and accessible anywhere\\" is displayed.","admin.team.brandDescriptionTitle":"Site Description: ","admin.team.brandImageTitle":"Custom Brand Image:","admin.team.brandTextDescription":"Text that will appear below your custom brand image on your login screen. Supports Markdown-formatted text. Maximum 500 characters allowed.","admin.team.brandTextTitle":"Custom Brand Text:","admin.team.brandTitle":"Enable Custom Branding: ","admin.team.chooseImage":"Select Image","admin.team.editOthersPostsDesc":"When true, Team Administrators and System Administrators can edit other user\'s posts.  When false, only System Administrators can edit other user\'s posts.","admin.team.editOthersPostsTitle":"Allow Team Administrators to edit others posts:","admin.team.emailInvitationsDescription":"When true users can invite others to the system using email.","admin.team.emailInvitationsTitle":"Enable Email Invitations: ","admin.team.invalidateEmailInvitesDescription":"This will invalidate active email invitations that have not been accepted by the user.  By default email invitations expire after 48 hours.","admin.team.invalidateEmailInvitesFail":"Unable to invalidate pending email invites: {error}","admin.team.invalidateEmailInvitesSuccess":"Pending email invitations invalidated successfully","admin.team.invalidateEmailInvitesTitle":"Invalidate pending email invites","admin.team.maxChannelsDescription":"Maximum total number of channels per team, including both active and archived channels.","admin.team.maxChannelsExample":"E.g.: \\"100\\"","admin.team.maxChannelsTitle":"Max Channels Per Team:","admin.team.maxNotificationsPerChannelDescription":"Maximum total number of users in a channel before users typing messages, @all, @here, and @channel no longer send notifications because of performance.","admin.team.maxNotificationsPerChannelExample":"E.g.: \\"1000\\"","admin.team.maxNotificationsPerChannelTitle":"Max Notifications Per Channel:","admin.team.maxUsersDescription":"Maximum total number of users per team, including both active and inactive users.","admin.team.maxUsersExample":"E.g.: \\"25\\"","admin.team.maxUsersTitle":"Max Users Per Team:","admin.team.noBrandImage":"No brand image uploaded","admin.team.openServerDescription":"When true, anyone can signup for a user account on this server without the need to be invited.","admin.team.openServerTitle":"Enable Open Server: ","admin.team.removeBrandImage":"Remove brand image","admin.team.restrict_direct_message_any":"Any user on the Vue server","admin.team.restrict_direct_message_team":"Any member of the team","admin.team.restrictDescription":"User accounts can only be created from a specific domain (e.g. \\"vueteams.com\\") or list of comma-separated domains (e.g. \\"corp.vueteams.com, vueteams.com\\").","admin.team.restrictDirectMessage":"Enable users to open Direct Message channels with:","admin.team.restrictDirectMessageDesc":"\'Any user on the Vue server\' enables users to open a Direct Message channel with any user on the server, even if they are not on any teams together. \'Any member of the team\' limits the ability in the Direct Messages \'More\' menu to only open Direct Message channels with users who are in the same team.\\n \\nNote: This setting only affects the UI, not permissions on the server.","admin.team.restrictExample":"E.g.: \\"corp.vueteams.com, vueteams.com\\"","admin.team.restrictGuestDescription":"User accounts can only be created from a specific domain (e.g. \\"vueteams.com\\") or list of comma-separated domains (e.g. \\"corp.vueteams.com, vueteams.com\\"). This setting only affects email login for users. For Guest users, please add domains under Signup > Guest Access.","admin.team.restrictTitle":"Restrict account creation to specified email domains:","admin.team.showFullname":"Show first and last name","admin.team.showNickname":"Show nickname if one exists, otherwise show first and last name","admin.team.showUsername":"Show username (default)","admin.team.siteNameDescription":"Name of service shown in login screens and UI. When not specified, it defaults to \\"Vue\\".","admin.team.siteNameExample":"E.g.: \\"Vue\\"","admin.team.siteNameTitle":"Site Name:","admin.team.teamCreationDescription":"When false, only System Administrators can create teams.","admin.team.teamCreationTitle":"Enable Team Creation: ","admin.team.teammateNameDisplay":"Teammate Name Display:","admin.team.teammateNameDisplayDesc":"Set how to display users\' names in posts and the Direct Messages list.","admin.team.upload":"Upload","admin.team.uploadDesc":"Customize your user experience by adding a custom image to your login screen. Recommended maximum image size is less than 2 MB.","admin.team.uploaded":"Uploaded!","admin.team.uploading":"Uploading...","admin.team.userCreationDescription":"When false, the ability to create accounts is disabled. The create account button displays error when pressed.","admin.team.userCreationTitle":"Enable Account Creation: ","admin.true":"true","admin.user_item.authServiceEmail":"**Sign-in Method:** Email","admin.user_item.authServiceNotEmail":"**Sign-in Method:** {service}","admin.user_item.demoteToGuest":"Demote to Guest","admin.user_item.emailTitle":"**Email:** {email}","admin.user_item.inactive":"Inactive","admin.user_item.makeActive":"Activate","admin.user_item.makeInactive":"Deactivate","admin.user_item.makeMember":"Make Member","admin.user_item.makeTeamAdmin":"Make Team Admin","admin.user_item.manageRoles":"Manage Roles","admin.user_item.manageTeams":"Manage Teams","admin.user_item.manageTokens":"Manage Tokens","admin.user_item.member":"Member","admin.user_item.menuAriaLabel":"User Actions Menu","admin.user_item.mfaNo":"**MFA**: No","admin.user_item.mfaYes":"**MFA**: Yes","admin.user_item.promoteToUser":"Promote to User","admin.user_item.resetEmail":"Update Email","admin.user_item.resetMfa":"Remove MFA","admin.user_item.resetPwd":"Reset Password","admin.user_item.revokeSessions":"Revoke Sessions","admin.user_item.switchToEmail":"Switch to Email/Password","admin.user_item.sysAdmin":"System Admin","admin.user_item.teamAdmin":"Team Admin","admin.user_item.teamMember":"Team Member","admin.user_item.user_id":"**User ID:** {userID}","admin.user_item.userAccessTokenPostAll":"(can create post:all personal access tokens)","admin.user_item.userAccessTokenPostAllPublic":"(can create post:channels personal access tokens)","admin.user_item.userAccessTokenYes":"(can create personal access tokens)","admin.userManagement.userDetail.authenticationMethod":"Authentication Method","admin.userManagement.userDetail.email":"Email","admin.userManagement.userDetail.role":"Role","admin.userManagement.userDetail.userId":"User ID:","admin.userManagement.userDetail.username":"Username","admin.viewArchivedChannelsHelpText":"(Experimental) When true, allows users to share permalinks and search for content of channels that have been archived. Users can only view the content in channels of which they were a member before the channel was archived.","admin.viewArchivedChannelsTitle":"Allow users to view archived channels:","admin.webserverModeDisabled":"Disabled","admin.webserverModeDisabledDescription":"The Vue server will not serve static files.","admin.webserverModeGzip":"gzip","admin.webserverModeGzipDescription":"The Vue server will serve static files compressed with gzip.","admin.webserverModeHelpText":"gzip compression applies to static content files. It is recommended to enable gzip to improve performance unless your environment has specific restrictions, such as a web proxy that distributes gzip files poorly.","admin.webserverModeTitle":"Webserver Mode:","admin.webserverModeUncompressed":"Uncompressed","admin.webserverModeUncompressedDescription":"The Vue server will serve static files uncompressed.","analytics.chart.loading":"Loading...","analytics.chart.meaningful":"Not enough data for a meaningful representation.","analytics.system.activeUsers":"Active Users With Posts","analytics.system.channelTypes":"Channel Types","analytics.system.dailyActiveUsers":"Daily Active Users","analytics.system.info":"Only data for the chosen team is calculated. Excludes posts made in direct message channels, which are not tied to a team.","analytics.system.infoAndSkippedIntensiveQueries":"Only data for the chosen team is calculated. Excludes posts made in direct message channels, which are not tied to a team. \\n \\n To maximize performance, some statistics are disabled. You can [re-enable them in config.json](!https://docs.vueteams.com/administration/statistics.html).","analytics.system.monthlyActiveUsers":"Monthly Active Users","analytics.system.postTypes":"Posts, Files and Hashtags","analytics.system.privateGroups":"Private Channels","analytics.system.publicChannels":"Public Channels","analytics.system.skippedIntensiveQueries":"To maximize performance, some statistics are disabled. You can [re-enable them in config.json](!https://docs.vueteams.com/administration/statistics.html).","analytics.system.textPosts":"Posts with Text-only","analytics.system.title":"System Statistics","analytics.system.totalBotPosts":"Total Posts from Bots","analytics.system.totalChannels":"Total Channels","analytics.system.totalCommands":"Total Commands","analytics.system.totalFilePosts":"Posts with Files","analytics.system.totalHashtagPosts":"Posts with Hashtags","analytics.system.totalIncomingWebhooks":"Incoming Webhooks","analytics.system.totalMasterDbConnections":"Master DB Conns","analytics.system.totalOutgoingWebhooks":"Outgoing Webhooks","analytics.system.totalPosts":"Total Posts","analytics.system.totalReadDbConnections":"Replica DB Conns","analytics.system.totalSessions":"Total Sessions","analytics.system.totalTeams":"Total Teams","analytics.system.totalUsers":"Total Active Users","analytics.system.totalWebsockets":"WebSocket Conns","analytics.team.activeUsers":"Active Users With Posts","analytics.team.newlyCreated":"Newly Created Users","analytics.team.noTeams":"There are no teams on this server for which to view statistics.","analytics.team.privateGroups":"Private Channels","analytics.team.publicChannels":"Public Channels","analytics.team.recentUsers":"Recent Active Users","analytics.team.title":"Team Statistics for {team}","analytics.team.totalPosts":"Total Posts","analytics.team.totalUsers":"Total Active Users","announcement_bar.error.email_verification_required":"Check your email inbox to verify the address.","announcement_bar.error.license_expired":"Enterprise license is expired and some features may be disabled. [Please renew](!{link}).","announcement_bar.error.license_expiring":"Enterprise license expires on {date, date, long}. [Please renew](!{link}).","announcement_bar.error.past_grace":"Enterprise license is expired and some features may be disabled. Please contact your System Administrator for details.","announcement_bar.error.preview_mode":"Preview Mode: Email notifications have not been configured","announcement_bar.error.site_url_gitlab.full":"Please configure your [Site URL](https://docs.vueteams.com/administration/config-settings.html#site-url) in the [System Console](/admin_console/environment/web_server) or in gitlab.rb if you\'re using GitLab Vue.","announcement_bar.error.site_url.full":"Please configure your [Site URL](https://docs.vueteams.com/administration/config-settings.html#site-url) in the [System Console](/admin_console/environment/web_server).","announcement_bar.notification.email_verified":"Email verified","api.channel.add_guest.added":"{addedUsername} added to the channel as a guest by {username}.","api.channel.add_member.added":"{addedUsername} added to the channel by {username}.","api.channel.delete_channel.archived":"{username} archived the channel.","api.channel.guest_join_channel.post_and_forget":"{username} joined the channel as a guest.","api.channel.join_channel.post_and_forget":"{username} joined the channel.","api.channel.leave.left":"{username} left the channel.","api.channel.post_convert_channel_to_private.updated_from":"{username} converted the channel from public to private","api.channel.post_update_channel_displayname_message_and_forget.updated_from":"{username} updated the channel display name from: {old} to: {new}","api.channel.post_update_channel_header_message_and_forget.removed":"{username} removed the channel header (was: {old})","api.channel.post_update_channel_header_message_and_forget.updated_from":"{username} updated the channel header from: {old} to: {new}","api.channel.post_update_channel_header_message_and_forget.updated_to":"{username} updated the channel header to: {new}","api.channel.remove_member.removed":"{removedUsername} was removed from the channel","api.team.add_member.added":"{addedUsername} added to the team by {username}","api.team.join_team.post_and_forget":"{username} joined the team.","api.team.leave.left":"{username} left the team.","api.team.remove_user_from_team.removed":"{removedUsername} was removed from the team.","app.channel.post_update_channel_purpose_message.removed":"{username} removed the channel purpose (was: {old})","app.channel.post_update_channel_purpose_message.updated_from":"{username} updated the channel purpose from: {old} to: {new}","app.channel.post_update_channel_purpose_message.updated_to":"{username} updated the channel purpose to: {new}","app.plugin.marketplace_plugins.app_error":"Error connecting to the marketplace server. Please check your settings in the [System Console](/admin_console/plugins/plugin_management).","archivedChannelMessage":"You are viewing an **archived channel**. New messages cannot be posted.","atmos/camo":"atmos/camo","audit_table.accountActive":"Account activated","audit_table.accountInactive":"Account deactivated","audit_table.action":"Action","audit_table.attemptedAllowOAuthAccess":"Attempted to allow a new OAuth service access","audit_table.attemptedLicenseAdd":"Attempted to add new license","audit_table.attemptedLogin":"Attempted to login","audit_table.attemptedOAuthToken":"Attempted to get an OAuth access token","audit_table.attemptedPassword":"Attempted to change password","audit_table.attemptedRegisterApp":"Attempted to register a new OAuth Application with ID {id}","audit_table.attemptedReset":"Attempted to reset password","audit_table.attemptedWebhookCreate":"Attempted to create a webhook","audit_table.attemptedWebhookDelete":"Attempted to delete a webhook","audit_table.authenticated":"Successfully authenticated","audit_table.by":" by {username}","audit_table.byAdmin":" by an admin","audit_table.channelCreated":"Created the {channelName} channel","audit_table.channelDeleted":"Archived the channel with the URL {url}","audit_table.establishedDM":"Established a direct message channel with {username}","audit_table.failedExpiredLicenseAdd":"Failed to add a new license as it has either expired or not yet been started","audit_table.failedInvalidLicenseAdd":"Failed to add an invalid license","audit_table.failedLogin":"FAILED login attempt","audit_table.failedOAuthAccess":"Failed to allow a new OAuth service access - the redirect URI did not match the previously registered callback","audit_table.failedPassword":"Failed to change password - tried to update user password who was logged in through OAuth","audit_table.failedWebhookCreate":"Failed to create a webhook - bad channel permissions","audit_table.failedWebhookDelete":"Failed to delete a webhook - inappropriate conditions","audit_table.headerUpdated":"Updated the {channelName} channel header","audit_table.ip":"IP Address","audit_table.licenseRemoved":"Successfully removed a license","audit_table.loginAttempt":" (Login attempt)","audit_table.loginFailure":" (Login failure)","audit_table.logout":"Logged out of your account","audit_table.member":"member","audit_table.nameUpdated":"Updated the {channelName} channel name","audit_table.oauthTokenFailed":"Failed to get an OAuth access token - {token}","audit_table.revokedAll":"Revoked all current sessions for the team","audit_table.sentEmail":"Sent an email to {email} to reset your password","audit_table.session":"Session ID","audit_table.sessionRevoked":"The session with id {sessionId} was revoked","audit_table.successfullLicenseAdd":"Successfully added new license","audit_table.successfullLogin":"Successfully logged in","audit_table.successfullOAuthAccess":"Successfully gave a new OAuth service access","audit_table.successfullOAuthToken":"Successfully added a new OAuth service","audit_table.successfullPassword":"Successfully changed password","audit_table.successfullReset":"Successfully reset password","audit_table.successfullWebhookCreate":"Successfully created a webhook","audit_table.successfullWebhookDelete":"Successfully deleted a webhook","audit_table.timestamp":"Timestamp","audit_table.updatedRol":"Updated user role(s) to ","audit_table.updateGeneral":"Updated the general settings of your account","audit_table.updateGlobalNotifications":"Updated your global notification settings","audit_table.updatePicture":"Updated your profile picture","audit_table.userAdded":"Added {username} to the {channelName} channel","audit_table.userId":"User ID","audit_table.userRemoved":"Removed {username} to the {channelName} channel","audit_table.verified":"Successfully verified your email address","authorize.access":"Allow **{appName}** access?","authorize.allow":"Allow","authorize.app":"The app **{appName}** would like the ability to access and modify your basic information.","authorize.deny":"Deny","authorize.title":"**{appName}** would like to connect to your **Vue** user account","backstage_list.search":"Search","backstage_navbar.backToVue":"Back to {siteName}","backstage_sidebar.bots":"Bot Accounts","backstage_sidebar.emoji":"Custom Emoji","backstage_sidebar.integrations":"Integrations","backstage_sidebar.integrations.commands":"Slash Commands","backstage_sidebar.integrations.incoming_webhooks":"Incoming Webhooks","backstage_sidebar.integrations.oauthApps":"OAuth 2.0 Applications","backstage_sidebar.integrations.outgoing_webhooks":"Outgoing Webhooks","bot.add.description":"Description","bot.add.description.help":"(Optional) Let others know what this bot does.","bot.add.display_name.help":"(Optional) You can choose to display your bot\'s full name rather than its username.","bot.add.post_all":"post:all","bot.add.post_all.enabled":"Enabled","bot.add.post_all.help":"Bot will have access to post to all Vue channels including direct messages.","bot.add.post_channels":"post:channels","bot.add.post_channels.enabled":"Enabled","bot.add.post_channels.help":"Bot will have access to post to all Vue public channels.","bot.add.role":"Role","bot.add.role.help":"Choose what role the bot should have.","bot.add.username.help":"You can use lowercase letters, numbers, periods, dashes, and underscores.","bot.create_failed":"Failed to create bot","bot.create_token.close":"Close","bot.edit_failed":"Failed to edit bot","bot.manage.create_token":"Create New Token","bot.manage.disable":"Disable","bot.manage.enable":"Enable","bot.remove_profile_picture":"Remove Bot Icon","bot.token.default.description":"Default Token","bot.token.error.description":"Please enter a description.","bots.add.displayName":"Display Name","bots.add.icon":"Bot Icon","bots.add.username":"Username","bots.disabled":"Disabled","bots.image.upload":"Upload an image","bots.is_bot":"BOT","bots.manage.add":"Add Bot Account","bots.manage.add.cancel":"Cancel","bots.manage.add.create":"Create Bot Account","bots.manage.add.creating":"Creating...","bots.manage.add.invalid_username":"Usernames have to begin with a lowercase letter and be 3-22 characters long. You can use lowercase letters, numbers, periods, dashes, and underscores.","bots.manage.bot_accounts":"Bot Accounts","bots.manage.created.text":"Your bot account **{botname}** has been created successfully. Please use the following access token to connect to the bot (see [documentation](https://mattermost.com/pl/default-bot-accounts) for further details).","bots.manage.description":"Use bot accounts to integrate with Vue through plugins or the API","bots.manage.edit":"Edit","bots.manage.edit.editing":"Updating...","bots.manage.edit.title":"Update","bots.manage.empty":"No bot accounts found","bots.manage.emptySearch":"No bot accounts match **{searchTerm}**","bots.manage.header":"Bot Accounts","bots.manage.help":"Use {botAccounts} to integrate with Vue through plugins or the API. Bot accounts are available to everyone on your server.","bots.manage.search":"Search Bot Accounts","bots.managed_by":"Managed by ","bots.token.confirm":"Delete","bots.token.confirm_text":"Are you sure you want to delete the token?","bots.token.delete":"Delete Token","center_panel.archived.closeChannel":"Close Channel","center_panel.permalink.archivedChannel":"You are viewing an **archived channel**. ","center_panel.recent":"Click here to jump to recent messages. ","center_panel.recent.icon":"Jump to recent messages Icon","change_url.close":"Close","change_url.endWithLetter":"URL must end with a letter or number.","change_url.invalidUrl":"Invalid URL","change_url.longer":"URL must be two or more characters.","change_url.noUnderscore":"URL can not contain two underscores in a row.","change_url.startWithLetter":"URL must start with a letter or number.","change_url.urlLabel":"Channel URL","channel_flow.alreadyExist":"A channel with that URL already exists","channel_flow.changeUrlDescription":"Some characters are not allowed in URLs and may be removed.","channel_flow.changeUrlTitle":"Change Channel URL","channel_flow.create":"Create Channel","channel_flow.handleTooShort":"Channel URL must be 2 or more lowercase alphanumeric characters","channel_flow.invalidName":"Invalid Channel Name","channel_flow.set_url_title":"Set Channel URL","channel_header.addChannelHeader":"Add a channel description","channel_header.channelHasGuests":"This channel has guests","channel_header.channelMembers":"Members","channel_header.convert":"Convert to Private Channel","channel_header.delete":"Archive Channel","channel_header.directchannel.you":"{displayname} (you) ","channel_header.flagged":"Flagged Posts","channel_header.groupConstrained":"Members managed by linked groups.","channel_header.groupMessageHasGuests":"This group message has guests","channel_header.leave":"Leave Channel","channel_header.manageMembers":"Manage Members","channel_header.menuAriaLabel":"Channel Menu","channel_header.mute":"Mute Channel","channel_header.pinnedPosts":"Pinned Posts","channel_header.recentMentions":"Recent Mentions","channel_header.rename":"Rename Channel","channel_header.search":"Search","channel_header.setHeader":"Edit Channel Header","channel_header.setPurpose":"Edit Channel Purpose","channel_header.unmute":"Unmute Channel","channel_header.viewMembers":"View Members","channel_info.about":"About","channel_info.header":"Header:","channel_info.id":"ID: ","channel_info.notFound":"No Channel Found","channel_info.purpose":"Purpose:","channel_info.url":"URL:","channel_invite.addNewMembers":"Add New Members to ","channel_loader.posted":"Posted","channel_loader.postedImage":" posted an image","channel_loader.socketError":"Please check connection, Vue unreachable. If issue persists, ask administrator to [check WebSocket port](!https://about.vueteams.com/default-websocket-port-help).","channel_loader.someone":"Someone","channel_loader.something":" did something new","channel_loader.unknown_error":"We received an unexpected status code from the server.","channel_loader.uploadedFile":" uploaded a file","channel_loader.uploadedImage":" uploaded an image","channel_members_dropdown.channel_admin":"Channel Admin","channel_members_dropdown.channel_guest":"Channel Guest","channel_members_dropdown.channel_member":"Channel Member","channel_members_dropdown.make_channel_admin":"Make Channel Admin","channel_members_dropdown.make_channel_member":"Make Channel Member","channel_members_dropdown.menuAriaLabel":"Channel member role change","channel_members_dropdown.remove_from_channel":"Remove From Channel","channel_members_modal.addNew":" Add New Members","channel_members_modal.members":" Members","channel_modal.cancel":"Cancel","channel_modal.createNew":"Create New Channel","channel_modal.descriptionHelp":"Describe how this channel should be used.","channel_modal.displayNameError":"Channel name must be 2 or more characters","channel_modal.edit":"Edit","channel_modal.header":"Header","channel_modal.headerEx":"E.g.: \\"[Link Title](http://example.com)\\"","channel_modal.headerHelp":"Set text that will appear in the header of the channel beside the channel name. For example, include frequently used links by typing [Link Title](http://example.com).","channel_modal.modalTitle":"New Channel","channel_modal.name":"Name","channel_modal.nameEx":"E.g.: \\"Bugs\\", \\"Marketing\\", \\"客户支持\\"","channel_modal.optional":"(optional)","channel_modal.privateHint":" - Only invited members can join this channel.","channel_modal.privateName":"Private","channel_modal.publicHint":" - Anyone can join this channel.","channel_modal.publicName":"Public","channel_modal.purpose":"Purpose","channel_modal.purposeEx":"E.g.: \\"A channel to file bugs and improvements\\"","channel_modal.type":"Type","channel_notifications.allActivity":"For all activity","channel_notifications.globalDefault":"Global default","channel_notifications.ignoreChannelMentions":"Ignore mentions for @channel, @here and @all","channel_notifications.ignoreChannelMentions.help":"When enabled, @channel, @here and @all will not trigger mentions or mention notifications in this channel.","channel_notifications.ignoreChannelMentions.off.title":"Off","channel_notifications.ignoreChannelMentions.on.title":"On","channel_notifications.levels.all":"All","channel_notifications.levels.default":"Default","channel_notifications.levels.mention":"Mention","channel_notifications.levels.none":"None","channel_notifications.muteChannel.help":"Muting turns off desktop, email and push notifications for this channel. The channel will not be marked as unread unless you\'re mentioned.","channel_notifications.muteChannel.off.title":"Off","channel_notifications.muteChannel.on.title":"On","channel_notifications.muteChannel.on.title.collapse":"Mute is enabled. Desktop, email and push notifications will not be sent for this channel.","channel_notifications.muteChannel.settings":"Mute channel","channel_notifications.never":"Never","channel_notifications.onlyMentions":"Only for mentions","channel_notifications.override":"Selecting an option other than \\"Default\\" will override the global notification settings. Desktop notifications are available on Firefox, Safari, and Chrome.","channel_notifications.overridePush":"Selecting an option other than \\"Global default\\" will override the global notification settings for mobile push notifications in account settings. Push notifications must be enabled by the System Admin.","channel_notifications.preferences":"Notification Preferences for ","channel_notifications.push":"Send mobile push notifications","channel_notifications.sendDesktop":"Send desktop notifications","channel_select.placeholder":"--- Select a channel ---","channel_switch_modal.deactivated":"Deactivated","channel_switch_modal.title":"Switch Channels","channel_toggle_button.private":"Private","channel_toggle_button.public":"Public","channelHeader.addToFavorites":"Add to Favorites","channelHeader.removeFromFavorites":"Remove from Favorites","channelHeader.unmute":"Unmute","claim.email_to_ldap.enterLdapPwd":"Enter the ID and password for your AD/LDAP account","claim.email_to_ldap.enterPwd":"Enter the password for your {site} email account","claim.email_to_ldap.ldapId":"AD/LDAP ID","claim.email_to_ldap.ldapIdError":"Please enter your AD/LDAP ID.","claim.email_to_ldap.ldapPasswordError":"Please enter your AD/LDAP password.","claim.email_to_ldap.ldapPwd":"AD/LDAP Password","claim.email_to_ldap.pwd":"Password","claim.email_to_ldap.pwdError":"Please enter your password.","claim.email_to_ldap.ssoNote":"You must already have a valid AD/LDAP account","claim.email_to_ldap.ssoType":"Upon claiming your account, you will only be able to login with AD/LDAP","claim.email_to_ldap.switchTo":"Switch account to AD/LDAP","claim.email_to_ldap.title":"Switch Email/Password Account to AD/LDAP","claim.email_to_oauth.enterPwd":"Enter the password for your {site} account","claim.email_to_oauth.pwd":"Password","claim.email_to_oauth.pwdError":"Please enter your password.","claim.email_to_oauth.ssoNote":"You must already have a valid {type} account","claim.email_to_oauth.ssoType":"Upon claiming your account, you will only be able to login with {type} SSO","claim.email_to_oauth.switchTo":"Switch account to {uiType}","claim.email_to_oauth.title":"Switch Email/Password Account to {uiType}","claim.ldap_to_email.confirm":"Confirm Password","claim.ldap_to_email.email":"After switching your authentication method, you will use {email} to login. Your AD/LDAP credentials will no longer allow access to Vue.","claim.ldap_to_email.enterLdapPwd":"{ldapPassword}:","claim.ldap_to_email.enterPwd":"New email login password:","claim.ldap_to_email.ldapPasswordError":"Please enter your AD/LDAP password.","claim.ldap_to_email.ldapPwd":"AD/LDAP Password","claim.ldap_to_email.pwd":"Password","claim.ldap_to_email.pwdError":"Please enter your password.","claim.ldap_to_email.pwdNotMatch":"Passwords do not match.","claim.ldap_to_email.switchTo":"Switch account to email/password","claim.ldap_to_email.title":"Switch AD/LDAP Account to Email/Password","claim.oauth_to_email.confirm":"Confirm Password","claim.oauth_to_email.description":"Upon changing your account type, you will only be able to login with your email and password.","claim.oauth_to_email.enterNewPwd":"Enter a new password for your {site} email account","claim.oauth_to_email.enterPwd":"Please enter a password.","claim.oauth_to_email.newPwd":"New Password","claim.oauth_to_email.pwdNotMatch":"Passwords do not match.","claim.oauth_to_email.switchTo":"Switch {type} to email and password","claim.oauth_to_email.title":"Switch {type} Account to Email","combined_system_message.added_to_channel.many_expanded":"{users} and {lastUser} were **added to the channel** by {actor}.","combined_system_message.added_to_channel.one":"{firstUser} **added to the channel** by {actor}.","combined_system_message.added_to_channel.one_you":"You were **added to the channel** by {actor}.","combined_system_message.added_to_channel.two":"{firstUser} and {secondUser} **added to the channel** by {actor}.","combined_system_message.added_to_team.many_expanded":"{users} and {lastUser} were **added to the team** by {actor}.","combined_system_message.added_to_team.one":"{firstUser} **added to the team** by {actor}.","combined_system_message.added_to_team.one_you":"You were **added to the team** by {actor}.","combined_system_message.added_to_team.two":"{firstUser} and {secondUser} **added to the team** by {actor}.","combined_system_message.joined_channel.many_expanded":"{users} and {lastUser} **joined the channel**.","combined_system_message.joined_channel.one":"{firstUser} **joined the channel**.","combined_system_message.joined_channel.one_you":"You **joined the channel**.","combined_system_message.joined_channel.two":"{firstUser} and {secondUser} **joined the channel**.","combined_system_message.joined_team.many_expanded":"{users} and {lastUser} **joined the team**.","combined_system_message.joined_team.one":"{firstUser} **joined the team**.","combined_system_message.joined_team.one_you":"You **joined the team**.","combined_system_message.joined_team.two":"{firstUser} and {secondUser} **joined the team**.","combined_system_message.left_channel.many_expanded":"{users} and {lastUser} **left the channel**.","combined_system_message.left_channel.one":"{firstUser} **left the channel**.","combined_system_message.left_channel.one_you":"You **left the channel**.","combined_system_message.left_channel.two":"{firstUser} and {secondUser} **left the channel**.","combined_system_message.left_team.many_expanded":"{users} and {lastUser} **left the team**.","combined_system_message.left_team.one":"{firstUser} **left the team**.","combined_system_message.left_team.one_you":"You **left the team**.","combined_system_message.left_team.two":"{firstUser} and {secondUser} **left the team**.","combined_system_message.removed_from_channel.many_expanded":"{users} and {lastUser} were **removed from the channel**.","combined_system_message.removed_from_channel.one":"{firstUser} was **removed from the channel**.","combined_system_message.removed_from_channel.one_you":"You were **removed from the channel**.","combined_system_message.removed_from_channel.two":"{firstUser} and {secondUser} were **removed from the channel**.","combined_system_message.removed_from_team.many_expanded":"{users} and {lastUser} were **removed from the team**.","combined_system_message.removed_from_team.one":"{firstUser} was **removed from the team**.","combined_system_message.removed_from_team.one_you":"You were **removed from the team**.","combined_system_message.removed_from_team.two":"{firstUser} and {secondUser} were **removed from the team**.","combined_system_message.you":"You","confirm_modal.cancel":"Cancel","convert_channel.cancel":"No, cancel","convert_channel.confirm":"Yes, convert to private channel","convert_channel.question1":"When you convert **{display_name}** to a private channel, history and membership are preserved. Publicly shared files remain accessible to anyone with the link. Membership in a private channel is by invitation only.","convert_channel.question2":"The change is permanent and cannot be undone.","convert_channel.question3":"Are you sure you want to convert **{display_name}** to a private channel?","convert_channel.title":"Convert {display_name} to a private channel?","copy_url_context_menu.getChannelLink":"Copy Link","create_comment.addComment":"Add a comment...","create_comment.comment":"Add Comment","create_comment.commentTitle":"Comment","create_comment.file":"File uploading","create_comment.files":"Files uploading","create_post.comment":"Comment","create_post.deactivated":"You are viewing an archived channel with a deactivated user.","create_post.error_message":"Your message is too long. Character count: {length}/{limit}","create_post.fileProcessing":"Processing...","create_post.icon":"Send Post Icon","create_post.post":"Post","create_post.read_only":"This channel is read-only. Only members with permission can post here.","create_post.send_message":"Send a message","create_post.shortcutsNotSupported":"Keyboard shortcuts are not supported on your device.","create_post.tutorialTip.title":"Sending Messages","create_post.tutorialTip1":"Type here to write a message and press **Enter** to post it.","create_post.tutorialTip2":"Click the **Attachment** button to upload an image or a file.","create_post.write":"Write to {channelDisplayName}","create_team.agreement":"By proceeding to create your account and use {siteName}, you agree to our [Terms of Service]({TermsOfServiceLink}) and [Privacy Policy]({PrivacyPolicyLink}). If you do not agree, you cannot use {siteName}.","create_team.display_name.charLength":"Name must be {min} or more characters up to a maximum of {max}. You can add a longer team description later.","create_team.display_name.nameHelp":"Name your team in any language. Your team name shows in menus and headings.","create_team.display_name.next":"Next","create_team.display_name.required":"This field is required","create_team.display_name.teamName":"Team Name","create_team.team_url.back":"Back to previous step","create_team.team_url.charLength":"Name must be {min} or more characters up to a maximum of {max}","create_team.team_url.creatingTeam":"Creating team...","create_team.team_url.finish":"Finish","create_team.team_url.hint1":"Short and memorable is best","create_team.team_url.hint2":"Use lowercase letters, numbers and dashes","create_team.team_url.hint3":"Must start with a letter and can\'t end in a dash","create_team.team_url.regex":"Use only lower case letters, numbers and dashes. Must start with a letter and can\'t end in a dash.","create_team.team_url.required":"This field is required","create_team.team_url.taken":"This URL [starts with a reserved word](!https://docs.vueteams.com/help/getting-started/creating-teams.html#team-url) or is unavailable. Please try another.","create_team.team_url.teamUrl":"Team URL","create_team.team_url.unavailable":"This URL is taken or unavailable. Please try another.","create_team.team_url.webAddress":"Choose the web address of your new team:","custom_emoji.header":"Custom Emoji","date_separator.today":"Today","date_separator.yesterday":"Yesterday","deactivate_member_modal.deactivate":"Deactivate","deactivate_member_modal.desc":"This action deactivates {username}. They will be logged out and not have access to any teams or channels on this system.\\n","deactivate_member_modal.desc.confirm":" Are you sure you want to deactivate {username}?","deactivate_member_modal.desc.for_users_with_bot_accounts":"This action deactivates {username}.\\n \\n * They will be logged out and not have access to any teams or channels on this system.\\n * Bot accounts they manage will be disabled along with their integrations. To enable them again, go to [Integrations > Bot Accounts]({siteURL}/_redirect/integrations/bots). [Learn more about bot accounts](!https://mattermost.com/pl/default-bot-accounts).\\n \\n \\n","deactivate_member_modal.sso_warning":"You must also deactivate this user in the SSO provider or they will be reactivated on next login or sync.","deactivate_member_modal.title":"Deactivate {username}","default_channel.purpose":"Post messages here that you want everyone to see. Everyone automatically becomes a permanent member of this channel when they join the team.","delete_channel.cancel":"Cancel","delete_channel.confirm":"Confirm ARCHIVE Channel","delete_channel.del":"Archive","delete_channel.question":"This will archive the channel from the team and make its contents inaccessible for all users. \\n \\nAre you sure you wish to archive the **{display_name}** channel?","delete_channel.viewArchived.question":"This will archive the channel from the team. Channel contents will still be accessible by channel members.\\n \\nAre you sure you wish to archive the **{display_name}** channel?","delete_post.cancel":"Cancel","delete_post.comment":"Comment","delete_post.confirm":"Confirm {term} Delete","delete_post.del":"Delete","delete_post.post":"Post","delete_post.question":"Are you sure you want to delete this {term}?","delete_post.warning":"This post has {count, number} {count, plural, one {comment} other {comments}} on it.","demote_to_user_modal.demote":"Demote","demote_to_user_modal.desc":"This action demotes the user {username} to a guest. It will restrict the user\'s ability to join public channels and interact with users outside of the channels they are currently members of. Are you sure you want to demote user {username} to guest?","demote_to_user_modal.title":"Demote user {username} to guest","device_icons.android":"Android Icon","device_icons.apple":"Apple Icon","device_icons.linux":"Linux Icon","device_icons.windows":"Windows Icon","discard_changes_modal.leave":"Yes, Discard","discard_changes_modal.message":"You have unsaved changes, are you sure you want to discard them?","discard_changes_modal.title":"Discard Changes?","edit_channel_header_modal.cancel":"Cancel","edit_channel_header_modal.description":"Edit the text appearing next to the channel name in the channel header.","edit_channel_header_modal.error":"This channel header is too long, please enter a shorter one","edit_channel_header_modal.save":"Save","edit_channel_header_modal.title":"Edit Header for {channel}","edit_channel_header_modal.title_dm":"Edit Header","edit_channel_header.editHeader":"Edit the Channel Header...","edit_channel_header.previewHeader":"Edit header","edit_channel_private_purpose_modal.body":"This text appears in the \\"View Info\\" modal of the private channel.","edit_channel_purpose_modal.body":"Describe how this channel should be used. This text appears in the channel list in the \\"More...\\" menu and helps others decide whether to join.","edit_channel_purpose_modal.cancel":"Cancel","edit_channel_purpose_modal.error":"This channel purpose is too long, please enter a shorter one","edit_channel_purpose_modal.save":"Save","edit_channel_purpose_modal.title1":"Edit Purpose","edit_channel_purpose_modal.title2":"Edit Purpose for ","edit_command.update":"Update","edit_command.updating":"Updating...","edit_post.cancel":"Cancel","edit_post.edit":"Edit {title}","edit_post.editPost":"Edit the post...","edit_post.save":"Save","edit_post.time_limit_button.for_n_seconds":"For {n} seconds","edit_post.time_limit_button.no_limit":"Anytime","edit_post.time_limit_modal.description":"Setting a time limit applies to all users who have the \\"Edit Post\\" permissions in any permission scheme.","edit_post.time_limit_modal.invalid_time_limit":"Invalid time limit","edit_post.time_limit_modal.option_label_anytime":"Anytime","edit_post.time_limit_modal.option_label_time_limit.postinput":"seconds after posting","edit_post.time_limit_modal.option_label_time_limit.preinput":"Can edit for","edit_post.time_limit_modal.save_button":"Save Edit Time","edit_post.time_limit_modal.subscript":"Set the length of time users have to edit their messages after posting.","edit_post.time_limit_modal.title":"Configure Global Edit Post Time Limit","email_verify.almost":"{siteName}: You are almost done","email_verify.failed":" Failed to send verification email.","email_verify.notVerifiedBody":"Please verify your email address. Check your inbox for an email.","email_verify.resend":"Resend Email","email_verify.sent":" Verification email sent.","emoji_list.actions":"Actions","emoji_list.add":"Add Custom Emoji","emoji_list.creator":"Creator","emoji_list.delete":"Delete","emoji_list.delete.confirm.button":"Delete","emoji_list.delete.confirm.msg":"This action permanently deletes the custom emoji. Are you sure you want to delete it?","emoji_list.delete.confirm.title":"Delete Custom Emoji","emoji_list.empty":"No Custom Emoji Found","emoji_list.header":"Custom Emoji","emoji_list.help":"Custom emoji are available to everyone on your server. Type \':\' followed by two characters in a message box to bring up the emoji selection menu.","emoji_list.help2":"Tip: If you add #, ##, or ### as the first character on a new line containing emoji, you can use larger sized emoji. To try it out, send a message such as: \'# :smile:\'.","emoji_list.image":"Image","emoji_list.name":"Name","emoji_list.search":"Search Custom Emoji","emoji_picker_item.emoji_aria_label":"{emojiName} emoji","emoji_picker.activity":"Activity","emoji_picker.close":"Close","emoji_picker.custom":"Custom","emoji_picker.emojiPicker":"Emoji Picker","emoji_picker.flags":"Flags","emoji_picker.foods":"Foods","emoji_picker.header":"Emoji Picker","emoji_picker.nature":"Nature","emoji_picker.objects":"Objects","emoji_picker.people":"People","emoji_picker.places":"Places","emoji_picker.recent":"Recently Used","emoji_picker.search":"Search Emoji","emoji_picker.search_emoji":"Search for an emoji","emoji_picker.searchResults":"Search Results","emoji_picker.symbols":"Symbols","error.channel_not_found.message":"The channel you\'re requesting is private or does not exist. Please contact an Administrator to be added to the channel.","error.channel_not_found.title":"Channel Not Found","error.channelNotFound.guest_link":"Back","error.channelNotFound.link":"Back to {defaultChannelName}","error.generic.link":"Back to {siteName}","error.generic.link_login":"Back to login page","error.generic.message":"An error has occurred.","error.generic.title":"Error","error.local_storage.help1":"Enable cookies","error.local_storage.help2":"Turn off private browsing","error.local_storage.help3":"Use a supported browser (IE 11, Chrome 61+, Firefox 60+, Safari 12+, Edge 42+)","error.local_storage.message":"Vue was unable to load because a setting in your browser prevents the use of its local storage features. To allow Vue to load, try the following actions:","error.local_storage.title":"Cannot Load Vue","error.not_found.message":"The page you were trying to reach does not exist","error.not_found.title":"Page not found","error.oauth_access_denied":"You must authorize Vue to log in with {service}.","error.oauth_access_denied.title":"Authorization Error","error.oauth_missing_code":"The service provider {service} did not provide an authorization code in the redirect URL.","error.oauth_missing_code.forum":"If you reviewed the above and are still having trouble with configuration, you may post in our {link} where we\'ll be happy to help with issues during setup.","error.oauth_missing_code.forum.link":"Troubleshooting forum","error.oauth_missing_code.gitlab":"For {link} please make sure you followed the setup instructions.","error.oauth_missing_code.gitlab.link":"GitLab","error.oauth_missing_code.google":"For {link} make sure your administrator enabled the Google+ API.","error.oauth_missing_code.google.link":"Google Apps","error.oauth_missing_code.office365":"For {link} make sure the administrator of your Microsoft organization has enabled the Vue app.","error.oauth_missing_code.office365.link":"Office 365","error.oauth_missing_code.title":"Vue needs your help","error.team_not_found.message":"The team you\'re requesting is private or does not exist. Please contact your Administrator for an invitation.","error.team_not_found.title":"Team Not Found","file_attachment.thumbnail":"file thumbnail","file_info_preview.size":"Size ","file_info_preview.type":"File type ","file_upload.disabled":"File attachments are disabled.","file_upload.drag_folder":"Folders cannot be uploaded. Please drag all files separately.","file_upload.fileAbove":"File above {max}MB cannot be uploaded: {filename}","file_upload.filesAbove":"Files above {max}MB cannot be uploaded: {filenames}","file_upload.generic_error":"There was a problem uploading your files.","file_upload.limited":"Uploads limited to {count, number} files maximum. Please use additional posts for more files.","file_upload.menuAriaLabel":"Upload type selector","file_upload.pasted":"Image Pasted at ","file_upload.upload_files":"Upload files","file_upload.zeroBytesFile":"You are uploading an empty file: {filename}","file_upload.zeroBytesFiles":"You are uploading empty files: {filenames}","filtered_channels_list.search":"Search channels","filtered_user_list.countTotal":"{count, number} {count, plural, one {member} other {members}} of {total, number} total","filtered_user_list.countTotalPage":"{startCount, number} - {endCount, number} {count, plural, one {member} other {members}} of {total, number} total","filtered_user_list.next":"Next","filtered_user_list.prev":"Previous","filtered_user_list.search":"Search users","filtered_user_list.team":"Team:","filtered_user_list.userStatus":"User Status:","flag_post.flag":"Flag for follow up","flag_post.unflag":"Unflag","general_button.close":"Close","general_tab.allowedDomains":"Allow only users with a specific email domain to join this team","general_tab.allowedDomainsEdit":"Click \'Edit\' to add an email domain whitelist.","general_tab.AllowedDomainsExample":"corp.vueteams.com, vueteams.com","general_tab.AllowedDomainsInfo":"Users can only join the team if their email matches a specific domain (e.g. \\"vueteams.com\\") or list of comma-separated domains (e.g. \\"corp.vueteams.com, vueteams.com\\").","general_tab.chooseDescription":"Please choose a new description for your team","general_tab.codeDesc":"Click \'Edit\' to regenerate Invite Code.","general_tab.codeLongDesc":"The Invite Code is used as part of the URL in the team invitation link created by {getTeamInviteLink} in the main menu. Regenerating creates a new team invitation link and invalidates the previous link.","general_tab.codeTitle":"Invite Code","general_tab.emptyDescription":"Click \'Edit\' to add a team description.","general_tab.getTeamInviteLink":"Get Team Invite Link","general_tab.no":"No","general_tab.openInviteDesc":"When allowed, a link to this team will be included on the landing page allowing anyone with an account to join this team.","general_tab.openInviteTitle":"Allow any user with an account on this server to join this team","general_tab.regenerate":"Regenerate","general_tab.required":"This field is required","general_tab.teamDescription":"Team Description","general_tab.teamDescriptionInfo":"Team description provides additional information to help users select the right team. Maximum of 50 characters.","general_tab.teamIcon":"Team Icon","general_tab.teamIconEditHint":"Click \'Edit\' to upload an image.","general_tab.teamIconEditHintMobile":"Click to upload an image","general_tab.teamIconError":"An error occurred while selecting the image.","general_tab.teamIconInvalidFileType":"Only BMP, JPG or PNG images may be used for team icons","general_tab.teamIconLastUpdated":"Image last updated {date}","general_tab.teamIconTooLarge":"Unable to upload team icon. File is too large.","general_tab.teamName":"Team Name","general_tab.teamNameInfo":"Set the name of the team as it appears on your sign-in screen and at the top of the left-hand sidebar.","general_tab.teamNameRestrictions":"Team Name must be {min} or more characters up to a maximum of {max}. You can add a longer team description.","general_tab.title":"General Settings","general_tab.yes":"Yes","generic_icons.add":"Add Icon","generic_icons.add-mail":"Add Mail Icon","generic_icons.alert":"Alert Icon","generic_icons.archive":"Archive Icon","generic_icons.arrow.down":"Down Arrow Icon","generic_icons.attach":"Attachment Icon","generic_icons.back":"Back Icon","generic_icons.bot":"Bot Icon","generic_icons.breadcrumb":"Breadcrumb Icon","generic_icons.channel.arrow-right":"Arrow right","generic_icons.channel.draft":"Channel Draft Icon","generic_icons.channel.private":"Private Channel Icon","generic_icons.channel.public":"Public Channel Icon","generic_icons.close":"Close Icon","generic_icons.collapse":"Collapse Icon","generic_icons.download":"Download Icon","generic_icons.dropdown":"Dropdown Icon","generic_icons.edit":"Edit Icon","generic_icons.expand":"Expand Icon","generic_icons.fail":"Faliure Icon","generic_icons.flag":"Flag Icon","generic_icons.flagged":"Flagged Icon","generic_icons.info":"Info Icon","generic_icons.invite":"Invite Icon","generic_icons.link":"Link Icon","generic_icons.loading":"Loading Icon","generic_icons.logout":"Logout Icon","generic_icons.mail":"Mail Icon","generic_icons.mattermost":"Vue Logo","generic_icons.member":"Member Icon","generic_icons.mention":"Mention Icon","generic_icons.menu":"Menu Icon","generic_icons.message":"Message Icon","generic_icons.muted":"Muted Icon","generic_icons.next":"Next Icon","generic_icons.pin":"Pin Icon","generic_icons.plugin":"Plugin Icon","generic_icons.previous":"Previous Icon","generic_icons.reload":"Reload Icon","generic_icons.remove":"Remove Icon","generic_icons.reply":"Reply Icon","generic_icons.search":"Search Icon","generic_icons.select":"Select Icon","generic_icons.settings":"Settings Icon","generic_icons.success":"Success Icon","generic_icons.upload":"Upload Icon","generic_icons.warning":"Warning Icon","get_app.alreadyHaveIt":"Already have it?","get_app.androidAppName":"Vue for Android","get_app.androidHeader":"Vue works best if you switch to our Android app","get_app.continue":"continue","get_app.continueWithBrowser":"Or {link}","get_app.continueWithBrowserLink":"continue with browser","get_app.iosHeader":"Vue works best if you switch to our iPhone app","get_app.mattermostInc":"Vue, Inc","get_app.openVue":"Open Vue","get_link.clipboard":" Link copied","get_link.close":"Close","get_link.copy":"Copy Link","get_post_link_modal.help":"The link below allows authorized users to see your post.","get_post_link_modal.title":"Copy Permalink","get_public_link_modal.help":"The link below allows anyone to see this file without being registered on this server.","get_public_link_modal.title":"Copy Public Link","gif_picker.gfycat":"Search Gfycat","group_list_modal.addGroupButton":"Add Groups","group_list_modal.removeGroupButton":"Remove Group","groups":"{team} Groups","help.attaching.downloading.description":"Download an attached file by clicking the download icon next to the file thumbnail or by opening the file previewer and clicking **Download**.","help.attaching.downloading.title":"Downloading Files","help.attaching.dragdrop.description":"Upload a file or selection of files by dragging the files from your computer into the right-hand sidebar or center pane. Dragging and dropping attaches the files to the message input box, then you can optionally type a message and press **ENTER** to post.","help.attaching.dragdrop.title":"Drag and Drop","help.attaching.icon.description":"Alternatively, upload files by clicking the grey paperclip icon inside the message input box. This opens up your system file viewer where you can navigate to the desired files and then click **Open** to upload the files to the message input box. Optionally type a message and then press **ENTER** to post.","help.attaching.icon.title":"Attachment Icon","help.attaching.limitations.description":"Vue supports a maximum of five attached files per post, each with a maximum file size of 50Mb.","help.attaching.limitations.title":"File Size Limitations","help.attaching.methods.description":"Attach a file by drag and drop or by clicking the attachment icon in the message input box.","help.attaching.methods.title":"Attachment Methods","help.attaching.notSupported":"Document preview (Word, Excel, PPT) is not yet supported.","help.attaching.pasting.description":"On Chrome and Edge browsers, it is also possible to upload files by pasting them from the clipboard. This is not yet supported on other browsers.","help.attaching.pasting.title":"Pasting Images","help.attaching.previewer.description":"Vue has a built in file previewer that is used to view media, download files and share public links. Click the thumbnail of an attached file to open it in the file previewer.","help.attaching.previewer.title":"File Previewer","help.attaching.publicLinks.description":"Public links allow you to share file attachments with people outside your Vue team. Open the file previewer by clicking on the thumbnail of an attachment, then click **Get Public Link**. This opens a dialog box with a link to copy. When the link is shared and opened by another user, the file will automatically download.","help.attaching.publicLinks.title":"Sharing Public Links","help.attaching.publicLinks2":"If **Get Public Link** is not visible in the file previewer and you prefer the feature enabled, you can request that your System Admin enable the feature from the System Console under **Security** > **Public Links**.","help.attaching.supported.description":"If you are trying to preview a media type that is not supported, the file previewer will open a standard media attachment icon. Supported media formats depend heavily on your browser and operating system, but the following formats are supported by Vue on most browsers:","help.attaching.supported.title":"Supported Media Types","help.attaching.supportedListItem1":"Images: BMP, GIF, JPG, JPEG, PNG","help.attaching.supportedListItem2":"Video: MP4","help.attaching.supportedListItem3":"Audio: MP3, M4A","help.attaching.supportedListItem4":"Documents: PDF","help.attaching.title":"Attaching Files","help.commands.builtin.description":"The following slash commands are available on all Vue installations:","help.commands.builtin.title":"Built-in Commands","help.commands.builtin2":"Begin by typing `/` and a list of slash command options appears above the text input box. The autocomplete suggestions help by providing a format example in black text and a short description of the slash command in grey text.","help.commands.custom.description":"Custom slash commands integrate with external applications. For example, a team might configure a custom slash command to check internal health records with `/patient joe smith` or check the weekly weather forecast in a city with `/weather toronto week`. Check with your System Admin or open the autocomplete list by typing `/` to determine if your team configured any custom slash commands.","help.commands.custom.title":"Custom Commands","help.commands.custom2":"Custom slash commands are disabled by default and can be enabled by the System Admin in the **System Console** > **Integrations** > **Webhooks and Commands**. Learn about configuring custom slash commands on the [developer slash command documentation page](!http://docs..vueteams.com/developer/slash-commands.html).","help.commands.intro1":"Slash commands perform operations in Vue by typing into the text input box. Enter a `/` followed by a command and some arguments to perform actions.","help.commands.intro2":"Built-in slash commands come with all Vue installations and custom slash commands are configurable to interact with external applications. Learn about configuring custom slash commands on the [developer slash command documentation page](!http://docs..vueteams.com/developer/slash-commands.html).","help.commands.title":"Executing Commands","help.composing.deleting.description":"Delete a message by clicking the **[...]** icon next to any message text that you\'ve composed, then click **Delete**. System and Team Admins can delete any message on their system or team.","help.composing.deleting.title":"Deleting a message","help.composing.editing.description":"Edit a message by clicking the **[...]** icon next to any message text that you\'ve composed, then click **Edit**. After making modifications to the message text, press **ENTER** to save the modifications. Message edits do not trigger new @mention notifications, desktop notifications or notification sounds.","help.composing.editing.title":"Editing a Message","help.composing.linking.description":"The **Permalink** feature creates a link to any message. Sharing this link with other users in the channel lets them view the linked message in the Message Archives. Users who are not a member of the channel where the message was posted cannot view the permalink. Get the permalink to any message by clicking the **[...]** icon next to the message text > **Permalink** > **Copy Link**.","help.composing.linking.title":"Linking to a message","help.composing.posting.description":"Write a message by typing into the text input box, then press ENTER to send it. Use SHIFT+ENTER to create a new line without sending a message. To send messages by pressing CTRL+ENTER go to **Main Menu > Account Settings > Send messages on CTRL+ENTER**.","help.composing.posting.title":"Posting a Message","help.composing.posts.description":"Posts can be considered parent messages. They are the messages that often start a thread of replies. Posts are composed and sent from the text input box at the bottom of the center pane.","help.composing.posts.title":"Posts","help.composing.replies.description1":"Reply to a message by clicking the reply icon next to any message text. This action opens the right-hand sidebar where you can see the message thread, then compose and send your reply. Replies are indented slightly in the center pane to indicate that they are child messages of a parent post.","help.composing.replies.description2":"When composing a reply in the right-hand side, click the expand/collapse icon with two arrows at the top of the sidebar to make things easier to read.","help.composing.replies.title":"Replies","help.composing.title":"Sending Messages","help.composing.types.description":"Reply to posts to keep conversations organized in threads.","help.composing.types.title":"Message Types","help.formatting.checklist":"Make a task list by including square brackets:","help.formatting.checklistExample":"- [ ] Item one\\n- [ ] Item two\\n- [x] Completed item","help.formatting.code.description":"Create a code block by indenting each line by four spaces, or by placing ``` on the line above and below your code.","help.formatting.code.title":"Code Block","help.formatting.codeBlock":"Code block","help.formatting.emojis.description":"Open the emoji autocomplete by typing `:`. A full list of emojis can be found [here](!http://www.emoji-cheat-sheet.com/). It is also possible to create your own [Custom Emoji](!http://docs..vueteams.com/help/settings/custom-emoji.html) if the emoji you want to use doesn\'t exist.","help.formatting.emojis.title":"Emojis","help.formatting.example":"Example:","help.formatting.githubTheme":"**GitHub Theme**","help.formatting.headings.description":"Make a heading by typing # and a space before your title. For smaller headings, use more #\'s.","help.formatting.headings.title":"Headings","help.formatting.headings2":"Alternatively, you can underline the text using `===` or `---` to create headings.","help.formatting.headings2Example":"Large Heading\\n-------------","help.formatting.headingsExample":"## Large Heading\\n### Smaller Heading\\n#### Even Smaller Heading","help.formatting.images.description":"Create in-line images using an `!` followed by the alt text in square brackets and the link in normal brackets. Add hover text by placing it in quotes after the link.","help.formatting.images.title":"In-line Images","help.formatting.imagesExample":"![alt text]({siteURL}/static/images/logo-email.png \\"Vue horizontal logo\\")\\n\\nand\\n\\n[![Atlassian](https://wac-cdn.atlassian.com/assets/img/favicons/atlassian/favicon.png)](https://travis-ci.org/mattermost/mattermost-server) [![Github](https://github.githubassets.com/favicon.ico)](https://github.com/mattermost/mattermost-server)","help.formatting.inline.description":"Create in-line monospaced font by surrounding it with backticks.","help.formatting.inline.title":"In-line Code","help.formatting.intro":"Markdown makes it easy to format messages. Type a message as you normally would, and use these rules to render it with special formatting.","help.formatting.lines.description":"Create a line by using three `*`, `_`, or `-`.","help.formatting.lines.title":"Lines","help.formatting.linkEx":"[Check out Vue!](https://about.vueteams.com/)","help.formatting.links.description":"Create labeled links by putting the desired text in square brackets and the associated link in normal brackets.","help.formatting.links.title":"Links","help.formatting.listExample":"* list item one\\n* list item two\\n    * item two sub-point","help.formatting.lists.description":"Create a list by using `*` or `-` as bullets. Indent a bullet point by adding two spaces in front of it.","help.formatting.lists.title":"Lists","help.formatting.monokaiTheme":"**Monokai Theme**","help.formatting.ordered":"Make it an ordered list by using numbers instead:","help.formatting.orderedExample":"1. Item one\\n2. Item two","help.formatting.quotes.description":"Create block quotes using `>`.","help.formatting.quotes.title":"Block quotes","help.formatting.quotesExample":"`> block quotes` renders as:","help.formatting.quotesRender":"> block quotes","help.formatting.renders":"Renders as:","help.formatting.solirizedDarkTheme":"**Solarized Dark Theme**","help.formatting.solirizedLightTheme":"**Solarized Light Theme**","help.formatting.style.description":"You can use either `_` or `*` around a word to make it italic. Use two to make it bold.","help.formatting.style.listItem1":"`_italics_` renders as _italics_","help.formatting.style.listItem2":"`**bold**` renders as **bold**","help.formatting.style.listItem3":"`**_bold-italic_**` renders as **_bold-italics_**","help.formatting.style.listItem4":"`~~strikethrough~~` renders as ~~strikethrough~~","help.formatting.style.title":"Text Style","help.formatting.supportedSyntax":"Supported languages are: `as`, `applescript`, `osascript`, `scpt`, `bash`, `sh`, `zsh`, `clj`, `boot`, `cl2`, `cljc`, `cljs`, `cljs.hl`, `cljscm`, `cljx`, `hic`, `coffee`, `_coffee`, `cake`, `cjsx`, `cson`, `iced`, `cpp`, `c`, `cc`, `h`, `c++`, `h++`, `hpp`, `cs`, `csharp`, `css`, `d`, `di`, `dart`, `delphi`, `dpr`, `dfm`, `pas`, `pascal`, `freepascal`, `lazarus`, `lpr`, `lfm`, `diff`, `django`, `jinja`, `dockerfile`, `docker`, `erl`, `fortran`, `fsharp`, `fs`, `gcode`, `nc`, `go`, `groovy`, `handlebars`, `hbs`, `html.hbs`, `html.handlebars`, `hs`, `hx`, `java`, `jsp`, `js`, `jsx`, `json`, `jl`, `kt`, `ktm`, `kts`, `less`, `lisp`, `lua`, `mk`, `mak`, `md`, `mkdown`, `mkd`, `matlab`, `m`, `mm`, `objc`, `obj-c`, `ml`, `perl`, `pl`, `php`, `php3`, `php4`, `php5`, `php6`, `ps`, `ps1`, `pp`, `py`, `gyp`, `r`, `ruby`, `rb`, `gemspec`, `podspec`, `thor`, `irb`, `rs`, `scala`, `scm`, `sld`, `scss`, `st`, `styl`, `sql`, `swift`, `tex`, `vbnet`, `vb`, `bas`, `vbs`, `v`, `veo`, `xml`, `html`, `xhtml`, `rss`, `atom`, `xsl`, `plist`, `yaml`","help.formatting.syntax.description":"To add syntax highlighting, type the language to be highlighted after the ``` at the beginning of the code block. Vue also offers four different code themes (GitHub, Solarized Dark, Solarized Light, Monokai) that can be changed in **Account Settings** > **Display** > **Theme** > **Custom Theme** > **Center Channel Styles**","help.formatting.syntax.title":"Syntax Highlighting","help.formatting.syntaxEx":"```go\\npackage main\\nimport \\"fmt\\"\\nfunc main() \\\\{\\n    fmt.Println(\\"Hello, 世界\\")\\n\\\\}\\n```","help.formatting.tableExample":"| Left-Aligned  | Center Aligned  | Right Aligned |\\n| :------------ |:---------------:| -----:|\\n| Left column 1 | this text       |  $100 |\\n| Left column 2 | is              |   $10 |\\n| Left column 3 | centered        |    $1 |","help.formatting.tables.description":"Create a table by placing a dashed line under the header row and separating the columns with a pipe `|`. (The columns don\'t need to line up exactly for it to work). Choose how to align table columns by including colons `:` within the header row.","help.formatting.tables.title":"Tables","help.formatting.title":"Formatting Text","help.learnMore":"Learn more about:","help.link.attaching":"Attaching Files","help.link.commands":"Executing Commands","help.link.composing":"Composing Messages and Replies","help.link.formatting":"Formatting Messages using Markdown","help.link.mentioning":"Mentioning Teammates","help.link.messaging":"Basic Messaging","help.mentioning.channel.description":"You can mention an entire channel by typing `@channel`. All members of the channel will receive a mention notification that behaves the same way as if the members had been mentioned personally.","help.mentioning.channel.title":"@Channel","help.mentioning.channelExample":"@channel great work on interviews this week. I think we found some excellent potential candidates!","help.mentioning.mentions.description":"Use @mentions to get the attention of specific team members.","help.mentioning.mentions.title":"@Mentions","help.mentioning.recent.description":"Click `@` next to the search box to query for your most recent @mentions and words that trigger mentions. Click **Jump** next to a search result in the right-hand sidebar to jump the center pane to the channel and location of the message with the mention.","help.mentioning.recent.title":"Recent Mentions","help.mentioning.title":"Mentioning Teammates","help.mentioning.triggers.description":"In addition to being notified by @username and @channel, you can customize words that trigger mention notifications in **Account Settings** > **Notifications** > **Words that trigger mentions**. By default, you will receive mention notifications on your first name, and you can add more words by typing them into the input box separated by commas. This is useful if you want to be notified of all posts on certain topics, for example, \\"interviewing\\" or \\"marketing\\".","help.mentioning.triggers.title":"Words That Trigger Mentions","help.mentioning.username.description1":"You can mention a teammate by using the `@` symbol plus their username to send them a mention notification.","help.mentioning.username.description2":"Type `@` to bring up a list of team members who can be mentioned. To filter the list, type the first few letters of any username, first name, last name, or nickname. The **Up** and **Down** arrow keys can then be used to scroll through entries in the list, and pressing **ENTER** will select which user to mention. Once selected, the username will automatically replace the full name or nickname. The following example sends a special mention notification to **alice** that alerts her of the channel and message where she has been mentioned. If **alice** is away from Vue and has [email notifications](!http://docs..vueteams.com/help/getting-started/configuring-notifications.html#email-notifications) turned on, then she will receive an email alert of her mention along with the message text.","help.mentioning.username.title":"@Username","help.mentioning.usernameCont":"If the user you mentioned does not belong to the channel, a System Message will be posted to let you know. This is a temporary message only seen by the person who triggered it. To add the mentioned user to the channel, go to the dropdown menu beside the channel name and select **Add Members**.","help.mentioning.usernameExample":"@alice how did your interview go with the new candidate?","help.messaging.attach":"**Attach files** by dragging and dropping into Vue or clicking the attachment icon in the text input box.","help.messaging.emoji":"**Quickly add emoji** by typing \\":\\", which will open an emoji autocomplete. If the existing emoji don\'t cover what you want to express, you can also create your own [Custom Emoji](!http://docs..vueteams.com/help/settings/custom-emoji.html).","help.messaging.format":"**Format your messages** using Markdown that supports text styling, headings, links, emoticons, code blocks, block quotes, tables, lists and in-line images.","help.messaging.notify":"**Notify teammates** when they are needed by typing `@username`.","help.messaging.reply":"**Reply to messages** by clicking the reply arrow next to the message text.","help.messaging.title":"Messaging Basics","help.messaging.write":"**Write messages** using the text input box at the bottom of Vue. Press ENTER to send a message. Use SHIFT+ENTER to create a new line without sending a message.","installed_command.header":"Slash Commands","installed_commands.add":"Add Slash Command","installed_commands.delete.confirm":"This action permanently deletes the slash command and breaks any integrations using it. Are you sure you want to delete it?","installed_commands.empty":"No commands found","installed_commands.emptySearch":"No commands match **{searchTerm}**","installed_commands.header":"Slash Commands","installed_commands.help":"Use slash commands to connect external tools to Vue. {buildYourOwn} or visit the {appDirectory} to find self-hosted, third-party apps and integrations.","installed_commands.help.appDirectory":"App Directory","installed_commands.help.buildYourOwn":"Build your own","installed_commands.search":"Search Slash Commands","installed_commands.unnamed_command":"Unnamed Slash Command","installed_incoming_webhooks.add":"Add Incoming Webhook","installed_incoming_webhooks.delete.confirm":"This action permanently deletes the incoming webhook and breaks any integrations using it. Are you sure you want to delete it?","installed_incoming_webhooks.empty":"No incoming webhooks found","installed_incoming_webhooks.emptySearch":"No incoming webhooks match **{searchTerm}**","installed_incoming_webhooks.header":"Incoming Webhooks","installed_incoming_webhooks.help":"Use incoming webhooks to connect external tools to Vue. {buildYourOwn} or visit the {appDirectory} to find self-hosted, third-party apps and integrations.","installed_incoming_webhooks.help.appDirectory":"App Directory","installed_incoming_webhooks.help.buildYourOwn":"Build your own","installed_incoming_webhooks.search":"Search Incoming Webhooks","installed_incoming_webhooks.unknown_channel":"A Private Webhook","installed_integrations.callback_urls":"Callback URLs: {urls}","installed_integrations.client_id":"Client ID: **{clientId}**","installed_integrations.client_secret":"Client Secret: **{clientSecret}**","installed_integrations.content_type":"Content-Type: {contentType}","installed_integrations.creation":"Created by {creator} on {createAt, date, full}","installed_integrations.delete":"Delete","installed_integrations.edit":"Edit","installed_integrations.hideSecret":"Hide Secret","installed_integrations.regenSecret":"Regenerate Secret","installed_integrations.regenToken":"Regenerate Token","installed_integrations.showSecret":"Show Secret","installed_integrations.token":"Token: {token}","installed_integrations.triggerWhen":"Trigger When: {triggerWhen}","installed_integrations.triggerWords":"Trigger Words: {triggerWords}","installed_integrations.unnamed_oauth_app":"Unnamed OAuth 2.0 Application","installed_integrations.url":"URL: {url}","installed_oauth_apps.add":"Add OAuth 2.0 Application","installed_oauth_apps.callbackUrls":"Callback URLs (One Per Line)","installed_oauth_apps.cancel":"Cancel","installed_oauth_apps.delete.confirm":"This action permanently deletes the OAuth 2.0 application and breaks any integrations using it. Are you sure you want to delete it?","installed_oauth_apps.description":"Description","installed_oauth_apps.empty":"No OAuth 2.0 Applications found","installed_oauth_apps.emptySearch":"No OAuth 2.0 Applications match **{searchTerm}**","installed_oauth_apps.header":"OAuth 2.0 Applications","installed_oauth_apps.help":"Create {oauthApplications} to securely integrate bots and third-party apps with Vue. Visit the {appDirectory} to find available self-hosted apps.","installed_oauth_apps.help.appDirectory":"App Directory","installed_oauth_apps.help.oauthApplications":"OAuth 2.0 applications","installed_oauth_apps.homepage":"Homepage","installed_oauth_apps.iconUrl":"Icon URL","installed_oauth_apps.is_trusted":"Is Trusted: **{isTrusted}**","installed_oauth_apps.name":"Display Name","installed_oauth_apps.save":"Save","installed_oauth_apps.saving":"Saving...","installed_oauth_apps.search":"Search OAuth 2.0 Applications","installed_oauth_apps.trusted":"Is Trusted","installed_oauth_apps.trusted.no":"No","installed_oauth_apps.trusted.yes":"Yes","installed_outgoing_webhooks.add":"Add Outgoing Webhook","installed_outgoing_webhooks.delete.confirm":"This action permanently deletes the outgoing webhook and breaks any integrations using it. Are you sure you want to delete it?","installed_outgoing_webhooks.empty":"No outgoing webhooks found","installed_outgoing_webhooks.emptySearch":"No outgoing webhooks match **{searchTerm}**","installed_outgoing_webhooks.header":"Outgoing Webhooks","installed_outgoing_webhooks.help":"Use outgoing webhooks to connect external tools to Vue. {buildYourOwn} or visit the {appDirectory} to find self-hosted, third-party apps and integrations.","installed_outgoing_webhooks.help.appDirectory":"App Directory","installed_outgoing_webhooks.help.buildYourOwn":"Build your own","installed_outgoing_webhooks.search":"Search Outgoing Webhooks","installed_outgoing_webhooks.unknown_channel":"A Private Webhook","integrations.add":"Add","integrations.command.description":"Slash commands send events to external integrations","integrations.command.title":"Slash Commands","integrations.delete.confirm.button":"Delete","integrations.delete.confirm.title":"Delete Integration","integrations.done":"Done","integrations.edit":"Edit","integrations.header":"Integrations","integrations.help":"Visit the {appDirectory} to find self-hosted, third-party apps and integrations for Vue.","integrations.help.appDirectory":"App Directory","integrations.incomingWebhook.description":"Incoming webhooks allow external integrations to send messages","integrations.incomingWebhook.title":"Incoming Webhooks","integrations.oauthApps.description":"OAuth 2.0 allows external applications to make authorized requests to the Vue API","integrations.oauthApps.title":"OAuth 2.0 Applications","integrations.outgoingWebhook.description":"Outgoing webhooks allow external integrations to receive and respond to messages","integrations.outgoingWebhook.title":"Outgoing Webhooks","integrations.successful":"Setup Successful","interactive_dialog.cancel":"Cancel","interactive_dialog.element.optional":"(optional)","interactive_dialog.submit":"Submit","interactive_dialog.submitting":"Submitting...","intro_messages.addGroups":"Add groups to this private channel","intro_messages.addGroupsToTeam":"Add other groups to this team","intro_messages.anyMember":" Any member can join and read this channel.","intro_messages.beginning":"Beginning of {name}","intro_messages.creator":"This is the start of the {name} channel, created by {creator} on {date}.","intro_messages.creatorPrivate":"This is the start of the {name} private channel, created by {creator} on {date}.","intro_messages.default":"**Welcome to {display_name}!**\\n \\nPost messages here that you want everyone to see. Everyone automatically becomes a permanent member of this channel when they join the team.","intro_messages.DM":"This is the start of your direct message history with {teammate}.\\nDirect messages and files shared here are not shown to people outside this area.","intro_messages.GM":"This is the start of your group message history with {names}.\\nMessages and files shared here are not shown to people outside this area.","intro_messages.group_message":"This is the start of your group message history with these teammates. Messages and files shared here are not shown to people outside this area.","intro_messages.invite":"Invite others to this channel","intro_messages.inviteOthers":"Invite others to this team","intro_messages.invitePrivate":"Invite others to this private channel","intro_messages.noCreator":"This is the start of the {name} channel, created on {date}.","intro_messages.noCreatorPrivate":"This is the start of the {name} private channel, created on {date}.","intro_messages.offTopic":"This is the start of {display_name}, a channel for non-work-related conversations.","intro_messages.onlyInvited":" Only invited members can see this private channel.","intro_messages.purpose":" This channel\'s purpose is: {purpose}","intro_messages.purposePrivate":" This private channel\'s purpose is: {purpose}","intro_messages.readonly.default":"**Welcome to {display_name}!**\\n \\nMessages can only be posted by system admins. Everyone automatically becomes a permanent member of this channel when they join the team.","intro_messages.setHeader":"Set a Header","intro_messages.teammate":"This is the start of your direct message history with this teammate. Direct messages and files shared here are not shown to people outside this area.","invitation_modal.confirm.done":"Done","invitation_modal.confirm.guests_title":"**Guests** Invited to **{teamName}**","invitation_modal.confirm.members_subtitle":"**{sentCount, number} {sentCount, plural, one {person} other {people}}** {sentCount, plural, one {has} other {have}} been invited, and **{notSentCount, number} {notSentCount, plural, one {invitation} other {invitations}}** {notSentCount, plural, one {was} other {were}} not sent","invitation_modal.confirm.members_subtitle_without_not_sent":"**{sentCount, number} {sentCount, plural, one {person} other {people}}** {sentCount, plural, one {has} other {have}} been invited","invitation_modal.confirm.members_subtitle_without_sent":"**{notSentCount, number} {notSentCount, plural, one {invitation} other {invitations}}** {notSentCount, plural, one {was} other {were}} not sent","invitation_modal.confirm.members_subtitle_without_sent_and_not_sent":"No invitation sent","invitation_modal.confirm.members_title":"**Members** Invited to **{teamName}**","invitation_modal.confirm.not-sent-header":"Invitations Not Sent","invitation_modal.confirm.sent-header":"Successful Invites","invitation_modal.guests.add_channels.placeholder":"Search and add channels","invitation_modal.guests.add_channels.title":"Search and Add Channels","invitation_modal.guests.add_people.description":"Search and add guests or email invite new users.","invitation_modal.guests.add_people.title":"Invite People","invitation_modal.guests.add-channels.description":"Specify the channels the guests have access to.","invitation_modal.guests.custom-message.description":"Create a custom message to make your invite more personal.","invitation_modal.guests.custom-message.link":"Set a custom message","invitation_modal.guests.custom-message.title":"Custom message","invitation_modal.guests.invite_button":"Invite Guests","invitation_modal.guests.search-and-add.placeholder":"Add guests or email addresses","invitation_modal.guests.title":"Invite **Guests**","invitation_modal.guests.users_emails_input.no_user_found_matching":"No one found matching **{text}**, type email to invite","invitation_modal.guests.users_emails_input.valid_email":"Invite **{email}** as a guest","invitation_modal.invite_guests.description":"Invite guests to one or more channels. Guests only have access to messages, files, and people in the channels they are members of.","invitation_modal.invite_guests.title":"Invite **Guests**","invitation_modal.invite_members.description":"Invite new team members with a link or by email. Team members have access to messages and files in open teams and public channels.","invitation_modal.invite_members.title":"Invite **Members**","invitation_modal.members.invite_button":"Invite Members","invitation_modal.members.or":"OR","invitation_modal.members.search_and_add.title":"Invite People","invitation_modal.members.search-and-add.description":"Search and add members from other teams or email invite new users.","invitation_modal.members.search-and-add.placeholder":"Add members or email addresses","invitation_modal.members.share_link.copy_button":"Copy Link","invitation_modal.members.share_link.description":"Share this link to grant member access to this team.","invitation_modal.members.share_link.link_copied":"Link Copied","invitation_modal.members.share_link.title":"Share This Link","invitation_modal.members.title":"Invite **Members**","invitation_modal.members.users_emails_input.no_user_found_matching":"No one found matching **{text}**, type email to invite","invitation_modal.members.users_emails_input.valid_email":"Invite **{email}** as a team member","invitation_modal.title":"Invite people to **{teamName}**","invitation-modal.confirm.details-header":"Details","invitation-modal.confirm.not-valid-channel":"Does not match a valid channel name.","invitation-modal.confirm.not-valid-user-or-email":"Does not match a valid user or email.","invitation-modal.confirm.people-header":"People","invitation-modal.discard-changes.button":"Yes, Discard","invitation-modal.discard-changes.message":"You have unsent invitations, are you sure you want to discard them?","invitation-modal.discard-changes.title":"Discard Changes","invite.guests.added-to-channel":"An invitation email has been sent.","invite.guests.already-all-channels-member":"This person is already a member of all the channels.","invite.guests.already-some-channels-member":"This person is already a member of some of the channels.","invite.guests.new-member":"This guest has been added to the team and {count, plural, one {channel} other {channels}}.","invite.guests.unable-to-add-the-user-to-the-channels":"Unable to add the guest to the channels.","invite.members.added-to-team":"This member has been added to the team.","invite.members.already-member":"This person is already a team member.","invite.members.invite-sent":"An invitation email has been sent.","invite.members.unable-to-add-the-user-to-the-team":"Unable to add the user to the team.","invite.members.user-is-guest":"Contact your admin to make this guest a full member.","invite.members.user-is-not-guest":"This person is already a member.","join_team_group_constrained_denied":"You need to be a member of a linked group to join this team.","join_team_group_constrained_denied_admin":"You need to be a member of a linked group to join this team. You can add a group to this team [here]({siteURL}/admin_console/user_management/groups).","katex.error":"Couldn\'t compile your Latex code. Please review the syntax and try again.","last_users_message.added_to_channel.type":"were **added to the channel** by {actor}.","last_users_message.added_to_team.type":"were **added to the team** by {actor}.","last_users_message.first":"{firstUser} and ","last_users_message.joined_channel.type":"**joined the channel**.","last_users_message.joined_team.type":"**joined the team**.","last_users_message.left_channel.type":"**left the channel**.","last_users_message.left_team.type":"**left the team**.","last_users_message.others":"{numOthers} others ","last_users_message.removed_from_channel.type":"were **removed from the channel**.","last_users_message.removed_from_team.type":"were **removed from the team**.","leave_private_channel_modal.leave":"Yes, leave channel","leave_private_channel_modal.message":"Are you sure you wish to leave the private channel {channel}? You must be re-invited in order to re-join this channel in the future.","leave_private_channel_modal.title":"Leave Private Channel {channel}","leave_team_modal.desc":"You will be removed from all public and private channels.  If the team is private you will not be able to rejoin the team.  Are you sure?","leave_team_modal.no":"No","leave_team_modal.title":"Leave the team?","leave_team_modal.yes":"Yes","list_modal.paginatorCount":"{startCount, number} - {endCount, number} of {total, number} total","loading_screen.loading":"Loading","local":"local","login_mfa.enterToken":"To complete the sign in process, please enter a token from your smartphone\'s authenticator","login_mfa.submit":"Submit","login_mfa.submitting":"Submitting...","login_mfa.token":"MFA Token","login.changed":" Sign-in method changed successfully","login.create":"Create one now","login.createTeam":"Create a new team","login.email":"Email","login.forgot":"I forgot my password","login.get_terms_error":"Unable to load terms of service. If this issue persists, contact your System Administrator.","login.gitlab":"GitLab","login.google":"Google Apps","login.invalidPassword":"Your password is incorrect.","login.ldapCreate":" Enter your AD/LDAP username and password to create an account.","login.ldapUsername":"AD/LDAP Username","login.ldapUsernameLower":"AD/LDAP username","login.noAccount":"Don\'t have an account? ","login.noEmail":"Please enter your email","login.noEmailLdapUsername":"Please enter your email or {ldapUsername}","login.noEmailUsername":"Please enter your email or username","login.noEmailUsernameLdapUsername":"Please enter your email, username or {ldapUsername}","login.noLdapUsername":"Please enter your {ldapUsername}","login.noMethods":"No sign-in methods are enabled. Please contact your System Administrator.","login.noPassword":"Please enter your password","login.noUsername":"Please enter your username","login.noUsernameLdapUsername":"Please enter your username or {ldapUsername}","login.office365":"Office 365","login.or":"or","login.password":"Password","login.passwordChanged":" Password updated successfully","login.placeholderOr":" or ","login.session_expired":"Your session has expired. Please log in again.","login.session_expired.notification":"Session Expired: Please sign in to continue receiving notifications.","login.session_expired.title":"* {siteName} - Session Expired","login.signIn":"Sign in","login.signInLoading":"Signing in...","login.signInWith":"Sign in with:","login.terms_rejected":"You must agree to the terms of service before accessing {siteName}. Please contact your System Administrator for more details.","login.username":"Username","login.userNotFound":"We couldn\'t find an account matching your login credentials.","login.verified":" Email Verified","manage_channel_groups_modal.search_placeholder":"Search groups","manage_team_groups_modal.search_placeholder":"Search groups","marketplace_modal.install_plugins":"Install Plugins","marketplace_modal.installing":"Installing...","marketplace_modal.list.configure":"Configure","marketplace_modal.list.Install":"Install","marketplace_modal.list.try_again":"Try Again","marketplace_modal.no_plugins":"There are no plugins available at this time.","marketplace_modal.no_plugins_installed":"You do not have any plugins installed.","marketplace_modal.search":"Search Plugins","marketplace_modal.tabs.all_plugins":"All Plugins","marketplace_modal.title":"Plugin Marketplace","members_popover.button.message":"message","members_popover.manageMembers":"Manage Members","members_popover.title":"Channel Members","members_popover.viewMembers":"View Members","message_submit_error.invalidCommand":"Command with a trigger of \'{command}\' not found. ","message_submit_error.sendAsMessageLink":"Click here to send as a message.","mfa.confirm.complete":"**Set up complete!**","mfa.confirm.okay":"Okay","mfa.confirm.secure":"Your account is now secure. Next time you sign in, you will be asked to enter a code from the Google Authenticator app on your phone.","mfa.setup.badCode":"Invalid code. If this issue persists, contact your System Administrator.","mfa.setup.code":"MFA Code","mfa.setup.codeError":"Please enter the code from Google Authenticator.","mfa.setup.required":"**Multi-factor authentication is required on {siteName}.**","mfa.setup.save":"Save","mfa.setup.secret":"Secret: {secret}","mfa.setup.step1":"**Step 1: **On your phone, download Google Authenticator from [iTunes](!https://itunes.apple.com/us/app/google-authenticator/id388497605?mt=8\') or [Google Play](!https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2&hl=en)","mfa.setup.step2":"**Step 2: **Use Google Authenticator to scan this QR code, or manually type in the secret key","mfa.setup.step3":"**Step 3: **Enter the code generated by Google Authenticator","mfa.setupTitle":"Multi-factor Authentication Setup","mobile.set_status.away.icon":"Away Icon","mobile.set_status.dnd.icon":"Do Not Disturb Icon","mobile.set_status.offline.icon":"Offline Icon","mobile.set_status.online.icon":"Online Icon","modal.manual_status.ask":"Do not ask me again","modal.manual_status.auto_responder.message_":"Would you like to switch your status to \\"{status}\\" and disable Automatic Replies?","modal.manual_status.auto_responder.message_away":"Would you like to switch your status to \\"Away\\" and disable Automatic Replies?","modal.manual_status.auto_responder.message_dnd":"Would you like to switch your status to \\"Do Not Disturb\\" and disable Automatic Replies?","modal.manual_status.auto_responder.message_offline":"Would you like to switch your status to \\"Offline\\" and disable Automatic Replies?","modal.manual_status.auto_responder.message_online":"Would you like to switch your status to \\"Online\\" and disable Automatic Replies?","modal.manual_status.button_":"Yes, set my status to \\"{status}\\"","modal.manual_status.button_away":"Yes, set my status to \\"Away\\"","modal.manual_status.button_dnd":"Yes, set my status to \\"Do Not Disturb\\"","modal.manual_status.button_offline":"Yes, set my status to \\"Offline\\"","modal.manual_status.button_online":"Yes, set my status to \\"Online\\"","modal.manual_status.cancel_":"No, keep it as \\"{status}\\"","modal.manual_status.cancel_away":"No, keep it as \\"Away\\"","modal.manual_status.cancel_dnd":"No, keep it as \\"Do Not Disturb\\"","modal.manual_status.cancel_offline":"No, keep it as \\"Offline\\"","modal.manual_status.cancel_ooo":"No, keep it as \\"Out of Office\\"","modal.manual_status.message_":"Would you like to switch your status to \\"{status}\\"?","modal.manual_status.message_away":"Would you like to switch your status to \\"Away\\"?","modal.manual_status.message_dnd":"Would you like to switch your status to \\"Do Not Disturb\\"?","modal.manual_status.message_offline":"Would you like to switch your status to \\"Offline\\"?","modal.manual_status.message_online":"Would you like to switch your status to \\"Online\\"?","modal.manual_status.title_":"Your status is set to \\"{status}\\"","modal.manual_status.title_away":"Your status is set to \\"Away\\"","modal.manual_status.title_dnd":"Your status is set to \\"Do Not Disturb\\"","modal.manual_status.title_offline":"Your status is set to \\"Offline\\"","modal.manual_status.title_ooo":"Your status is set to \\"Out of Office\\"","more_channels.create":"Create New Channel","more_channels.createClick":"Click \'Create New Channel\' to make a new one","more_channels.join":"Join","more_channels.joining":"Joining...","more_channels.next":"Next","more_channels.noMore":"No more channels to join","more_channels.prev":"Previous","more_channels.title":"More Channels","more_direct_channels.directchannel.deactivated":"{displayname} - Deactivated","more_direct_channels.directchannel.you":"{displayname} (you)","more_direct_channels.new_convo_note":"This will start a new conversation. If you\'re adding a lot of people, consider creating a private channel instead.","more_direct_channels.new_convo_note.full":"You\'ve reached the maximum number of people for this conversation. Consider creating a private channel instead.","more_direct_channels.title":"Direct Messages","more_public_direct_channels.channels":"Channels","more_public_direct_channels.direct_messages":"Direct Messages","more_public_direct_channels.title":"Channels and Direct Messages","msg_typing.areTyping":"{users} and {last} are typing...","msg_typing.isTyping":"{user} is typing...","multiselect.add":"Add","multiselect.addChannelsPlaceholder":"Search and add channels","multiselect.addGroupsPlaceholder":"Search and add groups","multiselect.adding":"Adding...","multiselect.addTeamsPlaceholder":"Search and add teams","multiselect.go":"Go","multiselect.list.notFound":"No items found","multiselect.loading":"Loading...","multiselect.numGroupsRemaining":"Use ↑↓ to browse, ↵ to select. You can add {num, number} more {num, plural, one {group} other {groups}}. ","multiselect.numMembers":"{memberOptions, number} of {totalCount, number} members","multiselect.numPeopleRemaining":"Use ↑↓ to browse, ↵ to select. You can add {num, number} more {num, plural, one {person} other {people}}. ","multiselect.numRemaining":"You can add {num, number} more","multiselect.placeholder":"Search and add members","multiselect.selectChannels":"Use ↑↓ to browse, ↵ to select.","multiselect.selectTeams":"Use ↑↓ to browse, ↵ to select.","navbar_dropdown.about":"About {appTitle}","navbar_dropdown.accountSettings":"Account Settings","navbar_dropdown.addGroupsToTeam":"Add Groups to Team","navbar_dropdown.console":"System Console","navbar_dropdown.create":"Create a New Team","navbar_dropdown.emoji":"Custom Emoji","navbar_dropdown.help":"Help","navbar_dropdown.integrations":"Integrations","navbar_dropdown.invitePeople":"Invite People","navbar_dropdown.join":"Join Another Team","navbar_dropdown.keyboardShortcuts":"Keyboard Shortcuts","navbar_dropdown.leave":"Leave Team","navbar_dropdown.leave.icon":"Leave Team Icon","navbar_dropdown.logout":"Logout","navbar_dropdown.manageGroups":"Manage Groups","navbar_dropdown.manageMembers":"Manage Members","navbar_dropdown.marketplace":"Plugin Marketplace","navbar_dropdown.menuAriaLabel":"main menu","navbar_dropdown.nativeApps":"Download Apps","navbar_dropdown.report":"Report a Problem","navbar_dropdown.switchTo":"Switch to ","navbar_dropdown.teamSettings":"Team Settings","navbar_dropdown.viewMembers":"View Members","navbar.addGroups":"Add Groups","navbar.addMembers":"Add Members","navbar.click":"Click here","navbar.clickToAddHeader":"{clickHere} to add one.","navbar.noHeader":"No channel header yet.","navbar.preferences":"Notification Preferences","navbar.toggle2":"Toggle sidebar","navbar.viewInfo":"View Info","navbar.viewPinnedPosts":"View Pinned Posts","notification.dm":"Direct Message","notify_all.confirm":"Confirm","notify_all.question":"By using @all or @channel you are about to send notifications to {totalMembers} people. Are you sure you want to do this?","notify_all.question_timezone":"By using @all or @channel you are about to send notifications to **{totalMembers} people** in **{timezones, number} {timezones, plural, one {timezone} other {timezones}}**. Are you sure you want to do this?","notify_all.title.confirm":"Confirm sending notifications to entire channel","numMembers":"{num, number} {num, plural, one {member} other {members}}","password_form.change":"Change my password","password_form.enter":"Enter a new password for your {siteName} account.","password_form.error":"Please enter at least {chars} characters.","password_form.pwd":"Password","password_form.title":"Password Reset","password_send.checkInbox":"Please check your inbox.","password_send.description":"To reset your password, enter the email address you used to sign up","password_send.email":"Email","password_send.error":"Please enter a valid email address.","password_send.link":"If the account exists, a password reset email will be sent to:","password_send.reset":"Reset my password","password_send.title":"Password Reset","passwordRequirements":"Password Requirements:","pdf_preview.max_pages":"Download to read more pages","pending_post_actions.cancel":"Cancel","pending_post_actions.retry":"Retry","permalink.error.access":"Permalink belongs to a deleted message or to a channel to which you do not have access.","permalink.error.title":"Message Not Found","post_body.check_for_out_of_channel_groups_mentions.message":"did not get notified by this mention because they are not in the channel. They cannot be added to the channel because they are not a member of the linked groups. To add them to this channel, they must be added to the linked groups.","post_body.check_for_out_of_channel_mentions.link.and":" and ","post_body.check_for_out_of_channel_mentions.link.private":"add them to this private channel","post_body.check_for_out_of_channel_mentions.link.public":"add them to the channel","post_body.check_for_out_of_channel_mentions.message_last":"? They will have access to all message history.","post_body.check_for_out_of_channel_mentions.message.multiple":"did not get notified by this mention because they are not in the channel. Would you like to ","post_body.check_for_out_of_channel_mentions.message.one":"did not get notified by this mention because they are not in the channel. Would you like to ","post_body.commentedOn":"Commented on {name}\'s message: ","post_body.deleted":"(message deleted)","post_body.plusMore":" plus {count, number} other {count, plural, one {file} other {files}}","post_delete.notPosted":"Comment could not be posted","post_delete.okay":"Okay","post_delete.someone":"Someone deleted the message on which you tried to post a comment.","post_info.auto_responder":"AUTOMATIC REPLY","post_info.bot":"BOT","post_info.comment_icon.tooltip.reply":"Reply","post_info.del":"Delete","post_info.dot_menu.tooltip.more_actions":"More Actions","post_info.edit":"Edit","post_info.guest":"GUEST","post_info.info.view_additional_info":"View additional info","post_info.menuAriaLabel":"Post extra options","post_info.message.show_less":"Show Less","post_info.message.show_more":"Show More","post_info.message.visible":"(Only visible to you)","post_info.message.visible.compact":" (Only visible to you)","post_info.permalink":"Permalink","post_info.pin":"Pin to channel","post_info.pinned":"Pinned","post_info.reply":"Reply","post_info.system":"System","post_info.tooltip.add_reactions":"Add Reaction","post_info.unpin":"Un-pin from channel","post_message_view.edited":"(edited)","post.ariaLabel.attachment":", 1 attachment","post.ariaLabel.attachmentMultiple":", {attachmentCount} attachments","post.ariaLabel.message":"{authorName} at {time} {date} wrote, {message}","post.ariaLabel.messageIsFlagged":", message is flagged","post.ariaLabel.messageIsFlaggedAndPinned":", message is flagged and pinned","post.ariaLabel.messageIsPinned":", message is pinned","post.ariaLabel.reaction":", 1 reaction","post.ariaLabel.reactionMultiple":", {reactionCount} reactions","post.ariaLabel.replyMessage":"{authorName} at {time} {date} wrote a reply, {message}","posts_view.loadMore":"Load more messages","posts_view.maxLoaded":"Looking for a specific message? Try searching for it","posts_view.newMsg":"New Messages","posts_view.newMsgBelow":"New {count, plural, one {message} other {messages}}","promote_to_user_modal.desc":"This action promotes the guest {username} to a member. It will allow the user to join public channels and interact with users outside of the channels they are currently members of. Are you sure you want to promote guest {username} to user?","promote_to_user_modal.promote":"Promote","promote_to_user_modal.title":"Promote guest {username} to user","quick_switch_modal.channels":"Channels","quick_switch_modal.channelsShortcut.mac":"- ⌘K","quick_switch_modal.channelsShortcut.windows":"- CTRL+K","quick_switch_modal.help":"Start typing then use TAB to toggle channels/teams, ↑↓ to browse, ↵ to select, and ESC to dismiss.","quick_switch_modal.help_mobile":"Type to find a channel.","quick_switch_modal.help_no_team":"Type to find a channel. Use ↑↓ to browse, ↵ to select, ESC to dismiss.","quick_switch_modal.teams":"Teams","quick_switch_modal.teamsShortcut.mac":"- ⌘⌥K","quick_switch_modal.teamsShortcut.windows":"- CTRL+ALT+K","reaction_list.addReactionTooltip":"Add reaction","reaction.add.ariaLabel":"add reaction","reaction.clickToAdd":"(click to add)","reaction.clickToRemove":"(click to remove)","reaction.container.ariaLabel":"reactions","reaction.othersReacted":"{otherUsers, number} {otherUsers, plural, one {user} other {users}}","reaction.reacted":"{users} {reactionVerb} with {emoji}","reaction.reactionVerb.user":"reacted","reaction.reactionVerb.users":"reacted","reaction.reactionVerb.you":"reacted","reaction.reactionVerb.youAndUsers":"reacted","reaction.reactWidth.ariaLabel":"react with","reaction.removeReact.ariaLabel":"remove reaction","reaction.usersAndOthersReacted":"{users} and {otherUsers, number} other {otherUsers, plural, one {user} other {users}}","reaction.usersReacted":"{users} and {lastUser}","reaction.you":"You","remove_group_confirm_button":"Yes, Remove Group and {memberCount, plural, one {Member} other {Members}}","remove_group_confirm_message":"{memberCount, number} {memberCount, plural, one {member} other {members}} associated to this group will be removed from the team on the next scheduled AD/LDAP synchronization. Are you sure you wish to remove this group and {memberCount} {memberCount, plural, one {member} other {members}}?","remove_group_confirm_title":"Remove Group and {memberCount, number} {memberCount, plural, one {Member} other {Members}}","removed_channel.channelName":"the channel","removed_channel.from":"Removed from ","removed_channel.okay":"Okay","removed_channel.remover":"{remover} removed you from {channel}","removed_channel.someone":"Someone","rename_channel.cancel":"Cancel","rename_channel.defaultError":" - Cannot be changed for the default channel","rename_channel.displayName":"Display Name","rename_channel.displayNameHolder":"Enter display name","rename_channel.handleHolder":"lowercase alphanumeric characters","rename_channel.lowercase":"Must be lowercase alphanumeric characters","rename_channel.maxLength":"This field must be less than {maxLength, number} characters","rename_channel.minLength":"Channel name must be {minLength, number} or more characters","rename_channel.required":"This field is required","rename_channel.save":"Save","rename_channel.title":"Rename Channel","rename_channel.url":"URL","revoke_user_sessions_modal.desc":"This action revokes all sessions for {username}. They will be logged out from all devices. Are you sure you want to revoke all sessions for {username}?","revoke_user_sessions_modal.revoke":"Revoke","revoke_user_sessions_modal.title":"Revoke Sessions for {username}","rhs_card.jump":"Jump","rhs_card.message_by":"Message by {avatar} {user}","rhs_comment.comment":"Comment","rhs_header.backToFlaggedTooltip":"Back to Flagged Posts","rhs_header.backToPinnedTooltip":"Back to Pinned Posts","rhs_header.backToResultsTooltip":"Back to Search Results","rhs_header.closeSidebarTooltip":"Close Sidebar","rhs_header.closeTooltip.icon":"Close Sidebar Icon","rhs_header.details":"Message Details","rhs_header.expandSidebarTooltip":"Expand Sidebar","rhs_header.expandSidebarTooltip.icon":"Expand Sidebar Icon","rhs_header.expandTooltip.icon":"Shrink Sidebar Icon","rhs_header.shrinkSidebarTooltip":"Shrink Sidebar","rhs_root.direct":"Direct Message","rhs_root.mobile.add_reaction":"Add Reaction","rhs_root.mobile.flag":"Flag","rhs_root.mobile.unflag":"Unflag","rhs_thread.rootPostDeletedMessage.body":"Part of this thread has been deleted due to a data retention policy. You can no longer reply to this thread.","save_button.save":"Save","save_button.saving":"Saving","search_bar.clear":"Clear search query","search_bar.search":"Search","search_bar.usage.tips":"* Use **\\"quotation marks\\"** to search for phrases\\n* Use **from:** to find posts from specific users and **in:** to find posts in specific channels\\n* Use **on:** to find posts on a specific date\\n* Use **before:** to find posts before a specific date\\n* Use **after:** to find posts after a specific date\\n* Use **dash** \\"-\\" to exclude search terms and modifiers","search_bar.usage.title":"Search Options","search_header.loading":"Searching...","search_header.results":"Search Results","search_header.title2":"Recent Mentions","search_header.title3":"Flagged Posts","search_header.title4":"Pinned posts in {channelDisplayName}","search_header.title5":"Extra information","search_item.channelArchived":"Archived","search_item.direct":"Direct Message (with {username})","search_item.jump":"Jump","search_results.noResults":"No results found. Try again?","search_results.noResults.partialPhraseSuggestion":"If you\'re searching a partial phrase (ex. searching \\"rea\\", looking for \\"reach\\" or \\"reaction\\"), append a * to your search term.","search_results.noResults.stopWordsSuggestion":"Two letter searches and common words like \\"this\\", \\"a\\" and \\"is\\" won\'t appear in search results due to excessive results returned.","search_results.usage.dataRetention":"Only messages posted in the last {days} days are returned. Contact your System Administrator for more detail.","search_results.usageFlag1":"You haven\'t flagged any messages yet.","search_results.usageFlag2":"You can add a flag to messages and comments by clicking the {flagIcon} icon next to the timestamp.","search_results.usageFlag4":"Flags are a way to mark messages for follow up. Your flags are personal, and cannot be seen by other users.","search_results.usagePin1":"There are no pinned messages yet.","search_results.usagePin2":"All members of this channel can pin important or useful messages.","search_results.usagePin3":"Pinned messages are visible to all channel members.","search_results.usagePin4":"To pin a message: Go to the message that you want to pin and click [...] > \\"Pin to channel\\".","select_team.icon":"Select Team Icon","select_team.join.icon":"Join Team Icon","select_team.private.icon":"Private Team","setting_item_max.cancel":"Cancel","setting_item_min.edit":"Edit","setting_picture.cancel":"Cancel","setting_picture.help.profile":"Upload a picture in BMP, JPG or PNG format. Maximum file size: {max}","setting_picture.help.team":"Upload a team icon in BMP, JPG or PNG format.\\nSquare images with a solid background color are recommended.","setting_picture.remove":"Remove this icon","setting_picture.remove_profile_picture":"Remove profile picture","setting_picture.save":"Save","setting_picture.select":"Select","setting_picture.uploading":"Uploading...","setting_upload.import":"Import","setting_upload.noFile":"No file selected.","setting_upload.select":"Select file","shortcuts.browser.channel_next":"Forward in history:\\tAlt|Right","shortcuts.browser.channel_next.mac":"Forward in history:\\t⌘|]","shortcuts.browser.channel_prev":"Back in history:\\tAlt|Left","shortcuts.browser.channel_prev.mac":"Back in history:\\t⌘|[","shortcuts.browser.font_decrease":"Zoom out:\\tCtrl|-","shortcuts.browser.font_decrease.mac":"Zoom out:\\t⌘|-","shortcuts.browser.font_increase":"Zoom in:\\tCtrl|+","shortcuts.browser.font_increase.mac":"Zoom in:\\t⌘|+","shortcuts.browser.header":"Built-in Browser Commands","shortcuts.browser.highlight_next":"Highlight text to the next line:\\tShift|Down","shortcuts.browser.highlight_prev":"Highlight text to the previous line:\\tShift|Up","shortcuts.browser.input.header":"Works inside an input field","shortcuts.browser.newline":"Create a new line:\\tShift|Enter","shortcuts.files.header":"Files","shortcuts.files.upload":"Upload files:\\tCtrl|U","shortcuts.files.upload.mac":"Upload files:\\t⌘|U","shortcuts.header":"Keyboard Shortcuts\\tCtrl|/","shortcuts.header.mac":"Keyboard Shortcuts\\t⌘|/","shortcuts.info":"Begin a message with / for a list of all the commands at your disposal.","shortcuts.msgs.comp.channel":"Channel:\\t~|[a-z]|Tab","shortcuts.msgs.comp.emoji":"Emoji:\\t:|[a-z]|Tab","shortcuts.msgs.comp.header":"Autocomplete","shortcuts.msgs.comp.username":"Username:\\t@|[a-z]|Tab","shortcuts.msgs.edit":"Edit last message in channel:\\tUp","shortcuts.msgs.header":"Messages","shortcuts.msgs.input.header":"Works inside an empty input field","shortcuts.msgs.reply":"Reply to last message in channel:\\tShift|Up","shortcuts.msgs.reprint_next":"Reprint next message:\\tCtrl|Down","shortcuts.msgs.reprint_next.mac":"Reprint next message:\\t⌘|Down","shortcuts.msgs.reprint_prev":"Reprint previous message:\\tCtrl|Up","shortcuts.msgs.reprint_prev.mac":"Reprint previous message:\\t⌘|Up","shortcuts.nav.direct_messages_menu":"Direct messages menu:\\tCtrl|Shift|K","shortcuts.nav.direct_messages_menu.mac":"Direct messages menu:\\t⌘|Shift|K","shortcuts.nav.focus_center":"Set focus to input field:\\tCtrl|Shift|L","shortcuts.nav.focus_center.mac":"Set focus to input field:\\t⌘|Shift|L","shortcuts.nav.header":"Navigation","shortcuts.nav.next":"Next channel:\\tAlt|Down","shortcuts.nav.next.mac":"Next channel:\\t⌥|Down","shortcuts.nav.prev":"Previous channel:\\tAlt|Up","shortcuts.nav.prev.mac":"Previous channel:\\t⌥|Up","shortcuts.nav.recent_mentions":"Recent mentions:\\tCtrl|Shift|M","shortcuts.nav.recent_mentions.mac":"Recent mentions:\\t⌘|Shift|M","shortcuts.nav.settings":"Account settings:\\tCtrl|Shift|A","shortcuts.nav.settings.mac":"Account settings:\\t⌘|Shift|A","shortcuts.nav.switcher":"Quick channel switcher:\\tCtrl|K","shortcuts.nav.switcher.mac":"Quick channel switcher:\\t⌘|K","shortcuts.nav.unread_next":"Next unread channel:\\tAlt|Shift|Down","shortcuts.nav.unread_next.mac":"Next unread channel:\\t⌥|Shift|Down","shortcuts.nav.unread_prev":"Previous unread channel:\\tAlt|Shift|Up","shortcuts.nav.unread_prev.mac":"Previous unread channel:\\t⌥|Shift|Up","sidebar_header.tutorial.body1":"The **Main Menu** is where you can **Invite New Members**, access your **Account Settings** and set your **Theme Color**.","sidebar_header.tutorial.body2":"Team administrators can also access their **Team Settings** from this menu.","sidebar_header.tutorial.body3":"System administrators will find a **System Console** option to administrate the entire system.","sidebar_header.tutorial.title":"Main Menu","sidebar_right_menu.console":"System Console","sidebar_right_menu.flagged":"Flagged Posts","sidebar_right_menu.recentMentions":"Recent Mentions","sidebar.browseChannelDirectChannel":"Browse Channels and Direct Messages","sidebar.createChannel":"Create new public channel","sidebar.createDirectMessage":"Create new direct message","sidebar.createGroup":"Create new private channel","sidebar.createPublicPrivateChannel":"Create new public or private channel","sidebar.directchannel.you":"{displayname} (you)","sidebar.leave":"Leave channel","sidebar.mainMenu":"Main Menu","sidebar.moreDmAria":"more direct messages","sidebar.moreElips":"More...","sidebar.morePublicAria":"more public channels","sidebar.morePublicDmAria":"more public channels and direct messages","sidebar.removeList":"Remove from list","sidebar.tutorialScreen1.body":"**Channels** organize conversations across different topics. They\'re open to everyone on your team. To send private communications use **Direct Messages** for a single person or **Private Channels** for multiple people.","sidebar.tutorialScreen1.title":"Channels","sidebar.tutorialScreen2.body1":"Here are two public channels to start:","sidebar.tutorialScreen2.body2":"**{townsquare}** is a place for team-wide communication. Everyone in your team is a member of this channel.","sidebar.tutorialScreen2.body3":"**{offtopic}** is a place for fun and humor outside of work-related channels. You and your team can decide what other channels to create.","sidebar.tutorialScreen2.title":"\\"{townsquare}\\" and \\"{offtopic}\\" channels","sidebar.tutorialScreen3.body1":"Click **\\"More...\\"** to create a new channel or join an existing one.","sidebar.tutorialScreen3.body2":"You can also create a new channel by clicking the **\\"+\\" symbol** next to the public or private channel header.","sidebar.tutorialScreen3.title":"Creating and Joining Channels","sidebar.types.alpha":"CHANNELS","sidebar.types.direct":"DIRECT MESSAGES","sidebar.types.favorite":"FAVORITE CHANNELS","sidebar.types.private":"PRIVATE CHANNELS","sidebar.types.public":"PUBLIC CHANNELS","sidebar.types.recent":"RECENT ACTIVITY","sidebar.types.unreads":"UNREADS","sidebar.unreads":"More unreads","signup_team_system_console":"Go to System Console","signup_team.guest_without_channels":"Your guest account has no channels assigned. Please contact an administrator.","signup_team.join_open":"Teams you can join: ","signup_team.no_open_teams":"No teams are available to join. Please ask your administrator for an invite.","signup_team.no_open_teams_canCreate":"No teams are available to join. Please create a new team or ask your administrator for an invite.","signup_user_completed.choosePwd":"Choose your password","signup_user_completed.chooseUser":"Choose your username","signup_user_completed.create":"Create Account","signup_user_completed.emailHelp":"Valid email required for sign-up","signup_user_completed.emailIs":"Your email address is **{email}**. You\'ll use this address to sign in to {siteName}.","signup_user_completed.expired":"You\'ve already completed the signup process for this invitation or this invitation has expired.","signup_user_completed.failed_update_user_state":"Please clear your cache and try to log in.","signup_user_completed.haveAccount":"Already have an account?","signup_user_completed.invalid_invite":"The invite link was invalid.  Please speak with your Administrator to receive an invitation.","signup_user_completed.lets":"Let\'s create your account","signup_user_completed.no_open_server":"This server does not allow open signups.  Please speak with your Administrator to receive an invitation.","signup_user_completed.none":"No user creation method has been enabled.  Please contact an administrator for access.","signup_user_completed.required":"This field is required","signup_user_completed.reserved":"This username is reserved, please choose a new one.","signup_user_completed.signIn":"Click here to sign in.","signup_user_completed.userHelp":"You can use lowercase letters, numbers, periods, dashes, and underscores.","signup_user_completed.usernameLength":"Usernames have to begin with a lowercase letter and be {min}-{max} characters long. You can use lowercase letters, numbers, periods, dashes, and underscores.","signup_user_completed.validEmail":"Please enter a valid email address","signup_user_completed.whatis":"What\'s your email address?","signup.email":"Email and Password","signup.email.icon":"Email Icon","signup.gitlab":"GitLab Single Sign-On","signup.google":"Google Account","signup.ldap":"AD/LDAP Credentials","signup.ldap.icon":"AD/LDAP Icon","signup.office365":"Office 365","signup.saml.icon":"SAML Icon","signup.title":"Create an account with:","status_dropdown.menuAriaLabel":"set status","status_dropdown.set_away":"Away","status_dropdown.set_dnd":"Do Not Disturb","status_dropdown.set_dnd.extra":"Disables Desktop and Push Notifications","status_dropdown.set_offline":"Offline","status_dropdown.set_online":"Online","status_dropdown.set_ooo":"Out of Office","status_dropdown.set_ooo.extra":"Automatic Replies are enabled","string.id":"default message","suggestion_list.no_matches":"No items match __{value}__","suggestion.archive":"Archived Channels","suggestion.mention.all":"Notifies everyone in this channel","suggestion.mention.channel":"Notifies everyone in this channel","suggestion.mention.channels":"My Channels","suggestion.mention.here":"Notifies everyone online in this channel","suggestion.mention.members":"Channel Members","suggestion.mention.morechannels":"Other Channels","suggestion.mention.moremembers":"Other Members","suggestion.mention.nonmembers":"Not in Channel","suggestion.mention.special":"Special Mentions","suggestion.mention.unread.channels":"Unread Channels","suggestion.search.direct":"Direct Messages","suggestion.search.private":"Private Channels","suggestion.search.public":"Public Channels","system_notice.adminVisible":"Only visible to System Admins","system_notice.adminVisible.icon":"Only visible to System Admins Icon","system_notice.body.api3":"If you’ve created or installed integrations in the last two years, find out how [recent changes](!https://about.vueteams.com/default-apiv3-deprecation-guide) may have affected them.","system_notice.body.ee_upgrade_advice":"Enterprise Edition is recommended to ensure optimal operation and reliability. [Learn more](!https://mattermost.com/performance).","system_notice.body.ie11_deprecation":"Your browser, IE11, will no longer be supported in an upcoming release. [Find out how to move to another browser in one simple step](!https://forum.vueteams.com/t/mattermost-is-dropping-support-for-internet-explorer-ie11-in-v5-16/7575).","system_notice.body.permissions":"Some policy and permission System Console settings have moved with the release of [advanced permissions](!https://about.vueteams.com/default-advanced-permissions) in Enterprise E10 and E20.","system_notice.dont_show":"Don\'t show again","system_notice.remind_me":"Remind me later","system_notice.title":"**Notice**\\nfrom Vue","system_users_list.count":"{count, number} {count, plural, one {user} other {users}}","system_users_list.countPage":"{startCount, number} - {endCount, number} {count, plural, one {user} other {users}} of {total, number} total","system_users_list.countSearch":"{count, number} {count, plural, one {user} other {users}} of {total, number} total","team_channel_settings.group.group_user_row.numberOfGroups":"{amount, number} {amount, plural, one {Group} other {Groups}}","team_import_tab.failure":" Import failure: ","team_import_tab.import":"Import","team_import_tab.importHelpCliDocsLink":"CLI tool for Slack import","team_import_tab.importHelpDocsLink":"documentation","team_import_tab.importHelpExporterLink":"Slack Advanced Exporter","team_import_tab.importHelpExportInstructions":"Slack > Administration > Workspace settings > Import/Export Data > Export > Start Export","team_import_tab.importHelpLine1":"Slack import to Vue supports importing of messages in your Slack team\'s public channels.","team_import_tab.importHelpLine2":"To import a team from Slack, go to {exportInstructions}. See {uploadDocsLink} to learn more.","team_import_tab.importHelpLine3":"To import posts with attached files, see {slackAdvancedExporterLink} for details.","team_import_tab.importHelpLine4":"For Slack teams with over 10,000 messages, we recommend using the {cliLink}.","team_import_tab.importing":"Importing...","team_import_tab.importSlack":"Import from Slack (Beta)","team_import_tab.successful":" Import successful: ","team_import_tab.summary":"View Summary","team_member_modal.members":"{team} Members","team_members_dropdown.confirmDemoteDescription":"If you demote yourself from the System Admin role and there is not another user with System Admin privileges, you\'ll need to re-assign a System Admin by accessing the Vue server through a terminal and running the following command.","team_members_dropdown.confirmDemoteRoleTitle":"Confirm demotion from System Admin role","team_members_dropdown.confirmDemotion":"Confirm Demotion","team_members_dropdown.confirmDemotionCmd":"platform roles system_admin {username}","team_members_dropdown.guest":"Guest","team_members_dropdown.inactive":"Inactive","team_members_dropdown.leave_team":"Remove From Team","team_members_dropdown.makeAdmin":"Make Team Admin","team_members_dropdown.makeMember":"Make Member","team_members_dropdown.member":"Member","team_members_dropdown.menuAriaLabel":"Team member role change","team_members_dropdown.systemAdmin":"System Admin","team_members_dropdown.teamAdmin":"Team Admin","team_settings_modal.generalTab":"General","team_settings_modal.importTab":"Import","team_settings_modal.title":"Team Settings","team_settings.openInviteDescription.groupConstrained":"No, members of this team are added and removed by linked groups. [Learn More](!https://mattermost.com/pl/default-ldap-group-constrained-team-channel.html)","team_settings.openInviteSetting.groupConstrained":"No, members of this team are added and removed by linked groups.","team_sidebar.join":"Other teams you can join.","team.button.ariaLabel":"{teamName} team","team.button.mentions.ariaLabel":"{teamName} team, {mentionCount} mentions","team.button.name_undefined":"Name undefined","team.button.unread.ariaLabel":"{teamName} team unread","terms_of_service.agreeButton":"I Agree","terms_of_service.api_error":"Unable to complete the request. If this issue persists, contact your System Administrator.","terms_of_service.disagreeButton":"I Disagree","test":"Button Text","textbox.bold":"**bold**","textbox.edit":"Edit message","textbox.help":"Help","textbox.inlinecode":"`inline code`","textbox.italic":"_italic_","textbox.preformatted":"```preformatted```","textbox.preview":"Preview","textbox.quote":">quote","textbox.strike":"strike","tutorial_intro.allSet":"You\'re all set","tutorial_intro.end":"Click \\"Next\\" to enter {channel}. This is the first channel teammates see when they sign up. Use it for posting updates everyone needs to know.","tutorial_intro.invite":"Invite teammates","tutorial_intro.mobileApps":"Install the apps for {link} for easy access and notifications on the go.","tutorial_intro.mobileAppsLinkText":"PC, Mac, iOS and Android","tutorial_intro.next":"Next","tutorial_intro.screenOne.body1":"Your team communication all in one place, instantly searchable and available anywhere.","tutorial_intro.screenOne.body2":"Keep your team connected to help them achieve what matters most.","tutorial_intro.screenOne.title1":"Welcome to:","tutorial_intro.screenOne.title2":"Vue","tutorial_intro.screenTwo.body1":"Communication happens in public discussion channels, private channels and direct messages.","tutorial_intro.screenTwo.body2":"Everything is archived and searchable from any web-enabled desktop, laptop or phone.","tutorial_intro.screenTwo.title":"How Vue works:","tutorial_intro.skip":"Skip tutorial","tutorial_intro.support":"Need anything, just email us at ","tutorial_intro.whenReady":" when you\'re ready.","tutorial_tip.next":"Next","tutorial_tip.ok":"Okay","tutorial_tip.out":"Opt out of these tips.","tutorial_tip.seen":"Seen this before? ","update_command.confirm":"Edit Slash Command","update_command.question":"Your changes may break the existing slash command. Are you sure you would like to update it?","update_command.update":"Update","update_incoming_webhook.update":"Update","update_incoming_webhook.updating":"Updating...","update_oauth_app.confirm":"Edit OAuth 2.0 application","update_oauth_app.question":"Your changes may break the existing OAuth 2.0 application. Are you sure you would like to update it?","update_outgoing_webhook.confirm":"Edit Outgoing Webhook","update_outgoing_webhook.question":"Your changes may break the existing outgoing webhook. Are you sure you would like to update it?","update_outgoing_webhook.update":"Update","upload_overlay.info":"Drop a file to upload it.","user_list.notFound":"No users found","user_profile.account.editSettings":"Edit Account Settings","user_profile.account.localTime":"Local Time: ","user_profile.add_user_to_channel":"Add to a Channel","user_profile.add_user_to_channel.icon":"Add User to Channel Icon","user_profile.send.dm":"Send Message","user_profile.send.dm.icon":"Send Message Icon","user.settings.advance.confirmDeactivateAccountTitle":"Confirm Deactivation","user.settings.advance.confirmDeactivateDesc":"Are you sure you want to deactivate your account? This can only be reversed by your System Administrator.","user.settings.advance.deactivate_member_modal.deactivateButton":"Yes, deactivate my account","user.settings.advance.deactivateAccountTitle":"Deactivate Account","user.settings.advance.deactivateDesc":"Deactivating your account removes your ability to log in to this server and disables all email and mobile notifications. To reactivate your account, contact your System Administrator.","user.settings.advance.deactivateDescShort":"Click \'Edit\' to deactivate your account","user.settings.advance.enabledFeatures":"{count, number} {count, plural, one {Feature} other {Features}} Enabled","user.settings.advance.formattingDesc":"If enabled, posts will be formatted to create links, show emoji, style the text, and add line breaks. By default, this setting is enabled.","user.settings.advance.formattingTitle":"Enable Post Formatting","user.settings.advance.icon":"Advanced Settings Icon","user.settings.advance.joinLeaveDesc":"When \\"On\\", System Messages saying a user has joined or left a channel will be visible. When \\"Off\\", the System Messages about joining or leaving a channel will be hidden. A message will still show up when you are added to a channel, so you can receive a notification.","user.settings.advance.joinLeaveTitle":"Enable Join/Leave Messages","user.settings.advance.markdown_preview":"Show markdown preview option in message input box","user.settings.advance.off":"Off","user.settings.advance.on":"On","user.settings.advance.onForAllMessages":"On for all messages","user.settings.advance.onForCode":"On only for code blocks starting with ```","user.settings.advance.preReleaseDesc":"Check any pre-released features you\'d like to preview.  You may also need to refresh the page before the setting will take effect.","user.settings.advance.preReleaseTitle":"Preview pre-release features","user.settings.advance.sendDesc":"When enabled, CTRL + ENTER will send the message and ENTER inserts a new line.","user.settings.advance.sendTitle":"Send messages on CTRL+ENTER","user.settings.advance.title":"Advanced Settings","user.settings.custom_theme.awayIndicator":"Away Indicator","user.settings.custom_theme.buttonBg":"Button BG","user.settings.custom_theme.buttonColor":"Button Text","user.settings.custom_theme.centerChannelBg":"Center Channel BG","user.settings.custom_theme.centerChannelColor":"Center Channel Text","user.settings.custom_theme.centerChannelTitle":"Center Channel Styles","user.settings.custom_theme.codeTheme":"Code Theme","user.settings.custom_theme.copyPaste":"Copy and paste to share theme colors:","user.settings.custom_theme.dndIndicator":"Do Not Disturb Indicator","user.settings.custom_theme.errorTextColor":"Error Text Color","user.settings.custom_theme.linkButtonTitle":"Link and Button Styles","user.settings.custom_theme.linkColor":"Link Color","user.settings.custom_theme.mentionBg":"Mention Jewel BG","user.settings.custom_theme.mentionColor":"Mention Jewel Text","user.settings.custom_theme.mentionHighlightBg":"Mention Highlight BG","user.settings.custom_theme.mentionHighlightLink":"Mention Highlight Link","user.settings.custom_theme.newMessageSeparator":"New Message Separator","user.settings.custom_theme.onlineIndicator":"Online Indicator","user.settings.custom_theme.sidebarBg":"Sidebar BG","user.settings.custom_theme.sidebarHeaderBg":"Sidebar Header BG","user.settings.custom_theme.sidebarHeaderTextColor":"Sidebar Header Text","user.settings.custom_theme.sidebarText":"Sidebar Text","user.settings.custom_theme.sidebarTextActiveBorder":"Sidebar Text Active Border","user.settings.custom_theme.sidebarTextActiveColor":"Sidebar Text Active Color","user.settings.custom_theme.sidebarTextHoverBg":"Sidebar Text Hover BG","user.settings.custom_theme.sidebarTitle":"Sidebar Styles","user.settings.custom_theme.sidebarUnreadText":"Sidebar Unread Text","user.settings.display.channeldisplaymode":"Select the width of the center channel.","user.settings.display.channelDisplayTitle":"Channel Display","user.settings.display.clockDisplay":"Clock Display","user.settings.display.collapseDesc":"Set whether previews of image links and image attachment thumbnails show as expanded or collapsed by default. This setting can also be controlled using the slash commands /expand and /collapse.","user.settings.display.collapseDisplay":"Default appearance of image previews","user.settings.display.collapseOff":"Collapsed","user.settings.display.collapseOn":"Expanded","user.settings.display.fixedWidthCentered":"Fixed width, centered","user.settings.display.fullScreen":"Full width","user.settings.display.icon":"Display Settings Icon","user.settings.display.language":"Language","user.settings.display.linkPreviewDesc":"When available, the first web link in a message will show a preview of the website content below the message.","user.settings.display.linkPreviewDisplay":"Website Link Previews","user.settings.display.linkPreviewOff":"Off","user.settings.display.linkPreviewOn":"On","user.settings.display.messageDisplayClean":"Standard","user.settings.display.messageDisplayCleanDes":"Easy to scan and read.","user.settings.display.messageDisplayCompact":"Compact","user.settings.display.messageDisplayCompactDes":"Fit as many messages on the screen as we can.","user.settings.display.messageDisplayDescription":"Select how messages in a channel should be displayed.","user.settings.display.messageDisplayTitle":"Message Display","user.settings.display.militaryClock":"24-hour clock (example: 16:00)","user.settings.display.normalClock":"12-hour clock (example: 4:00 PM)","user.settings.display.preferTime":"Select how you prefer time displayed.","user.settings.display.teammateNameDisplayDescription":"Set how to display other user\'s names in posts and the Direct Messages list.","user.settings.display.teammateNameDisplayFullname":"Show first and last name","user.settings.display.teammateNameDisplayNicknameFullname":"Show nickname if one exists, otherwise show first and last name","user.settings.display.teammateNameDisplayTitle":"Teammate Name Display","user.settings.display.teammateNameDisplayUsername":"Show username","user.settings.display.theme.applyToAllTeams":"Apply new theme to all my teams","user.settings.display.theme.customTheme":"Custom Theme","user.settings.display.theme.describe":"Open to manage your theme","user.settings.display.theme.import":"Import theme colors from Slack","user.settings.display.theme.otherThemes":"See other themes","user.settings.display.theme.themeColors":"Theme Colors","user.settings.display.theme.title":"Theme","user.settings.display.timezone":"Timezone","user.settings.display.title":"Display Settings","user.settings.general.close":"Close","user.settings.general.confirmEmail":"Confirm Email","user.settings.general.currentEmail":"Current Email","user.settings.general.currentPassword":"Current Password","user.settings.general.email":"Email","user.settings.general.emailGitlabCantUpdate":"Login occurs through GitLab. Email cannot be updated. Email address used for notifications is {email}.","user.settings.general.emailGoogleCantUpdate":"Login occurs through Google. Email cannot be updated. Email address used for notifications is {email}.","user.settings.general.emailHelp1":"Email is used for sign-in, notifications, and password reset. Email requires verification if changed.","user.settings.general.emailHelp3":"Email is used for sign-in, notifications, and password reset.","user.settings.general.emailLdapCantUpdate":"Login occurs through AD/LDAP. Email cannot be updated. Email address used for notifications is {email}.","user.settings.general.emailMatch":"The new emails you entered do not match.","user.settings.general.emailOffice365CantUpdate":"Login occurs through Office 365. Email cannot be updated. Email address used for notifications is {email}.","user.settings.general.emailSamlCantUpdate":"Login occurs through SAML. Email cannot be updated. Email address used for notifications is {email}.","user.settings.general.emptyName":"Click \'Edit\' to add your full name","user.settings.general.emptyNickname":"Click \'Edit\' to add a nickname","user.settings.general.emptyPassword":"Please enter your current password.","user.settings.general.emptyPosition":"Click \'Edit\' to add your job title / position","user.settings.general.field_handled_externally":"This field is handled through your login provider. If you want to change it, you need to do so through your login provider.","user.settings.general.firstName":"First Name","user.settings.general.fullName":"Full Name","user.settings.general.icon":"General Settings Icon","user.settings.general.imageTooLarge":"Unable to upload profile image. File is too large.","user.settings.general.imageUpdated":"Image last updated {date}","user.settings.general.incorrectPassword":"Your password is incorrect.","user.settings.general.lastName":"Last Name","user.settings.general.loginGitlab":"Login done through GitLab ({email})","user.settings.general.loginGoogle":"Login done through Google ({email})","user.settings.general.loginLdap":"Login done through AD/LDAP ({email})","user.settings.general.loginOffice365":"Login done through Office 365 ({email})","user.settings.general.loginSaml":"Login done through SAML ({email})","user.settings.general.mobile.emptyName":"Click to add your full name","user.settings.general.mobile.emptyNickname":"Click to add a nickname","user.settings.general.mobile.emptyPosition":"Click to add your job title / position","user.settings.general.mobile.uploadImage":"Click to upload an image","user.settings.general.newEmail":"New Email","user.settings.general.nickname":"Nickname","user.settings.general.nicknameExtra":"Use Nickname for a name you might be called that is different from your first name and username. This is most often used when two or more people have similar sounding names and usernames.","user.settings.general.notificationsExtra":"By default, you will receive mention notifications when someone types your first name. Go to {notify} settings to change this default.","user.settings.general.notificationsLink":"Notifications","user.settings.general.position":"Position","user.settings.general.positionExtra":"Use Position for your role or job title. This will be shown in your profile popover.","user.settings.general.profilePicture":"Profile Picture","user.settings.general.sendAgain":"Send again","user.settings.general.sending":"Sending","user.settings.general.title":"General Settings","user.settings.general.uploadImage":"Click \'Edit\' to upload an image.","user.settings.general.username":"Username","user.settings.general.usernameInfo":"Pick something easy for teammates to recognize and recall.","user.settings.general.usernameReserved":"This username is reserved, please choose a new one.","user.settings.general.usernameRestrictions":"Username must begin with a letter, and contain between {min} to {max} lowercase characters made up of numbers, letters, and the symbols \'.\', \'-\', and \'_\'.","user.settings.general.validEmail":"Please enter a valid email address","user.settings.general.validImage":"Only BMP, JPG or PNG images may be used for profile pictures","user.settings.import_theme.cancel":"Cancel","user.settings.import_theme.importBody":"To import a theme, go to a Slack team and look for \\"Preferences -> Sidebar Theme\\". Open the custom theme option, copy the theme color values and paste them here:","user.settings.import_theme.importHeader":"Import Slack Theme","user.settings.import_theme.submit":"Submit","user.settings.import_theme.submitError":"Invalid format, please try copying and pasting in again.","user.settings.languages.change":"Change interface language","user.settings.languages.promote":"Select which language Vue displays in the user interface.\\n \\nWould you like to help with translations? Join the [Vue Translation Server](!http://translate.vueteams.com/) to contribute.","user.settings.mfa.add":"Add MFA to your account","user.settings.mfa.addHelp":"Adding multi-factor authentication will make your account more secure by requiring a code from your mobile phone each time you sign in.","user.settings.mfa.remove":"Remove MFA from your account","user.settings.mfa.removeHelp":"Removing multi-factor authentication means you will no longer require a phone-based passcode to sign-in to your account.","user.settings.mfa.requiredHelp":"Multi-factor authentication is required on this server. Resetting is only recommended when you need to switch code generation to a new mobile device. You will be required to set it up again immediately.","user.settings.mfa.reset":"Reset MFA on your account","user.settings.mfa.title":"Multi-factor Authentication","user.settings.modal.advanced":"Advanced","user.settings.modal.confirmBtns":"Yes, Discard","user.settings.modal.confirmMsg":"You have unsaved changes, are you sure you want to discard them?","user.settings.modal.confirmTitle":"Discard Changes?","user.settings.modal.display":"Display","user.settings.modal.general":"General","user.settings.modal.notifications":"Notifications","user.settings.modal.security":"Security","user.settings.modal.sidebar":"Sidebar","user.settings.modal.title":"Account Settings","user.settings.notifications.allActivity":"For all activity","user.settings.notifications.autoResponder":"Automatic Direct Message Replies","user.settings.notifications.autoResponderDefault":"Hello, I am out of office and unable to respond to messages.","user.settings.notifications.autoResponderDisabled":"Disabled","user.settings.notifications.autoResponderEnabled":"Enabled","user.settings.notifications.autoResponderHint":"Set a custom message that will be automatically sent in response to Direct Messages. Mentions in Public and Private Channels will not trigger the automated reply. Enabling Automatic Replies sets your status to Out of Office and disables email and push notifications.","user.settings.notifications.autoResponderPlaceholder":"Message","user.settings.notifications.channelWide":"Channel-wide mentions \\"@channel\\", \\"@all\\", \\"@here\\"","user.settings.notifications.comments":"Reply notifications","user.settings.notifications.commentsAny":"Trigger notifications on messages in reply threads that I start or participate in","user.settings.notifications.commentsInfo":"In addition to notifications for when you\'re mentioned, select if you would like to receive notifications on reply threads.","user.settings.notifications.commentsNever":"Do not trigger notifications on messages in reply threads unless I\'m mentioned","user.settings.notifications.commentsRoot":"Trigger notifications on messages in threads that I start","user.settings.notifications.desktop":"Send desktop notifications","user.settings.notifications.desktop.allNoSound":"For all activity, without sound","user.settings.notifications.desktop.allSound":"For all activity, with sound","user.settings.notifications.desktop.allSoundHidden":"For all activity","user.settings.notifications.desktop.mentionsNoSound":"For mentions and direct messages, without sound","user.settings.notifications.desktop.mentionsSound":"For mentions and direct messages, with sound","user.settings.notifications.desktop.mentionsSoundHidden":"For mentions and direct messages","user.settings.notifications.desktop.sound":"Notification sound","user.settings.notifications.desktop.title":"Desktop notifications","user.settings.notifications.email.disabled":"Email notifications are not enabled","user.settings.notifications.email.disabled_long":"Email notifications have not been enabled by your System Administrator.","user.settings.notifications.email.everyHour":"Every hour","user.settings.notifications.email.everyXMinutes":"Every {count, plural, one {minute} other {{count, number} minutes}}","user.settings.notifications.email.immediately":"Immediately","user.settings.notifications.email.never":"Never","user.settings.notifications.email.send":"Send email notifications","user.settings.notifications.emailBatchingInfo":"Notifications received over the time period selected are combined and sent in a single email.","user.settings.notifications.emailInfo":"Email notifications are sent for mentions and direct messages when you are offline or away from {siteName} for more than 5 minutes.","user.settings.notifications.emailNotifications":"Email notifications","user.settings.notifications.header":"Notifications","user.settings.notifications.icon":"Notification Settings Icon","user.settings.notifications.info":"Desktop notifications are available on Edge, Firefox, Safari, Chrome and Vue Desktop Apps.","user.settings.notifications.mentionsInfo":"Mentions trigger when someone sends a message that includes your username (\\"@{username}\\") or any of the options selected above.","user.settings.notifications.never":"Never","user.settings.notifications.noWords":"No words configured","user.settings.notifications.off":"Off","user.settings.notifications.on":"On","user.settings.notifications.onlyMentions":"Only for mentions and direct messages","user.settings.notifications.push":"Mobile push notifications","user.settings.notifications.push_notification.status":"Trigger push notifications when","user.settings.notifications.sensitiveName":"Your case sensitive first name \\"{first_name}\\"","user.settings.notifications.sensitiveUsername":"Your non-case sensitive username \\"{username}\\"","user.settings.notifications.sensitiveWords":"Other non-case sensitive words, separated by commas:","user.settings.notifications.soundConfig":"Please configure notification sounds in your browser settings","user.settings.notifications.sounds_info":"Notification sounds are available on IE11, Safari, Chrome and Vue Desktop Apps.","user.settings.notifications.title":"Notification Settings","user.settings.notifications.wordsTrigger":"Words that trigger mentions","user.settings.push_notification.allActivity":"For all activity","user.settings.push_notification.allActivityAway":"For all activity when away or offline","user.settings.push_notification.allActivityOffline":"For all activity when offline","user.settings.push_notification.allActivityOnline":"For all activity when online, away or offline","user.settings.push_notification.away":"Away or offline","user.settings.push_notification.disabled":"Push notifications are not enabled","user.settings.push_notification.disabled_long":"Push notifications have not been enabled by your System Administrator.","user.settings.push_notification.info":"Notification alerts are pushed to your mobile device when there is activity in Vue.","user.settings.push_notification.offline":"Offline","user.settings.push_notification.online":"Online, away or offline","user.settings.push_notification.onlyMentions":"For mentions and direct messages","user.settings.push_notification.onlyMentionsAway":"For mentions and direct messages when away or offline","user.settings.push_notification.onlyMentionsOffline":"For mentions and direct messages when offline","user.settings.push_notification.onlyMentionsOnline":"For mentions and direct messages when online, away or offline","user.settings.push_notification.send":"Send mobile push notifications","user.settings.push_notification.status_info":"Notification alerts are only pushed to your mobile device when your online status matches the selection above.","user.settings.security.active":"Active","user.settings.security.close":"Close","user.settings.security.currentPassword":"Current Password","user.settings.security.currentPasswordError":"Please enter your current password.","user.settings.security.deauthorize":"Deauthorize","user.settings.security.emailPwd":"Email and Password","user.settings.security.gitlab":"GitLab","user.settings.security.google":"Google","user.settings.security.icon":"Security Settings Icon","user.settings.security.inactive":"Inactive","user.settings.security.lastUpdated":"Last updated {date} at {time}","user.settings.security.ldap":"AD/LDAP","user.settings.security.loginGitlab":"Login done through GitLab","user.settings.security.loginGoogle":"Login done through Google Apps","user.settings.security.loginLdap":"Login done through AD/LDAP","user.settings.security.loginOffice365":"Login done through Office 365","user.settings.security.loginSaml":"Login done through SAML","user.settings.security.logoutActiveSessions":"View and Logout of Active Sessions","user.settings.security.logoutActiveSessions.icon":"Active Sessions Icon","user.settings.security.method":"Sign-in Method","user.settings.security.newPassword":"New Password","user.settings.security.noApps":"No OAuth 2.0 Applications are authorized.","user.settings.security.oauthApps":"OAuth 2.0 Applications","user.settings.security.oauthAppsDescription":"Click \'Edit\' to manage your OAuth 2.0 Applications","user.settings.security.oauthAppsHelp":"Applications act on your behalf to access your data based on the permissions you grant them.","user.settings.security.office365":"Office 365","user.settings.security.oneSignin":"You may only have one sign-in method at a time. Switching sign-in method will send an email notifying you if the change was successful.","user.settings.security.password":"Password","user.settings.security.passwordError":"Your password must contain between {min} and {max} characters.","user.settings.security.passwordErrorLowercase":"Your password must contain between {min} and {max} characters made up of at least one lowercase letter.","user.settings.security.passwordErrorLowercaseNumber":"Your password must contain between {min} and {max} characters made up of at least one lowercase letter and at least one number.","user.settings.security.passwordErrorLowercaseNumberSymbol":"Your password must contain between {min} and {max} characters made up of at least one lowercase letter, at least one number, and at least one symbol (e.g. \\"~!@#$%^&*()\\").","user.settings.security.passwordErrorLowercaseSymbol":"Your password must contain between {min} and {max} characters made up of at least one lowercase letter and at least one symbol (e.g. \\"~!@#$%^&*()\\").","user.settings.security.passwordErrorLowercaseUppercase":"Your password must contain between {min} and {max} characters made up of at least one lowercase letter and at least one uppercase letter.","user.settings.security.passwordErrorLowercaseUppercaseNumber":"Your password must contain between {min} and {max} characters made up of at least one lowercase letter, at least one uppercase letter, and at least one number.","user.settings.security.passwordErrorLowercaseUppercaseNumberSymbol":"Your password must contain between {min} and {max} characters made up of at least one lowercase letter, at least one uppercase letter, at least one number, and at least one symbol (e.g. \\"~!@#$%^&*()\\").","user.settings.security.passwordErrorLowercaseUppercaseSymbol":"Your password must contain between {min} and {max} characters made up of at least one lowercase letter, at least one uppercase letter, and at least one symbol (e.g. \\"~!@#$%^&*()\\").","user.settings.security.passwordErrorNumber":"Your password must contain between {min} and {max} characters made up of at least one number.","user.settings.security.passwordErrorNumberSymbol":"Your password must contain between {min} and {max} characters made up of at least one number and at least one symbol (e.g. \\"~!@#$%^&*()\\").","user.settings.security.passwordErrorSymbol":"Your password must contain between {min} and {max} characters made up of at least one symbol (e.g. \\"~!@#$%^&*()\\").","user.settings.security.passwordErrorUppercase":"Your password must contain between {min} and {max} characters made up of at least one uppercase letter.","user.settings.security.passwordErrorUppercaseNumber":"Your password must contain between {min} and {max} characters made up of at least one uppercase letter and at least one number.","user.settings.security.passwordErrorUppercaseNumberSymbol":"Your password must contain between {min} and {max} characters made up of at least one uppercase letter, at least one number, and at least one symbol (e.g. \\"~!@#$%^&*()\\").","user.settings.security.passwordErrorUppercaseSymbol":"Your password must contain between {min} and {max} characters made up of at least one uppercase letter and at least one symbol (e.g. \\"~!@#$%^&*()\\").","user.settings.security.passwordGitlabCantUpdate":"Login occurs through GitLab. Password cannot be updated.","user.settings.security.passwordGoogleCantUpdate":"Login occurs through Google Apps. Password cannot be updated.","user.settings.security.passwordLdapCantUpdate":"Login occurs through AD/LDAP. Password cannot be updated.","user.settings.security.passwordMatchError":"The new passwords you entered do not match.","user.settings.security.passwordMinLength":"Invalid minimum length, cannot show preview.","user.settings.security.passwordOffice365CantUpdate":"Login occurs through Office 365. Password cannot be updated.","user.settings.security.passwordSamlCantUpdate":"This field is handled through your login provider. If you want to change it, you need to do so through your login provider.","user.settings.security.retypePassword":"Retype New Password","user.settings.security.saml":"SAML","user.settings.security.switchEmail":"Switch to using email and password","user.settings.security.switchGitlab":"Switch to using GitLab SSO","user.settings.security.switchGoogle":"Switch to using Google SSO","user.settings.security.switchLdap":"Switch to using AD/LDAP","user.settings.security.switchOffice365":"Switch to using Office 365 SSO","user.settings.security.switchSaml":"Switch to using SAML SSO","user.settings.security.title":"Security Settings","user.settings.security.viewHistory":"View Access History","user.settings.security.viewHistory.icon":"Access History Icon","user.settings.sidebar.after_seven_days":"After 7 days with no new messages","user.settings.sidebar.autoCloseDMDesc":"Direct Message conversations can be reopened with the “+” button in the sidebar or using the Channel Switcher (CTRL+K).","user.settings.sidebar.autoCloseDMTitle":"Automatically Close Direct Messages","user.settings.sidebar.channelSwitcherSectionDesc.mac":"The channel switcher is shown at the bottom of the sidebar and is used to jump between channels quickly. It can also be accessed using CMD + K.","user.settings.sidebar.channelSwitcherSectionDesc.windows":"The channel switcher is shown at the bottom of the sidebar and is used to jump between channels quickly. It can also be accessed using CTRL + K.","user.settings.sidebar.channelSwitcherSectionTitle":"Channel Switcher","user.settings.sidebar.favorites":"Favorites grouped separately","user.settings.sidebar.favoritesDesc":"Channels marked as favorites will be grouped separately.","user.settings.sidebar.favoritesShort":"Favorites grouped separately","user.settings.sidebar.groupAndSortChannelsTitle":"Channel grouping and sorting","user.settings.sidebar.groupByNone":"Combine all channel types","user.settings.sidebar.groupByNoneShort":"No grouping","user.settings.sidebar.groupByType":"Channels grouped by type","user.settings.sidebar.groupByTypeShort":"Group by channel type","user.settings.sidebar.groupChannelsTitle":"Channel grouping","user.settings.sidebar.groupDesc":"Group channels by type, or combine all types into a list.","user.settings.sidebar.icon":"Sidebar Settings Icon","user.settings.sidebar.never":"Never","user.settings.sidebar.off":"Off","user.settings.sidebar.on":"On","user.settings.sidebar.sortAlpha":"Alphabetically","user.settings.sidebar.sortAlphaShort":"sorted alphabetically","user.settings.sidebar.sortChannelsTitle":"Channel sorting","user.settings.sidebar.sortDesc":"Sort channels alphabetically, or by most recent post.","user.settings.sidebar.sortRecent":"Recency","user.settings.sidebar.sortRecentShort":"sorted by recency","user.settings.sidebar.title":"Sidebar Settings","user.settings.sidebar.unreads":"Unreads grouped separately","user.settings.sidebar.unreadsDesc":"Group unread channels separately until read.","user.settings.sidebar.unreadsFavoritesShort":"Unreads and favorites grouped separately","user.settings.sidebar.unreadsShort":"Unreads grouped separately","user.settings.timezones.automatic":"Set automatically","user.settings.timezones.change":"Change timezone","user.settings.timezones.promote":"Select the timezone used for timestamps in the user interface and email notifications.","user.settings.tokens.activate":"Enable","user.settings.tokens.cancel":"Cancel","user.settings.tokens.clickToEdit":"Click \'Edit\' to manage your personal access tokens","user.settings.tokens.confirmCopyButton":"Yes, I have copied the token","user.settings.tokens.confirmCopyMessage":"Make sure you have copied and saved the access token below. You won\'t be able to see it again!","user.settings.tokens.confirmCopyTitle":"Have you copied your token?","user.settings.tokens.confirmCreateButton":"Yes, Create","user.settings.tokens.confirmCreateMessage":"You are generating a personal access token with System Admin permissions. Are you sure want to create this token?","user.settings.tokens.confirmCreateTitle":"Create System Admin Personal Access Token","user.settings.tokens.confirmDeleteButton":"Yes, Delete","user.settings.tokens.confirmDeleteMessage":"Any integrations using this token will no longer be able to access the Vue API. You cannot undo this action. \\n \\nAre you sure want to delete the **{description}** token?","user.settings.tokens.confirmDeleteTitle":"Delete Token?","user.settings.tokens.copy":"Please copy the access token below. You won\'t be able to see it again!","user.settings.tokens.create":"Create New Token","user.settings.tokens.deactivate":"Disable","user.settings.tokens.deactivatedWarning":"(Disabled)","user.settings.tokens.delete":"Delete","user.settings.tokens.description":"[Personal access tokens](!https://about.vueteams.com/default-user-access-tokens) function similarly to session tokens and can be used by integrations to [authenticate against the REST API](!https://about.vueteams.com/default-api-authentication).","user.settings.tokens.description_mobile":"[Personal access tokens](!https://about.vueteams.com/default-user-access-tokens) function similarly to session tokens and can be used by integrations to [authenticate against the REST API](!https://about.vueteams.com/default-api-authentication). Create new tokens on your desktop.","user.settings.tokens.id":"Token ID: ","user.settings.tokens.name":"Token Description: ","user.settings.tokens.nameHelp":"Enter a description for your token to remember what it does.","user.settings.tokens.nameRequired":"Please enter a description.","user.settings.tokens.save":"Save","user.settings.tokens.title":"Personal Access Tokens","user.settings.tokens.token":"Access Token: ","user.settings.tokens.tokenDesc":"Token Description: ","user.settings.tokens.tokenId":"Token ID: ","user.settings.tokens.tokenLoading":"Loading...","user.settings.tokens.userAccessTokensNone":"No personal access tokens.","version_bar.new":"A new version of Vue is available.","version_bar.refresh":"Refresh the app now","view_image_popover.download":"Download","view_image_popover.file":"File {count, number} of {total, number}","view_image_popover.open":"Open","view_image_popover.publicLink":"Get Public Link","view_image.loading":"Loading ","web.footer.about":"About","web.footer.help":"Help","web.footer.privacy":"Privacy","web.footer.terms":"Terms","web.header.back":"Back","web.header.logout":"Logout","web.root.signup_info":"All team communication in one place, searchable and accessible anywhere","widgets.channels_input.empty":"No channels found","widgets.channels_input.loading":"Loading","widgets.users_emails_input.loading":"Loading","widgets.users_emails_input.no_user_found_matching":"No one found matching **{text}**, type email address","widgets.users_emails_input.valid_email":"Add **{email}**","yourcomputer":"Your computer"}')},1303:function(e,t,a){"use strict";(function(e){a.d(t,"a",function(){return Fe});a(109),a(42);var n=a(94),s=a.n(n),i=a(16),o=a.n(i),r=a(5),l=a.n(r),c=a(1320),d=a.n(c),m=a(887),u=a(569),p=a(111),h=a(15),g=a(20),b=a(57),f=a(225),E=a(900),_=a(1034),v=a(210),y=a(169),C=a(1298),w=(a(1859),a(0)),T=a(1414),O=a(1856),S=a(1830),P=a(1844),M=a(232),N=a(1562),I=a.n(N),A=a(1563),j=a.n(A),R=a(1564),k=a.n(R),L=a(1190),x=a.n(L),D=a(1565),U=a.n(D),q=a(1566),H=a.n(q),F=a(1567),B=a.n(F),G=a(1568),V=a.n(G),W=a(1569),z=a.n(W),Y=a(1570),K=a.n(Y),Q=a(1571),Z=a.n(Q),J=a(1572),X=a.n(J),$=a(1573),ee=a.n($),te=a(1574),ae=a.n(te),ne=a(1575),se=a.n(ne),ie=a(1576),oe=a.n(ie),re=a(1577),le=a.n(re),ce=a(1578),de=a.n(ce),me=a(1579),ue=a.n(me),pe=a(10),he=a(158),ge=a(14),be=a(1580);function fe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Ee(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?fe(a,!0).forEach(function(t){_e(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):fe(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function _e(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ve(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}a(1304)(s.a);const ye=Object(M.b)(de.a),Ce=Object(M.b)(I.a),we=Object(M.b)(z.a),Te=Object(M.b)(j.a),Oe=Object(M.b)(k.a),Se=Object(M.b)(x.a),Pe=Object(M.b)(U.a),Me=Object(M.b)(H.a),Ne=Object(M.b)(B.a),Ie=Object(M.b)(V.a),Ae=Object(M.b)(K.a),je=Object(M.b)(Z.a),Re=Object(M.b)(X.a),ke=Object(M.b)(ee.a),Le=Object(M.b)(ae.a),xe=Object(M.b)(se.a),De=Object(M.b)(oe.a),Ue=Object(M.b)(le.a),qe=Object(M.b)(ue.a),He=e=>{let{component:t}=e,a=ve(e,["component"]);return l.a.createElement(m.b,Object.assign({},a,{render:e=>l.a.createElement(Se,e,l.a.createElement(t,e))}))};class Fe extends l.a.Component{constructor(t){super(t),_e(this,"onConfigLoaded",()=>{Object(ge.R)()&&Object(ge.o)();const t=w.Q.DIAGNOSTICS_SEGMENT_KEY,a=this.props.diagnosticId;null!=t&&""!==t&&!t.startsWith("placeholder")&&this.props.diagnosticsEnabled&&function(){var n=e.window.analytics=e.window.analytics||[];if(!n.initialize)if(n.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{n.invoked=!0,n.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","group","track","ready","alias","page","once","off","on"],n.factory=function(e){return function(...t){var a=Array.prototype.slice.call(t);return a.unshift(e),n.push(a),n}};for(var s=0;s<n.methods.length;s++){var i=n.methods[s];n[i]=n.factory(i)}n.load=function(e){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+e+"/analytics.min.js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(t,a)},n.SNIPPET_VERSION="3.0.1",n.load(t),n.identify(a,{},{context:{ip:"0.0.0.0"},page:{path:"",referrer:"",search:"",title:"",url:""},anonymousId:"00000000000000000000000000"}),n.page("ApplicationLoaded",{path:"",referrer:"",search:"",title:"",url:""},{context:{ip:"0.0.0.0"},anonymousId:"00000000000000000000000000"})}}();const n=()=>{"/"===this.props.location.pathname&&this.props.noAccounts&&this.props.history.push("/signup_user_complete"),Object(C.a)().then(()=>{this.setState({configLoaded:!0})})};e.Intl?n():y.f(n),Object(v.c)()(pe.a.dispatch,pe.a.getState);const s=Object(h.getConfig)(pe.a.getState()).IosAppDownloadLink,i=Object(h.getConfig)(pe.a.getState()).AndroidAppDownloadLink,o="/reset_password_complete"===this.props.location.pathname;s&&g.k()&&!_.a.hasSeenLandingPage()&&!o?(this.props.history.push("/get_ios_app?redirect_to="+encodeURIComponent(this.props.location.pathname)+encodeURIComponent(this.props.location.search)),_.a.setLandingPageSeen(!0)):i&&g.b()&&!_.a.hasSeenLandingPage()&&!o&&(this.props.history.push("/get_android_app?redirect_to="+encodeURIComponent(this.props.location.pathname)+encodeURIComponent(this.props.location.search)),_.a.setLandingPageSeen(!0))}),_e(this,"redirectIfNecessary",e=>{"/"===e.location.pathname&&(this.props.noAccounts?this.props.history.push("/signup_user_complete"):e.showTermsOfService&&this.props.history.push("/terms_of_service"))}),this.currentCategoryFocus=0,this.currentSidebarFocus=0,Object(u.setUrl)(Object(he.e)()),Object(p.setSystemEmojis)(b.a),s()(window).bind("storage",e=>{if(e.originalEvent.key===w.H.LOGOUT&&e.originalEvent.storageArea===localStorage&&e.originalEvent.newValue){if(_.a.isSignallingLogout(e.originalEvent.newValue))return;console.log("detected logout from a different tab"),E.e("/",!1,!1)}if(e.originalEvent.key===w.H.LOGIN&&e.originalEvent.storageArea===localStorage&&e.originalEvent.newValue){if(_.a.isSignallingLogin(e.originalEvent.newValue))return;console.log("detected login from a different tab"),location.reload()}}),document.addEventListener("drop",e=>{e.preventDefault(),e.stopPropagation()}),document.addEventListener("dragover",e=>{e.preventDefault(),e.stopPropagation()}),d.a.attach(document.body),this.state={configLoaded:!1},g.f()||(this.a11yController=new be.a)}UNSAFE_componentWillReceiveProps(e){this.redirectIfNecessary(e)}componentDidMount(){this.props.actions.loadMeAndConfig().then(e=>{"/"===this.props.location.pathname&&e[2]&&e[2].data&&E.f(),this.onConfigLoaded()}),Object(f.e)()}componentWillUnmount(){s()(window).unbind("storage")}render(){return this.state.configLoaded?l.a.createElement(O.a,null,l.a.createElement(m.d,null,l.a.createElement(m.b,{path:"/error",component:Ce}),l.a.createElement(T.a,{path:"/login",component:Te}),l.a.createElement(T.a,{path:"/reset_password",component:Pe}),l.a.createElement(T.a,{path:"/reset_password_complete",component:Me}),l.a.createElement(T.a,{path:"/signup_user_complete",component:Ne}),l.a.createElement(T.a,{path:"/signup_email",component:Ie}),l.a.createElement(T.a,{path:"/should_verify_email",component:Ae}),l.a.createElement(T.a,{path:"/do_verify_email",component:je}),l.a.createElement(T.a,{path:"/claim",component:Re}),l.a.createElement(T.a,{path:"/help",component:ke}),l.a.createElement(He,{path:"/terms_of_service",component:we}),l.a.createElement(m.b,{path:"/get_ios_app",component:Le}),l.a.createElement(m.b,{path:"/get_android_app",component:xe}),l.a.createElement(He,{path:"/admin_console",component:Oe}),l.a.createElement(T.b,{path:"/select_team",component:De}),l.a.createElement(T.b,{path:"/oauth/authorize",component:Ue}),l.a.createElement(T.b,{path:"/create_team",component:ye}),l.a.createElement(He,{path:"/mfa",component:qe}),l.a.createElement(He,{path:["/_redirect/integrations","/_redirect/pl/:postid"],component:P.a}),l.a.createElement(He,{path:"/:team",component:S.a}),l.a.createElement(m.a,{to:Ee({},this.props.location,{pathname:"/login"})}))):l.a.createElement("div",null)}}_e(Fe,"propTypes",{diagnosticsEnabled:o.a.bool,diagnosticId:o.a.string,noAccounts:o.a.bool,showTermsOfService:o.a.bool,actions:o.a.shape({loadMeAndConfig:o.a.func.isRequired}).isRequired})}).call(this,a(26))},1321:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});a(21);var n=a(0);function s(){return async e=>{e({type:n.e.INCREMENT_WS_ERROR_COUNT})}}function i(){return async e=>{e({type:n.e.RESET_WS_ERROR_COUNT})}}},1350:function(e,t,a){},1351:function(e,t,a){},1394:function(e,t,a){e.exports=function(e){Promise.all([a.e(0),a.e(21),a.e(15)]).then(function(t){e(a(1833))}.bind(null,a)).catch(a.oe)}},1400:function(e,t,a){"use strict";(function(e){a.d(t,"a",function(){return h});var n=a(16),s=a.n(n),i=a(5),o=a.n(i),r=a(1183),l=a(224),c=a.n(l),d=a(0),m=a(956);function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const p={display:"flex",flexDirection:"column",alignItems:"center",zIndex:"10"};class h extends o.a.PureComponent{constructor(t){super(t),u(this,"showTooltip",t=>{if(clearTimeout(this.hideTimeout),!this.show){const a=e(t.target),n=e(this.tooltipContainerRef.current);clearTimeout(this.showTimeout),this.showTimeout=setTimeout(()=>{this.show=!0,n.show(),n.children().on("mouseover",()=>clearTimeout(this.hideTimeout)),n.children().on("mouseleave",e=>{null!==e.toElement&&this.hideTooltip()}),this.popper=new r.a(a,n,{placement:"bottom",modifiers:{preventOverflow:{enabled:!1},hide:{enabled:!1}}})},d.i.OVERLAY_TIME_DELAY)}}),u(this,"hideTooltip",()=>{clearTimeout(this.hideTimeout),this.hideTimeout=setTimeout(()=>{this.show=!1,clearTimeout(this.showTimeout),e(this.tooltipContainerRef.current).hide()},d.i.OVERLAY_TIME_DELAY_SMALL)}),this.tooltipContainerRef=o.a.createRef(),this.show=!1}render(){const{href:e,title:t}=this.props;return o.a.createElement(o.a.Fragment,null,c.a.createPortal(o.a.createElement("div",{style:p,ref:this.tooltipContainerRef},o.a.createElement(m.a,{href:e,pluggableName:"LinkTooltip"})),document.getElementById("root")),o.a.createElement("span",{onMouseOver:this.showTooltip,onMouseLeave:this.hideTooltip},t))}}u(h,"propTypes",{href:s.a.string.isRequired,title:s.a.string.isRequired})}).call(this,a(94))},1414:function(e,t,a){"use strict";a.d(t,"a",function(){return u}),a.d(t,"b",function(){return p});var n=a(5),s=a.n(n),i=a(887),o=a(1415),r=a.n(o),l=a(1190),c=a.n(l),d=a(232);function m(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}const u=e=>{let{component:t}=e,a=m(e,["component"]);return s.a.createElement(i.b,Object.assign({},a,{render:e=>s.a.createElement(d.a,Object.assign({doLoad:r.a},e),s.a.createElement(t,e))}))},p=e=>{let{component:t}=e,a=m(e,["component"]);return s.a.createElement(i.b,Object.assign({},a,{render:e=>s.a.createElement(d.a,Object.assign({doLoad:c.a},e),s.a.createElement(d.a,Object.assign({doLoad:r.a},e),s.a.createElement(t,e)))}))}},1415:function(e,t,a){e.exports=function(e){a.e(27).then(function(t){e(a(1851))}.bind(null,a)).catch(a.oe)}},1417:function(e,t,a){e.exports=function(e){a.e(8).then(function(t){e(a(1832))}.bind(null,a)).catch(a.oe)}},1423:function(e,t,a){},1424:function(e,t,a){},1425:function(e,t,a){},1426:function(e,t,a){},1427:function(e,t,a){},1434:function(e,t,a){e.exports=a.p+"files/84c1ce7412135b70309723274272115a.png"},1435:function(e,t,a){e.exports=a.p+"files/91c1af3fe85302ca20148ee022737ef5.png"},1466:function(e,t,a){e.exports=function(e){a.e(30).then(function(t){e(a(1742))}.bind(null,a)).catch(a.oe)}},1489:function(e,t,a){e.exports=a.p+"files/bd956aafccffed574da236f21af209ef.gif"},1490:function(e,t,a){e.exports=a.p+"files/8b03642d36741ba3030a9004a1d56bb0.gif"},1491:function(e,t,a){},1492:function(e,t,a){},1493:function(e,t,a){},1517:function(e,t,a){},1518:function(e,t,a){},1519:function(e,t,a){},1520:function(e,t,a){},1521:function(e,t,a){},1522:function(e,t,a){},1523:function(e,t,a){},1526:function(e,t,a){},1527:function(e,t,a){},1529:function(e,t,a){e.exports=a.p+"files/d55440f1a5ccf3059b92c742865373d4.png"},1530:function(e,t,a){e.exports=a.p+"files/0fdb0de5ee5e63ef9b0d993d0d894d5c.png"},1531:function(e,t,a){e.exports=a.p+"files/1fa91df23863737eeecaabba4ed479ed.png"},1532:function(e,t,a){e.exports=a.p+"files/b216b3ccee92429fa7fdb18b83324766.png"},1533:function(e,t,a){e.exports=a.p+"files/b216b3ccee92429fa7fdb18b83324766.png"},1534:function(e,t,a){e.exports=a.p+"files/b216b3ccee92429fa7fdb18b83324766.png"},1561:function(e,t,a){e.exports=a.p+"files/dada73cb61740b48be647f9e7d7c8605.png"},1562:function(e,t,a){e.exports=function(e){Promise.all([a.e(1),a.e(18)]).then(function(t){e(a(1841))}.bind(null,a)).catch(a.oe)}},1563:function(e,t,a){e.exports=function(e){a.e(9).then(function(t){e(a(1855))}.bind(null,a)).catch(a.oe)}},1564:function(e,t,a){e.exports=function(e){Promise.all([a.e(1),a.e(0),a.e(7),a.e(6)]).then(function(t){e(a(1831))}.bind(null,a)).catch(a.oe)}},1565:function(e,t,a){e.exports=function(e){a.e(22).then(function(t){e(a(1850))}.bind(null,a)).catch(a.oe)}},1566:function(e,t,a){e.exports=function(e){a.e(29).then(function(t){e(a(1849))}.bind(null,a)).catch(a.oe)}},1567:function(e,t,a){e.exports=function(e){a.e(17).then(function(t){e(a(1848))}.bind(null,a)).catch(a.oe)}},1568:function(e,t,a){e.exports=function(e){a.e(10).then(function(t){e(a(1847))}.bind(null,a)).catch(a.oe)}},1569:function(e,t,a){e.exports=function(e){a.e(25).then(function(t){e(a(1846))}.bind(null,a)).catch(a.oe)}},1570:function(e,t,a){e.exports=function(e){a.e(23).then(function(t){e(a(1845))}.bind(null,a)).catch(a.oe)}},1571:function(e,t,a){e.exports=function(e){a.e(16).then(function(t){e(a(1861))}.bind(null,a)).catch(a.oe)}},1572:function(e,t,a){e.exports=function(e){a.e(14).then(function(t){e(a(1838))}.bind(null,a)).catch(a.oe)}},1573:function(e,t,a){e.exports=function(e){a.e(28).then(function(t){e(a(1837))}.bind(null,a)).catch(a.oe)}},1574:function(e,t,a){e.exports=function(e){a.e(20).then(function(t){e(a(1858))}.bind(null,a)).catch(a.oe)}},1575:function(e,t,a){e.exports=function(e){a.e(19).then(function(t){e(a(1857))}.bind(null,a)).catch(a.oe)}},1576:function(e,t,a){e.exports=function(e){a.e(13).then(function(t){e(a(1843))}.bind(null,a)).catch(a.oe)}},1577:function(e,t,a){e.exports=function(e){a.e(26).then(function(t){e(a(1854))}.bind(null,a)).catch(a.oe)}},1578:function(e,t,a){e.exports=function(e){a.e(12).then(function(t){e(a(1839))}.bind(null,a)).catch(a.oe)}},1579:function(e,t,a){e.exports=function(e){a.e(11).then(function(t){e(a(1840))}.bind(null,a)).catch(a.oe)}},1580:function(e,t,a){"use strict";a.d(t,"a",function(){return l});a(39);var n=a(0),s=a(14),i=a(20);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const r={capture:!0};class l{constructor(){o(this,"handleKeyDown",e=>{const t=e.ctrlKey,a=e.altKey,o=e.shiftKey;switch(this.lastInputEventIsKeyboard=!0,!0){case Object(s.X)(e,n.Q.KeyCodes.TAB):if(!Object(s.Y)()&&a||Object(s.e)(e))return;this.tabKeyIsPressed=!0;break;case Object(s.X)(e,n.Q.KeyCodes.TILDE):if(!this.regions||!this.regions.length)return;t&&!a&&(this.tildeKeyIsPressed=!0,e.preventDefault(),o?this.previousRegion():this.nextRegion());break;case Object(s.X)(e,n.Q.KeyCodes.F6):if(!Object(i.c)()&&!Object(s.e)(e))return;this.f6KeyIsPressed=!0,e.preventDefault(),o?this.previousRegion():this.nextRegion();break;case Object(s.X)(e,n.Q.KeyCodes.UP):if(!this.navigationInProgress||!this.sections||!this.sections.length)return;this.upArrowKeyIsPressed=!0,e.preventDefault(),this.shouldReverseSections?this.nextSection():this.previousSection();break;case Object(s.X)(e,n.Q.KeyCodes.DOWN):if(!this.navigationInProgress||!this.sections||!this.sections.length)return;this.downArrowKeyIsPressed=!0,e.preventDefault(),this.shouldReverseSections?this.previousSection():this.nextSection();break;case Object(s.X)(e,n.Q.KeyCodes.ESCAPE):if(!this.navigationInProgress)return;e.preventDefault(),this.cancelNavigation();break;case Object(s.X)(e,n.Q.KeyCodes.ENTER):this.enterKeyIsPressed=!0;break;case Object(s.X)(e,n.Q.KeyCodes.SPACE):"BUTTON"===e.target.nodeName&&(e.preventDefault(),e.stopPropagation(),e.target.click())}}),o(this,"handleKeyUp",()=>{this.resetInterractionStates()}),o(this,"handleMouseClick",e=>{this.enterKeyIsPressed||(this.lastInputEventIsKeyboard=!1),e.target!==this.activeElement&&this.cancelNavigation()}),o(this,"handleMouseDown",()=>{this.mouseIsPressed=!0}),o(this,"handleMouseUp",()=>{this.mouseIsPressed=!1}),o(this,"handleFocus",e=>{!this.mouseIsPressed&&this.windowIsFocused&&this.nextElement(e.target,e.path||!0),this.windowIsFocused||(this.windowIsFocused=!0)}),o(this,"handleWindowBlur",e=>{e.target===window&&(this.windowIsFocused=!1)}),o(this,"handleActiveRegionUpdate",()=>{this.navigationInProgress&&(this.updateActiveRegion(),this.focusedElement===this.activeRegion&&this.udpateCurrentFocus(!0))}),o(this,"handleActiveSectionUpdate",()=>{this.navigationInProgress&&(this.updateActiveSection(),this.focusedElement===this.activeSection&&this.udpateCurrentFocus(!0))}),o(this,"handleActiveElementUpdate",()=>{this.navigationInProgress&&(this.updateActiveElement(),this.focusedElement===this.activeElement&&this.udpateCurrentFocus(!0))}),this.regionHTMLCollection=this.getAllRegions(),this.sectionHTMLCollection=null,this.modalHTMLCollection=this.getAllModals(),this.popupHTMLCollection=this.getAllPopups(),this.activeRegion=null,this.activeSection=null,this.activeElement=null,this.mouseIsPressed=!1,this.lastInputEventIsKeyboard=!1,this.enterKeyIsPressed=!1,this.f6KeyIsPressed=!1,this.upArrowKeyIsPressed=!1,this.downArrowKeyIsPressed=!1,this.tabKeyIsPressed=!1,this.tildeKeyIsPressed=!1,this.windowIsFocused=!0,this.resetNavigation=!1,document.addEventListener(n.l.KEY_DOWN,this.handleKeyDown,r),document.addEventListener(n.l.KEY_UP,this.handleKeyUp,r),document.addEventListener(n.l.CLICK,this.handleMouseClick,r),document.addEventListener(n.l.MOUSE_DOWN,this.handleMouseDown,r),document.addEventListener(n.l.MOUSE_UP,this.handleMouseUp,r),document.addEventListener(n.l.FOCUS,this.handleFocus,r),window.addEventListener(n.l.BLUR,this.handleWindowBlur,r)}destroy(){this.clearActiveRegion(),this.clearCurrentFocus(),document.removeEventListener(n.l.KEY_DOWN,this.handleKeyDown,r),document.removeEventListener(n.l.KEY_UP,this.handleKeyUp,r),document.removeEventListener(n.l.CLICK,this.handleMouseClick,r),document.removeEventListener(n.l.MOUSE_DOWN,this.handleMouseDown,r),document.removeEventListener(n.l.MOUSE_UP,this.handleMouseUp,r),document.removeEventListener(n.l.FOCUS,this.handleFocus,r),window.removeEventListener(n.l.BLUR,this.handleWindowBlur,r)}get navigationInProgress(){return!!(this.regions&&this.regions.length&&this.isElementValid(this.activeRegion))&&(!!this.lastInputEventIsKeyboard&&(!this.modalIsOpen&&!this.popupIsOpen&&!!this.isElementValid(this.activeElement)))}get regions(){let e=this.sortElementsByAttributeOrder(this.regionHTMLCollection);return e=e.filter(e=>this.elementIsVisible(e))}get sections(){let e=this.sortElementsByAttributeOrder(this.sectionHTMLCollection);return e=e.filter(e=>this.elementIsVisible(e)),this.shouldReverseSections&&e.reverse(),e}get activeRegionIndex(){return this.activeRegion?this.regions.indexOf(this.activeRegion):null}get activeSectionIndex(){return this.activeSection?this.sections.indexOf(this.activeSection):null}get shouldReverseSections(){return!!this.activeRegion&&this.getOrderReverseAttribute(this.activeRegion)}get focusedElement(){let e;return this.activeElement?e=this.activeElement:this.activeSection?e=this.activeSection:this.activeRegion&&(e=this.activeRegion),e}get a11yKeyIsPressed(){return this.f6KeyIsPressed||this.upArrowKeyIsPressed||this.downArrowKeyIsPressed||this.tabKeyIsPressed||this.tildeKeyIsPressed}get modalIsOpen(){return this.modalHTMLCollection.length>0}get popupIsOpen(){return this.popupHTMLCollection.length>0}nextRegion(){const e=this.regions;if(!e||!e.length||this.modalIsOpen||this.popupIsOpen)return;let t;t=!this.activeRegion||this.activeRegionIndex===e.length-1||this.resetNavigation?e[0]:e[this.activeRegionIndex+1],this.setActiveRegion(t),this.setCurrentFocus(),this.resetNavigation=!1}previousRegion(){const e=this.regions;if(!e||!e.length||this.modalIsOpen||this.popupIsOpen)return;let t;t=!this.activeRegion||0!==this.activeRegionIndex&&this.resetNavigation?e[0]:0===this.activeRegionIndex?e[e.length-1]:e[this.activeRegionIndex-1],this.setActiveRegion(t),this.setCurrentFocus(),this.resetNavigation=!1}nextSection(){const e=this.sections,t=this.getLoopNavigationAttribute(this.activeRegion);if(this.modalIsOpen||this.popupIsOpen||!e||!e.length||!t&&this.activeSectionIndex===e.length-1)return;let a;a=this.activeSection&&this.activeSectionIndex<e.length-1?e[this.activeSectionIndex+1]:e[0],this.setActiveSection(a),this.setCurrentFocus(),this.resetNavigation=!0}previousSection(){const e=this.sections,t=this.getLoopNavigationAttribute(this.activeRegion);if(this.modalIsOpen||this.popupIsOpen||!e||!e.length||!t&&0===this.activeSectionIndex)return;let a;a=this.activeSection&&this.activeSectionIndex>0?e[this.activeSectionIndex-1]:this.activeSection&&0===this.activeSectionIndex?e[e.length-1]:e[0],this.setActiveSection(a),this.setCurrentFocus(),this.resetNavigation=!0}nextElement(e,t=!1){let a,s;t&&t.length?(t.indexOf(this.activeRegion)<0&&(a=t.find(e=>!!e.classList&&e.classList.contains(n.b.REGION))),t.indexOf(this.activeSection)<0&&(s=t.find(e=>!!e.classList&&e.classList.contains(n.b.SECTION)))):t&&"function"==typeof e.closest&&(a=e.closest(".".concat(n.b.REGION)),s=e.closest(".".concat(n.b.SECTION))),a&&this.activeRegion!==a&&this.setActiveRegion(a,!1),s&&this.activeSection!==s&&this.setActiveSection(s),this.setActiveElement(e),this.setCurrentFocus(),this.resetNavigation=!0}cancelNavigation(){this.clearActiveRegion(),this.setCurrentFocus(),this.resetInterractionStates()}setActiveRegion(e,t=!0){(this.isElementValid(e,[this.activeRegion])||this.resetNavigation)&&(this.clearActiveRegion(),this.activeRegion=e,this.activeRegion.addEventListener(n.c.UPDATE,this.handleActiveRegionUpdate),this.activeRegion.dispatchEvent(new Event(n.c.ACTIVATE)),this.updateActiveRegion(),this.sectionHTMLCollection=this.getAllSectionsForRegion(this.activeRegion),t&&this.getFocusChildAttribute(this.activeRegion)&&this.sections&&this.sections.length&&this.setActiveSection(this.sections[0]))}setActiveSection(e){this.isElementValid(e,[this.activeSection])&&(this.clearActiveSection(),this.activeSection=e,this.activeSection.addEventListener(n.c.UPDATE,this.handleActiveSectionUpdate),this.activeSection.dispatchEvent(new Event(n.c.ACTIVATE)),this.updateActiveSection())}setActiveElement(e){this.isElementValid(e,[this.activeElement])&&(this.clearActiveElement(),this.activeElement=e,this.activeElement.addEventListener(n.c.UPDATE,this.handleActiveElementUpdate),this.activeElement.dispatchEvent(new Event(n.c.ACTIVATE)),this.updateActiveElement())}setCurrentFocus(){this.clearCurrentFocus(),this.focusedElement&&(document.activeElement!==this.focusedElement&&this.focusedElement.focus(),this.udpateCurrentFocus())}updateActiveRegion(){this.activeRegion&&(this.activeRegion.classList.add(n.b.ACTIVE),this.activeRegion.getAttribute("tabindex")||this.activeRegion.setAttribute("tabindex",-1))}updateActiveSection(){this.activeSection&&(this.activeSection.classList.add(n.b.ACTIVE),this.activeSection.getAttribute("tabindex")||this.activeSection.setAttribute("tabindex",-1))}updateActiveElement(){this.activeElement&&this.activeElement.classList.add(n.b.ACTIVE)}udpateCurrentFocus(e=!1){(this.focusedElement&&this.a11yKeyIsPressed||e)&&this.focusedElement.classList.add(n.b.FOCUSED)}clearActiveRegion(){this.activeRegion&&(this.activeRegion.classList.remove(n.b.ACTIVE),this.activeRegion.dispatchEvent(new Event(n.c.DEACTIVATE)),this.activeRegion.removeEventListener(n.c.UPDATE,this.handleActiveRegionUpdate),this.activeRegion=null),this.clearActiveSection()}clearActiveSection(){this.activeSection&&(this.activeSection.classList.remove(n.b.ACTIVE),this.activeSection.dispatchEvent(new Event(n.c.DEACTIVATE)),this.activeSection.removeEventListener(n.c.UPDATE,this.handleActiveSectionUpdate),this.activeSection=null),this.clearActiveElement()}clearActiveElement(){this.activeElement&&(this.activeElement!==this.activeRegion&&this.activeElement!==this.activeSection&&(this.activeElement.classList.remove(n.b.ACTIVE),this.activeElement.dispatchEvent(new Event(n.c.DEACTIVATE))),this.activeElement.removeEventListener(n.c.UPDATE,this.handleActiveElementUpdate),this.activeElement=null)}clearCurrentFocus(e=!1){Array.from(document.getElementsByClassName(n.b.FOCUSED)).forEach(e=>{e.classList.remove(n.b.FOCUSED)}),e&&document.activeElement.blur()}resetInterractionStates(){this.mouseIsPressed=!1,this.f6KeyIsPressed=!1,this.upArrowKeyIsPressed=!1,this.downArrowKeyIsPressed=!1,this.tabKeyIsPressed=!1,this.tildeKeyIsPressed=!1,this.enterKeyIsPressed=!1}getAllRegions(){return document.getElementsByClassName(n.b.REGION)}getAllSectionsForRegion(e){return e?e.getElementsByClassName(n.b.SECTION):null}sortElementsByAttributeOrder(e){return e&&e.length?Array.from(e).sort((e,t)=>{return e.getAttribute(n.a.SORT_ORDER)-t.getAttribute(n.a.SORT_ORDER)}):[]}elementIsVisible(e){return e&&e.offsetParent}getAllModals(){return document.getElementsByClassName(n.b.MODAL)}getAllPopups(){return document.getElementsByClassName(n.b.POPUP)}getLoopNavigationAttribute(e){const t=e.getAttribute(n.a.LOOP_NAVIGATION);return!t||"false"!==t.toLowerCase()}getOrderReverseAttribute(e){const t=e.getAttribute(n.a.ORDER_REVERSE);return!(!t||"true"!==t.toLowerCase())}getFocusChildAttribute(e){const t=e.getAttribute(n.a.FOCUS_CHILD);return!(!t||"true"!==t.toLowerCase())}isElementValid(e,t=[]){return!(!e||!e.classList||t.includes(e))}}},1830:function(e,t,a){"use strict";a(95);var n=a(223),s=a(6),i=a(887),o=a(22),r=a(46),l=a(160),c=a(18),d=a(15),m=a(11),u=a(17),p=a(13),h=a(113),g=a(444),b=a(975),f=a(1191),E=(a(21),a(16)),_=a.n(E),v=a(5),y=a.n(v),C=a(1416),w=a.n(C),T=a(997),O=a(900),S=a(0),P=a(20),M=a(14),N=a(232),I=a(1417),A=a.n(I),j=a(967),R=a(956),k=a(1148),L=a(38),x=a(12),D=a(51),U=a(907),q=a(227),H=a(58);function F(e){return async(t,a)=>{const n=await L.editPost(e)(t,a);return n.error&&"api.post.update_post.permissions_time_limit.app_error"===n.error.server_error_id&&t(Object(H.logError)({type:S.h.ANNOUNCEMENT,message:n.error.message},!0)),n}}function B(e,t,a,n,s,i){return async n=>{n({type:S.e.SELECT_ATTACHMENT_MENU_ACTION,postId:e,data:{[t]:{text:s,value:i}}}),n(L.doPostActionWithCookie(e,t,a,i))}}var G=a(231),V=(a(41),a(1152)),W=a(28),z=a(64);function Y(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class K extends y.a.PureComponent{constructor(e){super(e),Y(this,"handleDelete",async()=>{const{actions:e,channelName:t,focusedPostId:a,post:n,teamName:s}=this.props,i=await e.deleteAndRemovePost(n);n.id===a&&t&&z.a.push("/"+s+"/channels/"+t),i.data&&this.onHide()}),Y(this,"handleEntered",()=>{this.deletePostBtn&&this.deletePostBtn.focus()}),Y(this,"onHide",()=>{var e;(this.setState({show:!1}),P.m())||(e=this.props.isRHS?document.getElementById("reply_textbox"):document.getElementById("post_textbox"))&&e.focus()}),this.state={show:!0}}render(){var e="";this.props.commentCount>0&&""===this.props.post.root_id&&(e=y.a.createElement(W.c,{id:"delete_post.warning",defaultMessage:"This post has {count, number} {count, plural, one {comment} other {comments}} on it.",values:{count:this.props.commentCount}}));const t=this.props.post.root_id?y.a.createElement(W.c,{id:"delete_post.comment",defaultMessage:"Comment"}):y.a.createElement(W.c,{id:"delete_post.post",defaultMessage:"Post"});return y.a.createElement(V.a,{dialogClassName:"a11y__modal",show:this.state.show,onEntered:this.handleEntered,onHide:this.onHide,onExited:this.props.onHide,enforceFocus:!1,id:"deletePostModal",role:"dialog","aria-labelledby":"deletePostModalLabel"},y.a.createElement(V.a.Header,{closeButton:!0},y.a.createElement(V.a.Title,{componentClass:"h1",id:"deletePostModalLabel"},y.a.createElement(W.c,{id:"delete_post.confirm",defaultMessage:"Confirm {term} Delete",values:{term:t}}))),y.a.createElement(V.a.Body,null,y.a.createElement(W.c,{id:"delete_post.question",defaultMessage:"Are you sure you want to delete this {term}?",values:{term:t}}),y.a.createElement("br",null),y.a.createElement("br",null),e),y.a.createElement(V.a.Footer,null,y.a.createElement("button",{type:"button",className:"btn btn-link",onClick:this.onHide},y.a.createElement(W.c,{id:"delete_post.cancel",defaultMessage:"Cancel"})),y.a.createElement("button",{ref:e=>{this.deletePostBtn=e},type:"button",autoFocus:!0,className:"btn btn-danger",onClick:this.handleDelete,id:"deletePostModalButton"},y.a.createElement(W.c,{id:"delete_post.del",defaultMessage:"Delete"}))))}}Y(K,"propTypes",{channelName:_.a.string,focusedPostId:_.a.string,teamName:_.a.string,post:_.a.object.isRequired,commentCount:_.a.number.isRequired,isRHS:_.a.bool.isRequired,onHide:_.a.func.isRequired,actions:_.a.shape({deleteAndRemovePost:_.a.func.isRequired})});var Q=Object(n.connect)(function(e,t){const a=Object(p.getChannel)(e,t.post.channel_id);let n="";a&&(n=a.name);const{focusedPostId:s}=e.views.channel;return{channelName:n,focusedPostId:s,teamName:Object(u.getCurrentTeam)(e).name}},function(e){return{actions:Object(s.bindActionCreators)({deleteAndRemovePost:q.c},e)}})(K),Z=a(1098),J=a(1182),X=a(1189),$=a(1188),ee=a(1419),te=a.n(ee),ae=a(961),ne=a(1),se={ItemTapAction:{OPEN_EMBED_PAGE:1,SHARE:2},Tab:{TRENDING:0,REACTIONS:1},appName:{mattermost:"mattermost"}};a(109),a(30);class ie extends y.a.PureComponent{render(){return y.a.createElement("span",this.props,y.a.createElement("svg",{width:"100%",height:"100%",viewBox:"-10 -10 40 40",version:"1.1"},y.a.createElement("g",{id:"ic_search",transform:"matrix(0.959095,-9.6091e-18,-1.00189e-17,0.959095,-0.0633002,-0.777826)"},y.a.createElement("path",{d:"M2.648,15.872C3.433,16.658 4.376,17.287 5.454,17.758C6.553,18.229 7.698,18.454 8.888,18.454C10.728,18.454 12.389,17.938 13.893,16.905L18.18,21.192C18.494,21.506 18.854,21.664 19.302,21.664C19.751,21.664 20.111,21.506 20.447,21.192C20.761,20.855 20.919,20.496 20.919,20.047C20.919,19.621 20.761,19.239 20.447,18.925L16.16,14.638C17.193,13.134 17.709,11.473 17.709,9.633C17.709,8.443 17.484,7.298 17.013,6.198C16.542,5.121 15.913,4.178 15.128,3.393C14.342,2.607 13.399,1.979 12.322,1.507C11.222,1.036 10.077,0.811 8.888,0.811C7.698,0.811 6.553,1.036 5.454,1.507C4.376,1.979 3.433,2.607 2.648,3.393C1.862,4.178 1.234,5.121 0.762,6.198C0.291,7.298 0.066,8.443 0.066,9.633C0.066,10.822 0.291,11.967 0.762,13.067C1.234,14.144 1.862,15.087 2.648,15.872ZM8.888,4.021C10.436,4.021 11.761,4.56 12.861,5.66C13.96,6.76 14.499,8.084 14.499,9.633C14.499,11.181 13.96,12.506 12.861,13.606C11.761,14.705 10.436,15.244 8.888,15.244C7.339,15.244 6.015,14.705 4.915,13.606C3.815,12.506 3.276,11.181 3.276,9.633C3.276,8.084 3.815,6.76 4.915,5.66C6.015,4.56 7.339,4.021 8.888,4.021Z",style:{fill:"inherit"}}))))}}class oe extends y.a.PureComponent{render(){return y.a.createElement("span",this.props,y.a.createElement("svg",{width:"100%",height:"100%",viewBox:"-10 -10 40 40",enableBackground:"new 0 0 20 20",version:"1.1"},y.a.createElement("g",{transform:"matrix(0.952381,0,0,1,0,0)"},y.a.createElement("path",{fill:"inherit",d:"M10.5 11.7L2.2 19.8C2 19.9 1.9 20 1.7 20 1.6 20 1.4 19.9 1.3 19.8L0.2 18.8C0.1 18.7 0 18.5 0 18.3 0 18.2 0.1 18 0.2 17.9L8.3 10 0.2 2.1C0.1 2 0 1.8 0 1.7 0 1.5 0.1 1.3 0.2 1.2L1.3 0.2C1.4 0.1 1.6 0 1.7 0 1.9 0 2 0.1 2.2 0.2L10.5 8.3 18.8 0.2C19 0.1 19.1 0 19.3 0 19.4 0 19.6 0.1 19.7 0.2L20.8 1.2C20.9 1.3 21 1.5 21 1.7 21 1.8 20.9 2 20.8 2.1L12.7 10 20.8 17.9C20.9 18 21 18.2 21 18.3 21 18.5 20.9 18.7 20.8 18.8L19.7 19.8C19.6 19.9 19.4 20 19.3 20 19.1 20 19 19.9 18.8 19.8L10.5 11.7Z"}))))}}var re=a(905),le=a(29);a(1423);function ce(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function de(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const me={saveSearchBarText:ae.saveSearchBarText,saveSearchScrollPosition:ae.saveSearchScrollPosition,searchTextUpdate:ae.searchTextUpdate},ue=Object(ne.makeStyleFromTheme)(e=>({background:{backgroundColor:e.centerChannelBg},icon:{fill:Object(ne.changeOpacity)(e.centerChannelColor,.4)},inputBackground:{backgroundColor:e.centerChannelBg},input:{borderColor:Object(ne.changeOpacity)(e.centerChannelColor,.12)}}));class pe extends v.Component{constructor(e){super(e),de(this,"parseSearchText",e=>e.trim().split(/ +/).join("-")),de(this,"removeExtraSpaces",e=>e.trim().split(/ +/).join(" ")),de(this,"updateSearchInputValue",e=>{this.searchInput.value=e,this.props.saveSearchBarText(e)}),de(this,"handleSubmit",e=>{e.preventDefault(),this.triggerSearch(this.searchInput.value),this.searchInput.blur()}),de(this,"triggerSearch",e=>{const{onSearch:t}=this.props;this.props.searchTextUpdate(this.parseSearchText(e)),t(),this.props.saveSearchScrollPosition(0)}),de(this,"handleChange",e=>{clearTimeout(this.searchTimeout);const t=e.target.value,{onCategories:a,action:n}=this.props;this.props.saveSearchBarText(t),""===t?a():"reactions"===n&&this.isFilteredTags(t)||(this.searchTimeout=setTimeout(()=>{this.triggerSearch(t)},500))}),de(this,"focusInput",()=>{this.setState({inputFocused:!0})}),de(this,"blurInput",()=>{this.setState({inputFocused:!1})}),de(this,"isFilteredTags",e=>{var t=this.removeExtraSpaces(e);const{tagsList:a}=this.props,n=t.toLowerCase(),s=a&&a.length?a.filter(e=>t&&-1===e.tagName.indexOf(n)?"":e):[];return Boolean(s.length)}),de(this,"clearSearchHandle",()=>{const{action:e,onTrending:t,onCategories:a}=this.props;this.updateSearchInputValue(""),"reactions"===e?a():t()}),this.state={inputFocused:!1},this.searchTimeout=null,this.props.saveSearchBarText(""),this.props.searchTextUpdate("")}componentDidUpdate(e){const{searchBarText:t}=this.props;t!==e.searchBarText&&("trending"===t?this.updateSearchInputValue(""):this.updateSearchInputValue(t))}shouldComponentUpdate(e,t){return!e.searchBarText&&this.props.searchBarText||e.searchBarText&&!this.props.searchBarText||t.inputFocused!==this.state.inputFocused}render(){const e=ue(this.props.theme),{searchBarText:t}=this.props,a=t?y.a.createElement(oe,{className:"ic-clear-search",style:e.icon,onClick:this.clearSearchHandle}):null;return y.a.createElement("form",{className:"gfycat-search",method:"get",target:"_top",noValidate:"",onSubmit:this.handleSubmit},y.a.createElement("div",{className:"search-bar",style:e.background},y.a.createElement("div",{className:"search-input-bg",style:e.inputBackground}),y.a.createElement(re.a,{className:"search-input",name:"searchText",autoFocus:!0,placeholder:{id:Object(le.b)("gif_picker.gfycat"),defaultMessage:"Search Gfycat"},onChange:this.handleChange,autoComplete:"off",autoCapitalize:"off",onFocus:this.focusInput,onBlur:this.blurInput,ref:e=>(this.searchInput=e,e),style:e.input}),y.a.createElement(ie,{className:"ic ic-search",style:e.icon}),a),y.a.createElement("button",{type:"submit",className:"submit-button"}))}}de(pe,"propTypes",{searchBarText:_.a.string,tagsList:_.a.array,theme:_.a.object.isRequired,onTrending:_.a.func,onSearch:_.a.func,onCategories:_.a.func,action:_.a.string,saveSearchScrollPosition:_.a.func,saveSearchBarText:_.a.func,searchTextUpdate:_.a.func});var he=Object(n.connect)(function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ce(a,!0).forEach(function(t){de(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ce(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e.entities.gifs.categories,{},e.entities.gifs.search,{theme:Object(c.getTheme)(e),appProps:e.entities.gifs.app})},me)(pe);class ge extends y.a.PureComponent{render(){return y.a.createElement("span",this.props,y.a.createElement("svg",{className:"ic-svg ic-trending-svg",width:"11px",height:"15px",viewBox:"0 0 11 15",version:"1.1"},y.a.createElement("g",{id:"Finalized-Design",stroke:"none",fill:"inherit"},y.a.createElement("g",{id:"GfyCat---Gycat-Tab",transform:"translate(-1212.000000, -619.000000)",fill:"inherit"},y.a.createElement("g",{id:"modal---emojis",transform:"translate(1147.000000, 542.000000)"},y.a.createElement("g",{id:"tabs---gfycat",transform:"translate(1.000000, 68.000000)"},y.a.createElement("g",{id:"tab---trending---selected"},y.a.createElement("path",{d:"M69.90625,10.4062776 C69.90625,10.9531513 70.0976562,11.4909106 70.4804688,12.019555 C70.6992188,12.32945 71.1276043,12.7760638 71.765625,13.3593956 C72.3489582,13.9062693 72.7773438,14.3346538 73.0507812,14.6445488 C73.5065106,15.1731932 73.8528644,15.7109525 74.0898438,16.2578262 C74.3632812,16.9505327 74.5,17.6979271 74.5,18.5000083 C74.5,19.4479229 74.2630207,20.3229208 73.7890625,21.1250021 C73.3151043,21.9270834 72.6770832,22.565103 71.875,23.03906 C71.0729168,23.5130171 70.1979168,23.7499958 69.25,23.7499958 C68.3020832,23.7499958 67.4270832,23.5130171 66.625,23.03906 C65.8229168,22.565103 65.1848957,21.9270834 64.7109375,21.1250021 C64.2369793,20.3229208 64,19.4479229 64,18.5000083 C64,17.6432397 64.2005207,16.8320436 64.6015625,16.0664204 C65.0026043,15.3007972 65.5494793,14.6718925 66.2421875,14.1797061 C66.4609375,14.0338733 66.6888019,14.0247585 66.9257812,14.1523625 C67.1627606,14.2799665 67.28125,14.4713723 67.28125,14.7265798 L67.28125,17.6250104 C67.28125,17.9349054 67.3860676,18.1946704 67.5957031,18.4043054 C67.8053387,18.6139405 68.0651043,18.7187578 68.375,18.7187578 C68.6848957,18.7187578 68.9446613,18.6139405 69.1542969,18.4043054 C69.3639324,18.1946704 69.46875,17.9349054 69.46875,17.6250104 C69.46875,17.4427191 69.4049481,17.2330844 69.2773438,16.9961057 C69.2044269,16.8320436 69.0677082,16.576836 68.8671875,16.2304825 C68.4661457,15.5742341 68.1835938,15.0547041 68.0195312,14.6718925 C67.7643231,13.9791859 67.6640625,13.2955938 67.71875,12.6211161 C67.8098957,11.7825763 68.1380207,10.9258077 68.703125,10.0508097 C68.8125,9.86851837 68.9628906,9.76825847 69.1542969,9.75002921 C69.3457031,9.73179994 69.5188801,9.78648731 69.6738281,9.91409132 C69.8287762,10.0416953 69.90625,10.2057574 69.90625,10.4062776 Z M69.2499875,22.437499 C69.9609233,22.437499 70.6171717,22.259765 71.2187328,21.9042971 C71.8202939,21.5488292 72.2988083,21.0703147 72.6542762,20.4687537 C73.0097441,19.8671926 73.1874781,19.2109441 73.1874781,18.5000083 C73.1874781,17.880218 73.0781034,17.3060006 72.8593539,16.7773562 C72.6588337,16.3398572 72.376282,15.9023583 72.0116996,15.4648593 C71.7929502,15.1914225 71.4329248,14.8131683 70.9316241,14.3300964 C70.4303233,13.8470245 70.070298,13.4687703 69.8515485,13.1953335 C69.4869662,12.7760638 69.2135294,12.3567937 69.031238,11.937524 C68.8671759,12.5573143 68.8945196,13.1953335 69.1132691,13.8515819 C69.2408731,14.2343935 69.5143099,14.7812672 69.9335796,15.492203 C70.2252457,15.9661601 70.4166515,16.321628 70.507797,16.5586067 C70.6900884,16.9414183 70.7812338,17.2968862 70.7812338,17.6250104 C70.7812338,18.2812589 70.5442551,18.8463618 70.070298,19.3203189 C69.596341,19.794276 69.031238,20.0312547 68.3749896,20.0312547 C67.7187411,20.0312547 67.1536382,19.794276 66.6796811,19.3203189 C66.205724,18.8463618 65.9687453,18.2812589 65.9687453,17.6250104 L65.9687453,16.0937641 C65.7682251,16.403659 65.60872,16.7819136 65.4902308,17.228527 C65.3717417,17.6751404 65.3124969,18.0989675 65.3124969,18.5000083 C65.3124969,19.2109441 65.4902308,19.8671926 65.8456987,20.4687537 C66.2011666,21.0703147 66.6796811,21.5488292 67.2812422,21.9042971 C67.8828032,22.259765 68.5390517,22.437499 69.2499875,22.437499 Z",id:"icon---trending"}))))))))}}class be extends y.a.PureComponent{render(){return y.a.createElement("span",this.props,y.a.createElement("svg",{className:"ic-svg ic-reactions-svg",width:"14px",height:"14px",viewBox:"0 0 14 14",version:"1.1"},y.a.createElement("g",{id:"Finalized-Design",stroke:"none",fill:"inherit"},y.a.createElement("g",{id:"GfyCat---Gycat-Tab",transform:"translate(-1348.000000, -620.000000)",fill:"inherit"},y.a.createElement("g",{id:"modal---emojis",transform:"translate(1147.000000, 542.000000)"},y.a.createElement("g",{id:"tabs---gfycat",transform:"translate(1.000000, 68.000000)"},y.a.createElement("g",{id:"tab---category---deselected",transform:"translate(138.000000, 0.000000)"},y.a.createElement("path",{d:"M62,16 L62,10 L68,10 L68,16 L62,16 Z M64,12 L64,14 L66,14 L66,12 L64,12 Z M70,24 L70,18 L76,18 L76,24 L70,24 Z M72,20 L72,22 L74,22 L74,20 L72,20 Z M70,10 L76,10 L76,16 L70,16 L70,10 Z M74,14 L74,12 L72,12 L72,14 L74,14 Z M62,24 L62,18 L68,18 L68,24 L62,24 Z M64,20 L64,22 L66,22 L66,20 L64,20 Z",id:"icon---categories"}))))))))}}a(1424);const fe={saveSearchBarText:ae.saveSearchBarText,searchTextUpdate:ae.searchTextUpdate},Ee=Object(ne.makeStyleFromTheme)(e=>({background:{backgroundColor:e.centerChannelBg},header:{borderBottomColor:Object(ne.changeOpacity)(e.centerChannelColor,.2)},icon:{fill:Object(ne.changeOpacity)(e.centerChannelColor,.3)},iconActive:{fill:e.centerChannelColor},iconHover:{fill:Object(ne.changeOpacity)(e.centerChannelColor,.8)}}));class _e extends v.PureComponent{constructor(e){super(e),this.state={hovering:""}}render(){const e=Ee(this.props.theme);return y.a.createElement("header",{className:"header-container",style:e.background},y.a.createElement(he,this.props),y.a.createElement("nav",{className:"nav-bar",style:e.header},this.renderTabs(this.props,e)))}renderTabs(e,t){const{appProps:a,onTrending:n,onCategories:s}=e,{header:i}=a;return i.tabs.map((e,a)=>{let i;return e===se.Tab.TRENDING?i=this.renderTab("trending",n,ge,a,t):e===se.Tab.REACTIONS&&(i=this.renderTab("reactions",s,be,a,t)),i})}renderTab(e,t,a,n,s){var i=this.props;const{action:o}=i;return y.a.createElement("a",{onClick:function(){i.searchTextUpdate(""),i.saveSearchBarText(""),t()},onMouseOver:()=>{this.setState({hovering:e})},onMouseOut:()=>{this.setState({hovering:""})},style:{cursor:"pointer"},key:n},y.a.createElement("div",{style:{paddingTop:"2px"}},y.a.createElement(a,{style:(()=>this.state.hovering===e?s.iconHover:o===e?s.iconActive:s.icon)()})))}}var ve,ye,Ce;ve=_e,ye="propTypes",Ce={action:_.a.string,appProps:_.a.object,saveSearchBarText:_.a.func,searchTextUpdate:_.a.func,theme:_.a.object.isRequired},ye in ve?Object.defineProperty(ve,ye,{value:Ce,enumerable:!0,configurable:!0,writable:!0}):ve[ye]=Ce;var we=Object(n.connect)(function(e){return{theme:Object(c.getTheme)(e)}},fe)(_e);const Te={saveAppProps:ae.saveAppProps};class Oe extends v.PureComponent{constructor(e){super(e);const{appProps:t}=this.props;this.props.saveAppProps(t)}render(){const{appProps:e,action:t,onCategories:a,onSearch:n,onTrending:s,children:i}=this.props,o="main-container "+(e.appClassName||"");return y.a.createElement("div",{className:o},y.a.createElement(we,{appProps:e,action:t,onCategories:a,onSearch:n,onTrending:s}),y.a.createElement("div",{className:"component-container"},i))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Oe,"propTypes",{appProps:_.a.object,action:_.a.string,onCategories:_.a.func,onSearch:_.a.func,onTrending:_.a.func,children:_.a.object,saveAppProps:_.a.func,authenticateSdk:_.a.func});var Se=Object(n.connect)(null,Te)(Oe),Pe=(a(47),a(8),a(225)),Me=a(226);function Ne(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Ie(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function Ae(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class je extends v.PureComponent{constructor(...e){super(...e),Ae(this,"scrollListener",()=>{const e=this.scrollComponent,t=window;let a;if(this.props.useWindow){var n="pageYOffset"in t?t.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;a=this.props.isReverse?n:this.calculateTopPosition(e)+(e.offsetHeight-n-window.innerHeight)}else a=this.props.isReverse?e.parentNode.scrollTop:e.scrollHeight-e.parentNode.scrollTop-e.parentNode.clientHeight;a<Number(this.props.threshold)&&(this.detachScrollListener(),"function"==typeof this.props.loadMore&&this.props.loadMore(this.pageLoaded+=1))})}componentDidMount(){this.pageLoaded=this.props.pageStart,this.attachScrollListener(),this.setScrollPosition()}componentDidUpdate(){this.attachScrollListener()}render(){const e=this.props,{children:t,element:a,hasMore:n,initialLoad:s,loader:i,loadMore:o,pageStart:r,threshold:l,useWindow:c,isReverse:d,scrollPosition:m,containerHeight:u}=e,p=Ie(e,["children","element","hasMore","initialLoad","loader","loadMore","pageStart","threshold","useWindow","isReverse","scrollPosition","containerHeight"]);p.ref=e=>{this.scrollComponent=e};const h=u?function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ne(a,!0).forEach(function(t){Ae(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ne(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},p,{style:{height:u}}):p;return y.a.createElement(a,h,t,n&&(i||this.defaultLoader))}calculateTopPosition(e){return e?e.offsetTop+this.calculateTopPosition(e.offsetParent):0}setScrollPosition(){const{scrollPosition:e}=this.props;null!==e&&window.scrollTo(0,e)}attachScrollListener(){if(!this.props.hasMore)return;let e=window;!1===this.props.useWindow&&(e=this.scrollComponent.parentNode),e.addEventListener("scroll",this.scrollListener),e.addEventListener("resize",this.scrollListener),this.props.initialLoad&&this.scrollListener()}detachScrollListener(){var e=window;!1===this.props.useWindow&&(e=this.scrollComponent.parentNode),e.removeEventListener("scroll",this.scrollListener),e.removeEventListener("resize",this.scrollListener)}componentWillUnmount(){this.detachScrollListener()}setDefaultLoader(e){this.defaultLoader=e}}Ae(je,"propTypes",{children:_.a.array,element:_.a.string,hasMore:_.a.bool,initialLoad:_.a.bool,loader:_.a.object,loadMore:_.a.func.isRequired,pageStart:_.a.number,threshold:_.a.number,useWindow:_.a.bool,isReverse:_.a.bool,containerHeight:_.a.number,scrollPosition:_.a.number}),Ae(je,"defaultProps",{element:"div",hasMore:!1,initialLoad:!0,pageStart:0,threshold:250,useWindow:!0,isReverse:!1,containerHeight:null,scrollPosition:null});a(1425);function Re(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function ke(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Re(a,!0).forEach(function(t){Le(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Re(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Le(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const xe={saveSearchBarText:ae.saveSearchBarText,saveSearchScrollPosition:ae.saveSearchScrollPosition,searchTextUpdate:ae.searchTextUpdate,requestCategoriesList:ae.requestCategoriesList,requestCategoriesListIfNeeded:ae.requestCategoriesListIfNeeded},De=Object(ne.makeStyleFromTheme)(e=>({background:{backgroundColor:Object(ne.changeOpacity)(e.centerChannelColor,.05)}}));class Ue extends v.PureComponent{constructor(...e){super(...e),Le(this,"sendImpressions",()=>{const{tagsList:e}=this.props,t=e.map(e=>({gfyId:e.gfyId}));t.length&&Object(Pe.d)("gfycat","views",{context:"category_list",count:t.length})}),Le(this,"filterTagsList",()=>{const{searchBarText:e,tagsList:t}=this.props,a=e.toLowerCase().trim().split(/ +/).join(" ");return t&&t.length?t.filter(t=>e&&-1===t.tagName.indexOf(a)?"":t):[]}),Le(this,"loadMore",()=>{this.props.requestCategoriesList()})}componentDidMount(){window.scrollTo(0,0),this.props.requestCategoriesListIfNeeded(),this.sendImpressions()}componentWillUnmount(){this.props.saveSearchScrollPosition(0)}render(){const e=De(this.props.theme),{hasMore:t,tagsList:a,gifs:n,onSearch:s,onTrending:i,hasImageProxy:o}=this.props,r=a&&a.length?this.filterTagsList(a).map((e,t)=>{const{tagName:a,gfyId:r}=e;if(!n[r])return null;const l=n[r],{max1mbGif:c,avgColor:d}=l,m=Me.f(c,"true"===o),u=a.replace(/\s/g,"-"),p={backgroundImage:"url(".concat(m)},h={backgroundColor:d},g=this.props;return y.a.createElement("a",{onClick:function(){g.searchTextUpdate(a),g.saveSearchBarText(a),"trending"===u?i():s()},key:t},y.a.createElement("div",{className:"category-container"},y.a.createElement("div",{className:"category",style:ke({},p,{},h)},y.a.createElement("div",{className:"category-name"},a))))}):[];return r&&r.length?y.a.createElement("div",{className:"categories-container",style:e.background},y.a.createElement(je,{hasMore:t,loadMore:this.loadMore,threshold:1},r)):y.a.createElement("div",{className:"categories-container",style:e.background})}}Le(Ue,"propTypes",{appProps:_.a.object,gifs:_.a.object,hasMore:_.a.bool,onSearch:_.a.func,onTrending:_.a.func,requestCategoriesList:_.a.func,requestCategoriesListIfNeeded:_.a.func,saveSearchBarText:_.a.func,saveSearchScrollPosition:_.a.func,searchTextUpdate:_.a.func,searchBarText:_.a.string,tagsList:_.a.array,hasImageProxy:_.a.string,theme:_.a.object.isRequired});var qe=Object(n.connect)(function(e){return ke({},e.entities.gifs.categories,{},e.entities.gifs.cache,{theme:Object(c.getTheme)(e),appProps:e.entities.gifs.app,searchText:e.entities.gifs.search.searchText,searchBarText:e.entities.gifs.search.searchBarText,hasImageProxy:e.entities.general.config.HasImageProxy})},xe)(Ue);a(1426);function He(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Fe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?He(a,!0).forEach(function(t){Be(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):He(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Be(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ge extends v.PureComponent{render(){const{gfyItem:e,top:t,left:a,itemWidth:n,itemClickHandler:s}=this.props,{width:i,height:o,max1mbGif:r,avgColor:l}=e,{hasImageProxy:c}=this.props,d=Me.f(r,"true"===c),m={backgroundImage:"url(".concat(d,")")},u={backgroundColor:l},p={paddingBottom:n/i*o+"px"};return y.a.createElement("div",{className:"search-item-wrapper",style:{top:t,left:a,width:n?"".concat(n,"px"):""}},y.a.createElement("div",{className:"search-item",style:Fe({},m,{},u,{},p),onClick:()=>s(e)}))}}Be(Ge,"propTypes",{gfyItem:_.a.object,top:_.a.string,left:_.a.string,itemWidth:_.a.number,itemClickHandler:_.a.func,hasImageProxy:_.a.string});var Ve=Object(n.connect)(function(e){return{hasImageProxy:e.entities.general.config.HasImageProxy}})(Ge);a(1427);function We(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function ze(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?We(a,!0).forEach(function(t){Ye(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):We(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Ye(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Ke=8,Qe=2,Ze=2,Je=8;const Xe={saveSearchScrollPosition:ae.saveSearchScrollPosition},$e=Object(ne.makeStyleFromTheme)(e=>({background:{backgroundColor:Object(ne.changeOpacity)(e.centerChannelColor,.05)}}));class et extends v.PureComponent{constructor(e){super(e),Ye(this,"setNumberOfColumns",()=>{window.matchMedia("(orientation: portrait)").matches?this.numberOfColumns=Qe:this.numberOfColumns=Ze}),Ye(this,"itemClickHandler",e=>{const{keyword:t,handleItemClick:a}=this.props;this.props.saveSearchScrollPosition(this.scrollPosition),Object(Pe.d)("gfycat","shares",{gfyid:e.gfyId,keyword:t}),a(e)}),Ye(this,"minHeightColumnIndex",()=>this.columnsHeights.indexOf(Math.min(...this.columnsHeights))),Ye(this,"maxHeightColumnIndex",()=>this.columnsHeights.indexOf(Math.max(...this.columnsHeights))),Ye(this,"maxColumnHeight",()=>Math.max(...this.columnsHeights)),Ye(this,"resizeHandler",()=>{this.state.containerWidth!==this.container.offsetWidth-Je&&(this.setNumberOfColumns(),this.setState(ze({},this.state,{containerWidth:this.container.offsetWidth-Je})),this.columnsHeights=Array(this.numberOfColumns).fill(0))}),Ye(this,"scrollHandler",()=>{this.scrollPosition=window.scrollY}),this.state={containerWidth:null},this.scrollPosition=this.props.scrollPosition,this.setNumberOfColumns(),this.columnsHeights=Array(this.numberOfColumns).fill(0),this.padding=Ke}componentDidMount(){this.container=document.getElementById("search-grid-container"),this.setState(ze({},this.state,{containerWidth:this.container.offsetWidth-Je})),window.addEventListener("resize",this.resizeHandler),window.addEventListener("scroll",this.scrollHandler)}componentDidUpdate(e){e.keyword!==this.props.keyword&&window.scrollTo(0,0)}componentWillUnmount(){const{keyword:e}=this.props;"trending"!==e&&this.props.saveSearchScrollPosition(this.scrollPosition),window.removeEventListener("resize",this.resizeHandler),window.removeEventListener("scroll",this.scrollHandler)}render(){const e=$e(this.props.theme),{containerClassName:t,gifs:a,keyword:n,resultsByTerm:s,scrollPosition:i,loadMore:o,onCategories:r}=this.props,{containerWidth:l}=this.state,{moreRemaining:c,items:d=[],isEmpty:m}=s[n]?s[n]:{},u=parseInt(l/this.numberOfColumns,10),p=Array(this.numberOfColumns).fill(0).map((e,t)=>this.padding+(t*u-t*(this.padding/2)));this.columnsHeights=Array(this.numberOfColumns).fill(this.padding);const h=l&&d.length?d.map((e,t)=>{const n=a[e],{gfyId:s}=n,i=this.minHeightColumnIndex(),o=this.columnsHeights[i]+"px",r=p[i]+"px",l=140/n.width*n.height+this.padding;return this.columnsHeights[i]+=l,y.a.createElement(Ve,{gfyItem:n,top:o,left:r,itemWidth:140,itemClickHandler:this.itemClickHandler,key:"".concat(t,"-").concat(s)})}):null;this.containerHeight=this.maxColumnHeight();const g=h?y.a.createElement(je,{className:"search-grid-infinite-scroll",pageStart:0,loadMore:o,initialLoad:!1,hasMore:c,threshold:1,containerHeight:this.containerHeight,scrollPosition:i,useWindow:!1},h):null,b=m?y.a.createElement("div",{className:"empty-search"},y.a.createElement("div",{className:"empty-search-image"}),y.a.createElement("p",null,"0 Gifs found for ",y.a.createElement("strong",null,n)),y.a.createElement("a",{onClick:r},y.a.createElement("div",{className:"empty-search-button"},"Go to Reactions"))):null;return y.a.createElement("div",{id:"search-grid-container",className:"search-grid-container ".concat(t),style:e.background},g,b)}}Ye(et,"propTypes",{appProps:_.a.object,gifs:_.a.object,resultsByTerm:_.a.object,containerClassName:_.a.string,keyword:_.a.string,handleItemClick:_.a.func,onCategories:_.a.func,loadMore:_.a.func,numberOfColumns:_.a.number,scrollPosition:_.a.number,saveSearchScrollPosition:_.a.func,theme:_.a.object.isRequired});var tt=Object(n.connect)(function(e){return ze({},e.entities.gifs.cache,{},e.entities.gifs.search,{theme:Object(c.getTheme)(e),appProps:e.entities.gifs.app})},Xe)(et);function at(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function nt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var st=Object(n.connect)(function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?at(a,!0).forEach(function(t){nt(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):at(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e.entities.gifs.cache,{},e.entities.gifs.search,{appProps:e.entities.gifs.app})},function(){return{saveSearchScrollPosition:ae.saveSearchScrollPosition}})(tt);function it(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function ot(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const rt={searchGfycat:ae.searchGfycat,searchIfNeededInitial:ae.searchIfNeededInitial};class lt extends v.PureComponent{constructor(...e){super(...e),ot(this,"loadMore",()=>{const{searchText:e}=this.props;this.props.searchGfycat({searchText:e})})}componentDidMount(){const{searchText:e}=this.props;this.props.searchIfNeededInitial(e.split("-").join(" "))}componentDidUpdate(e){const{searchText:t}=this.props;e.searchText!==t&&this.props.searchIfNeededInitial(t.split("-").join(" "))}render(){const{handleItemClick:e,searchText:t,onCategories:a}=this.props;return y.a.createElement(st,{keyword:t,handleItemClick:e,onCategories:a,loadMore:this.loadMore})}}ot(lt,"propTypes",{handleItemClick:_.a.func,onCategories:_.a.func,searchText:_.a.string,searchIfNeededInitial:_.a.func,searchGfycat:_.a.func});var ct=Object(n.connect)(function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?it(a,!0).forEach(function(t){ot(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):it(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e.entities.gifs.search)},rt)(lt);function dt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const mt={searchCategory:ae.searchCategory,searchIfNeededInitial:ae.searchIfNeededInitial,saveSearchScrollPosition:ae.saveSearchScrollPosition};class ut extends v.PureComponent{constructor(...e){super(...e),dt(this,"loadMore",()=>{this.props.searchCategory({tagName:"trending"})})}componentDidMount(){this.props.searchIfNeededInitial("trending")}componentWillUnmount(){this.props.saveSearchScrollPosition(0)}render(){const{handleItemClick:e,onCategories:t}=this.props;return y.a.createElement(st,{keyword:"trending",handleItemClick:e,onCategories:t,loadMore:this.loadMore})}}dt(ut,"propTypes",{handleItemClick:_.a.func,onCategories:_.a.func,searchCategory:_.a.func,searchIfNeededInitial:_.a.func,saveSearchScrollPosition:_.a.func});var pt=Object(n.connect)(null,mt)(ut);function ht(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const gt={appName:se.appName.mattermost,basePath:"/mattermost",itemTapType:se.ItemTapAction.SHARE,appClassName:"gfycat",shareEvent:"shareMattermost",appId:"mattermostwebviews",enableHistory:!0,header:{tabs:[se.Tab.TRENDING,se.Tab.REACTIONS],displayText:!1}};class bt extends y.a.Component{constructor(e){super(e),ht(this,"handleTrending",()=>{this.setState({action:"trending"})}),ht(this,"handleCategories",()=>{this.setState({action:"reactions"})}),ht(this,"handleSearch",()=>{this.setState({action:"search"})}),ht(this,"handleItemClick",e=>{this.props.onGifClick(e.max5mbGif)}),this.shouldComponentUpdate=te.a.shouldComponentUpdate.bind(this),this.state={action:"trending"}}render(){const{action:e}=this.state;let t;switch(e){case"reactions":t=y.a.createElement(qe,{appProps:gt,onTrending:this.handleTrending,onSearch:this.handleSearch});break;case"search":t=y.a.createElement(ct,{appProps:gt,onCategories:this.handleCategories,handleItemClick:this.handleItemClick});break;case"trending":t=y.a.createElement(pt,{appProps:gt,onCategories:this.handleCategories,handleItemClick:this.handleItemClick})}return y.a.createElement("div",null,y.a.createElement(Se,{appProps:gt,action:e,onTrending:this.handleTrending,onCategories:this.handleCategories,onSearch:this.handleSearch},t))}}ht(bt,"propTypes",{onGifClick:_.a.func.isRequired});class ft extends y.a.PureComponent{render(){return y.a.createElement("span",this.props,y.a.createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 15 15",role:"icon","aria-label":"Emoji icon"},y.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"inherit",fillRule:"evenodd"},y.a.createElement("g",{transform:"translate(-1071.000000, -954.000000)",fill:"inherit"},y.a.createElement("g",{transform:"translate(25.000000, 937.000000)"},y.a.createElement("g",{transform:"translate(1046.000000, 17.000000)"},y.a.createElement("path",{d:"M7.5,0.0852272727 C3.405,0.0852272727 0.0852272727,3.405 0.0852272727,7.5 C0.0852272727,11.595 3.405,14.9147727 7.5,14.9147727 C11.595,14.9147727 14.9147727,11.595 14.9147727,7.5 C14.9147727,3.405 11.595,0.0852272727 7.5,0.0852272727 Z M7.5,14.0663436 C3.87926951,14.0663436 0.933656417,11.1207305 0.933656417,7.5 C0.933656417,3.87926951 3.87926951,0.933656417 7.5,0.933656417 C11.1207305,0.933656417 14.0663436,3.87926951 14.0663436,7.5 C14.0663436,11.1207305 11.1207305,14.0663436 7.5,14.0663436 Z"}),y.a.createElement("path",{d:"M11.7732955,8.95397727 C12.0119318,8.90488636 12.2159659,9.11778409 12.1684091,9.35676136 C11.8063636,11.1790909 9.85346591,12.5710227 7.49846591,12.5710227 C5.15096591,12.5710227 3.20284091,11.1877841 2.83193182,9.37397727 C2.78181818,9.129375 2.99267045,8.911875 3.23744318,8.96198864 C4.85369318,9.29232955 10.1786932,9.28142045 11.7732955,8.95397727 Z"}),y.a.createElement("ellipse",{cx:"4.94318182",cy:"5.50431818",rx:"1",ry:"1.06534091"}),y.a.createElement("ellipse",{cx:"10.0568182",cy:"5.50431818",rx:"1",ry:"1.06534091"})))))))}}class Et extends y.a.PureComponent{render(){return y.a.createElement("span",this.props,y.a.createElement("svg",{width:"22px",height:"14px",viewBox:"0 0 22 14"},y.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"inherit",fillRule:"evenodd"},y.a.createElement("g",{transform:"translate(-1344.000000, -552.000000)",fill:"inherit"},y.a.createElement("g",{transform:"translate(1147.000000, 542.000000)"},y.a.createElement("g",{transform:"translate(1.000000, 1.000000)"},y.a.createElement("g",{transform:"translate(138.000000, 0.000000)"},y.a.createElement("path",{d:"M63.6748519,23 L62.2292481,23 C61.8176589,23 61.4619872,22.8510143 61.1631497,22.5539741 C60.8633954,22.2569338 60.71306,21.8993681 60.71306,21.4831393 C60.71306,21.0678417 60.8597287,20.710276 61.1539829,20.4132358 C61.4473204,20.1161955 61.800242,19.9672098 62.2118312,19.9672098 L63.6565183,19.9672098 C64.0681075,19.9672098 64.4182791,19.8219488 64.7061166,19.5304955 C64.993954,19.2390422 65.1378727,18.8917193 65.1378727,18.4866644 L65.1378727,15.4371134 C65.1378727,15.0208846 64.993954,14.6670436 64.7061166,14.3755903 C64.4182791,14.084137 64.0745243,13.938876 63.6748519,13.938876 C63.2632628,13.938876 62.9103411,14.0869305 62.6170036,14.3849019 C62.3227494,14.6819421 62.1760807,15.0329897 62.1760807,15.4371134 C62.1760807,15.7294978 62.3016658,16.0563352 62.5519193,16.4185567 L62.575753,16.4530096 C62.8269232,16.8143 62.9515917,17.1420685 62.9515917,17.4344529 C62.9515917,17.8506817 62.8049229,18.2073163 62.5115854,18.5043565 C62.2173313,18.8023279 61.8653263,18.9503824 61.4537371,18.9503824 C60.7836443,18.9503824 60.2198863,18.5164616 59.7615465,17.6486199 C59.373791,16.9232458 59.1794549,16.1857665 59.1794549,15.4371134 C59.1794549,14.188427 59.6176278,13.1213169 60.4930568,12.234852 C61.3684859,11.3493183 62.4226675,10.9060858 63.6565183,10.9060858 C64.8912858,10.9060858 65.9482175,11.3493183 66.8300633,12.234852 C67.7109925,13.1213169 68.1519154,14.188427 68.1519154,15.4371134 L68.1519154,18.4866644 C68.1519154,19.7353508 67.7137425,20.7996674 66.8383134,21.6796142 C65.9628844,22.559561 64.9087028,23 63.6748519,23 Z M80,15.9269039 C80,16.3068174 79.8689148,16.6317925 79.6076611,16.9027602 C79.3454907,17.173728 79.0319863,17.3096774 78.6653144,17.3096774 L76.8438719,17.3096774 L76.8438719,18.6589292 C76.8438719,19.0388427 76.7127867,19.3638178 76.4506164,19.6347855 C76.1893627,19.9057532 75.8749415,20.0417027 75.5082697,20.0417027 C75.1315143,20.0417027 74.8125098,19.9057532 74.5503394,19.6347855 C74.2890857,19.3638178 74.1580005,19.0388427 74.1580005,18.6589292 L74.1580005,13.1464583 C74.1580005,12.00858 74.5485061,11.0355171 75.3276838,10.2272697 C76.1077782,9.41995344 77.0473748,9.01582973 78.1473904,9.01582973 L78.6653144,9.01582973 C79.0319863,9.01582973 79.3454907,9.15177918 79.6076611,9.42274692 C79.8689148,9.69371467 80,10.0186897 80,10.3986033 C80,10.7775856 79.8689148,11.1034919 79.6076611,11.3744596 C79.3454907,11.6454273 79.0319863,11.7804456 78.6653144,11.7804456 L78.162974,11.7804456 C77.7963021,11.7804456 77.481881,11.9163951 77.2206273,12.1873628 C76.9584569,12.4583306 76.8282884,12.7777187 76.8282884,13.1464583 L76.8282884,14.5450615 L78.6653144,14.5450615 C79.0319863,14.5450615 79.3454907,14.681011 79.6076611,14.9519787 C79.8689148,15.2229465 80,15.5479215 80,15.9269039 Z M72.6344789,18.6589292 C72.6344789,19.0388427 72.5043104,19.3638178 72.24214,19.6347855 C71.9808863,19.9057532 71.6664652,20.0417027 71.2997933,20.0417027 C70.9340382,20.0417027 70.616867,19.9057532 70.3501132,19.6347855 C70.0833594,19.3638178 69.9495242,19.0388427 69.9495242,18.6589292 L69.9495242,14.170735 C69.9495242,13.7917526 70.0806094,13.4667775 70.3418631,13.1958098 C70.6040335,12.9239109 70.9175379,12.7888926 71.2842098,12.7888926 C71.6508817,12.7888926 71.9671361,12.9239109 72.2348066,13.1958098 C72.5015604,13.4667775 72.6344789,13.7917526 72.6344789,14.170735 L72.6344789,18.6589292 Z M58.3370263,12.5356169 C58.1023563,11.7441304 58.0042716,10.9163286 58.0042716,10.9163286 C57.9721878,10.6937812 58.1243566,10.547589 58.3425264,10.5904223 C58.3425264,10.5904223 58.5350291,10.6267376 58.8017829,10.6807449 C59.0767868,10.7375457 59.4324585,10.8139009 59.7404628,10.8921184 C60.3473048,11.0448287 60.95323,11.2720319 60.95323,11.2720319 C60.95323,11.2720319 60.2904706,11.6621882 59.7239626,12.3018956 C59.1565379,12.9406718 58.8650338,13.8420353 58.8650338,13.8420353 C58.8650338,13.8420353 58.5716963,13.3280346 58.3370263,12.5356169 Z M69.088762,12.5356169 C69.323432,11.7441304 69.4224334,10.9163286 69.4224334,10.9163286 C69.4536005,10.6937812 69.3014317,10.547589 69.0832619,10.5904223 C69.0832619,10.5904223 68.2921674,10.7384769 67.6853254,10.8921184 C67.0794002,11.0448287 66.4725583,11.2720319 66.4725583,11.2720319 C66.4725583,11.2720319 67.1353177,11.6621882 67.7027424,12.3018956 C68.2692504,12.9406718 68.5616712,13.8420353 68.5616712,13.8420353 C68.5616712,13.8420353 68.8550087,13.3280346 69.088762,12.5356169 Z M72.6344789,10.3818424 C72.6344789,10.7617559 72.5043104,11.086731 72.24214,11.3576987 C71.9808863,11.6286664 71.6664652,11.7646159 71.2997933,11.7646159 C70.9340382,11.7646159 70.616867,11.6286664 70.3501132,11.3576987 C70.0833594,11.086731 69.9495242,10.7617559 69.9495242,10.3818424 C69.9495242,10.00286 70.0806094,9.67788494 70.3418631,9.40691719 C70.6040335,9.13594945 70.9175379,9 71.2842098,9 C71.6508817,9 71.9671361,9.13594945 72.2348066,9.40691719 C72.5015604,9.67788494 72.6344789,10.00286 72.6344789,10.3818424 Z"}))))))))}}class _t extends y.a.PureComponent{render(){return y.a.createElement("div",{className:"emoji-picker__header modal-header"},y.a.createElement("button",{type:"button",className:"close emoji-picker__header-close-button",onClick:this.props.handleEmojiPickerClose},y.a.createElement("span",{"aria-hidden":"true"},"×"),y.a.createElement("span",{className:"sr-only"},y.a.createElement(W.c,{id:"emoji_picker.close",defaultMessage:"Close"}))),y.a.createElement("h4",{className:"modal-title emoji-picker__header-title"},y.a.createElement(W.c,{id:"emoji_picker.header",defaultMessage:"Emoji Picker"})))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(_t,"propTypes",{handleEmojiPickerClose:_.a.func.isRequired});var vt=a(111),yt=a(210),Ct=a(68),wt=(a(39),a(1193)),Tt=a.n(wt),Ot=a(57);a(42);function St(e,t,a){const n=e.name||e.aliases[0],s=t.name||t.aliases[0],i=n.startsWith(a);return i===s.startsWith(a)?n.localeCompare(s):i?-1:1}var Pt=a(1107),Mt=a.n(Pt);function Nt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class It extends y.a.Component{constructor(...e){super(...e),Nt(this,"handleClick",e=>{e.preventDefault(),this.props.onCategoryClick(this.props.category)})}shouldComponentUpdate(e){return e.selected!==this.props.selected||e.enable!==this.props.enable}render(){let e="emoji-picker__category";return this.props.selected&&(e+=" emoji-picker__category--selected"),this.props.enable||(e+=" disable"),y.a.createElement("a",{className:e,href:"#",onClick:this.handleClick,"aria-label":this.props.category},this.props.icon)}}Nt(It,"propTypes",{category:_.a.string.isRequired,icon:_.a.node.isRequired,onCategoryClick:_.a.func.isRequired,selected:_.a.bool.isRequired,enable:_.a.bool.isRequired});var At=a(1002),jt=a.n(At),Rt=a(131);function kt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Lt=10,xt=150;class Dt extends y.a.Component{constructor(...e){super(...e),kt(this,"emojiItemRef",e=>{this.emojiItem=e}),kt(this,"emojiName",()=>{const{formatMessage:e}=this.context.intl;return e({id:"emoji_picker_item.emoji_aria_label",defaultMessage:"{emojiName} emoji"},{emojiName:this.props.emoji.aliases[0].replace(/_/g," ")})}),kt(this,"handleMouseOver",()=>{this.props.isSelected||this.props.onItemOver(this.props.categoryIndex,this.props.emojiIndex)}),kt(this,"handleMouseOverThrottle",jt()(this.handleMouseOver,xt,{leading:!0,trailing:!0})),kt(this,"handleClick",()=>{this.props.onItemClick(this.props.emoji)})}shouldComponentUpdate(e){return e.isSelected!==this.props.isSelected}UNSAFE_componentWillReceiveProps(e){if(!this.props.isSelected&&e.isSelected){const t=this.emojiItem.offsetTop,a=t+this.emojiItem.offsetHeight,{containerRef:n,containerTop:s,containerBottom:i}=e;t<s?n.scrollTop=t-Lt:a>i&&(n.scrollTop=a-n.offsetHeight+Lt)}}render(){const{emoji:e}=this.props;let t="emoji-picker__item";this.props.isSelected&&(t+=" selected");let a,n="emojisprite";return n+=" emoji-category-"+e.category+"-"+e.batch,n+=" emoji-"+e.filename,a=e.category&&e.batch?y.a.createElement("img",{alt:"emoji image","data-testid":e.aliases,onMouseOver:this.handleMouseOverThrottle,src:Mt.a,className:n,onClick:this.handleClick,id:"emoji-"+e.filename,"aria-label":this.emojiName(),role:"button"}):y.a.createElement("img",{alt:"custom emoji image",onMouseOver:this.handleMouseOver,src:Object(Rt.getEmojiImageUrl)(e),className:"emoji-category--custom",onClick:this.handleClick}),y.a.createElement("div",{className:t,ref:this.emojiItemRef},y.a.createElement("div",{"data-testid":"emojiItem"},a))}}function Ut(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}kt(Dt,"propTypes",{emoji:_.a.object.isRequired,onItemOver:_.a.func.isRequired,onItemClick:_.a.func.isRequired,category:_.a.string.isRequired,isSelected:_.a.bool,categoryIndex:_.a.number.isRequired,emojiIndex:_.a.number.isRequired,containerRef:_.a.any,containerTop:_.a.number.isRequired,containerBottom:_.a.number.isRequired}),kt(Dt,"contextTypes",{intl:W.i.isRequired});class qt extends y.a.PureComponent{constructor(...e){super(...e),Ut(this,"divRef",e=>{this.div=e})}componentDidMount(){this.props.updateCategoryOffset(this.props.categoryName,this.div.offsetTop)}render(){return y.a.createElement("div",{ref:this.divRef},y.a.createElement("div",{className:"emoji-picker-items__container"},y.a.createElement("div",{className:"emoji-picker__category-header",id:"emojipickercat-".concat(this.props.categoryName)},y.a.createElement(W.c,{id:"emoji_picker."+this.props.categoryName}))),y.a.createElement("div",{className:"emoji-picker-items__container"},this.props.children))}}Ut(qt,"propTypes",{categoryName:_.a.string.isRequired,children:_.a.any,updateCategoryOffset:_.a.func.isRequired});class Ht extends y.a.Component{render(){const e=this.props.emoji;if(e){let t,a,n;return e.aliases&&e.category&&e.batch?(t=e.aliases[0],a=e.aliases,n=y.a.createElement("span",{className:"sprite-preview"},y.a.createElement("img",{id:"emojiPickerSpritePreview",alt:"emoji category image",src:Mt.a,className:"emojisprite-preview emoji-category-"+e.category+"-"+e.batch+" emoji-"+e.filename}))):(t=e.name,a=[e.name],n=y.a.createElement("img",{id:"emojiPickerSpritePreview",alt:"emoji preview image",className:"emoji-picker__preview-image",src:Object(Rt.getEmojiImageUrl)(e)})),y.a.createElement("div",{className:"emoji-picker__preview"},y.a.createElement("div",{className:"emoji-picker__preview-image-box"},n),y.a.createElement("div",{className:"emoji-picker__preview-image-label-box"},y.a.createElement("span",{className:"emoji-picker__preview-name"},t),y.a.createElement("span",{id:"emojiPickerAliasesPreview",className:"emoji-picker__preview-aliases"},":"+a[0]+":")))}return y.a.createElement("div",{className:"emoji-picker__preview emoji-picker__preview-placeholder"},y.a.createElement(W.c,{id:"emoji_picker.emojiPicker",defaultMessage:"Emoji Picker"}))}}function Ft(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Bt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ft(a,!0).forEach(function(t){Gt(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ft(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Gt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Ht,"propTypes",{emoji:_.a.object});const Vt="searchResults";Object(le.b)("emoji_picker.searchResults");const Wt=27,zt=290,Yt={height:zt},Kt=75,Qt=9,Zt=135,Jt=1476,Xt=100,$t={recent:{name:"recent",className:"fa fa-clock-o",id:Object(le.b)("emoji_picker.recent"),message:"Recently Used",offset:0},people:{name:"people",className:"fa fa-smile-o",id:Object(le.b)("emoji_picker.people"),message:"People",offset:0},nature:{name:"nature",className:"fa fa-leaf",id:Object(le.b)("emoji_picker.nature"),message:"Nature",offset:0},foods:{name:"foods",className:"fa fa-cutlery",id:Object(le.b)("emoji_picker.foods"),message:"Foods",offset:0},activity:{name:"activity",className:"fa fa-futbol-o",id:Object(le.b)("emoji_picker.activity"),message:"Activity",offset:0},places:{name:"places",className:"fa fa-plane",id:Object(le.b)("emoji_picker.places"),message:"Places",offset:0},objects:{name:"objects",className:"fa fa-lightbulb-o",id:Object(le.b)("emoji_picker.objects"),message:"Objects",offset:0},symbols:{name:"symbols",className:"fa fa-heart-o",id:Object(le.b)("emoji_picker.symbols"),message:"Symbols",offset:0},flags:{name:"flags",className:"fa fa-flag-o",id:Object(le.b)("emoji_picker.flags"),message:"Flags",offset:0},custom:{name:"custom",className:"fa fa-at",id:Object(le.b)("emoji_picker.custom"),message:"Custom",offset:0}};function ea(e){return e.filename||e.id}const ta=200,aa=500;class na extends y.a.PureComponent{constructor(e){super(e),Gt(this,"loadMoreCustomEmojis",async()=>{if(!this.props.customEmojisEnabled||this.loadingMoreEmojis)return;this.loadingMoreEmojis=!0;const{data:e}=await this.props.actions.getCustomEmojis(this.props.customEmojiPage,ta);if(e){if(e.length<ta)return this.missingPages=!1,void(this.loadingMoreEmojis=!1);await this.props.actions.incrementEmojiPickerPage(),this.loadingMoreEmojis=!1}else this.loadingMoreEmojis=!1}),Gt(this,"lastVisibleEmojiRef",e=>{this.lastVisibleEmoji=e}),Gt(this,"emojiPickerContainerRef",e=>{this.emojiPickerContainer=e}),Gt(this,"emojiSearchInput",e=>{this.searchInput=e}),Gt(this,"handleCategoryClick",e=>{this.setState({cursor:[Object.keys(this.state.categories).indexOf(e),0],divTopOffset:this.state.categories[e].offset}),this.emojiPickerContainer.scrollTop=this.state.categories[e].offset,this.searchInput.focus()}),Gt(this,"handleFilterChange",e=>{e.preventDefault();const t=function(e){return e.toLowerCase().replace(/^:|:$/g,"")}(e.target.value);this.props.customEmojisEnabled&&t&&""!==t.trim()&&this.props.actions.searchCustomEmojis(t),this.setState(()=>({filter:t,cursor:[0,0]}))}),Gt(this,"handleItemOver",(e,t)=>{this.setState({cursor:[e,t]})}),Gt(this,"handleItemClick",e=>{this.props.onEmojiClick(e)}),Gt(this,"handleCategoryKeyDown",e=>{switch(e.key){case"ArrowRight":e.preventDefault(),this.selectNextEmoji(),this.searchInput.focus();break;case"ArrowLeft":e.preventDefault(),this.selectPrevEmoji(),this.searchInput.focus();break;case"ArrowUp":e.preventDefault(),this.selectPrevEmoji(Qt),this.searchInput.focus();break;case"ArrowDown":e.preventDefault(),this.selectNextEmoji(Qt),this.searchInput.focus()}}),Gt(this,"handleKeyDown",e=>{switch(e.key){case"ArrowRight":e.preventDefault(),this.selectNextEmoji();break;case"ArrowLeft":e.preventDefault(),this.selectPrevEmoji();break;case"ArrowUp":e.preventDefault(),this.selectPrevEmoji(Qt);break;case"ArrowDown":e.preventDefault(),this.selectNextEmoji(Qt);break;case"Enter":e.preventDefault(),this.getCurrentEmojiByCursor(this.state.cursor)&&this.props.onEmojiClick(this.getCurrentEmojiByCursor(this.state.cursor))}}),Gt(this,"handleScroll",()=>{this.emojiPickerContainer&&this.setState({divTopOffset:this.emojiPickerContainer.scrollTop})}),Gt(this,"emojiCurrentResultsItems",(e,t,a)=>{const{cursor:n,emojisToShow:s}=this.state;let i=a;return t.map((t,a)=>{let o;return++i===s&&(o=this.lastVisibleEmojiRef),i>=s?y.a.createElement("div",{key:i,className:"emoji-picker__item",ref:o},y.a.createElement("img",{alt:"emoji image",src:Mt.a,className:"emojisprite"})):y.a.createElement(Dt,{key:t.filename+":"+a,emoji:t,onItemOver:this.handleItemOver,onItemClick:this.handleItemClick,onItemUnmount:t,category:t.category,isSelected:n[0]===e&&n[1]===a,categoryIndex:e,emojiIndex:a,containerRef:this.emojiPickerContainer,containerTop:this.state.divTopOffset,containerBottom:this.state.divTopOffset+this.divHeight})})}),Gt(this,"updateCategoryOffset",(e,t)=>{e!==Vt&&this.setState(a=>({categories:Bt({},a.categories,{[e]:Bt({},a.categories[e],{offset:t})})}))}),this.handleScrollThrottle=Tt()(this.handleScroll,Xt,{leading:!1,trailing:!0}),this.divHeight=0,this.missingPages=!0,this.loadingMoreEmojis=!1,this.state={allEmojis:{},categories:$t,filter:"",cursor:[0,0],divTopOffset:0,emojisToShow:Jt}}UNSAFE_componentWillMount(){0===this.props.customEmojiPage&&this.loadMoreCustomEmojis(),this.getEmojis()}componentDidMount(){requestAnimationFrame(()=>{this.searchInput&&this.searchInput.focus()}),this.divHeight=this.emojiPickerContainer.offsetHeight}UNSAFE_componentWillUpdate(e,t){if(this.state.divTopOffset===t.divTopOffset)return;if(this.lastVisibleEmoji){const e=this.lastVisibleEmoji.offsetTop-(t.divTopOffset+zt+Kt);if(e<=0){const t=Zt+Math.ceil(e/Wt*Qt*-1);this.setState(e=>({emojisToShow:e.emojisToShow+t}))}}if(!this.missingPages||!this.emojiPickerContainer)return;this.emojiPickerContainer.scrollHeight-t.divTopOffset-this.emojiPickerContainer.clientHeight<=aa&&this.loadMoreCustomEmojis()}UNSAFE_componentWillReceiveProps(e){this.props.emojiMap!==e.emojiMap&&this.getEmojis(e)}componentDidUpdate(e){this.props.visible&&!e.visible&&this.searchInput.focus()}selectNextEmoji(e=1){const{cursor:t}=this.state;let a=[t[0],t[1]+e];this.getCurrentEmojiByCursor(a)?this.setState({cursor:a}):(a=[t[0]+1,0],this.getCurrentEmojiByCursor(a)&&this.setState({cursor:a}))}selectPrevEmoji(e=1){const{cursor:t}=this.state;let a=[t[0],t[1]-e];if(this.getCurrentEmojiByCursor(a))this.setState({cursor:a});else if(0!==t[0]){const e=this.getCategoryByIndex(t[0]-1),n=this.state.categories[e.name].emojiIds.length-1;a=[t[0]-1,n],this.getCurrentEmojiByCursor(a)&&this.setState({cursor:a})}}getCategoryByIndex(e){return this.state.filter&&0!==e?null:this.getCategoriesByKey(Object.keys(this.state.categories)[e])}getCurrentEmojiByCursor(e){const t=this.getCategoryByIndex(e[0]);return t?this.getEmojisByCategory(t)[e[1]]:null}getCategoriesByKey(e){return this.state.filter?{id:Vt,name:Vt}:this.state.categories[e]}sortEmojis(e){const{recentEmojis:t}=this.props,a=[],n=[];Object.values(e).forEach(e=>{let s=n;for(let n=0;n<e.aliases.length;n++)t.includes(e.aliases[n].toLowerCase())&&(s=a);s.push(e)});const s=(e,t)=>St(e,t,this.state.filter);return a.sort(s),n.sort(s),[...a,...n]}getEmojisByCategory(e){if(this.state.filter){const e=Object.values(this.state.allEmojis).filter(e=>{for(let t=0;t<e.aliases.length;t++)if(e.aliases[t].toLowerCase().includes(this.state.filter))return!0;return!1});return this.sortEmojis(e)}return this.state.categories[e.name].emojiIds.map(e=>this.state.allEmojis[e])}getCurrentEmojiName(){const e=this.getCurrentEmojiByCursor(this.state.cursor);return e?e.aliases[0].replace(/_/g," "):""}getEmojis(e=this.props){const{categories:t,allEmojis:a}=this.state,n=e.emojiMap,s=n.customEmojis;for(const e of Object.keys(t)){let i=[];if("recent"===e){i=[...this.props.recentEmojis].reverse().filter(e=>n.has(e)).map(e=>n.get(e))}else{i=(Ot.b.get(e)||[]).map(e=>Ot.d[e]),"custom"===e&&(i=i.concat([...s.values()]))}t[e].emojiIds=i.map(e=>ea(e));for(let e=0;e<i.length;e++){const t=i[e],n=ea(t);a[n]=Bt({},t,{visible:!1,offset:null}),t.filename||(a[n]=Bt({},a[n],{aliases:[t.name],category:"custom",filename:n}))}}this.setState({categories:t,allEmojis:a})}getCurrentEmojiCategoryName(){const e=Object.keys(this.state.categories);let t="";for(let a=e.length-1;a>=0;a--){const n=this.state.categories[e[a]];if(this.state.divTopOffset>n.offset-20){t=e[a];break}}return t}emojiCategories(){const e=this.state.categories,t=Object.keys(e),a=this.state.filter?t[0]:this.getCurrentEmojiCategoryName(),n=t.map(t=>{const n=e[t];return y.a.createElement(It,{key:"header-"+n.name,category:n.name,icon:y.a.createElement(W.c,{id:n.id,defaultMessage:n.message},e=>y.a.createElement("i",{className:n.className,title:e})),onCategoryClick:this.handleCategoryClick,selected:a===n.name,enable:!this.state.filter})});return y.a.createElement("div",{id:"emojiPickerCategories",className:"emoji-picker__categories",onKeyDown:this.handleCategoryKeyDown},n)}emojiSearch(){return y.a.createElement("div",{className:"emoji-picker__search-container"},y.a.createElement("span",{className:"fa fa-search emoji-picker__search-icon"}),y.a.createElement(W.c,{id:"emoji_picker.search_emoji",defaultMessage:"Search for an emoji"},e=>y.a.createElement(re.a,{id:"emojiPickerSearch","aria-label":e,ref:this.emojiSearchInput,className:"emoji-picker__search","data-testid":"emojiInputSearch",type:"text",onChange:this.handleFilterChange,onKeyDown:this.handleKeyDown,placeholder:{id:Object(le.b)("emoji_picker.search"),defaultMessage:"Search Emoji"}})))}emojiCurrentResults(){const{filter:e}=this.state,t=e?[Vt]:Object.keys(this.state.categories);let a=0,n=[];for(let e=0;e<t.length;e++){const s=this.getCategoriesByKey(t[e]),i=this.getEmojisByCategory(s),o=this.emojiCurrentResultsItems(e,i,a);a+=o.length,n=[...n,y.a.createElement(qt,{key:s.id,categoryName:s.name,updateCategoryOffset:this.updateCategoryOffset,role:"application"},o)]}return y.a.createElement("div",{ref:this.emojiPickerContainerRef,onScroll:this.handleScrollThrottle,className:"emoji-picker__items",style:Yt},y.a.createElement("div",{className:"emoji-picker__container"},n))}render(){return y.a.createElement("div",{className:"emoji-picker__inner",role:"application"},y.a.createElement("div",{"aria-live":"assertive",className:"sr-only"},y.a.createElement(W.c,{id:"emoji_picker_item.emoji_aria_label",defaultMessage:"{emojiName} emoji",values:{emojiName:this.getCurrentEmojiName()}})),this.emojiSearch(),this.emojiCategories(),this.emojiCurrentResults(),y.a.createElement(Ht,{emoji:this.getCurrentEmojiByCursor(this.state.cursor)}))}}Gt(na,"propTypes",{listHeight:_.a.number,onEmojiClose:_.a.func.isRequired,onEmojiClick:_.a.func.isRequired,customEmojisEnabled:_.a.bool,emojiMap:_.a.object.isRequired,recentEmojis:_.a.array.isRequired,customEmojiPage:_.a.number.isRequired,visible:_.a.bool,actions:_.a.shape({getCustomEmojis:_.a.func.isRequired,searchCustomEmojis:_.a.func.isRequired,incrementEmojiPickerPage:_.a.func.isRequired}).isRequired}),Gt(na,"defaultProps",{listHeight:245,customEmojiPage:0,customEmojisEnabled:!1});var sa=Object(n.connect)(function(e){return{customEmojisEnabled:"true"===e.entities.general.config.EnableCustomEmoji,customEmojiPage:e.views.emoji.emojiPickerCustomPage,emojiMap:Object(Ct.a)(e),recentEmojis:Object(Ct.b)(e)}},function(e){return{actions:Object(s.bindActionCreators)({getCustomEmojis:vt.getCustomEmojis,searchCustomEmojis:vt.searchCustomEmojis,incrementEmojiPickerPage:yt.b},e)}})(na);function ia(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function oa(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ra extends v.PureComponent{constructor(e){super(e),oa(this,"handleEnterEmojiTab",()=>{this.setState({emojiTabVisible:!0})}),oa(this,"handleExitEmojiTab",()=>{this.setState({emojiTabVisible:!1})}),oa(this,"handleEmojiPickerClose",()=>{this.props.onEmojiClose()}),this.state={emojiTabVisible:!0}}render(){let e;!this.props.style||0===this.props.style.left&&0===this.props.style.top||(e="top"===this.props.placement||"bottom"===this.props.placement?{top:this.props.style.top,bottom:this.props.style.bottom,right:this.props.rightOffset}:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ia(a,!0).forEach(function(t){oa(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ia(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},this.props.style)).top&&(e.top+=this.props.topOffset);let t="emoji-picker";return"bottom"===this.props.placement&&(t+=" bottom"),this.props.enableGifPicker&&void 0!==this.props.onGifClick?y.a.createElement(X.a,{defaultActiveKey:1,id:"emoji-picker-tabs",style:e,className:t,justified:!0},y.a.createElement(_t,{handleEmojiPickerClose:this.handleEmojiPickerClose}),y.a.createElement($.a,{eventKey:1,onEnter:this.handleEnterEmojiTab,onExit:this.handleExitEmojiTab,title:y.a.createElement(ft,null)},y.a.createElement(sa,{style:this.props.style,onEmojiClose:this.props.onEmojiClose,onEmojiClick:this.props.onEmojiClick,customEmojis:this.props.customEmojis,visible:this.state.emojiTabVisible})),y.a.createElement($.a,{eventKey:2,title:y.a.createElement(Et,null),mountOnEnter:!0,unmountOnExit:!0},y.a.createElement(bt,{onGifClick:this.props.onGifClick}))):y.a.createElement("div",{id:"emojiPicker",style:e,className:"a11y__popup ".concat(t," emoji-picker--single")},y.a.createElement(_t,{handleEmojiPickerClose:this.handleEmojiPickerClose}),y.a.createElement(sa,{style:this.props.style,onEmojiClose:this.props.onEmojiClose,onEmojiClick:this.props.onEmojiClick,customEmojis:this.props.customEmojis}))}}function la(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}oa(ra,"propTypes",{style:_.a.object,rightOffset:_.a.number,topOffset:_.a.number,placement:_.a.oneOf(["top","bottom","left"]),customEmojis:_.a.object,onEmojiClose:_.a.func.isRequired,onEmojiClick:_.a.func.isRequired,onGifClick:_.a.func,enableGifPicker:_.a.bool}),oa(ra,"defaultProps",{rightOffset:0,topOffset:0});class ca extends y.a.PureComponent{constructor(e){super(e),this.state={placement:"top",rightOffset:S.i.DEFAULT_EMOJI_PICKER_RIGHT_OFFSET}}UNSAFE_componentWillUpdate(e){if(e.show&&!this.props.show){const t=e.target().getBoundingClientRect(),a=Object(J.a)(t,window.innerHeight,{above:e.spaceRequiredAbove,below:e.spaceRequiredBelow});this.setState({placement:a,rightOffset:this.emojiPickerPosition()})}}emojiPickerPosition(){const e=this.props.target();let t=S.i.DEFAULT_EMOJI_PICKER_RIGHT_OFFSET;return e&&(t=window.innerWidth-e.getBoundingClientRect().left-S.i.DEFAULT_EMOJI_PICKER_LEFT_OFFSET)<S.i.DEFAULT_EMOJI_PICKER_RIGHT_OFFSET&&(t=S.i.DEFAULT_EMOJI_PICKER_RIGHT_OFFSET),t}render(){return y.a.createElement(Z.a,{show:this.props.show,placement:this.state.placement,rootClose:!0,container:this.props.container,onHide:this.props.onHide,target:this.props.target,animation:!1},y.a.createElement(ra,{enableGifPicker:this.props.enableGifPicker,onEmojiClose:this.props.onHide,onEmojiClick:this.props.onEmojiClick,onGifClick:this.props.onGifClick,rightOffset:this.state.rightOffset,topOffset:this.props.topOffset}))}}la(ca,"CENTER_SPACE_REQUIRED_ABOVE",476),la(ca,"CENTER_SPACE_REQUIRED_BELOW",497),la(ca,"RHS_SPACE_REQUIRED_ABOVE",420),la(ca,"RHS_SPACE_REQUIRED_BELOW",420),la(ca,"propTypes",{show:_.a.bool.isRequired,container:_.a.func,target:_.a.func.isRequired,onEmojiClick:_.a.func.isRequired,onGifClick:_.a.func,onHide:_.a.func.isRequired,topOffset:_.a.number,spaceRequiredAbove:_.a.number,spaceRequiredBelow:_.a.number,enableGifPicker:_.a.bool}),la(ca,"defaultProps",{spaceRequiredAbove:ca.CENTER_SPACE_REQUIRED_ABOVE,spaceRequiredBelow:ca.CENTER_SPACE_REQUIRED_BELOW,enableGifPicker:!1});var da=a(917),ma=a(1196),ua=a(938),pa=a(168);function ha(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const ga={[x.Posts.POST_TYPES.ADD_TO_CHANNEL]:{id:Object(le.b)("last_users_message.added_to_channel.type"),defaultMessage:"were **added to the channel** by {actor}."},[x.Posts.POST_TYPES.JOIN_CHANNEL]:{id:Object(le.b)("last_users_message.joined_channel.type"),defaultMessage:"**joined the channel**."},[x.Posts.POST_TYPES.LEAVE_CHANNEL]:{id:Object(le.b)("last_users_message.left_channel.type"),defaultMessage:"**left the channel**."},[x.Posts.POST_TYPES.REMOVE_FROM_CHANNEL]:{id:Object(le.b)("last_users_message.removed_from_channel.type"),defaultMessage:"were **removed from the channel**."},[x.Posts.POST_TYPES.ADD_TO_TEAM]:{id:Object(le.b)("last_users_message.added_to_team.type"),defaultMessage:"were **added to the team** by {actor}."},[x.Posts.POST_TYPES.JOIN_TEAM]:{id:Object(le.b)("last_users_message.joined_team.type"),defaultMessage:"**joined the team**."},[x.Posts.POST_TYPES.LEAVE_TEAM]:{id:Object(le.b)("last_users_message.left_team.type"),defaultMessage:"**left the team**."},[x.Posts.POST_TYPES.REMOVE_FROM_TEAM]:{id:Object(le.b)("last_users_message.removed_from_team.type"),defaultMessage:"were **removed from the team**."}};class ba extends y.a.PureComponent{constructor(e){super(e),ha(this,"handleOnClick",e=>{e.preventDefault(),this.setState({expand:!0})}),ha(this,"renderMessage",e=>y.a.createElement(ua.a,{message:e,options:this.props.formatOptions})),this.state={expand:!1}}render(){const{formatMessage:e}=this.context.intl,{expand:t}=this.state,{actor:a,expandedLocale:n,postType:s,usernames:i}=this.props,o=i[0],r=i.length-1,l=i[r];if(t){const t=e(n,{users:i.slice(0,r).join(", "),lastUser:l,actor:a});return this.renderMessage(t)}const c=e({id:"last_users_message.first",defaultMessage:"{firstUser} and "},{firstUser:o}),d=e({id:"last_users_message.others",defaultMessage:"{numOthers} others "},{numOthers:r}),m=e({id:ga[s].id,defaultMessage:ga[s].defaultMessage},{actor:a});return y.a.createElement("span",null,this.renderMessage(c),y.a.createElement("a",{onClick:this.handleOnClick},d),this.renderMessage(m))}}function fa(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}ha(ba,"propTypes",{actor:_.a.string,expandedLocale:_.a.object.isRequired,formatOptions:_.a.object.isRequired,postType:_.a.string.isRequired,usernames:_.a.array.isRequired}),ha(ba,"contextTypes",{intl:W.i});const{JOIN_CHANNEL:Ea,ADD_TO_CHANNEL:_a,REMOVE_FROM_CHANNEL:va,LEAVE_CHANNEL:ya,JOIN_TEAM:Ca,ADD_TO_TEAM:wa,REMOVE_FROM_TEAM:Ta,LEAVE_TEAM:Oa}=x.Posts.POST_TYPES,Sa={[Ea]:{one:{id:Object(le.b)("combined_system_message.joined_channel.one"),defaultMessage:"{firstUser} **joined the channel**."},one_you:{id:Object(le.b)("combined_system_message.joined_channel.one_you"),defaultMessage:"You **joined the channel**."},two:{id:Object(le.b)("combined_system_message.joined_channel.two"),defaultMessage:"{firstUser} and {secondUser} **joined the channel**."},many_expanded:{id:Object(le.b)("combined_system_message.joined_channel.many_expanded"),defaultMessage:"{users} and {lastUser} **joined the channel**."}},[_a]:{one:{id:Object(le.b)("combined_system_message.added_to_channel.one"),defaultMessage:"{firstUser} **added to the channel** by {actor}."},one_you:{id:Object(le.b)("combined_system_message.added_to_channel.one_you"),defaultMessage:"You were **added to the channel** by {actor}."},two:{id:Object(le.b)("combined_system_message.added_to_channel.two"),defaultMessage:"{firstUser} and {secondUser} **added to the channel** by {actor}."},many_expanded:{id:Object(le.b)("combined_system_message.added_to_channel.many_expanded"),defaultMessage:"{users} and {lastUser} were **added to the channel** by {actor}."}},[va]:{one:{id:Object(le.b)("combined_system_message.removed_from_channel.one"),defaultMessage:"{firstUser} was **removed from the channel**."},one_you:{id:Object(le.b)("combined_system_message.removed_from_channel.one_you"),defaultMessage:"You were **removed from the channel**."},two:{id:Object(le.b)("combined_system_message.removed_from_channel.two"),defaultMessage:"{firstUser} and {secondUser} were **removed from the channel**."},many_expanded:{id:Object(le.b)("combined_system_message.removed_from_channel.many_expanded"),defaultMessage:"{users} and {lastUser} were **removed from the channel**."}},[ya]:{one:{id:Object(le.b)("combined_system_message.left_channel.one"),defaultMessage:"{firstUser} **left the channel**."},one_you:{id:Object(le.b)("combined_system_message.left_channel.one_you"),defaultMessage:"You **left the channel**."},two:{id:Object(le.b)("combined_system_message.left_channel.two"),defaultMessage:"{firstUser} and {secondUser} **left the channel**."},many_expanded:{id:Object(le.b)("combined_system_message.left_channel.many_expanded"),defaultMessage:"{users} and {lastUser} **left the channel**."}},[Ca]:{one:{id:Object(le.b)("combined_system_message.joined_team.one"),defaultMessage:"{firstUser} **joined the team**."},one_you:{id:Object(le.b)("combined_system_message.joined_team.one_you"),defaultMessage:"You **joined the team**."},two:{id:Object(le.b)("combined_system_message.joined_team.two"),defaultMessage:"{firstUser} and {secondUser} **joined the team**."},many_expanded:{id:Object(le.b)("combined_system_message.joined_team.many_expanded"),defaultMessage:"{users} and {lastUser} **joined the team**."}},[wa]:{one:{id:Object(le.b)("combined_system_message.added_to_team.one"),defaultMessage:"{firstUser} **added to the team** by {actor}."},one_you:{id:Object(le.b)("combined_system_message.added_to_team.one_you"),defaultMessage:"You were **added to the team** by {actor}."},two:{id:Object(le.b)("combined_system_message.added_to_team.two"),defaultMessage:"{firstUser} and {secondUser} **added to the team** by {actor}."},many_expanded:{id:Object(le.b)("combined_system_message.added_to_team.many_expanded"),defaultMessage:"{users} and {lastUser} were **added to the team** by {actor}."}},[Ta]:{one:{id:Object(le.b)("combined_system_message.removed_from_team.one"),defaultMessage:"{firstUser} was **removed from the team**."},one_you:{id:Object(le.b)("combined_system_message.removed_from_team.one_you"),defaultMessage:"You were **removed from the team**."},two:{id:Object(le.b)("combined_system_message.removed_from_team.two"),defaultMessage:"{firstUser} and {secondUser} were **removed from the team**."},many_expanded:{id:Object(le.b)("combined_system_message.removed_from_team.many_expanded"),defaultMessage:"{users} and {lastUser} were **removed from the team**."}},[Oa]:{one:{id:Object(le.b)("combined_system_message.left_team.one"),defaultMessage:"{firstUser} **left the team**."},one_you:{id:Object(le.b)("combined_system_message.left_team.one_you"),defaultMessage:"You **left the team**."},two:{id:Object(le.b)("combined_system_message.left_team.two"),defaultMessage:"{firstUser} and {secondUser} **left the team**."},many_expanded:{id:Object(le.b)("combined_system_message.left_team.many_expanded"),defaultMessage:"{users} and {lastUser} **left the team**."}}};class Pa extends y.a.PureComponent{constructor(...e){super(...e),fa(this,"loadUserProfiles",(e,t)=>{e.length>0&&this.props.actions.getMissingProfilesByIds(e),t.length>0&&this.props.actions.getMissingProfilesByUsernames(t)}),fa(this,"getAllUsernames",()=>{const{allUserIds:e,allUsernames:t,currentUserId:a,currentUsername:n,userProfiles:s}=this.props,{formatMessage:i}=this.context.intl,o=s.reduce((e,t)=>(e[t.id]=t.username,e[t.username]=t.username,e),{}),r=i({id:Object(le.b)("combined_system_message.you"),defaultMessage:"You"});return e.includes(a)?o[a]=r:t.includes(n)&&(o[n]=r),o}),fa(this,"getUsernamesByIds",(e=[])=>{const{currentUserId:t,currentUsername:a}=this.props,n=this.getAllUsernames(),{formatMessage:s}=this.context.intl,i=s({id:Object(le.b)("channel_loader.someone"),defaultMessage:"Someone"}),o=e.filter(e=>e!==t&&e!==a).map(e=>n[e]?"@".concat(n[e]):i).filter(e=>e&&""!==e);return e.includes(t)?o.unshift(n[t]):e.includes(a)&&o.unshift(n[a]),o})}componentDidMount(){this.loadUserProfiles(this.props.allUserIds,this.props.allUsernames)}componentDidUpdate(e){const{allUserIds:t,allUsernames:a}=this.props;t===e.allUserIds&&a===e.allUsernames||this.loadUserProfiles(t,a)}renderFormattedMessage(e,t,a){const{formatMessage:n}=this.context.intl,{currentUserId:s,currentUsername:i}=this.props,o=this.getUsernamesByIds(t);let r=a?this.getUsernamesByIds([a])[0]:"";!r||a!==s&&a!==i||(r=r.toLowerCase());const l=o[0],c=o[1],d=o.length-1,m={atMentions:!0,mentionKeys:[{key:l},{key:c},{key:r}],mentionHighlight:!1,singleline:!0};if(d>1)return y.a.createElement(ba,{actor:r,expandedLocale:Sa[e].many_expanded,formatOptions:m,postType:e,usernames:o});let u;0===d?(u=Sa[e].one,t[0]!==this.props.currentUserId&&t[0]!==this.props.currentUsername||!Sa[e].one_you||(u=Sa[e].one_you)):1===d&&(u=Sa[e].two);const p=n(u,{firstUser:l,secondUser:c,actor:r});return y.a.createElement(ua.a,{message:p,options:m})}renderMessage(e,t,a){return y.a.createElement(y.a.Fragment,{key:e+a},this.renderFormattedMessage(e,t,a),y.a.createElement("br",null))}render(){const{currentUserId:e,messageData:t}=this.props,a=[],n=[];for(const s of t){const{postType:t,actorId:i}=s;let o=s.userIds;if(!this.props.showJoinLeave&&i!==e){if(!(-1!==o.indexOf(e)))continue;o=[e]}t!==va?a.push(this.renderMessage(t,o,i)):n.push(...o)}if(n.length>0){const t=n.filter((e,t,a)=>a.indexOf(e)===t);a.push(this.renderMessage(va,t,e))}return y.a.createElement(y.a.Fragment,null,a)}}fa(Pa,"propTypes",{allUserIds:_.a.array.isRequired,allUsernames:_.a.array.isRequired,currentUserId:_.a.string.isRequired,currentUsername:_.a.string.isRequired,messageData:_.a.array.isRequired,showJoinLeave:_.a.bool.isRequired,userProfiles:_.a.array.isRequired,actions:_.a.shape({getMissingProfilesByIds:_.a.func.isRequired,getMissingProfilesByUsernames:_.a.func.isRequired}).isRequired}),fa(Pa,"defaultProps",{allUserIds:[],allUsernames:[]}),fa(Pa,"contextTypes",{intl:W.i});var Ma=Object(n.connect)(function(){const e=Object(m.makeGetProfilesByIdsAndUsernames)();return(t,a)=>{const n=Object(m.getCurrentUser)(t),{allUserIds:s,allUsernames:i}=a;return{currentUserId:n.id,currentUsername:n.username,showJoinLeave:Object(c.getBool)(t,x.Preferences.CATEGORY_ADVANCED_SETTINGS,x.Preferences.ADVANCED_FILTER_JOIN_LEAVE,!0),userProfiles:e(t,{allUserIds:s,allUsernames:i})}}},function(e){return{actions:Object(s.bindActionCreators)({getMissingProfilesByIds:o.getMissingProfilesByIds,getMissingProfilesByUsernames:o.getMissingProfilesByUsernames},e)}})(Pa),Na=a(33),Ia=a(1294);function Aa(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ja extends y.a.PureComponent{constructor(...e){super(...e),Aa(this,"handleAddChannelMember",()=>{const{currentUser:e,post:t,userIds:a,usernames:n}=this.props;if(t&&t.channel_id){let s=t.create_at;a.forEach((a,i)=>{s++,this.props.actions.addChannelMember(t.channel_id,a),Object(O.g)(e,n[i],a,t.channel_id,t.root_id,s)}),this.props.actions.removePost(t)}})}generateAtMentions(e=[]){if(1===e.length)return y.a.createElement(Ia.a,{mentionName:e[0]});if(e.length>1){function t(e){return y.a.createElement(W.c,{key:e,id:"post_body.check_for_out_of_channel_mentions.link.and",defaultMessage:" and "})}function a(e){return y.a.createElement("span",{key:e},", ")}return y.a.createElement("span",null,e.map(e=>y.a.createElement(Ia.a,{key:e,mentionName:e})).reduce((e,n,s,i)=>0===s?[n]:s===i.length-1?[...e,t(s),n]:[...e,a(s),n],[]))}return""}render(){const{channelType:e,postId:t,usernames:a,noGroupsUsernames:n}=this.props;if(!t||!e)return null;let s,i,o,r;e===S.i.PRIVATE_CHANNEL?(s=Object(le.b)("post_body.check_for_out_of_channel_mentions.link.private"),i="add them to this private channel"):e===S.i.OPEN_CHANNEL&&(s=Object(le.b)("post_body.check_for_out_of_channel_mentions.link.public"),i="add them to the channel");const l=this.generateAtMentions(a);let c,d;1===a.length?(o=Object(le.b)("post_body.check_for_out_of_channel_mentions.message.one"),r="did not get notified by this mention because they are not in the channel. Would you like to "):a.length>1&&(o=Object(le.b)("post_body.check_for_out_of_channel_mentions.message.multiple"),r="did not get notified by this mention because they are not in the channel. Would you like to ");const m=this.generateAtMentions(n);n.length&&(c=Object(le.b)("post_body.check_for_out_of_channel_groups_mentions.message"),d="did not get notified by this mention because they are not in the channel. They cannot be added to the channel because they are not a member of the linked groups. To add them to this channel, they must be added to the linked groups.");var u=null,p=null;return a.length&&(u=y.a.createElement("p",null,l," ",y.a.createElement(W.c,{id:o,defaultMessage:r}),y.a.createElement("a",{id:"add_channel_member_link",onClick:this.handleAddChannelMember},y.a.createElement(W.c,{id:s,defaultMessage:i})),y.a.createElement(W.c,{id:"post_body.check_for_out_of_channel_mentions.message_last",defaultMessage:"? They will have access to all message history."}))),n.length&&(p=y.a.createElement("p",null,m," ",y.a.createElement(W.c,{id:c,defaultMessage:d}))),y.a.createElement(y.a.Fragment,null,u,p)}}Aa(ja,"propTypes",{currentUser:_.a.object.isRequired,channelType:_.a.string.isRequired,postId:_.a.string.isRequired,post:_.a.object.isRequired,userIds:_.a.array.isRequired,usernames:_.a.array.isRequired,noGroupsUsernames:_.a.array.isRequired,actions:_.a.shape({addChannelMember:_.a.func.isRequired,removePost:_.a.func.isRequired}).isRequired});var Ra=Object(n.connect)(function(e,t){const a=Object(Na.getPost)(e,t.postId)||{};let n="";if(a&&a.channel_id){const t=Object(p.getChannel)(e,a.channel_id);t&&t.type&&(n=t.type)}return{channelType:n,currentUser:Object(m.getCurrentUser)(e),post:a}},function(e){return{actions:Object(s.bindActionCreators)({addChannelMember:r.addChannelMember,removePost:L.removePost},e)}})(ja);function ka(e){return La("@"===e[0]?e:"@".concat(e),{markdown:!1})}function La(e,t){return y.a.createElement(ua.a,{message:e,options:t})}function xa(e){const t=ka(e.props.username),a=ka(e.props.addedUsername);return y.a.createElement(W.c,{id:"api.channel.add_member.added",defaultMessage:"{addedUsername} added to the channel by {username}.",values:{username:t,addedUsername:a}})}const Da={[x.Posts.POST_TYPES.JOIN_CHANNEL]:function(e){const t=ka(e.props.username);return y.a.createElement(W.c,{id:"api.channel.join_channel.post_and_forget",defaultMessage:"{username} joined the channel.",values:{username:t}})},[x.Posts.POST_TYPES.GUEST_JOIN_CHANNEL]:function(e){const t=ka(e.props.username);return y.a.createElement(W.c,{id:"api.channel.guest_join_channel.post_and_forget",defaultMessage:"{username} joined the channel as a guest.",values:{username:t}})},[x.Posts.POST_TYPES.LEAVE_CHANNEL]:function(e){const t=ka(e.props.username);return y.a.createElement(W.c,{id:"api.channel.leave.left",defaultMessage:"{username} has left the channel.",values:{username:t}})},[x.Posts.POST_TYPES.ADD_TO_CHANNEL]:xa,[x.Posts.POST_TYPES.ADD_GUEST_TO_CHANNEL]:function(e){const t=ka(e.props.username),a=ka(e.props.addedUsername);return y.a.createElement(W.c,{id:"api.channel.add_guest.added",defaultMessage:"{addedUsername} added to the channel as a guest by {username}.",values:{username:t,addedUsername:a}})},[x.Posts.POST_TYPES.REMOVE_FROM_CHANNEL]:function(e){const t=ka(e.props.removedUsername);return y.a.createElement(W.c,{id:"api.channel.remove_member.removed",defaultMessage:"{removedUsername} was removed from the channel",values:{removedUsername:t}})},[x.Posts.POST_TYPES.JOIN_TEAM]:function(e){const t=ka(e.props.username);return y.a.createElement(W.c,{id:"api.team.join_team.post_and_forget",defaultMessage:"{username} joined the team.",values:{username:t}})},[x.Posts.POST_TYPES.LEAVE_TEAM]:function(e){const t=ka(e.props.username);return y.a.createElement(W.c,{id:"api.team.leave.left",defaultMessage:"{username} left the team.",values:{username:t}})},[x.Posts.POST_TYPES.ADD_TO_TEAM]:function(e){const t=ka(e.props.username),a=ka(e.props.addedUsername);return y.a.createElement(W.c,{id:"api.team.add_member.added",defaultMessage:"{addedUsername} added to the team by {username}.",values:{username:t,addedUsername:a}})},[x.Posts.POST_TYPES.REMOVE_FROM_TEAM]:function(e){const t=ka(e.props.username);return y.a.createElement(W.c,{id:"api.team.remove_user_from_team.removed",defaultMessage:"{removedUsername} was removed from the team.",values:{removedUsername:t}})},[x.Posts.POST_TYPES.HEADER_CHANGE]:function(e){if(!e.props.username)return null;const t={singleline:!0,channelNamesMap:e.props&&e.props.channel_mentions},a=ka(e.props.username),n=e.props.old_header?La(e.props.old_header,t):null,s=e.props.new_header?La(e.props.new_header,t):null;return e.props.new_header?e.props.old_header?y.a.createElement(W.c,{id:"api.channel.post_update_channel_header_message_and_forget.updated_from",defaultMessage:"{username} updated the channel header from: {old} to: {new}",values:{username:a,old:n,new:s}}):y.a.createElement(W.c,{id:"api.channel.post_update_channel_header_message_and_forget.updated_to",defaultMessage:"{username} updated the channel header to: {new}",values:{username:a,new:s}}):e.props.old_header?y.a.createElement(W.c,{id:"api.channel.post_update_channel_header_message_and_forget.removed",defaultMessage:"{username} removed the channel header (was: {old})",values:{username:a,old:n}}):null},[x.Posts.POST_TYPES.DISPLAYNAME_CHANGE]:function(e){if(!(e.props.username&&e.props.old_displayname&&e.props.new_displayname))return null;const t=ka(e.props.username),a=e.props.old_displayname,n=e.props.new_displayname;return y.a.createElement(W.c,{id:"api.channel.post_update_channel_displayname_message_and_forget.updated_from",defaultMessage:"{username} updated the channel display name from: {old} to: {new}",values:{username:t,old:a,new:n}})},[x.Posts.POST_TYPES.CONVERT_CHANNEL]:function(e){if(!e.props.username)return null;const t=ka(e.props.username);return y.a.createElement(W.c,{id:"api.channel.post_convert_channel_to_private.updated_from",defaultMessage:"{username} converted the channel from public to private",values:{username:t}})},[x.Posts.POST_TYPES.PURPOSE_CHANGE]:function(e){if(!e.props.username)return null;const t=ka(e.props.username),a=e.props.old_purpose,n=e.props.new_purpose;return e.props.new_purpose?e.props.old_purpose?y.a.createElement(W.c,{id:"app.channel.post_update_channel_purpose_message.updated_from",defaultMessage:"{username} updated the channel purpose from: {old} to: {new}",values:{username:t,old:a,new:n}}):y.a.createElement(W.c,{id:"app.channel.post_update_channel_purpose_message.updated_to",defaultMessage:"{username} updated the channel purpose to: {new}",values:{username:t,new:n}}):e.props.old_purpose?y.a.createElement(W.c,{id:"app.channel.post_update_channel_purpose_message.removed",defaultMessage:"{username} removed the channel purpose (was: {old})",values:{username:t,old:a}}):null},[x.Posts.POST_TYPES.CHANNEL_DELETED]:function(e){if(!e.props.username)return null;const t=ka(e.props.username);return y.a.createElement(W.c,{id:"api.channel.delete_channel.archived",defaultMessage:"{username} has archived the channel.",values:{username:t}})},[x.Posts.POST_TYPES.ME]:function(e){return La(e.props&&e.props.message?e.props.message:e.message)}};function Ua(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class qa extends y.a.PureComponent{render(){if(this.props.post){const e=function(e,t){if(e.props&&e.props.add_channel_member){const a=Object(pa.a)(t),n=M.ab(e);if((t.type===x.General.PRIVATE_CHANNEL||t.type===x.General.OPEN_CHANNEL)&&a&&n){const t=e.props.add_channel_member;return y.a.createElement(Ra,{postId:t.post_id,userIds:t.not_in_channel_user_ids,noGroupsUsernames:t.not_in_groups_usernames,usernames:t.not_in_channel_usernames})}return null}if(Da[e.type])return Da[e.type](e);if(e.type===x.Posts.POST_TYPES.EPHEMERAL_ADD_TO_CHANNEL)return xa(e);if(e.type===x.Posts.POST_TYPES.COMBINED_USER_ACTIVITY){const{allUserIds:t,allUsernames:a,messageData:n}=e.props.user_activity;return y.a.createElement(Ma,{allUserIds:t,allUsernames:a,messageData:n})}return null}(this.props.post,this.props.channel);if(e)return y.a.createElement("div",null,e)}const e=!this.props.post||!this.props.post.message_source||this.props.post.message===this.props.post.message_source,t=this.props.post&&this.props.post.props&&this.props.post.props.channel_mentions;let{message:a}=this.props;const{post:n}=this.props;return this.props.pluginHooks.forEach(e=>{e&&e.hook&&n&&(a=e.hook(n,a))}),y.a.createElement(ua.a,{imageProps:this.props.imageProps,isRHS:this.props.isRHS,message:a,proxyImages:e,options:this.props.options,channelNamesMap:t,hasPluginTooltips:this.props.hasPluginTooltips,imagesMetadata:this.props.post&&this.props.post.metadata&&this.props.post.metadata.images})}}Ua(qa,"propTypes",{imageProps:_.a.object,isRHS:_.a.bool,message:_.a.string.isRequired,post:_.a.object,channel:_.a.object,options:_.a.object,pluginHooks:_.a.arrayOf(_.a.object),hasPluginTooltips:_.a.bool}),Ua(qa,"defaultProps",{isRHS:!1,pluginHooks:[]});var Ha=Object(n.connect)(function(e,t){return{channel:Object(p.getChannel)(e,t.channelId),pluginHooks:e.plugins.components.MessageWillFormat,hasPluginTooltips:Boolean(e.plugins.components.LinkTooltip)}})(qa),Fa=a(81),Ba=a.n(Fa),Ga=a(59),Va=a(922),Wa=a(913),za=a(941),Ya=a(919),Ka=a(923);class Qa extends Ka.a{render(){const e=this.props.isSelection,t=this.props.item;let a,n,s;"all"===t.username?(a="all",n=y.a.createElement(W.c,{id:"suggestion.mention.all",defaultMessage:"Notifies everyone in this channel"}),s=y.a.createElement(W.c,{id:"generic_icons.member",defaultMessage:"Member Icon"},e=>y.a.createElement("i",{className:"mention__image fa fa-users fa-2x",title:e}))):"channel"===t.username?(a="channel",n=y.a.createElement(W.c,{id:"suggestion.mention.channel",defaultMessage:"Notifies everyone in this channel"}),s=y.a.createElement(W.c,{id:"generic_icons.member",defaultMessage:"Member Icon"},e=>y.a.createElement("i",{className:"mention__image fa fa-users fa-2x",title:e}))):"here"===t.username?(a="here",n=y.a.createElement(W.c,{id:"suggestion.mention.here",defaultMessage:"Notifies everyone online in this channel"}),s=y.a.createElement(W.c,{id:"generic_icons.member",defaultMessage:"Member Icon"},e=>y.a.createElement("i",{className:"mention__image fa fa-users fa-2x",title:e}))):(a=t.username,(t.first_name||t.last_name)&&t.nickname?n="- ".concat(M.A(t)," (").concat(t.nickname,")"):t.nickname?n="- (".concat(t.nickname,")"):(t.first_name||t.last_name)&&(n="- ".concat(M.A(t))),s=y.a.createElement(Ya.a,{size:"xs",username:t&&t.username,url:M.N(t)}));let i="mentions__name";return e&&(i+=" suggestion--selected"),y.a.createElement("div",Object.assign({className:i,"data-testid":"mentionSuggestion_".concat(a),onClick:this.handleClick},Ka.a.baseProps),s,y.a.createElement("span",{className:"mention--align"},"@"+a),y.a.createElement(Wa.a,{show:Boolean(t.is_bot),className:"badge-autocomplete"}),y.a.createElement("span",{className:"mention__fullname"}," ",n),y.a.createElement(za.a,{show:M.W(t),className:"badge-autocomplete"}))}}function Za(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Ja(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Za(a,!0).forEach(function(t){Xa(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Za(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Xa(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var $a=class extends Va.a{constructor(e){super(),this.setProps(e),this.data=null}setProps({currentUserId:e,profilesInChannel:t,profilesNotInChannel:a,autocompleteUsersInChannel:n}){this.currentUserId=e,this.profilesInChannel=t,this.profilesNotInChannel=a,this.autocompleteUsersInChannel=n}specialMentions(){return this.latestPrefix.startsWith("/msg")?[]:["here","channel","all"].filter(e=>e.startsWith(this.latestPrefix)).map(e=>({username:e,type:S.i.MENTION_SPECIAL}))}getProfileSuggestions(e){const t=[];if(!e)return t;if(e.username){const a=Object(Ga.getSuggestionsSplitByMultiple)(e.username.toLowerCase(),S.i.AUTOCOMPLETE_SPLIT_CHARACTERS);t.push(...a)}return[e.first_name,e.last_name,e.nickname].forEach(e=>{const a=Object(Ga.getSuggestionsSplitBy)(e.toLowerCase()," ");t.push(...a)}),t}filterProfile(e){if(!e)return!1;if(e.id===this.currentUserId)return!1;const t=this.latestPrefix.toLowerCase();return this.getProfileSuggestions(e).some(e=>e.startsWith(t))}localMembers(){return this.profilesInChannel.filter(e=>this.filterProfile(e)).map(e=>Ja({type:S.i.MENTION_MEMBERS},e)).sort((e,t)=>e.username.localeCompare(t.username)).splice(0,25)}remoteMembers(){return this.data?(this.data.users||[]).filter(e=>this.filterProfile(e)).map(e=>Ja({type:S.i.MENTION_MEMBERS},e)):[]}remoteNonMembers(){return this.data?(this.data.out_of_channel||[]).filter(e=>this.filterProfile(e)).map(e=>Ja({type:S.i.MENTION_NONMEMBERS},e)):[]}users(){const e=this.specialMentions(),t=this.localMembers(),a={};t.forEach(e=>{a[e.id]=!0});const n=this.remoteMembers().filter(e=>!a[e.id]),s=t.concat(n).sort((e,t)=>e.username.localeCompare(t.username)),i=this.remoteNonMembers().filter(e=>!a[e.id]);return s.concat(e).concat(i)}updateMatches(e,t){const a=t.map(e=>e.username?"@"+e.username:"");e({matchedPretext:"@".concat(this.latestPrefix),terms:a,items:t,component:Qa})}handlePretextChanged(e,t){const a=Ba.a.cache("(?:^|\\W)@([\\pL\\d\\-_.]*)$","i").exec(e.toLowerCase());if(!a)return!1;const n=a[1];this.startNewRequest(n),this.updateMatches(t,this.users());let s=setTimeout(()=>{this.shouldCancelDispatch(n)||(this.updateMatches(t,this.users().concat([{type:S.i.MENTION_MORE_MEMBERS,loading:!0}])),s=null)},500);return this.autocompleteUsersInChannel(n).then(({data:e})=>{s&&clearTimeout(s),this.shouldCancelDispatch(n)||(this.data=e,this.updateMatches(t,this.users()))}),!0}},en=a(97),tn=a(4),an=a(933),nn=a(10);class sn extends Ka.a{render(){const e=this.props.isSelection,t=this.props.item,a=t.channel.display_name,n=t.channel.purpose;let s="mentions__name no-flex";e&&(s+=" suggestion--selected");const i="(~"+t.channel.name+")";return y.a.createElement("div",Object.assign({className:s,onClick:this.handleClick},Ka.a.baseProps),y.a.createElement("div",{className:"mention__align"},y.a.createElement("span",null,a),y.a.createElement("span",{className:"mention__channelname"}," ",i)),y.a.createElement("div",{className:"mention__purpose"},n))}}class on extends Va.a{constructor(){super(),this.lastPrefixTrimmed="",this.lastPrefixWithNoResults="",this.lastCompletedWord=""}handlePretextChanged(e,t){this.resetRequest();const a=/\B(~([^~\r\n]*))$/i.exec(e.toLowerCase());if(!a)return!1;if(a.index>0&&"~"===e[a.index-1])return!1;const n=a[2];if(this.lastPrefixTrimmed&&n.trim()===this.lastPrefixTrimmed)return!0;if(this.lastPrefixTrimmed=n.trim(),this.lastPrefixWithNoResults&&n.startsWith(this.lastPrefixWithNoResults))return!1;if(this.lastCompletedWord&&a[0].startsWith(this.lastCompletedWord))return!1;this.lastCompletedWord="",this.startNewRequest(n);const s=n.toLowerCase().split(/\s+/),i={};var o=[];Object(p.getMyChannels)(nn.a.getState()).forEach(e=>{if("O"!==e.type||e.delete_at>0)return;const t=e.name.toLowerCase().split(/\s+/).concat(e.display_name.toLowerCase().split(/\s+/));for(var a=!0,n=0;a&&n<s.length;n++)if(s[n]){for(var r=!1,l=0;l<t.length;l++)if(t[l].startsWith(s[n])){r=!0;break}if(!r){a=!1;break}}a&&(i[e.id]=!0,o.push({type:S.i.MENTION_CHANNELS,channel:e}))});const r=(o=o.sort((e,t)=>Object(en.sortChannelsByTypeAndDisplayName)("en",e.channel,t.channel))).map(e=>"~"+e.channel.name);return t({terms:r.concat([" "]),items:o.concat([{type:S.i.MENTION_MORE_CHANNELS,loading:!0}]),component:sn,matchedPretext:a[1]}),Object(an.b)(n,e=>{const s=Object(p.getMyChannelMemberships)(nn.a.getState());if(this.shouldCancelDispatch(n))return;0===e.length&&(this.lastPrefixWithNoResults=n);const r=[],l=[];e.forEach(e=>{e.delete_at>0&&!s[e.id]||(Object(p.getChannel)(nn.a.getState(),e.id)?i[e.id]||(i[e.id]=!0,o.push({type:S.i.MENTION_CHANNELS,channel:e})):(r.push({type:S.i.MENTION_MORE_CHANNELS,channel:e}),l.push(e)))});const c=(o=o.sort((e,t)=>Object(en.sortChannelsByTypeAndDisplayName)("en",e.channel,t.channel))).concat(r),d=c.map(e=>"~"+e.channel.name);nn.a.dispatch({type:tn.ChannelTypes.RECEIVED_CHANNELS,data:l}),t({matchedPretext:a[1],terms:d,items:c,component:sn})}),!0}handleCompleteWord(e){this.lastCompletedWord=e,this.lastPrefixWithNoResults=""}}a(159);var rn=a(19);class ln extends Ka.a{render(){const{item:e,isSelection:t}=this.props;let a="command";return t&&(a+=" suggestion--selected"),y.a.createElement("div",Object.assign({className:a,onClick:this.handleClick},Ka.a.baseProps),y.a.createElement("div",{className:"command__title"},e.suggestion+" "+e.hint),y.a.createElement("div",{className:"command__desc"},e.description))}}class cn extends Va.a{handlePretextChanged(e,t){if(e.startsWith("/")){const a=e.toLowerCase();return rn.Client4.getCommandsList(Object(u.getCurrentTeamId)(nn.a.getState())).then(e=>{let n=[];e.forEach(e=>{if(e.auto_complete&&("shortcuts"!==e.trigger||!P.m())&&0===("/"+e.trigger).indexOf(a)){const t="/"+e.trigger;let a="";e.auto_complete_hint&&0!==e.auto_complete_hint.length&&(a=e.auto_complete_hint),n.push({suggestion:t,hint:a,description:e.auto_complete_desc})}});const s=(n=n.sort((e,t)=>e.suggestion.localeCompare(t.suggestion))).map(e=>e.suggestion);t({matchedPretext:a,terms:s,items:n,component:ln})}).catch(()=>{}),!0}return!1}}var dn=a(80);const mn=2,un=["skintone"];class pn extends Ka.a{render(){const e=this.props.term,t=this.props.item.emoji;let a="emoticon-suggestion";return this.props.isSelection&&(a+=" suggestion--selected"),y.a.createElement("div",Object.assign({className:a,onClick:this.handleClick},Ka.a.baseProps),y.a.createElement("div",{className:"pull-left"},y.a.createElement("img",{alt:e,className:"emoticon-suggestion__image",src:Object(Rt.getEmojiImageUrl)(t),title:e})),y.a.createElement("div",{className:"pull-left"},e))}}class hn extends Va.a{handlePretextChanged(e,t){const a=/(^|\s|^\+|^-)(:([^:\s]*))$/g.exec(e);if(!a)return!1;const n=a[1],s=a[2],i=a[3];if(i.length<mn)return!1;if("-"!==n&&"+"!==n)for(const e of Object.keys(dn.b))if(dn.b[e].test(s))return!1;return"true"===nn.a.getState().entities.general.config.EnableCustomEmoji?nn.a.dispatch(Object(vt.autocompleteCustomEmojis)(i)).then(()=>this.findAndSuggestEmojis(s,i,t)):this.findAndSuggestEmojis(s,i,t),!0}formatEmojis(e){return e.map(e=>":"+e.name+":")}findAndSuggestEmojis(e,t,a){const n=[],s=[],i=Object(Ct.a)(nn.a.getState()),o=Object(Ct.b)(nn.a.getState());for(const[e,a]of i)if(!un.includes(a.category))if(a.aliases){for(const i of a.aliases)if(-1!==i.indexOf(t)){(o.includes(i)||o.includes(e)?n:s).push({name:i,emoji:a});break}}else if(-1!==e.indexOf(t)){if(i.hasSystemEmoji(e))continue;(o.includes(e)?n:s).push({name:e,emoji:a})}const r=(e,a)=>St(e,a,t);n.sort(r),s.sort(r),a({matchedPretext:e,terms:[...this.formatEmojis(n),...this.formatEmojis(s)],items:[...n,...s],component:pn})}}var gn=a(971),bn=a(972);function fn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class En extends y.a.Component{constructor(e){super(e),fn(this,"handleChange",e=>{this.props.onChange(e)}),fn(this,"checkMessageLength",e=>{if(this.props.handlePostError)if(e.length>this.props.characterLimit){const t=y.a.createElement(W.c,{id:"create_post.error_message",defaultMessage:"Your message is too long. Character count: {length}/{limit}",values:{length:e.length,limit:this.props.characterLimit}});this.props.handlePostError(t)}else this.props.handlePostError(null)}),fn(this,"handleKeyDown",e=>{this.props.onKeyDown&&this.props.onKeyDown(e)}),fn(this,"handleBlur",e=>{this.props.onBlur&&this.props.onBlur(e)}),fn(this,"handleHeightChange",(e,t)=>{this.props.onHeightChange&&this.props.onHeightChange(e,t),M.k()&&this.props.actions.scrollPostList()}),fn(this,"focus",()=>{const e=this.refs.message.getTextbox();e.focus(),M.jb(e),this.checkMessageLength(e.value)}),fn(this,"blur",()=>{this.refs.message.getTextbox().blur()}),fn(this,"recalculateSize",()=>{this.refs.message.recalculateSize()}),this.suggestionProviders=[new $a({currentUserId:this.props.currentUserId,profilesInChannel:this.props.profilesInChannel,profilesNotInChannel:this.props.profilesNotInChannel,autocompleteUsersInChannel:t=>this.props.actions.autocompleteUsersInChannel(t,e.channelId)}),new on,new hn],e.supportsCommands&&this.suggestionProviders.push(new cn),this.checkMessageLength(e.value)}componentDidUpdate(e){!e.preview&&this.props.preview&&this.refs.preview.focus()}UNSAFE_componentWillReceiveProps(e){if(e.channelId!==this.props.channelId||e.currentUserId!==this.props.currentUserId||e.profilesInChannel!==this.props.profilesInChannel||e.profilesNotInChannel!==this.props.profilesNotInChannel){const t=this.suggestionProviders;for(let a=0;a<t.length;a++)t[a]instanceof $a&&t[a].setProps({currentUserId:e.currentUserId,profilesInChannel:e.profilesInChannel,profilesNotInChannel:e.profilesNotInChannel,autocompleteUsersInChannel:t=>e.actions.autocompleteUsersInChannel(t,e.channelId)})}this.props.value!==e.value&&this.checkMessageLength(e.value)}render(){let e=null,t="form-control custom-textarea",a="textarea-wrapper";return this.props.emojiEnabled&&(t+=" custom-textarea--emoji-picker"),this.props.badConnection&&(t+=" bad-connection"),this.props.preview&&(t+=" custom-textarea--preview",a+=" textarea-wrapper--preview",e=y.a.createElement("div",{tabIndex:"0",ref:"preview",className:"form-control custom-textarea textbox-preview-area",onKeyPress:this.props.onKeyPress,onKeyDown:this.handleKeyDown,onBlur:this.handleBlur},y.a.createElement(Ha,{isRHS:this.props.isRHS,message:this.props.value}))),y.a.createElement("div",{ref:"wrapper",className:a},y.a.createElement(gn.a,{id:this.props.id,ref:"message",className:t,spellCheck:"true",placeholder:this.props.createMessage,onChange:this.handleChange,onKeyPress:this.props.onKeyPress,onKeyDown:this.handleKeyDown,onComposition:this.props.onComposition,onBlur:this.handleBlur,onHeightChange:this.handleHeightChange,style:{visibility:this.props.preview?"hidden":"visible"},inputComponent:ma.a,listComponent:bn.a,listStyle:this.props.suggestionListStyle,providers:this.suggestionProviders,channelId:this.props.channelId,value:this.props.value,renderDividers:!0,isRHS:this.props.isRHS,disabled:this.props.disabled,contextId:this.props.channelId,listenForMentionKeyClick:this.props.listenForMentionKeyClick}),e)}}fn(En,"propTypes",{id:_.a.string.isRequired,channelId:_.a.string,value:_.a.string.isRequired,onChange:_.a.func.isRequired,onKeyPress:_.a.func.isRequired,onComposition:_.a.func,onHeightChange:_.a.func,createMessage:_.a.string.isRequired,onKeyDown:_.a.func,onBlur:_.a.func,supportsCommands:_.a.bool.isRequired,handlePostError:_.a.func,suggestionListStyle:_.a.string,emojiEnabled:_.a.bool,isRHS:_.a.bool,characterLimit:_.a.number.isRequired,disabled:_.a.bool,badConnection:_.a.bool,listenForMentionKeyClick:_.a.bool,currentUserId:_.a.string.isRequired,preview:_.a.bool,profilesInChannel:_.a.arrayOf(_.a.object).isRequired,profilesNotInChannel:_.a.arrayOf(_.a.object).isRequired,actions:_.a.shape({autocompleteUsersInChannel:_.a.func.isRequired,scrollPostList:_.a.func.isRequired})}),fn(En,"defaultProps",{supportsCommands:!0,isRHS:!1,listenForMentionKeyClick:!1});var _n=Object(n.connect)(()=>{const e=Object(m.makeGetProfilesInChannel)(),t=Object(m.makeGetProfilesNotInChannel)();return(a,n)=>({currentUserId:Object(m.getCurrentUserId)(a),profilesInChannel:e(a,n.channelId,!0),profilesNotInChannel:t(a,n.channelId,!0)})},e=>({actions:Object(s.bindActionCreators)({autocompleteUsersInChannel:da.a,scrollPostList:da.j},e)}),null,{withRef:!0})(En),vn=a(886);function yn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Cn=S.Q.PRE_RELEASE_FEATURES;class wn extends y.a.Component{constructor(...e){super(...e),yn(this,"togglePreview",e=>{e.preventDefault(),this.props.updatePreview(!this.props.showPreview)})}render(){const e=this.props.message&&this.props.message.length>0;let t,a="";this.props.message&&this.props.message.length>this.props.characterLimit&&(a="hidden"),t=this.props.previewMessageLink?y.a.createElement("span",null,this.props.previewMessageLink):y.a.createElement(W.c,{id:"textbox.edit",defaultMessage:"Edit message"});let n=null;M.T(Cn.MARKDOWN_PREVIEW)&&(n=y.a.createElement("button",{id:"previewLink",onClick:this.togglePreview,className:"style--none textbox-preview-link color--link"},this.props.showPreview?t:y.a.createElement(W.c,{id:"textbox.preview",defaultMessage:"Preview"})));const s=y.a.createElement("div",{id:"helpText",style:{visibility:e?"visible":"hidden",opacity:e?"0.45":"0"},className:"help__format-text"},y.a.createElement("b",null,y.a.createElement(W.c,{id:"textbox.bold",defaultMessage:"**bold**"})),y.a.createElement("i",null,y.a.createElement(W.c,{id:"textbox.italic",defaultMessage:"_italic_"})),y.a.createElement("span",null,"~~",y.a.createElement("strike",null,y.a.createElement(W.c,{id:"textbox.strike",defaultMessage:"strike"})),"~~ "),y.a.createElement("span",null,y.a.createElement(W.c,{id:"textbox.inlinecode",defaultMessage:"`inline code`"})),y.a.createElement("span",null,y.a.createElement(W.c,{id:"textbox.preformatted",defaultMessage:"```preformatted```"})),y.a.createElement("span",null,y.a.createElement(W.c,{id:"textbox.quote",defaultMessage:">quote"})));return y.a.createElement("div",{className:"help__text "+a},s,n,y.a.createElement(vn.a,{id:"helpTextLink",target:"_blank",rel:"noopener noreferrer",to:"/help/messaging",className:"textbox-help-link"},y.a.createElement(W.c,{id:"textbox.help",defaultMessage:"Help"})))}}function Tn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}yn(wn,"propTypes",{showPreview:_.a.bool,characterLimit:_.a.number.isRequired,previewMessageLink:_.a.string,updatePreview:_.a.func,message:_.a.string.isRequired}),yn(wn,"defaultProps",{message:""});const On=S.i.KeyCodes;class Sn extends y.a.PureComponent{constructor(e){super(e),Tn(this,"updatePreview",e=>{this.setState({preview:e})}),Tn(this,"getContainer",()=>this.refs.editModalBody),Tn(this,"toggleEmojiPicker",()=>{this.setState({showEmojiPicker:!this.state.showEmojiPicker}),!this.state.showEmojiPicker&&this.editbox&&this.editbox.focus()}),Tn(this,"hideEmojiPicker",()=>{this.setState({showEmojiPicker:!1}),this.editbox&&this.editbox.focus()}),Tn(this,"handleEmojiClick",e=>{const t=e&&(e.name||e.aliases&&e.aliases[0]);if(t){if(""===this.state.editText)this.setState({editText:":"+t+": "});else{const e=/\s+$/.test(this.state.editText)?this.state.editText+":"+t+": ":this.state.editText+" :"+t+": ";this.setState({editText:e})}this.setState({showEmojiPicker:!1}),this.editbox&&this.editbox.focus()}}),Tn(this,"handleGifClick",e=>{if(""===this.state.editText)this.setState({editText:e});else{const t=/\s+$/.test(this.state.editText)?this.state.editText+e:this.state.editText+" "+e;this.setState({editText:t})}this.setState({showEmojiPicker:!1}),this.editbox.focus()}),Tn(this,"getEditPostControls",()=>this.refs.editPostEmoji),Tn(this,"handlePostError",e=>{this.state.postError!==e&&this.setState({postError:e})}),Tn(this,"handleEdit",async()=>{if(this.isSaveDisabled())return;const{actions:e,editingPost:t}=this.props,a={message:this.state.editText,id:t.postId,channel_id:t.post.channel_id};if(this.state.postError)return this.setState({errorClass:"animation--highlight"}),void setTimeout(()=>{this.setState({errorClass:null})},S.i.ANIMATION_TIMEOUT);if(a.message===(t.post.message_source||t.post.message))return void this.handleHide();const n=t.post.file_ids&&t.post.file_ids.length>0;if(0!==a.message.trim().length||n)e.addMessageIntoHistory(a.message),await e.editPost(a)&&window.scrollTo(0,0),this.handleHide();else{this.handleHide(!1);const e={ModalId:S.s.DELETE_POST,dialogType:Q,dialogProps:{post:t.post,commentCount:t.commentCount,isRHS:t.isRHS}};this.props.actions.openModal(e)}}),Tn(this,"handleChange",e=>{const t=e.target.value;this.setState({editText:t})}),Tn(this,"handleEditKeyPress",e=>{P.m()||this.props.ctrlSend||!M.X(e,On.ENTER)||e.shiftKey||e.altKey?this.props.ctrlSend&&e.ctrlKey&&M.X(e,On.ENTER)&&(e.preventDefault(),this.editbox.blur(),this.handleEdit()):(e.preventDefault(),this.editbox.blur(),this.handleEdit())}),Tn(this,"handleKeyDown",e=>{this.props.ctrlSend&&M.X(e,On.ENTER)&&!0===e.ctrlKey?this.handleEdit():M.X(e,On.ESCAPE)&&!this.state.showEmojiPicker&&this.handleHide()}),Tn(this,"handleHide",(e=!0)=>{this.refocusId=e?this.props.editingPost.refocusId:null,this.props.actions.hideEditPostModal()}),Tn(this,"handleEntered",()=>{this.editbox&&(this.editbox.focus(),this.editbox.recalculateSize())}),Tn(this,"handleExit",()=>{this.setState({preview:!1})}),Tn(this,"handleExited",()=>{const e=this.refocusId;e&&setTimeout(()=>{const t=document.getElementById(e);t&&t.focus()}),this.refocusId=null,this.setState({editText:"",postError:"",errorClass:null,preview:!1,showEmojiPicker:!1})}),Tn(this,"setEditboxRef",e=>{e&&e.getWrappedInstance&&(this.editbox=e.getWrappedInstance()),this.editbox&&this.editbox.focus()}),Tn(this,"isSaveDisabled",()=>{const e=this.props.editingPost.post;return e&&e.file_ids&&e.file_ids.length>0?!this.props.canEditPost:""!==this.state.editText?!this.props.canEditPost:!this.props.canDeletePost}),this.state={preview:!1,editText:"",postError:"",errorClass:null,showEmojiPicker:!1}}UNSAFE_componentWillUpdate(e){!this.props.editingPost.show&&e.editingPost.show&&this.setState({editText:e.editingPost.post.message_source||e.editingPost.post.message})}render(){const{formatMessage:e}=this.context.intl,t="edit-post-footer"+(this.state.postError?" has-error":"");let a=null;if(this.state.postError){const e="post-error"+(this.state.errorClass?" "+this.state.errorClass:"");a=y.a.createElement("label",{className:e},this.state.postError)}let n=null;const s=e({id:"emoji_picker.emojiPicker",defaultMessage:"Emoji Picker"}).toLowerCase();return"true"!==this.props.config.EnableEmojiPicker||this.state.preview||(n=y.a.createElement("div",null,y.a.createElement(ca,{show:this.state.showEmojiPicker,container:this.getContainer,target:this.getEditPostControls,onHide:this.hideEmojiPicker,onEmojiClick:this.handleEmojiClick,onGifClick:this.handleGifClick,enableGifPicker:"true"===this.props.config.EnableGifPicker,topOffset:-20}),y.a.createElement("button",{"aria-label":s,id:"editPostEmoji",ref:"editPostEmoji",className:"style--none post-action",onClick:this.toggleEmojiPicker},y.a.createElement(ft,{className:"icon icon--emoji"})))),y.a.createElement(V.a,{id:"editPostModal",dialogClassName:"a11y__modal edit-modal",show:this.props.editingPost.show,onKeyDown:this.handleKeyDown,onHide:this.handleHide,onEntered:this.handleEntered,onExit:this.handleExit,onExited:this.handleExited,keyboard:!1,role:"dialog","aria-labelledby":"editPostModalLabel"},y.a.createElement(V.a.Header,{closeButton:!0},y.a.createElement(V.a.Title,{componentClass:"h1",id:"editPostModalLabel"},y.a.createElement(W.c,{id:"edit_post.edit",defaultMessage:"Edit {title}",values:{title:this.props.editingPost.title}}))),y.a.createElement(V.a.Body,{bsClass:"modal-body edit-modal-body".concat(this.state.showEmojiPicker?" edit-modal-body--add-reaction":""),ref:"editModalBody"},y.a.createElement("div",{className:"post-create__container"},y.a.createElement("div",{className:"textarea-wrapper"},y.a.createElement(_n,{tabIndex:"0",onChange:this.handleChange,onKeyPress:this.handleEditKeyPress,onKeyDown:this.handleKeyDown,handlePostError:this.handlePostError,value:this.state.editText,channelId:this.props.editingPost.post&&this.props.editingPost.post.channel_id,emojiEnabled:"true"===this.props.config.EnableEmojiPicker,createMessage:M.fb("edit_post.editPost","Edit the post..."),supportsCommands:!1,suggestionListStyle:"bottom",id:"edit_textbox",ref:this.setEditboxRef,characterLimit:this.props.maxPostSize,preview:this.state.preview}),y.a.createElement("div",{className:"post-body__actions"},n)),y.a.createElement("div",{className:"post-create-footer"},y.a.createElement(wn,{characterLimit:this.props.maxPostSize,showPreview:this.state.preview,ref:this.setTextboxLinksRef,updatePreview:this.updatePreview,message:this.state.editText}),y.a.createElement("div",{className:t},a)))),y.a.createElement(V.a.Footer,null,y.a.createElement("button",{type:"button",className:"btn btn-link",onClick:this.handleHide},y.a.createElement(W.c,{id:"edit_post.cancel",defaultMessage:"Cancel"})),y.a.createElement("button",{id:"editButton",type:"button",className:"btn btn-primary",disabled:this.isSaveDisabled(),onClick:this.handleEdit},y.a.createElement(W.c,{id:"edit_post.save",defaultMessage:"Save"}))))}}Tn(Sn,"propTypes",{canEditPost:_.a.bool,canDeletePost:_.a.bool,ctrlSend:_.a.bool,config:_.a.object.isRequired,maxPostSize:_.a.number.isRequired,editingPost:_.a.shape({post:_.a.object,postId:_.a.string,refocusId:_.a.string,commentCount:_.a.number,show:_.a.bool.isRequired,title:_.a.string,isRHS:_.a.bool}).isRequired,actions:_.a.shape({addMessageIntoHistory:_.a.func.isRequired,editPost:_.a.func.isRequired,hideEditPostModal:_.a.func.isRequired,openModal:_.a.func.isRequired}).isRequired}),Tn(Sn,"contextTypes",{intl:W.i.isRequired});var Pn=Object(n.connect)(function(e){const t=Object(d.getConfig)(e),a=Object(G.a)(e),n=Object(m.getCurrentUserId)(e);let s=!1,i=!1;return a&&a.post&&a.post.user_id===n?(s=Object(D.haveIChannelPermission)(e,{channel:Object(p.getCurrentChannelId)(e),team:Object(u.getCurrentTeamId)(e),permission:x.Permissions.DELETE_POST}),i=Object(D.haveIChannelPermission)(e,{channel:Object(p.getCurrentChannelId)(e),team:Object(u.getCurrentTeamId)(e),permission:x.Permissions.EDIT_POST})):(s=Object(D.haveIChannelPermission)(e,{channel:Object(p.getCurrentChannelId)(e),team:Object(u.getCurrentTeamId)(e),permission:x.Permissions.DELETE_OTHERS_POSTS}),i=Object(D.haveIChannelPermission)(e,{channel:Object(p.getCurrentChannelId)(e),team:Object(u.getCurrentTeamId)(e),permission:x.Permissions.EDIT_OTHERS_POSTS})),{canEditPost:i,canDeletePost:s,ctrlSend:Object(c.getBool)(e,x.Preferences.CATEGORY_ADVANCED_SETTINGS,"send_on_ctrl_enter"),config:t,editingPost:a,maxPostSize:parseInt(t.MaxPostSize,10)||S.Q.DEFAULT_CHARACTER_LIMIT}},function(e){return{actions:Object(s.bindActionCreators)({addMessageIntoHistory:L.addMessageIntoHistory,editPost:F,hideEditPostModal:q.f,openModal:U.b},e)}})(Sn),Mn=a(158),Nn=a(170),In=a.n(Nn),An=a(1092);function jn(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function Rn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const kn=S.Q.ActionTypes;var Ln=new class extends In.a{constructor(){super(),Rn(this,"addModalListener",(e,t)=>{this.on(e,t)}),Rn(this,"removeModalListener",(e,t)=>{this.removeListener(e,t)}),Rn(this,"handleEventPayload",e=>{const t=e.action,{type:a,value:n}=t,s=jn(t,["type","value"]);switch(a){case kn.TOGGLE_SHORTCUTS_MODAL:case kn.TOGGLE_IMPORT_THEME_MODAL:case kn.TOGGLE_DELETE_POST_MODAL:case kn.TOGGLE_GET_POST_LINK_MODAL:case kn.TOGGLE_GET_TEAM_INVITE_LINK_MODAL:case kn.TOGGLE_GET_PUBLIC_LINK_MODAL:case kn.TOGGLE_QUICK_SWITCH_MODAL:case kn.TOGGLE_CHANNEL_PURPOSE_UPDATE_MODAL:case kn.TOGGLE_CHANNEL_NAME_UPDATE_MODAL:case kn.TOGGLE_LEAVE_PRIVATE_CHANNEL_MODAL:this.emit(a,n,s)}}),this.dispatchToken=An.a.register(this.handleEventPayload)}},xn=a(1004);function Dn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Un extends y.a.PureComponent{constructor(e){super(e),Dn(this,"onHide",()=>{this.setState({copiedLink:!1}),this.props.onHide()}),Dn(this,"copyLink",()=>{const e=this.refs.textarea;e.focus(),e.setSelectionRange(0,this.props.link.length);try{this.setState({copiedLink:document.execCommand("copy")})}catch(e){this.setState({copiedLink:!1})}}),this.state={copiedLink:!1}}render(){let e=null;this.props.helpText&&(e=y.a.createElement("p",null,this.props.helpText,y.a.createElement("br",null),y.a.createElement("br",null)));let t=null;document.queryCommandSupported("copy")&&(t=y.a.createElement("button",{id:"linkModalCopyLink","data-copy-btn":"true",type:"button",className:"btn btn-primary pull-left",onClick:this.copyLink},y.a.createElement(W.c,{id:"get_link.copy",defaultMessage:"Copy Link"})));const a=y.a.createElement("textarea",{id:"linkModalTextArea",className:"form-control no-resize min-height",ref:"textarea",value:this.props.link,onClick:this.copyLink,readOnly:!0});let n=null;return this.state.copiedLink&&(n=y.a.createElement("p",{className:"alert alert-success alert--confirm"},y.a.createElement(xn.a,null),y.a.createElement(W.c,{id:"get_link.clipboard",defaultMessage:" Link copied"}))),y.a.createElement(V.a,{dialogClassName:"a11y__modal",show:this.props.show,onHide:this.onHide,role:"dialog","aria-labelledby":"getLinkModalLabel"},y.a.createElement(V.a.Header,{id:"getLinkModalLabel",closeButton:!0},y.a.createElement("h4",{className:"modal-title"},this.props.title)),y.a.createElement(V.a.Body,null,e,a),y.a.createElement(V.a.Footer,null,y.a.createElement("button",{id:"linkModalCloseButton",type:"button",className:"btn btn-link",onClick:this.onHide},y.a.createElement(W.c,{id:"get_link.close",defaultMessage:"Close"})),t,n))}}function qn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Dn(Un,"propTypes",{show:_.a.bool.isRequired,onHide:_.a.func.isRequired,title:_.a.string.isRequired,helpText:_.a.string,link:_.a.string.isRequired}),Dn(Un,"defaultProps",{helpText:null});class Hn extends y.a.PureComponent{constructor(e){super(e),qn(this,"handleToggle",(e,t)=>{this.setState({show:e,post:t.post})}),qn(this,"hide",()=>{this.setState({show:!1})}),this.state={show:!1,post:{}}}componentDidMount(){Ln.addModalListener(S.Q.ActionTypes.TOGGLE_GET_POST_LINK_MODAL,this.handleToggle)}componentWillUnmount(){Ln.removeModalListener(S.Q.ActionTypes.TOGGLE_GET_POST_LINK_MODAL,this.handleToggle)}render(){const e=this.props.currentTeamUrl+"/pl/"+this.state.post.id;return y.a.createElement(Un,{show:this.state.show,onHide:this.hide,title:M.fb("get_post_link_modal.title","Copy Permalink"),helpText:M.fb("get_post_link_modal.help","The link below allows authorized users to see your post."),link:e})}}qn(Hn,"propTypes",{currentTeamUrl:_.a.string.isRequired});var Fn=Object(n.connect)(function(e){const t=Object(u.getCurrentTeam)(e)||{};return{currentTeamUrl:"".concat(Object(Mn.e)(),"/").concat(t.name)}})(Hn),Bn=a(1431),Gn=a(1108);function Vn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Wn extends y.a.PureComponent{constructor(e){super(e),Vn(this,"handleToggle",(e,t)=>{this.setState({show:e,fileId:t.fileId})}),Vn(this,"onHide",()=>{this.setState({show:!1})}),this.state={show:!1,fileId:""}}componentWillUnmount(){Ln.removeModalListener(S.Q.ActionTypes.TOGGLE_GET_PUBLIC_LINK_MODAL,this.handleToggle)}componentDidMount(){Ln.addModalListener(S.Q.ActionTypes.TOGGLE_GET_PUBLIC_LINK_MODAL,this.handleToggle)}componentDidUpdate(e,t){this.state.show&&!t.show&&this.props.actions.getFilePublicLink(this.state.fileId)}render(){return y.a.createElement(Un,{show:this.state.show,onHide:this.onHide,title:M.fb("get_public_link_modal.title","Copy Public Link"),helpText:M.fb("get_public_link_modal.help","The link below allows anyone to see this file without being registered on this server."),link:this.props.link})}}Vn(Wn,"propTypes",{link:_.a.string,actions:_.a.shape({getFilePublicLink:_.a.func.isRequired}).isRequired}),Vn(Wn,"defaultProps",{link:""});var zn=Object(n.connect)(function(e){return{link:Gn.getFilePublicLink(e).link}},function(e){return{actions:Object(s.bindActionCreators)({getFilePublicLink:Bn.getFilePublicLink},e)}})(Wn),Yn=a(903);function Kn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Qn extends y.a.Component{constructor(e){super(e),Kn(this,"handleKeyPress",e=>{"Enter"===e.key&&this.state.show&&this.handleSubmit()}),Kn(this,"handleSubmit",()=>{const{actions:e}=this.props,{channel:t}=this.state;if(t){const a=t.id;e.leaveChannel(a).then(e=>{e.data&&this.handleHide()})}}),Kn(this,"handleToggle",e=>{this.setState({channel:e,show:null!==e})}),Kn(this,"handleHide",()=>{this.setState({show:!1,channel:null})}),this.state={show:!1,channel:null}}componentDidMount(){Ln.addModalListener(S.Q.ActionTypes.TOGGLE_LEAVE_PRIVATE_CHANNEL_MODAL,this.handleToggle)}componentWillUnmount(){Ln.removeModalListener(S.Q.ActionTypes.TOGGLE_LEAVE_PRIVATE_CHANNEL_MODAL,this.handleToggle)}render(){let e="",t="";this.state.channel&&(e=y.a.createElement(W.c,{id:"leave_private_channel_modal.title",defaultMessage:"Leave Private Channel {channel}",values:{channel:y.a.createElement("b",null,this.state.channel.display_name)}}),t=y.a.createElement(W.c,{id:"leave_private_channel_modal.message",defaultMessage:"Are you sure you wish to leave the private channel {channel}? You must be re-invited in order to re-join this channel in the future.",values:{channel:y.a.createElement("b",null,this.state.channel.display_name)}}));const a=y.a.createElement(W.c,{id:"leave_private_channel_modal.leave",defaultMessage:"Yes, leave channel"});return y.a.createElement(Yn.a,{show:this.state.show,title:e,message:t,confirmButtonClass:"btn btn-danger",confirmButtonText:a,onConfirm:this.handleSubmit,onCancel:this.handleHide})}}Kn(Qn,"propTypes",{actions:_.a.shape({leaveChannel:_.a.func.isRequired}).isRequired,intl:W.i.isRequired});var Zn=Object(W.h)(Qn);var Jn=Object(n.connect)(null,function(e){return{actions:Object(s.bindActionCreators)({leaveChannel:da.e},e)}})(Zn),Xn=a(72),$n=a(163);function es(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function ts(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?es(a,!0).forEach(function(t){as(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):es(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function as(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ns extends y.a.PureComponent{constructor(e){super(e),as(this,"hideModal",()=>{this.setState({show:!1})}),as(this,"onConfirm",e=>{this.hideModal();const t=ts({},this.state.currentUserStatus);if(t.status=this.state.newStatus,this.props.actions.setStatus(t),e){const e={category:x.Preferences.CATEGORY_AUTO_RESET_MANUAL_STATUS,user_id:t.user_id,name:t.user_id,value:"true"};this.props.actions.savePreferences(e.user_id,[e])}}),as(this,"onCancel",e=>{if(this.hideModal(),e){const e=ts({},this.state.currentUserStatus),t={category:x.Preferences.CATEGORY_AUTO_RESET_MANUAL_STATUS,user_id:e.user_id,name:e.user_id,value:"false"};this.props.actions.savePreferences(t.user_id,[t])}}),as(this,"renderModalMessage",()=>this.props.currentUserStatus===S.O.OUT_OF_OFFICE?y.a.createElement(W.c,{id:"modal.manual_status.auto_responder.message_".concat(this.state.newStatus),defaultMessage:'Would you like to switch your status to "{status}" and disable Automatic Replies?',values:{status:Object(M.pb)(this.state.newStatus)}}):y.a.createElement(W.c,{id:"modal.manual_status.message_".concat(this.state.newStatus),defaultMessage:'Would you like to switch your status to "{status}"?',values:{status:Object(M.pb)(this.state.newStatus)}})),this.state={show:!1,currentUserStatus:{},newStatus:e.newStatus||"online"}}componentDidMount(){this.props.actions.autoResetStatus().then(e=>{const t=e.manual,a=""===this.props.autoResetPref;this.setState({currentUserStatus:e,show:Boolean(e.status===S.O.OUT_OF_OFFICE||t&&a)})})}render(){const e=this.state.currentUserStatus.status||"",t="modal.manual_status.title_"+e,a=y.a.createElement(W.c,{id:t,defaultMessage:'Your status is set to "{status}"',values:{status:Object(M.pb)(e)}}),n=this.renderModalMessage(),s=y.a.createElement(W.c,{id:"modal.manual_status.button_".concat(this.state.newStatus),defaultMessage:'Yes, set my status to "{status}"',values:{status:Object(M.pb)(this.state.newStatus)}}),i="modal.manual_status.cancel_"+e,o=y.a.createElement(W.c,{id:i,defaultMessage:'No, keep it as "{status}"',values:{status:Object(M.pb)(e)}}),r=y.a.createElement(W.c,{id:"modal.manual_status.ask",defaultMessage:"Do not ask me again"}),l=this.props.currentUserStatus!==S.O.OUT_OF_OFFICE;return y.a.createElement(Yn.a,{show:this.state.show,title:a,message:n,confirmButtonText:s,onConfirm:this.onConfirm,cancelButtonText:o,onCancel:this.onCancel,onExited:this.props.onHide,showCheckbox:l,checkboxText:r})}}as(ns,"propTypes",{autoResetPref:_.a.string,currentUserStatus:_.a.string,newStatus:_.a.string,onHide:_.a.func,actions:_.a.shape({autoResetStatus:_.a.func.isRequired,setStatus:_.a.func.isRequired,savePreferences:_.a.func.isRequired}).isRequired}),Object(le.b)("modal.manual_status.auto_responder.message_"),Object(le.b)("modal.manual_status.auto_responder.message_away"),Object(le.b)("modal.manual_status.auto_responder.message_dnd"),Object(le.b)("modal.manual_status.auto_responder.message_offline"),Object(le.b)("modal.manual_status.auto_responder.message_online"),Object(le.b)("modal.manual_status.button_"),Object(le.b)("modal.manual_status.button_away"),Object(le.b)("modal.manual_status.button_dnd"),Object(le.b)("modal.manual_status.button_offline"),Object(le.b)("modal.manual_status.button_online"),Object(le.b)("modal.manual_status.cancel_"),Object(le.b)("modal.manual_status.cancel_away"),Object(le.b)("modal.manual_status.cancel_dnd"),Object(le.b)("modal.manual_status.cancel_offline"),Object(le.b)("modal.manual_status.cancel_ooo"),Object(le.b)("modal.manual_status.message_"),Object(le.b)("modal.manual_status.message_away"),Object(le.b)("modal.manual_status.message_dnd"),Object(le.b)("modal.manual_status.message_offline"),Object(le.b)("modal.manual_status.message_online"),Object(le.b)("modal.manual_status.title_"),Object(le.b)("modal.manual_status.title_away"),Object(le.b)("modal.manual_status.title_dnd"),Object(le.b)("modal.manual_status.title_offline"),Object(le.b)("modal.manual_status.title_ooo");var ss=Object(n.connect)(function(e){const{currentUserId:t}=e.entities.users;return{autoResetPref:Object(c.get)(e,x.Preferences.CATEGORY_AUTO_RESET_MANUAL_STATUS,t,""),currentUserStatus:Object(m.getStatusForUserId)(e,t)}},function(e){return{actions:Object(s.bindActionCreators)({autoResetStatus:$n.a,setStatus:o.setStatus,savePreferences:Xn.savePreferences},e)}})(ns);function is(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const os=Object(W.g)({mainHeader:{default:{id:Object(le.b)("shortcuts.header"),defaultMessage:"Keyboard Shortcuts\tCtrl|/"},mac:{id:Object(le.b)("shortcuts.header.mac"),defaultMessage:"Keyboard Shortcuts\t⌘|/"}},navHeader:{id:Object(le.b)("shortcuts.nav.header"),defaultMessage:"Navigation"},navPrev:{default:{id:Object(le.b)("shortcuts.nav.prev"),defaultMessage:"Previous channel:\tAlt|Up"},mac:{id:Object(le.b)("shortcuts.nav.prev.mac"),defaultMessage:"Previous channel:\t⌥|Up"}},navNext:{default:{id:Object(le.b)("shortcuts.nav.next"),defaultMessage:"Next channel:\tAlt|Down"},mac:{id:Object(le.b)("shortcuts.nav.next.mac"),defaultMessage:"Next channel:\t⌥|Down"}},navUnreadPrev:{default:{id:Object(le.b)("shortcuts.nav.unread_prev"),defaultMessage:"Previous unread channel:\tAlt|Shift|Up"},mac:{id:Object(le.b)("shortcuts.nav.unread_prev.mac"),defaultMessage:"Previous unread channel:\t⌥|Shift|Up"}},navUnreadNext:{default:{id:Object(le.b)("shortcuts.nav.unread_next"),defaultMessage:"Next unread channel:\tAlt|Shift|Down"},mac:{id:Object(le.b)("shortcuts.nav.unread_next.mac"),defaultMessage:"Next unread channel:\t⌥|Shift|Down"}},navSwitcher:{default:{id:Object(le.b)("shortcuts.nav.switcher"),defaultMessage:"Quick channel switcher:\tCtrl|K"},mac:{id:Object(le.b)("shortcuts.nav.switcher.mac"),defaultMessage:"Quick channel switcher:\t⌘|K"}},navDMMenu:{default:{id:Object(le.b)("shortcuts.nav.direct_messages_menu"),defaultMessage:"Direct messages menu:\tCtrl|Shift|K"},mac:{id:Object(le.b)("shortcuts.nav.direct_messages_menu.mac"),defaultMessage:"Direct messages menu:\t⌘|Shift|K"}},navSettings:{default:{id:Object(le.b)("shortcuts.nav.settings"),defaultMessage:"Account settings:\tCtrl|Shift|A"},mac:{id:Object(le.b)("shortcuts.nav.settings.mac"),defaultMessage:"Account settings:\t⌘|Shift|A"}},navMentions:{default:{id:Object(le.b)("shortcuts.nav.recent_mentions"),defaultMessage:"Recent mentions:\tCtrl|Shift|M"},mac:{id:Object(le.b)("shortcuts.nav.recent_mentions.mac"),defaultMessage:"Recent mentions:\t⌘|Shift|M"}},navFocusCenter:{default:{id:Object(le.b)("shortcuts.nav.focus_center"),defaultMessage:"Set focus to input field:\tCtrl|Shift|L"},mac:{id:Object(le.b)("shortcuts.nav.focus_center.mac"),defaultMessage:"Set focus to input field:\t⌘|Shift|L"}},msgHeader:{id:Object(le.b)("shortcuts.msgs.header"),defaultMessage:"Messages"},msgInputHeader:{id:Object(le.b)("shortcuts.msgs.input.header"),defaultMessage:"Works inside an empty input field"},msgEdit:{id:Object(le.b)("shortcuts.msgs.edit"),defaultMessage:"Edit last message in channel:\tUp"},msgReply:{id:Object(le.b)("shortcuts.msgs.reply"),defaultMessage:"Reply to last message in channel:\tShift|Up"},msgReprintPrev:{default:{id:Object(le.b)("shortcuts.msgs.reprint_prev"),defaultMessage:"Reprint previous message:\tCtrl|Up"},mac:{id:Object(le.b)("shortcuts.msgs.reprint_prev.mac"),defaultMessage:"Reprint previous message:\t⌘|Up"}},msgReprintNext:{default:{id:Object(le.b)("shortcuts.msgs.reprint_next"),defaultMessage:"Reprint next message:\tCtrl|Down"},mac:{id:Object(le.b)("shortcuts.msgs.reprint_next.mac"),defaultMessage:"Reprint next message:\t⌘|Down"}},msgCompHeader:{id:Object(le.b)("shortcuts.msgs.comp.header"),defaultMessage:"Autocomplete"},msgCompUsername:{id:Object(le.b)("shortcuts.msgs.comp.username"),defaultMessage:"Username:\t@|[a-z]|Tab"},msgCompChannel:{id:Object(le.b)("shortcuts.msgs.comp.channel"),defaultMessage:"Channel:\t~|[a-z]|Tab"},msgCompEmoji:{id:Object(le.b)("shortcuts.msgs.comp.emoji"),defaultMessage:"Emoji:\t:|[a-z]|Tab"},filesHeader:{id:Object(le.b)("shortcuts.files.header"),defaultMessage:"Files"},filesUpload:{default:{id:Object(le.b)("shortcuts.files.upload"),defaultMessage:"Upload files:\tCtrl|U"},mac:{id:Object(le.b)("shortcuts.files.upload.mac"),defaultMessage:"Upload files:\t⌘|U"}},browserHeader:{id:Object(le.b)("shortcuts.browser.header"),defaultMessage:"Built-in Browser Commands"},browserChannelPrev:{default:{id:Object(le.b)("shortcuts.browser.channel_prev"),defaultMessage:"Back in history:\tAlt|Left"},mac:{id:Object(le.b)("shortcuts.browser.channel_prev.mac"),defaultMessage:"Back in history:\t⌘|["}},browserChannelNext:{default:{id:Object(le.b)("shortcuts.browser.channel_next"),defaultMessage:"Forward in history:\tAlt|Right"},mac:{id:Object(le.b)("shortcuts.browser.channel_next.mac"),defaultMessage:"Forward in history:\t⌘|]"}},browserFontIncrease:{default:{id:Object(le.b)("shortcuts.browser.font_increase"),defaultMessage:"Zoom in:\tCtrl|+"},mac:{id:Object(le.b)("shortcuts.browser.font_increase.mac"),defaultMessage:"Zoom in:\t⌘|+"}},browserFontDecrease:{default:{id:Object(le.b)("shortcuts.browser.font_decrease"),defaultMessage:"Zoom out:\tCtrl|-"},mac:{id:Object(le.b)("shortcuts.browser.font_decrease.mac"),defaultMessage:"Zoom out:\t⌘|-"}},browserInputHeader:{id:Object(le.b)("shortcuts.browser.input.header"),defaultMessage:"Works inside an input field"},browserHighlightPrev:{id:Object(le.b)("shortcuts.browser.highlight_prev"),defaultMessage:"Highlight text to the previous line:\tShift|Up"},browserHighlightNext:{id:Object(le.b)("shortcuts.browser.highlight_next"),defaultMessage:"Highlight text to the next line:\tShift|Down"},browserNewline:{id:Object(le.b)("shortcuts.browser.newline"),defaultMessage:"Create a new line:\tShift|Enter"},info:{id:Object(le.b)("shortcuts.info"),defaultMessage:"Begin a message with / for a list of all the commands at your disposal."}});class rs extends y.a.PureComponent{constructor(e){super(e),is(this,"handleToggle",()=>{this.setState({show:!this.state.show})}),is(this,"handleHide",()=>{this.setState({show:!1})}),this.state={show:!1}}componentDidMount(){Ln.addModalListener(S.Q.ActionTypes.TOGGLE_SHORTCUTS_MODAL,this.handleToggle)}componentWillUnmount(){Ln.removeModalListener(S.Q.ActionTypes.TOGGLE_SHORTCUTS_MODAL,this.handleToggle)}getShortcuts(){const{isMac:e}=this.props,t={};return Object.keys(os).forEach(a=>{e&&os[a].mac?t[a]=os[a].mac:!e&&os[a].default?t[a]=os[a].default:t[a]=os[a]}),t}render(){const e=this.getShortcuts(),{formatMessage:t}=this.props.intl;return y.a.createElement(V.a,{dialogClassName:"a11y__modal shortcuts-modal",show:this.state.show,onHide:this.handleHide,onExited:this.handleHide,role:"dialog","aria-labelledby":"shortcutsModalLabel"},y.a.createElement("div",{className:"shortcuts-content"},y.a.createElement(V.a.Header,{closeButton:!0},y.a.createElement(V.a.Title,{componentClass:"h1",id:"shortcutsModalLabel"},y.a.createElement("strong",null,ls(t(e.mainHeader))))),y.a.createElement(V.a.Body,{ref:"modalBody"},y.a.createElement("div",{className:"row"},y.a.createElement("div",{className:"col-sm-4"},y.a.createElement("div",{className:"section"},y.a.createElement("div",null,y.a.createElement("h4",{className:"section-title"},y.a.createElement("strong",null,t(e.navHeader))),ls(t(e.navPrev)),ls(t(e.navNext)),ls(t(e.navUnreadPrev)),ls(t(e.navUnreadNext)),ls(t(e.navSwitcher)),ls(t(e.navDMMenu)),ls(t(e.navSettings)),ls(t(e.navMentions)),ls(t(e.navFocusCenter))))),y.a.createElement("div",{className:"col-sm-4"},y.a.createElement("div",{className:"section"},y.a.createElement("div",null,y.a.createElement("h4",{className:"section-title"},y.a.createElement("strong",null,t(e.msgHeader))),y.a.createElement("span",null,y.a.createElement("strong",null,t(e.msgInputHeader))),y.a.createElement("div",{className:"subsection"},ls(t(e.msgEdit)),ls(t(e.msgReply)),ls(t(e.msgReprintPrev)),ls(t(e.msgReprintNext))),y.a.createElement("span",null,y.a.createElement("strong",null,t(e.msgCompHeader))),y.a.createElement("div",{className:"subsection"},ls(t(e.msgCompUsername)),ls(t(e.msgCompChannel)),ls(t(e.msgCompEmoji)))))),y.a.createElement("div",{className:"col-sm-4"},y.a.createElement("div",{className:"section"},y.a.createElement("div",null,y.a.createElement("h4",{className:"section-title"},y.a.createElement("strong",null,t(e.filesHeader))),ls(t(e.filesUpload))),y.a.createElement("div",{className:"section--lower"},y.a.createElement("h4",{className:"section-title"},y.a.createElement("strong",null,t(e.browserHeader))),ls(t(e.browserChannelPrev)),ls(t(e.browserChannelNext)),ls(t(e.browserFontIncrease)),ls(t(e.browserFontDecrease)),y.a.createElement("span",null,y.a.createElement("strong",null,t(e.browserInputHeader))),y.a.createElement("div",{className:"subsection"},ls(t(e.browserHighlightPrev)),ls(t(e.browserHighlightNext)),ls(t(e.browserNewline))))))),y.a.createElement("div",{className:"info__label"},t(e.info)))))}}function ls(e){if(!e)return null;const t=e.split("\t"),a=y.a.createElement("span",null,t[0]);let n=null;return t.length>1&&(n=t[1].split("|").map(e=>y.a.createElement("span",{className:"shortcut-key",key:e},e))),y.a.createElement("div",{className:"shortcut-line"},a,n)}is(rs,"propTypes",{intl:W.i.isRequired,isMac:_.a.bool.isRequired});var cs=Object(W.h)(rs),ds=a(161),ms=a(48),us=a(893),ps=a.n(us),hs=a(1434),gs=a.n(hs),bs=a(1435),fs=a.n(bs);function Es(e){var t="file-overlay hidden";return"right"===e.overlayType?t+=" right-file-overlay":"center"===e.overlayType&&(t+=" center-file-overlay"),y.a.createElement("div",{className:t},y.a.createElement("div",{className:"overlay__indent"},y.a.createElement("div",{className:"overlay__circle"},y.a.createElement("img",{className:"overlay__files",src:gs.a,alt:"Files"}),y.a.createElement("span",null,y.a.createElement(W.c,{id:"generic_icons.upload",defaultMessage:"Upload Icon"},e=>y.a.createElement("i",{className:"fa fa-upload",title:e})),y.a.createElement(W.c,{id:"upload_overlay.info",defaultMessage:"Drop a file to upload it."})),y.a.createElement("img",{className:"overlay__logo",src:fs.a,width:"100",alt:"Logo"}))))}Es.propTypes={overlayType:_.a.string};var _s=a(1151),vs=a(94),ys=a.n(vs),Cs=a(1005),ws=a.n(Cs);class Ts{constructor(e){this.action=e,this.timer=-1,this.fire=this.fire.bind(this)}fire(){this.action(),this.timer=-1}fireAfter(e){this.timer>=0&&window.clearTimeout(this.timer),this.timer=window.setTimeout(this.fire,e)}cancel(){window.clearTimeout(this.timer)}}function Os(e){return e.views.system.websocketConnectionErrorCount}var Ss=a(162),Ps=a(25),Ms=a(132),Ns=a(35),Is=a(1070);function As(e,t){return async(a,n)=>{const s=n();let i=e,o=i.indexOf(" ");o<0&&(o=i.length);const l=i.substring(0,o).toLowerCase();switch(i=l+" "+i.substring(o,i.length).trim(),l){case"/search":return a(q.i(i.substring(o+1,i.length))),{data:!0};case"/shortcuts":if(P.m()){return{error:{message:Object(M.fb)("create_post.shortcutsNotSupported","Keyboard shortcuts are not supported on your device")}}}return O.m(),{data:!0};case"/leave":{if(t.channel_id&&(t.root_id||t.parent_id))return O.h("/leave is not supported in reply threads. Use it in the center channel instead.",t.channel_id,t.parent_id),{data:!0};const e=Object(p.getCurrentChannel)(s);if(e.type===S.i.PRIVATE_CHANNEL)return O.l(e),{data:!0};if(e.type===S.i.DM_CHANNEL||e.type===S.i.GM_CHANNEL){let t,n;e.type===S.i.DM_CHANNEL?(t=Object(M.J)(e),n=S.i.Preferences.CATEGORY_DIRECT_CHANNEL_SHOW):(t=e.id,n=S.i.Preferences.CATEGORY_GROUP_CHANNEL_SHOW);const i=Object(m.getCurrentUserId)(s);a(Object(Xn.savePreferences)(i,[{category:n,name:t,user_id:i,value:"false"}])),Object(pa.isFavoriteChannel)(e)&&a(Object(r.unfavoriteChannel)(e.id));const o=Object(u.getCurrentTeamId)(s),l=Object(p.getRedirectChannelNameForTeam)(s,o);return z.a.push("".concat(Object(u.getCurrentRelativeTeamUrl)(s),"/channels/").concat(l)),{data:!0}}break}case"/settings":return a(Object(U.b)({ModalId:S.s.USER_SETTINGS,dialogType:Is.a})),{data:!0};case"/collapse":case"/expand":a(q.h())}let c;try{c=await rn.Client4.executeCommand(i,t)}catch(e){return{error:e}}const d=c.goto_location&&Object(Mn.f)(c.goto_location);return"/logout"===i.trim()?(O.e(d?c.goto_location:"/"),{data:!0}):(c.trigger_id&&a({type:tn.IntegrationTypes.RECEIVED_DIALOG_TRIGGER_ID,data:c.trigger_id}),d&&(c.goto_location.startsWith("/")?z.a.push(c.goto_location):c.goto_location.startsWith(Object(Mn.e)())?z.a.push(c.goto_location.substr(Object(Mn.e)().length)):window.open(c.goto_location)),{data:!0})}}function js(e){return async(t,a)=>{const n=a().plugins.components.MessageWillBePosted;if(!n||0===n.length)return{data:e};let s=e;for(const e of n){const t=await e.hook(s);if(t){if(t.error)return{error:t.error};s=t.post}}return{data:s}}}function Rs(e,t){return async(a,n)=>{const s=n().plugins.components.SlashCommandWillBePosted;if(!s||0===s.length)return{data:{message:e,args:t}};let i=e,o=t;for(const e of s){const t=await e.hook(i,o);if(t){if(t.error)return{error:t.error};i=t.message,o=t.args}}return{data:{message:i,args:o}}}}var ks=a(78),Ls=a(445);function xs(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Ds(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?xs(a,!0).forEach(function(t){Us(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):xs(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Us(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function qs(){return Object(ks.a)(S.H.COMMENT_DRAFT,(e,t)=>t?Ds({},t,{uploadsInProgress:[]}):t)}function Hs(e,t){return Object(ks.e)("".concat(S.H.COMMENT_DRAFT).concat(e),t)}function Fs(e,t){const a=Object(Na.makeGetMessageInHistoryItem)(x.Posts.MESSAGE_TYPES.COMMENT);return()=>(n,s)=>{const i=Object(ms.i)(s(),S.H.COMMENT_DRAFT,e);if(""!==i.message&&i.message!==a(s()))return;-1===t?n(Object(L.moveHistoryIndexBack)(x.Posts.MESSAGE_TYPES.COMMENT)):1===t&&n(Object(L.moveHistoryIndexForward)(x.Posts.MESSAGE_TYPES.COMMENT));const o=a(s());n(Hs(e,Ds({},i,{message:o})))}}function Bs(e,t,a){return async(n,s)=>{const i=s(),o=Object(m.getCurrentUserId)(i),r=M.G();let l={file_ids:[],message:a.message,channel_id:e,root_id:t,parent_id:t,pending_post_id:"".concat(o,":").concat(r),user_id:o,create_at:r,metadata:{},props:{}};const c=await n(js(l));return c.error?{error:c.error}:(l=c.data,n(q.b(l,a.fileInfos)))}}function Gs(e,t,a){return(n={})=>async(s,i)=>{const o=Object(ms.i)(i(),S.H.COMMENT_DRAFT,t),{message:r}=o;s(Object(L.addMessageIntoHistory)(r)),s(Hs(t,null));const l=M.a.exec(r),c=Object(Ms.getCustomEmojisByName)(i()),d=new Ls.a(c);l&&d.has(l[2])?s(function(e,t,a){return n=>{"+"===t?n(q.a(e,a)):"-"===t&&n(Object(L.removeReaction)(e,a))}}(a,l[1],l[2])):0!==r.indexOf("/")||n.ignoreSlash?s(Bs(e,t,o)):await s(function(e,t,a){return async(n,s)=>{const i=s(),o=Object(u.getCurrentTeamId)(i);let r={channel_id:e,team_id:o,root_id:t,parent_id:t},{message:l}=a;const c=await n(Rs(l,r));if(c.error)return{error:c.error};if(!c.data.message&&!c.data.args)return{};l=c.data.message,r=c.data.args;const{error:d}=await n(As(l,r));if(d){if(d.sendMessage)return n(Bs(e,t,a));throw d}return{}}}(e,t,o))}}function Vs(e,t){const a=function(e,t){return Object(Ps.createSelector)(m.getCurrentUserId,t=>Object(Na.getPostIdsInChannel)(t,e),e=>t=>Object(Na.getPost)(e,t),(e,a,n)=>{let s=null;if(!a)return s;for(const i of a){const a=n(i)||{};if(!(a.user_id!==e||a.props&&a.props.from_webhook||a.state===S.i.POST_DELETED||a.type&&a.type.startsWith(S.i.SYSTEM_MESSAGE_PREFIX)||Object(Ns.isPostPendingOrFailed)(a))){if(!t){s=a;break}if(a.root_id===t||a.id===t){s=a;break}}}return s})}(e,t),n=Object(Na.makeGetCommentCountForPost)();return()=>(e,t)=>{const s=t(),i=a(s);return i?e(q.j(i.id,n(s,{post:i}),"reply_textbox",M.fb("create_comment.commentTitle","Comment"),!0)):{data:!1}}}var Ws=a(944);function zs(e){if(-1===Array.from(e.types).indexOf("text/html"))return!1;const t=e.getData("text/html");if(!/<table/i.test(t))return!1;const a=function(e){const t=document.createElement("div");return t.innerHTML=e,t.querySelector("table")}(t);return a||!1}function Ys(e){return e.textContent.trim().replace(/\|/g,"\\|").replace(/\n/g," ")||" "}function Ks(e,t){const a=Array.from(e.querySelectorAll("tr")),n=(s=a.shift(),Array.from(s.querySelectorAll("td, th")).map(Ys));var s;const i=n.map(()=>"---"),o="|".concat(n.join(" | "),"|\n|").concat(i.join(" | "),"|\n"),r=a.map(e=>"|".concat(Array.from(e.querySelectorAll("td")).map(Ys).join(" | "),"|")).join("\n"),l="".concat(o).concat(r,"\n");return t?"".concat(t,"\n\n").concat(l):l}var Qs=a(1177),Zs=a(1180);class Js extends y.a.PureComponent{render(){return y.a.createElement("span",this.props,y.a.createElement(W.c,{id:"generic_icons.attach",defaultMessage:"Attachment Icon"},e=>y.a.createElement("svg",{width:"18px",height:"18px",viewBox:"0 0 18 15",role:"icon","aria-label":e},y.a.createElement("g",{fill:"inherit",fillRule:"evenodd"},y.a.createElement("g",{transform:"translate(-1029.000000, -954.000000)",fillRule:"nonzero",fill:"inherit"},y.a.createElement("g",{transform:"translate(25.000000, 937.000000)"},y.a.createElement("g",{transform:"translate(1004.000000, 17.000000)"},y.a.createElement("path",{d:"M5.35,15.56 C3.98,15.56 2.61,15.039 1.567,13.997 C0.557,12.984 0,11.642 0,10.212 C0,8.783 0.557,7.44 1.566,6.429 L6.869,1.126 C8.371,-0.376 10.812,-0.375 12.314,1.125 C13.815,2.627 13.815,5.069 12.314,6.57 L7.011,11.873 C6.094,12.792 4.603,12.79 3.687,11.873 C2.771,10.958 2.771,9.467 3.687,8.551 L8.99,3.248 C9.323,2.916 9.861,2.916 10.193,3.248 C10.525,3.579 10.525,4.118 10.193,4.449 L4.89,9.752 C4.637,10.006 4.637,10.418 4.89,10.672 C5.143,10.923 5.555,10.925 5.809,10.672 L11.113,5.369 C11.952,4.53 11.952,3.166 11.113,2.327 C10.276,1.49 8.911,1.488 8.073,2.327 L2.769,7.631 C2.079,8.32 1.699,9.237 1.699,10.212 C1.699,11.188 2.079,12.104 2.768,12.794 C4.19,14.216 6.502,14.216 7.925,12.798 L7.929,12.794 C7.929,12.793 7.929,12.793 7.929,12.793 L15.355,5.369 C15.687,5.037 16.224,5.037 16.556,5.369 C16.888,5.7 16.888,6.239 16.556,6.57 L8.779,14.348 L8.761,14.332 C7.776,15.15 6.562,15.56 5.35,15.56 Z"}))))))))}}var Xs=a(948);class $s extends y.a.PureComponent{render(){const{canDownload:e,children:t,compactDisplay:a,fileInfo:n,handleImageClick:s,iconClass:i}=this.props,o=n.name,r=Object(Xs.f)(o);let l;return l=a?y.a.createElement(Qs.a,{delayShow:1e3,placement:"top",overlay:y.a.createElement(Zs.a,{id:"file-name__tooltip"},o)},y.a.createElement("a",{href:"#",onClick:s,className:"post-image__name",rel:"noopener noreferrer"},y.a.createElement(Js,{className:"icon"}),r)):e?y.a.createElement("div",{className:i||"post-image__name"},y.a.createElement("a",{href:Object(Ws.getFileDownloadUrl)(n.id),"aria-label":Object(M.fb)("view_image_popover.download","Download").toLowerCase(),download:o,target:"_blank",rel:"noopener noreferrer"},y.a.createElement(Qs.a,{delayShow:1e3,placement:"top",overlay:y.a.createElement(Zs.a,{id:"file-name__tooltip"},Object(M.fb)("view_image_popover.download","Download").toLowerCase())},t||r))):y.a.createElement("span",{className:"post-image__name"},r)}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}($s,"propTypes",{fileInfo:_.a.object.isRequired,handleImageClick:_.a.func,compactDisplay:_.a.bool,canDownload:_.a.bool,children:_.a.element,iconClass:_.a.string});class ei extends y.a.PureComponent{render(){return y.a.createElement(W.c,{id:"generic_icons.remove",defaultMessage:"Remove Icon"},e=>y.a.createElement("i",{className:"fa fa-remove",title:e}))}}a(1456);var ti=a(1187);function ai(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ni extends y.a.PureComponent{constructor(...e){super(...e),ai(this,"handleRemove",()=>{this.props.handleRemove(this.props.clientId)})}render(){let e,t,a=0;const{fileInfo:n,clientId:s}=this.props;if(n){const i=(a=n.percent)&&" (".concat(a.toFixed(0),"%)"),o=Object(Xs.d)(n.type);t=y.a.createElement("div",{className:"file-icon "+M.B(o)}),e=y.a.createElement(y.a.Fragment,null,y.a.createElement($s,{fileInfo:n,index:s,handleImageClick:null,compactDisplay:!1,canDownload:!1}),y.a.createElement("span",{className:"post-image__uploadingTxt"},100===a?y.a.createElement(W.c,{id:"create_post.fileProcessing",defaultMessage:"Processing..."}):y.a.createElement(y.a.Fragment,null,y.a.createElement(W.c,{id:"admin.plugin.uploading",defaultMessage:"Uploading..."}),y.a.createElement("span",null,i))),a&&y.a.createElement(ti.a,{className:"post-image__progressBar",now:a,active:100===a}))}return y.a.createElement("div",{ref:s,key:s,className:"file-preview post-image__column","data-client-id":s},y.a.createElement("div",{className:"post-image__thumbnail"},t),y.a.createElement("div",{className:"post-image__details"},y.a.createElement("div",{className:"post-image__detail_wrapper"},y.a.createElement("div",{className:"post-image__detail"},e)),y.a.createElement("div",null,y.a.createElement("a",{className:"file-preview__remove",onClick:this.handleRemove},y.a.createElement(ei,null)))))}}function si(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}ai(ni,"propTypes",{handleRemove:_.a.func.isRequired,clientId:_.a.string.isRequired,fileInfo:_.a.object});class ii extends y.a.PureComponent{constructor(...e){super(...e),si(this,"handleRemove",e=>{this.props.onRemove(e)})}render(){const e=[];return this.props.fileInfos.forEach((t,a)=>{const n=M.z(t.extension);let s,i="file-preview post-image__column";if(n===S.m.SVG&&this.props.enableSVGs)s=y.a.createElement("img",{alt:"file preview",className:"post-image normal",src:Object(Ws.getFileUrl)(t.id)});else if(n===S.m.IMAGE){let e="post-image";t.width<S.Q.THUMBNAIL_WIDTH&&t.height<S.Q.THUMBNAIL_HEIGHT?e+=" small":e+=" normal";let a=Object(Ws.getFileThumbnailUrl)(t.id);M.V(t.extension)&&!t.has_preview_image&&(a=Object(Ws.getFileUrl)(t.id)),s=y.a.createElement("div",{className:e,style:{backgroundImage:"url(".concat(a,")"),backgroundSize:"cover"}})}else i+=" custom-file",s=y.a.createElement("div",{className:"file-icon "+M.B(n)});e.push(y.a.createElement("div",{key:t.id,className:i},y.a.createElement("div",{className:"post-image__thumbnail"},s),y.a.createElement("div",{className:"post-image__details"},y.a.createElement("div",{className:"post-image__detail_wrapper"},y.a.createElement("div",{className:"post-image__detail"},y.a.createElement($s,{fileInfo:t,index:a,handleImageClick:null,compactDisplay:!1,canDownload:!1}),y.a.createElement("span",{className:"post-image__type"},t.extension.toUpperCase()),y.a.createElement("span",{className:"post-image__size"},M.p(t.size)))),y.a.createElement("div",null,y.a.createElement("a",{className:"file-preview__remove",onClick:this.handleRemove.bind(this,t.id)},y.a.createElement(ei,null))))))}),this.props.uploadsInProgress.forEach(t=>{e.push(y.a.createElement(ni,{key:t,clientId:t,fileInfo:this.props.uploadsProgressPercent[t],handleRemove:this.handleRemove}))}),y.a.createElement("div",{className:"file-preview__container",ref:"container"},e)}}si(ii,"propTypes",{enableSVGs:_.a.bool.isRequired,onRemove:_.a.func.isRequired,fileInfos:_.a.arrayOf(_.a.object).isRequired,uploadsInProgress:_.a.array,uploadsProgressPercent:_.a.object}),si(ii,"defaultProps",{fileInfos:[],uploadsInProgress:[],uploadsProgressPercent:{}});var oi=Object(n.connect)(function(e){return{enableSVGs:"true"===Object(d.getConfig)(e).EnableSVGs}})(ii),ri=a(37),li=a(1198),ci=a.n(li),di=a(65);function mi(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function ui(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function pi(e,t,a,n,s){return n=>(n({type:tn.FileTypes.UPLOAD_FILES_REQUEST}),ci.a.post(rn.Client4.getFilesRoute()).set(rn.Client4.getOptions({method:"post"}).headers).attach("files",e,t).field("channel_id",a).field("client_ids",s).accept("application/json"))}function hi(e,t,a,n,s,{err:i,res:o}){return(e,t)=>{if(i){let r;r=o&&o.body&&o.body.id?o.body:0!==i.status&&i.status?{message:M.fb("channel_loader.unknown_error","We received an unexpected status code from the server.")+" ("+i.status+")"}:{message:M.fb("file_upload.generic_error","There was a problem uploading your files.")},Object(di.forceLogoutIfNecessary)(i,e,t);const l={type:tn.FileTypes.UPLOAD_FILES_FAILURE,clientIds:[s],channelId:a,rootId:n,error:i};return e(Object(ri.batchActions)([l,Object(H.getLogErrorAction)(i)])),{error:r}}const r=o.body.file_infos.map((e,t)=>(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?mi(a,!0).forEach(function(t){ui(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):mi(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e})({},e,{clientId:o.body.client_ids[t]}));return e(Object(ri.batchActions)([{type:tn.FileTypes.RECEIVED_UPLOAD_FILES,data:r,channelId:a,rootId:n},{type:tn.FileTypes.UPLOAD_FILES_SUCCESS}])),{data:o.body}}}var gi=a(224),bi=a.n(gi);var fi=a(939),Ei=a(912);function _i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function vi(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_i(a,!0).forEach(function(t){yi(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_i(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function yi(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Ci=Object(W.g)({limited:{id:Object(le.b)("file_upload.limited"),defaultMessage:"Uploads limited to {count, number} files maximum. Please use additional posts for more files."},filesAbove:{id:Object(le.b)("file_upload.filesAbove"),defaultMessage:"Files above {max}MB could not be uploaded: {filenames}"},fileAbove:{id:Object(le.b)("file_upload.fileAbove"),defaultMessage:"File above {max}MB could not be uploaded: {filename}"},zeroBytesFiles:{id:Object(le.b)("file_upload.zeroBytesFiles"),defaultMessage:"You are uploading empty files: {filenames}"},zeroBytesFile:{id:Object(le.b)("file_upload.zeroBytesFile"),defaultMessage:"You are uploading an empty file: {filename}"},pasted:{id:Object(le.b)("file_upload.pasted"),defaultMessage:"Image Pasted at "},uploadFile:{id:Object(le.b)("file_upload.upload_files"),defaultMessage:"Upload files"}}),wi=500,Ti={left:"inherit",right:0,bottom:"100%",top:"auto"};class Oi extends v.PureComponent{constructor(e){super(e),yi(this,"fileUploadSuccess",(e,t,a)=>{if(e){this.props.onFileUpload(e.file_infos,e.client_ids,t,a);const s=Object.assign({},this.state.requests);for(var n=0;n<e.client_ids.length;n++)Reflect.deleteProperty(s,e.client_ids[n]);this.setState({requests:s})}}),yi(this,"fileUploadFail",(e,t,a,n)=>{this.props.onUploadError(e,t,a,n)}),yi(this,"pluginUploadFiles",e=>{this.props.onUploadError(null),this.uploadFiles(e)}),yi(this,"checkPluginHooksAndUploadFiles",e=>{this.props.onUploadError(null);let t=Array.from(e).sort((e,t)=>e.name.localeCompare(t.name,this.props.locale,{numeric:!0}));const a=this.props.pluginFilesWillUploadHooks;for(const e of a){const a=e.hook(t,this.pluginUploadFiles);a.message&&this.props.onUploadError(a.message),t=a.files}t&&this.uploadFiles(t)}),yi(this,"uploadFiles",e=>{const{currentChannelId:t,rootId:a}=this.props,n=S.Q.MAX_UPLOAD_FILES-this.props.fileCount;let s=0;const i=[],o=[],r=[];for(let l=0;l<e.length&&s<n;l++){if(e[l].size>this.props.maxFileSize){i.push(e[l]);continue}0===e[l].size&&o.push(e[l]);const n=Object(M.r)(),c=this.props.actions.uploadFile(e[l],e[l].name,t,a,n);c.on("progress",t=>{this.props.onUploadProgress({clientId:n,name:e[l].name,percent:t.percent,type:e[l].type})}),c.end((s,i)=>{const{error:o,data:r}=this.props.actions.handleFileUploadEnd(e[l],e[l].name,t,a,n,{err:s,res:i});o?this.fileUploadFail(o,n,t,a):r&&this.fileUploadSuccess(r,t,a)}),this.setState({requests:vi({},this.state.requests,{[n]:c})}),r.push(n),s+=1}this.props.onUploadStart(r,t);const{formatMessage:l}=this.context.intl,c=[];if(e.length>n&&c.push(l(Ci.limited,{count:S.Q.MAX_UPLOAD_FILES})),i.length>1){var d=i.map(e=>e.name).join(", ");c.push(l(Ci.filesAbove,{max:this.props.maxFileSize/1048576,filenames:d}))}else i.length>0&&c.push(l(Ci.fileAbove,{max:this.props.maxFileSize/1048576,filename:i[0].name}));if(o.length>1){var m=o.map(e=>e.name).join(", ");c.push(l(Ci.zeroBytesFiles,{filenames:m}))}else o.length>0&&c.push(l(Ci.zeroBytesFile,{filename:o[0].name}));c.length>0&&this.props.onUploadError(c.join(", "))}),yi(this,"handleChange",e=>{e.target.files.length>0&&(this.checkPluginHooksAndUploadFiles(e.target.files),Object(M.d)(e.target)),this.props.onFileUploadChange()}),yi(this,"handleDrop",e=>{if(!this.props.canUploadFiles)return void this.props.onUploadError(Object(M.fb)("file_upload.disabled","File attachments are disabled."));this.props.onUploadError(null);const t=e.dataTransfer.items||[],a=e.dataTransfer.files,n=[];Array.from(a).forEach((e,a)=>{const s=t[a];s&&s.webkitGetAsEntry&&s.webkitGetAsEntry().isDirectory||n.push(e)});const s=e.dataTransfer.types;if(s){if(s.includes&&!s.includes("Files"))return;if(s.contains&&!s.contains("Files"))return}0!==n.length?(n.length&&this.checkPluginHooksAndUploadFiles(n),this.props.onFileUploadChange()):this.props.onUploadError(Object(M.fb)("file_upload.drag_folder","Folders cannot be uploaded. Please drag all files separately."))}),yi(this,"registerDragEvents",(e,t)=>{const a=this,n=document.querySelector(t),s=new Ts(()=>{n.classList.add("hidden")});let i={};i=this.props.canUploadFiles?{enter(e){var t=e.detail.dataTransfer;Object(M.U)(t)&&n.classList.remove("hidden")},leave(e){var t=e.detail.dataTransfer;Object(M.U)(t)&&n.classList.add("hidden"),s.cancel()},over(){s.fireAfter(wi)},drop(e){n.classList.add("hidden"),s.cancel(),a.handleDrop(e.detail)}}:{drop(e){a.handleDrop(e.detail)}},this.unbindDragsterEvents=function(e,t){const a=()=>{},n={enter:a,leave:a,over:a,drop:a},s=Object.assign(n,t),i=document.querySelector(e);if(!i)return a;let o=!1,r=!1;const l=e=>{if(o)return void(r=!0);o=!0;const t=new CustomEvent("dragster:enter",{detail:e});i.dispatchEvent(t),e.preventDefault()},c=e=>{if(r?r=!1:o&&(o=!1),!o&&!r){const t=new CustomEvent("dragster:leave",{detail:e});i.dispatchEvent(t)}e.preventDefault()},d=e=>{const t=new CustomEvent("dragster:over",{detail:e});i.dispatchEvent(t),e.preventDefault()},m=e=>{if(r?r=!1:o&&(o=!1),!o&&!r){const t=new CustomEvent("dragster:drop",{detail:e});i.dispatchEvent(t)}e.preventDefault()};return i.addEventListener("dragenter",l),i.addEventListener("dragleave",c),i.addEventListener("dragover",d),i.addEventListener("drop",m),i.addEventListener("dragster:enter",s.enter),i.addEventListener("dragster:leave",s.leave),i.addEventListener("dragster:over",s.over),i.addEventListener("dragster:drop",s.drop),()=>{i.removeEventListener("dragenter",l),i.removeEventListener("dragleave",c),i.removeEventListener("dragover",d),i.removeEventListener("drop",m),i.removeEventListener("dragster:enter",s.enter),i.removeEventListener("dragster:leave",s.leave),i.removeEventListener("dragster:over",s.over),i.removeEventListener("dragster:drop",s.drop)}}(e,i)}),yi(this,"containsEventTarget",(e,t)=>e&&e.contains(t)),yi(this,"pasteUpload",e=>{const{formatMessage:t}=this.context.intl;if(!e.clipboardData||!e.clipboardData.items||zs(e.clipboardData))return;const a=this.props.getTarget(),n=bi.a.findDOMNode(a);if(!this.containsEventTarget(n,e.target))return;this.props.onUploadError(null);const s=[];for(let t=0;t<e.clipboardData.items.length;t++){const a=e.clipboardData.items[t];"file"===a.kind&&s.push(a)}if(s&&s.length>0){if(!this.props.canUploadFiles)return void this.props.onUploadError(Object(M.fb)("file_upload.disabled","File attachments are disabled."));const e=[];for(let a=0;a<s.length;a++){const n=s[a].getAsFile();if(!n)continue;var i=new Date;let r=i.getHours();r=r<10?"0".concat(r):"".concat(r);let l=i.getMinutes();l=l<10?"0".concat(l):"".concat(l);var o="";n.name?n.name.includes(".")&&(o=n.name.substr(n.name.lastIndexOf("."))):s[a].type.includes("/")&&(o="."+s[a].type.split("/")[1].toLowerCase());const c=t(Ci.pasted)+i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate()+" "+r+"-"+l+o,d=new Blob([n],{type:n.type});d.name=c,e.push(d)}e.length>0&&(this.checkPluginHooksAndUploadFiles(e),this.props.onFileUploadChange())}}),yi(this,"keyUpload",e=>{if(Object(M.e)(e)&&Object(M.X)(e,S.Q.KeyCodes.U)){if(e.preventDefault(),!this.props.canUploadFiles)return void this.props.onUploadError(Object(M.fb)("file_upload.disabled","File attachments are disabled."));const t="post"===this.props.postType&&"post_textbox"===document.activeElement.id,a="comment"===this.props.postType&&"reply_textbox"===document.activeElement.id;(t||a)&&(this.fileInput.current.focus(),this.fileInput.current.click())}}),yi(this,"cancelUpload",e=>{const t=Object.assign({},this.state.requests),a=t[e];a&&(a.abort(),Reflect.deleteProperty(t,e),this.setState({requests:t}))}),yi(this,"handleMaxUploadReached",e=>{e&&e.preventDefault();const{onUploadError:t}=this.props,{formatMessage:a}=this.context.intl;t(a(Ci.limited,{count:S.Q.MAX_UPLOAD_FILES}))}),yi(this,"toggleMenu",e=>{this.setState({menuOpen:e})}),yi(this,"handleLocalFileUploaded",e=>{S.Q.MAX_UPLOAD_FILES-this.props.fileCount>0?this.props.onClick&&this.props.onClick():this.handleMaxUploadReached(e),this.setState({menuOpen:!1})}),yi(this,"simulateInputClick",()=>{this.fileInput.current.click()}),this.state={requests:{},menuOpen:!1},this.fileInput=y.a.createRef()}componentDidMount(){"post"===this.props.postType?this.registerDragEvents(".row.main",".center-file-overlay"):"comment"===this.props.postType&&this.registerDragEvents(".post-right__container",".right-file-overlay"),document.addEventListener("paste",this.pasteUpload),document.addEventListener("keydown",this.keyUpload)}componentWillUnmount(){document.removeEventListener("paste",this.pasteUpload),document.removeEventListener("keydown",this.keyUpload),this.unbindDragsterEvents()}render(){const{formatMessage:e}=this.context.intl;let t=!0;Object(P.n)()&&(t=!1);let a="";Object(P.h)()&&(a="image/*");const n=S.Q.MAX_UPLOAD_FILES-this.props.fileCount;let s;const i=e({id:"accessibility.button.attachment",defaultMessage:"attachment"});if(0===this.props.pluginFileUploadMethods.length)s=y.a.createElement("div",null,y.a.createElement("button",{type:"button",id:"fileUploadButton","aria-label":i,className:"style--none post-action icon icon--attachment",onClick:this.simulateInputClick},y.a.createElement(Js,null)),y.a.createElement("input",{id:"fileUploadInput",tabIndex:"-1","aria-label":e(Ci.uploadFile),ref:this.fileInput,type:"file",onChange:this.handleChange,onClick:this.handleLocalFileUploaded,multiple:t,accept:a}));else{const n=this.props.pluginFileUploadMethods.map(e=>y.a.createElement("li",{key:e.pluginId+"_fileuploadpluginmenuitem",onClick:()=>{e.action&&e.action(this.checkPluginHooksAndUploadFiles),this.setState({menuOpen:!1})}},y.a.createElement("a",{href:"#"},y.a.createElement("span",{className:"margin-right"},e.icon),e.text)));s=y.a.createElement("div",null,y.a.createElement("input",{tabIndex:"-1","aria-label":e(Ci.uploadFile),ref:this.fileInput,type:"file",className:"file-attachment-menu-item-input",onChange:this.handleChange,onClick:this.handleLocalFileUploaded,multiple:t,accept:a}),y.a.createElement(fi.a,null,y.a.createElement("button",{type:"button","aria-label":i,className:"style--none post-action"},y.a.createElement("div",{id:"fileUploadButton",className:"icon icon--attachment"},y.a.createElement(Js,null))),y.a.createElement(Ei.a,{openLeft:!0,openUp:!0,ariaLabel:e({id:"file_upload.menuAriaLabel",defaultMessage:"Upload type selector"}),customStyles:Ti},y.a.createElement("li",null,y.a.createElement("a",{href:"#",onClick:this.simulateInputClick},y.a.createElement("span",{className:"margin-right"},y.a.createElement("i",{className:"fa fa-laptop"})),y.a.createElement(W.c,{id:"yourcomputer",defaultMessage:"Your computer"}))),n)))}return this.props.canUploadFiles||(s=null),y.a.createElement("div",{className:n<=0?" style--none btn-file__disabled":"style--none"},s)}}yi(Oi,"propTypes",{currentChannelId:_.a.string.isRequired,rootId:_.a.string,fileCount:_.a.number.isRequired,getTarget:_.a.func.isRequired,locale:_.a.string.isRequired,onClick:_.a.func,onFileUpload:_.a.func,onFileUploadChange:_.a.func,onUploadError:_.a.func,onUploadStart:_.a.func,postType:_.a.string,maxFileSize:_.a.number,canUploadFiles:_.a.bool.isRequired,pluginFileUploadMethods:_.a.arrayOf(_.a.object),pluginFilesWillUploadHooks:_.a.arrayOf(_.a.object),onUploadProgress:_.a.func.isRequired,actions:_.a.shape({uploadFile:_.a.func.isRequired,handleFileUploadEnd:_.a.func.isRequired}).isRequired}),yi(Oi,"contextTypes",{intl:W.i}),yi(Oi,"defaultProps",{pluginFileUploadMethods:[],pluginFilesWillUploadHooks:[]});var Si=Object(n.connect)(function(e){const t=Object(d.getConfig)(e),a=parseInt(t.MaxFileSize,10);return{currentChannelId:Object(p.getCurrentChannelId)(e),maxFileSize:a,canUploadFiles:Object(Xs.b)(t),locale:Object(Ss.a)(e),pluginFileUploadMethods:e.plugins.components.FileUploadMethod,pluginFilesWillUploadHooks:e.plugins.components.FilesWillUploadHook}},function(e){return{actions:Object(s.bindActionCreators)({uploadFile:pi,handleFileUploadEnd:hi},e)}},null,{withRef:!0})(Oi),Pi=a(1465);function Mi(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ni extends y.a.Component{constructor(...e){super(...e),Mi(this,"getTypingText",()=>{let e=[],t=0;if(this.props.typingUsers&&(t=(e=[...this.props.typingUsers]).length),0===t)return"";if(1===t)return y.a.createElement(W.c,{id:"msg_typing.isTyping",defaultMessage:"{user} is typing...",values:{user:e[0]}});const a=e.pop();return y.a.createElement(W.c,{id:"msg_typing.areTyping",defaultMessage:"{users} and {last} are typing...",values:{users:e.join(", "),last:a}})})}render(){return y.a.createElement("span",{className:"msg-typing"},this.getTypingText())}}Mi(Ni,"propTypes",{typingUsers:_.a.array.isRequired});var Ii=Object(n.connect)(function(){const e=Object(Pi.makeGetUsersTypingByChannelAndPost)();return function(t,a){return{typingUsers:e(t,{channelId:a.channelId,postId:a.postId})}}})(Ni);class Ai extends y.a.Component{shouldComponentUpdate(e){return e.show!==this.props.show}render(){return y.a.createElement(V.a,{dialogClassName:"a11y__modal",show:this.props.show,onHide:this.props.onHide,role:"dialog","aria-labelledby":"postDeletedModalLabel"},y.a.createElement(V.a.Header,{closeButton:!0},y.a.createElement(V.a.Title,{componentClass:"h1",id:"postDeletedModalLabel"},y.a.createElement(W.c,{id:"post_delete.notPosted",defaultMessage:"Comment could not be posted"}))),y.a.createElement(V.a.Body,null,y.a.createElement("p",null,y.a.createElement(W.c,{id:"post_delete.someone",defaultMessage:"Someone deleted the message on which you tried to post a comment."}))),y.a.createElement(V.a.Footer,null,y.a.createElement("button",{type:"button",className:"btn btn-primary",autoFocus:!0,onClick:this.props.onHide},y.a.createElement(W.c,{id:"post_delete.okay",defaultMessage:"Okay"}))))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Ai,"propTypes",{show:_.a.bool.isRequired,onHide:_.a.func.isRequired});var ji=a(896);function Ri(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ki extends y.a.PureComponent{constructor(...e){super(...e),Ri(this,"renderSlashCommandError",()=>{if(!this.props.submittedMessage)return this.props.error.message;const e=this.props.submittedMessage.split(" ")[0];return y.a.createElement(y.a.Fragment,null,y.a.createElement(W.c,{id:"message_submit_error.invalidCommand",defaultMessage:"Command with a trigger of '{command}' not found. ",values:{command:e}}),y.a.createElement("a",{href:"#",onClick:this.props.handleSubmit},y.a.createElement(W.c,{id:"message_submit_error.sendAsMessageLink",defaultMessage:"Click here to send as a message."})))})}render(){const e=this.props.error;if(!e)return null;let t=e.message;return Object(Me.k)(e)&&(t=this.renderSlashCommandError()),y.a.createElement("div",{className:"has-error"},y.a.createElement("label",{className:"control-label"},t))}}Ri(ki,"propTypes",{error:_.a.object.isRequired,handleSubmit:_.a.func.isRequired,submittedMessage:_.a.string});var Li=ki;function xi(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Di(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?xi(a,!0).forEach(function(t){Ui(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):xi(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Ui(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class qi extends y.a.PureComponent{constructor(e){super(e),Ui(this,"updatePreview",e=>{this.setState({showPreview:e})}),Ui(this,"focusTextboxIfNecessary",e=>{this.props.rhsExpanded&&(document.getElementsByClassName("channel-switch-modal").length||Object(Me.p)(e,document.activeElement)&&this.focusTextbox())}),Ui(this,"pasteHandler",e=>{if(!e.clipboardData||!e.clipboardData.items||"reply_textbox"!==e.target.id)return;const t=zs(e.clipboardData);if(!t)return;e.preventDefault();const{draft:a}=this.state,n=Ks(t,a.message.trim()),s=Di({},a,{message:n});this.props.onUpdateCommentDraft(s),this.setState({draft:s})}),Ui(this,"handleNotifyAllConfirmation",e=>{this.hideNotifyAllModal(),this.doSubmit(e)}),Ui(this,"hideNotifyAllModal",()=>{this.setState({showConfirmModal:!1})}),Ui(this,"showNotifyAllModal",()=>{this.setState({showConfirmModal:!0})}),Ui(this,"toggleEmojiPicker",()=>{this.setState({showEmojiPicker:!this.state.showEmojiPicker})}),Ui(this,"hideEmojiPicker",()=>{this.setState({showEmojiPicker:!1})}),Ui(this,"handleEmojiClick",e=>{const t=e.name||e.aliases[0];if(!t)return;const{draft:a}=this.state;let n="";const s=Di({},a,{message:n=""===a.message?":".concat(t,": "):/\s+$/.test(a.message)?"".concat(a.message,":").concat(t,": "):"".concat(a.message," :").concat(t,": ")});this.props.onUpdateCommentDraft(s),this.draftsForPost[this.props.rootId]=s,this.setState({showEmojiPicker:!1,draft:s})}),Ui(this,"handleGifClick",e=>{const{draft:t}=this.state;let a="";const n=Di({},t,{message:a=""===t.message?e:/\s+$/.test(t.message)?"".concat(t.message).concat(e," "):"".concat(t.message," ").concat(e," ")});this.props.onUpdateCommentDraft(n),this.draftsForPost[this.props.rootId]=n,this.setState({showEmojiPicker:!1,draft:n}),this.focusTextbox()}),Ui(this,"handlePostError",e=>{this.setState({postError:e})}),Ui(this,"handleSubmit",async e=>{e.preventDefault();const t=this.props.channelMembersCount;if(this.props.enableConfirmNotificationsToChannel&&t>S.Q.NOTIFY_ALL_MEMBERS&&Object(Me.c)(this.state.draft.message)){if(this.props.isTimezoneEnabled){const{data:e}=await this.props.getChannelTimezones(this.props.channelId);e?this.setState({channelTimezoneCount:e.length}):this.setState({channelTimezoneCount:0})}this.showNotifyAllModal()}else await this.doSubmit(e)}),Ui(this,"doSubmit",async e=>{e&&e.preventDefault();const{draft:t}=this.state;if(!this.shouldEnableAddButton())return;if(t.uploadsInProgress.length>0)return;if(this.state.postError)return this.setState({errorClass:"animation--highlight"}),void setTimeout(()=>{this.setState({errorClass:null})},S.Q.ANIMATION_TIMEOUT);if(this.props.rootDeleted)return void this.showPostDeletedModal();const a=Date.now()-this.lastBlurAt<150;this.focusTextbox(a);const n=this.state.serverError;let s=!1;Object(Me.k)(n)&&t.message===n.submittedMessage&&(s=!0);const i={ignoreSlash:s};try{await this.props.onSubmit(i),this.setState({postError:null,serverError:null})}catch(e){return Object(Me.k)(e)&&this.props.onUpdateCommentDraft(t),e.submittedMessage=t.message,void this.setState({serverError:e})}this.setState({draft:Di({},this.props.draft,{uploadsInProgress:[]})})}),Ui(this,"commentMsgKeyPress",e=>{const{ctrlSend:t,codeBlockOnCtrlEnter:a}=this.props,{allowSending:n,withClosedCodeBlock:s,message:i}=Object(Me.o)(e,this.state.draft.message,t,a);if(n){if(e.persist(),this.refs.textbox&&this.refs.textbox.getWrappedInstance().blur(),s&&i){const{draft:t}=this.state,a=Di({},t,{message:i});this.props.onUpdateCommentDraft(a),this.setState({draft:a},()=>this.handleSubmit(e)),this.draftsForPost[this.props.rootId]=a}else this.handleSubmit(e);this.updatePreview(!1),setTimeout(()=>{this.focusTextbox()})}this.emitTypingEvent()}),Ui(this,"emitTypingEvent",()=>{const{channelId:e,rootId:t}=this.props;O.d(e,t)}),Ui(this,"scrollToBottom",()=>{const e=ys()(".post-right__scroll");e[0]&&e.parent().scrollTop(e[0].scrollHeight)}),Ui(this,"handleChange",e=>{const t=e.target.value;let a=this.state.serverError;Object(Me.k)(a)&&(a=null);const{draft:n}=this.state,s=Di({},n,{message:t});this.props.onUpdateCommentDraft(s),this.setState({draft:s,serverError:a},()=>{this.scrollToBottom()}),this.draftsForPost[this.props.rootId]=s}),Ui(this,"handleKeyDown",e=>{if((this.props.ctrlSend||this.props.codeBlockOnCtrlEnter)&&M.X(e,S.Q.KeyCodes.ENTER)&&(e.ctrlKey||e.metaKey))return this.updatePreview(!1),void this.commentMsgKeyPress(e);const{draft:t}=this.state,{message:a}=t;if(!e.ctrlKey&&!e.metaKey&&!e.altKey&&!e.shiftKey&&M.X(e,S.Q.KeyCodes.UP)&&""===a){e.preventDefault(),this.refs.textbox&&this.refs.textbox.getWrappedInstance().blur();const{data:t}=this.props.onEditLatestPost();t||this.focusTextbox(!0)}!e.ctrlKey&&!e.metaKey||e.altKey||e.shiftKey||(M.X(e,S.Q.KeyCodes.UP)?(e.preventDefault(),this.props.onMoveHistoryIndexBack()):M.X(e,S.Q.KeyCodes.DOWN)&&(e.preventDefault(),this.props.onMoveHistoryIndexForward()))}),Ui(this,"handleFileUploadChange",()=>{this.focusTextbox()}),Ui(this,"handleUploadStart",e=>{const{draft:t}=this.state,a=Di({},t,{uploadsInProgress:[...t.uploadsInProgress,...e]});this.props.onUpdateCommentDraft(a),this.setState({draft:a}),this.draftsForPost[this.props.rootId]=a,this.focusTextbox()}),Ui(this,"handleUploadProgress",({clientId:e,name:t,percent:a,type:n})=>{const s=Di({},this.state.uploadsProgressPercent,{[e]:{percent:a,name:t,type:n}});this.setState({uploadsProgressPercent:s})}),Ui(this,"handleFileUploadComplete",(e,t,a,n)=>{const s=this.draftsForPost[n],i=[...s.uploadsInProgress],o=Object(Ws.sortFileInfos)([...s.fileInfos,...e],this.props.locale);for(let e=0;e<t.length;e++){const a=i.indexOf(t[e]);-1!==a&&i.splice(a,1)}const r=Di({},s,{fileInfos:o,uploadsInProgress:i});this.props.updateCommentDraftWithRootId(n,r),this.draftsForPost[n]=r,this.props.rootId===n&&this.setState({draft:r})}),Ui(this,"handleUploadError",(e,t=-1,a=-1)=>{if(-1!==t){const e=Di({},this.draftsForPost[a]),n=[...e.uploadsInProgress],s=n.indexOf(t);-1!==s&&n.splice(s,1);const i=Di({},e,{uploadsInProgress:n});this.props.updateCommentDraftWithRootId(a,i),this.draftsForPost[a]=i,this.props.rootId===a&&this.setState({draft:i})}let n=e;e&&"string"==typeof e&&(n=new Error(e)),this.setState({serverError:n})}),Ui(this,"removePreview",e=>{const{draft:t}=this.state,a=[...t.fileInfos],n=[...t.uploadsInProgress];this.handleUploadError(null);let s=a.findIndex(t=>t.id===e);-1===s?-1!==(s=n.indexOf(e))&&(n.splice(s,1),this.refs.fileUpload&&this.refs.fileUpload.getWrappedInstance()&&this.refs.fileUpload.getWrappedInstance().cancelUpload(e)):a.splice(s,1);const i=Di({},t,{fileInfos:a,uploadsInProgress:n});this.props.onUpdateCommentDraft(i),this.setState({draft:i}),this.draftsForPost[this.props.rootId]=i,this.handleFileUploadChange()}),Ui(this,"getFileCount",()=>{const{draft:{fileInfos:e,uploadsInProgress:t}}=this.state;return e.length+t.length}),Ui(this,"getFileUploadTarget",()=>this.refs.textbox.getWrappedInstance()),Ui(this,"getCreateCommentControls",()=>this.refs.createCommentControls),Ui(this,"shouldEnableAddButton",()=>!!this.props.enableAddButton||Object(Me.k)(this.state.serverError)),Ui(this,"focusTextbox",(e=!1)=>{!this.refs.textbox||!e&&P.m()||this.refs.textbox.getWrappedInstance().focus()}),Ui(this,"showPostDeletedModal",()=>{this.setState({showPostDeletedModal:!0})}),Ui(this,"hidePostDeletedModal",()=>{this.setState({showPostDeletedModal:!1}),this.props.resetCreatePostRequest()}),Ui(this,"handleBlur",()=>{this.lastBlurAt=Date.now()}),Ui(this,"handleHeightChange",(e,t)=>{this.setState({renderScrollbar:e>t})}),this.state={showPostDeletedModal:!1,showConfirmModal:!1,showEmojiPicker:!1,showPreview:!1,draft:{message:"",uploadsInProgress:[],fileInfos:[]},channelTimezoneCount:0,uploadsProgressPercent:{},renderScrollbar:!1},this.lastBlurAt=0,this.draftsForPost={},this.doInitialScrollToBottom=!1}UNSAFE_componentWillMount(){this.props.clearCommentDraftUploads(),this.props.onResetHistoryIndex(),this.setState({draft:Di({},this.props.draft,{uploadsInProgress:[]})})}componentDidMount(){this.focusTextbox(),document.addEventListener("paste",this.pasteHandler),document.addEventListener("keydown",this.focusTextboxIfNecessary),""!==this.props.draft.message&&(this.doInitialScrollToBottom=!0)}componentWillUnmount(){this.props.resetCreatePostRequest(),document.removeEventListener("paste",this.pasteHandler),document.removeEventListener("keydown",this.focusTextboxIfNecessary)}UNSAFE_componentWillReceiveProps(e){"api.post.create_post.root_id.app_error"===e.createPostErrorId&&e.createPostErrorId!==this.props.createPostErrorId&&this.showPostDeletedModal(),e.rootId!==this.props.rootId&&this.setState({draft:Di({},e.draft,{uploadsInProgress:[]})}),this.props.messageInHistory!==e.messageInHistory&&this.setState({draft:e.draft})}componentDidUpdate(e,t){t.draft.uploadsInProgress.length<this.state.draft.uploadsInProgress.length&&this.scrollToBottom(),t.showEmojiPicker&&!this.state.showEmojiPicker&&this.focusTextbox(),e.rootId===this.props.rootId&&e.selectedPostFocussedAt===this.props.selectedPostFocussedAt||this.focusTextbox(),this.doInitialScrollToBottom&&(this.scrollToBottom(),this.doInitialScrollToBottom=!1)}render(){const{draft:e}=this.state,{readOnlyChannel:t}=this.props,{formatMessage:a}=this.context.intl,n=this.shouldEnableAddButton(),{renderScrollbar:s}=this.state,i=M.fb("accessibility.sections.rhsFooter","reply input region"),o=y.a.createElement(W.c,{id:"notify_all.title.confirm",defaultMessage:"Confirm sending notifications to entire channel"}),r=y.a.createElement(W.c,{id:"notify_all.confirm",defaultMessage:"Confirm"});let l="";l=this.state.channelTimezoneCount&&this.props.isTimezoneEnabled?y.a.createElement(ji.b,{id:"notify_all.question_timezone",defaultMessage:"By using @all or @channel you are about to send notifications to **{totalMembers} people** in **{timezones, number} {timezones, plural, one {timezone} other {timezones}}**. Are you sure you want to do this?",values:{totalMembers:this.props.channelMembersCount-1,timezones:this.state.channelTimezoneCount}}):y.a.createElement(W.c,{id:"notify_all.question",defaultMessage:"By using @all or @channel you are about to send notifications to {totalMembers} people. Are you sure you want to do this?",values:{totalMembers:this.props.channelMembersCount-1}});let c=null;this.state.serverError&&(c=y.a.createElement(Li,{id:"postServerError",error:this.state.serverError,submittedMessage:this.state.serverError.submittedMessage,handleSubmit:this.handleSubmit}));let d=null;if(this.state.postError){const e="post-error"+(this.state.errorClass?" "+this.state.errorClass:"");d=y.a.createElement("label",{className:e},this.state.postError)}let m=null;!t&&(e.fileInfos.length>0||e.uploadsInProgress.length>0)&&(m=y.a.createElement(oi,{fileInfos:e.fileInfos,onRemove:this.removePreview,uploadsInProgress:e.uploadsInProgress,uploadsProgressPercent:this.state.uploadsProgressPercent,ref:"preview"}));let u=null;e.uploadsInProgress.length>0&&(u=y.a.createElement("span",{className:"pull-right post-right-comments-upload-in-progress"},1===e.uploadsInProgress.length?y.a.createElement(W.c,{id:"create_comment.file",defaultMessage:"File uploading"}):y.a.createElement(W.c,{id:"create_comment.files",defaultMessage:"Files uploading"})));let p,h="btn btn-primary comment-btn pull-right";n||(h+=" disabled"),t||this.state.showPreview||(p=y.a.createElement(Si,{ref:"fileUpload",fileCount:this.getFileCount(),getTarget:this.getFileUploadTarget,onFileUploadChange:this.handleFileUploadChange,onUploadStart:this.handleUploadStart,onFileUpload:this.handleFileUploadComplete,onUploadError:this.handleUploadError,onUploadProgress:this.handleUploadProgress,rootId:this.props.rootId,postType:"comment"}));let g=null;const b=a({id:"emoji_picker.emojiPicker",defaultMessage:"Emoji Picker"}).toLowerCase();let f;!this.props.enableEmojiPicker||t||this.state.showPreview||(g=y.a.createElement("div",null,y.a.createElement(ca,{show:this.state.showEmojiPicker,target:this.getCreateCommentControls,onHide:this.hideEmojiPicker,onEmojiClose:this.hideEmojiPicker,onEmojiClick:this.handleEmojiClick,onGifClick:this.handleGifClick,enableGifPicker:this.props.enableGifPicker,topOffset:55}),y.a.createElement("button",{"aria-label":b,type:"button",onClick:this.toggleEmojiPicker,className:"style--none emoji-picker__container post-action"},y.a.createElement(ft,{className:"icon icon--emoji emoji-rhs "+(this.state.showEmojiPicker?"active":"")})))),f=t?M.fb("create_post.read_only","This channel is read-only. Only members with permission can post here."):M.fb("create_comment.addComment","Add a comment...");let E="";return s&&(E=" scroll"),y.a.createElement("form",{onSubmit:this.handleSubmit},y.a.createElement("div",{role:"application",id:"rhsFooter","aria-label":i,tabIndex:"-1",className:"post-create a11y__region".concat(E),"data-a11y-sort-order":"4"},y.a.createElement("div",{id:this.props.rootId,className:"post-create-body comment-create-body"},y.a.createElement("div",{className:"post-body__cell"},y.a.createElement(_n,{onChange:this.handleChange,onKeyPress:this.commentMsgKeyPress,onKeyDown:this.handleKeyDown,onComposition:this.emitTypingEvent,onHeightChange:this.handleHeightChange,handlePostError:this.handlePostError,value:t?"":e.message,onBlur:this.handleBlur,createMessage:f,emojiEnabled:this.props.enableEmojiPicker,initialText:"",channelId:this.props.channelId,isRHS:!0,popoverMentionKeyClick:!0,id:"reply_textbox",ref:"textbox",disabled:t,characterLimit:this.props.maxPostSize,preview:this.state.showPreview,badConnection:this.props.badConnection,listenForMentionKeyClick:!0}),y.a.createElement("span",{ref:"createCommentControls",className:"post-body__actions"},p,g))),y.a.createElement("div",{className:"post-create-footer"},y.a.createElement("div",{className:"d-flex justify-content-between"},y.a.createElement(Ii,{channelId:this.props.channelId,postId:this.props.rootId}),y.a.createElement(wn,{characterLimit:this.props.maxPostSize,showPreview:this.state.showPreview,updatePreview:this.updatePreview,message:t?"":this.state.message})),y.a.createElement("div",null,y.a.createElement("input",{type:"button",disabled:!n,className:h,value:a({id:"create_comment.comment",defaultMessage:"Add Comment"}),onClick:this.handleSubmit}),u,d,m,c))),y.a.createElement(Ai,{show:this.state.showPostDeletedModal,onHide:this.hidePostDeletedModal}),y.a.createElement(Yn.a,{title:o,message:l,confirmButtonText:r,show:this.state.showConfirmModal,onConfirm:this.handleNotifyAllConfirmation,onCancel:this.hideNotifyAllModal}))}}Ui(qi,"propTypes",{channelId:_.a.string.isRequired,channelMembersCount:_.a.number.isRequired,rootId:_.a.string.isRequired,rootDeleted:_.a.bool.isRequired,messageInHistory:_.a.string,draft:_.a.shape({message:_.a.string.isRequired,uploadsInProgress:_.a.array.isRequired,fileInfos:_.a.array.isRequired}).isRequired,enableAddButton:_.a.bool.isRequired,codeBlockOnCtrlEnter:_.a.bool,ctrlSend:_.a.bool,latestPostId:_.a.string,locale:_.a.string.isRequired,getSidebarBody:_.a.func,createPostErrorId:_.a.string,clearCommentDraftUploads:_.a.func.isRequired,onUpdateCommentDraft:_.a.func.isRequired,updateCommentDraftWithRootId:_.a.func.isRequired,onSubmit:_.a.func.isRequired,onResetHistoryIndex:_.a.func.isRequired,onMoveHistoryIndexBack:_.a.func.isRequired,onMoveHistoryIndexForward:_.a.func.isRequired,onEditLatestPost:_.a.func.isRequired,getChannelTimezones:_.a.func.isRequired,resetCreatePostRequest:_.a.func.isRequired,readOnlyChannel:_.a.bool,enableConfirmNotificationsToChannel:_.a.bool.isRequired,enableEmojiPicker:_.a.bool.isRequired,enableGifPicker:_.a.bool.isRequired,badConnection:_.a.bool.isRequired,maxPostSize:_.a.number.isRequired,rhsExpanded:_.a.bool.isRequired,isTimezoneEnabled:_.a.bool.isRequired,selectedPostFocussedAt:_.a.number.isRequired}),Ui(qi,"contextTypes",{intl:W.i.isRequired});var Hi=Object(n.connect)(function(){const e=Object(Na.makeGetMessageInHistoryItem)(x.Posts.MESSAGE_TYPES.COMMENT);return(t,a)=>{const n=t.requests.posts.createPost.error||{},s=Object(ms.i)(t,S.H.COMMENT_DRAFT,a.rootId),i=0!==s.message.trim().length||0!==s.fileInfos.length,o=Object(p.getAllChannelStats)(t)[a.channelId]?Object(p.getAllChannelStats)(t)[a.channelId].member_count:1,r=e(t),l=t.entities.channels.channels[a.channelId]||{},u=Object(d.getConfig)(t),h="true"===u.EnableConfirmNotificationsToChannel,g="true"===u.EnableEmojiPicker,b="true"===u.EnableGifPicker,f=Os(t)>1,E="true"===u.ExperimentalTimezone;return{draft:s,messageInHistory:r,enableAddButton:i,channelMembersCount:o,codeBlockOnCtrlEnter:Object(c.getBool)(t,x.Preferences.CATEGORY_ADVANCED_SETTINGS,"code_block_ctrl_enter",!0),ctrlSend:Object(c.getBool)(t,x.Preferences.CATEGORY_ADVANCED_SETTINGS,"send_on_ctrl_enter"),createPostErrorId:n.server_error_id,readOnlyChannel:!Object(m.isCurrentUserSystemAdmin)(t)&&"true"===u.ExperimentalTownSquareIsReadOnly&&l.name===S.i.DEFAULT_CHANNEL,enableConfirmNotificationsToChannel:h,enableEmojiPicker:g,enableGifPicker:b,locale:Object(Ss.a)(t),maxPostSize:parseInt(u.MaxPostSize,10)||S.i.DEFAULT_CHARACTER_LIMIT,rhsExpanded:Object(ms.a)(t),badConnection:f,isTimezoneEnabled:E,selectedPostFocussedAt:Object(ms.r)(t)}}},function(){let e,t,a,n,i,o,l,c;function d(){return Object(L.resetHistoryIndex)(x.Posts.MESSAGE_TYPES.COMMENT)}return(m,u)=>(o!==u.rootId&&(e=function(e){return t=>Hs(e,t)}(u.rootId),a=Fs(u.rootId,-1),n=Fs(u.rootId,1)),o===u.rootId&&l===u.channelId||(i=Vs(u.channelId,u.rootId)),o===u.rootId&&l===u.channelId&&c===u.latestPostId||(t=Gs(u.channelId,u.rootId,u.latestPostId)),o=u.rootId,l=u.channelId,c=u.latestPostId,Object(s.bindActionCreators)({clearCommentDraftUploads:qs,onUpdateCommentDraft:e,updateCommentDraftWithRootId:Hs,onSubmit:t,onResetHistoryIndex:d,onMoveHistoryIndexBack:a,onMoveHistoryIndexForward:n,onEditLatestPost:i,resetCreatePostRequest:L.resetCreatePostRequest,getChannelTimezones:r.getChannelTimezones},m))})(qi),Fi=a(166),Bi=a(165),Gi=a(124);function Vi(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}class Wi extends y.a.PureComponent{render(){const e=this.props,{value:t}=e,a=Vi(e,["value"]),n=new Date(t);return function(e){const t=new Date;return zi(e,t)}(n)?y.a.createElement(W.c,{id:"date_separator.today",defaultMessage:"Today"}):function(e){const t=new Date;return t.setDate(t.getDate()-1),zi(e,t)}(n)?y.a.createElement(W.c,{id:"date_separator.yesterday",defaultMessage:"Yesterday"}):y.a.createElement(W.a,Object.assign({},a,{value:t,weekday:"short",month:"short",day:"2-digit",year:"numeric"}))}}function zi(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Wi,"propTypes",{value:_.a.oneOfType([_.a.number,_.a.instanceOf(Date)]).isRequired});class Yi extends y.a.PureComponent{render(){const{date:e,enableTimezone:t,timeZone:a}=this.props,n=t&&a?{timeZone:a}:{};return y.a.createElement("div",{className:"date-separator"},y.a.createElement("hr",{className:"separator__hr"}),y.a.createElement("div",{className:"separator__text"},y.a.createElement(Wi,Object.assign({},n,{value:e,weekday:"short",month:"short",day:"2-digit",year:"numeric"}))))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Yi,"propTypes",{date:_.a.oneOfType([_.a.number,_.a.instanceOf(Date)]).isRequired,timeZone:_.a.string,enableTimezone:_.a.bool});var Ki=Object(n.connect)(function(e,t){const a=Object(m.getCurrentUserId)(e);let n;return n=t.userTimezone?t.userTimezone:Object(Fi.getUserTimezone)(e,a),{enableTimezone:Object(Gi.a)(e),timeZone:Object(Bi.getUserCurrentTimezone)(n)}})(Yi),Qi=a(40);class Zi extends y.a.PureComponent{render(){if(!this.props.isMobile)return null;if(0===this.props.createAt)return null;const e=y.a.createElement(Wi,{value:this.props.createAt,weekday:"short",day:"2-digit",month:"short",year:"numeric"});let t="post-list__timestamp";return this.props.isScrolling&&(t+=" scrolling"),this.props.isRhsPost&&(t+=" rhs"),y.a.createElement("div",{className:t},y.a.createElement("div",null,y.a.createElement("span",null,e)))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Zi,"propTypes",{isScrolling:_.a.bool.isRequired,isMobile:_.a.bool,createAt:_.a.oneOfType([_.a.instanceOf(Date),_.a.number]).isRequired,isRhsPost:_.a.bool});var Ji=Object(n.connect)(function(e,t){let a=t.postId;if(Qi.isCombinedUserActivityPost(a)){const e=Qi.getPostIdsForCombinedUserActivityPost(a);a=e[e.length-1]}const n=Object(Na.getPost)(e,a);return{createAt:n?n.create_at:0}})(Zi),Xi=a(3),$i=a.n(Xi);function eo(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class to extends y.a.Component{render(){return this.props.hasPermission&&!this.props.invert?this.props.children:!this.props.hasPermission&&this.props.invert?this.props.children:null}}eo(to,"defaultProps",{invert:!1}),eo(to,"propTypes",{channelId:_.a.string,teamId:_.a.string,permissions:_.a.arrayOf(_.a.string).isRequired,hasPermission:_.a.bool.isRequired,invert:_.a.bool.isRequired,children:_.a.node.isRequired});var ao=Object(n.connect)(function(e,t){if(!t.channelId||null===t.teamId||void 0===t.teamId)return{hasPermission:!1};for(const a of t.permissions)if(Object(D.haveIChannelPermission)(e,{channel:t.channelId,team:t.teamId,permission:a}))return{hasPermission:!0};return{hasPermission:!1}})(to);function no(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const so=80;class io extends v.Component{constructor(e){super(e),no(this,"handleEditDisable",()=>{this.setState({canEdit:!1})}),no(this,"handleFlagMenuItemActivated",()=>{this.props.isFlagged?this.props.actions.unflagPost(this.props.post.id):this.props.actions.flagPost(this.props.post.id)}),no(this,"handleAddReactionMenuItemActivated",e=>{e.preventDefault(),this.props.handleAddReactionClick&&this.props.handleAddReactionClick()}),no(this,"handlePermalinkMenuItemActivated",e=>{e.preventDefault(),Object(O.j)(this.props.post)}),no(this,"handlePinMenuItemActivated",()=>{this.props.post.is_pinned?this.props.actions.unpinPost(this.props.post.id):this.props.actions.pinPost(this.props.post.id)}),no(this,"handleDeleteMenuItemActivated",e=>{e.preventDefault();const t={ModalId:S.s.DELETE_POST,dialogType:Q,dialogProps:{post:this.props.post,commentCount:this.props.commentCount,isRHS:this.props.location===S.r.RHS_ROOT||this.props.location===S.r.RHS_COMMENT}};this.props.actions.openModal(t)}),no(this,"handleEditMenuItemActivated",()=>{this.props.actions.setEditingPost(this.props.post.id,this.props.commentCount,this.props.location===S.r.CENTER?"post_textbox":"reply_textbox",this.props.post.root_id?M.fb("rhs_comment.comment","Comment"):M.fb("create_post.post","Post"),this.props.location===S.r.RHS_ROOT||this.props.location===S.r.RHS_COMMENT)}),no(this,"tooltip",y.a.createElement(Zs.a,{id:"dotmenu-icon-tooltip",className:"hidden-xs"},y.a.createElement(W.c,{id:"post_info.dot_menu.tooltip.more_actions",defaultMessage:"More Actions"}))),no(this,"refCallback",e=>{if(e){const t=e.rect();(t.y||t.top)+t.height>window.innerHeight-so&&this.setState({openUp:!0})}}),this.editDisableAction=new Ts(this.handleEditDisable),this.state={openUp:!1},this.buttonRef=y.a.createRef()}disableCanEditPostByTime(){const{post:e,isLicensed:t,postEditTimeLimit:a}=this.props;if(Me.b(e)&&t&&String(a)!==String(S.UNSET_POST_EDIT_TIME_LIMIT)){const t=1e3,n=e.create_at+a*t-M.G();n>0&&this.editDisableAction.fireAfter(n+t)}}componentDidMount(){this.disableCanEditPostByTime()}static getDerivedStateFromProps(e){return{canDelete:Me.a(e.post)&&!e.isReadOnly,canEdit:Me.b(e.post)&&!e.isReadOnly}}componentWillUnmount(){this.editDisableAction.cancel()}render(){const e=Me.m(this.props.post),t=M.Z(),a=this.props.pluginMenuItems.filter(e=>e.filter?e.filter(this.props.post.id):e).map(e=>y.a.createElement(Ei.a.ItemAction,{key:e.id+"_pluginmenuitem",text:e.text,onClick:()=>{e.action&&e.action(this.props.post.id)}}));return this.state.canDelete||this.state.canEdit||0!==a.length||!e?y.a.createElement(fi.a,{onToggle:this.props.handleDropdownOpened},y.a.createElement(Qs.a,{className:"hidden-xs",delayShow:500,placement:"top",overlay:this.tooltip,rootClose:!0},y.a.createElement("button",{id:"".concat(this.props.location,"_button_").concat(this.props.post.id),"aria-label":M.fb("post_info.dot_menu.tooltip.more_actions","More Actions").toLowerCase(),className:"post__dropdown color--link style--none",type:"button","aria-expanded":"false"})),y.a.createElement(Ei.a,{id:"".concat(this.props.location,"_dropdown_").concat(this.props.post.id),openLeft:!0,openUp:this.state.openUp,ref:this.refCallback,ariaLabel:M.fb("post_info.menuAriaLabel","Post extra options")},y.a.createElement(ao,{channelId:this.props.post.channel_id,teamId:this.props.teamId,permissions:[$i.a.ADD_REACTION]},y.a.createElement(Ei.a.ItemAction,{show:t&&!e&&!this.props.isReadOnly&&this.props.enableEmojiPicker,text:M.fb("rhs_root.mobile.add_reaction","Add Reaction"),onClick:this.handleAddReactionMenuItemActivated})),y.a.createElement(Ei.a.ItemAction,{show:t&&!e&&this.props.isFlagged,text:M.fb("rhs_root.mobile.unflag","Unflag"),onClick:this.handleFlagMenuItemActivated}),y.a.createElement(Ei.a.ItemAction,{show:t&&!e&&!this.props.isFlagged,text:M.fb("rhs_root.mobile.flag","Flag"),onClick:this.handleFlagMenuItemActivated}),y.a.createElement(Ei.a.ItemAction,{show:!e&&this.props.location===S.r.CENTER,text:M.fb("post_info.reply","Reply"),onClick:this.props.handleCommentClick}),y.a.createElement(Ei.a.ItemAction,{show:!e,text:M.fb("post_info.permalink","Permalink"),onClick:this.handlePermalinkMenuItemActivated}),y.a.createElement(Ei.a.ItemAction,{id:"unpin_post_".concat(this.props.post.id),show:!e&&!this.props.isReadOnly&&this.props.post.is_pinned,text:M.fb("post_info.unpin","Unpin"),onClick:this.handlePinMenuItemActivated}),y.a.createElement(Ei.a.ItemAction,{id:"pin_post_".concat(this.props.post.id),show:!e&&!this.props.isReadOnly&&!this.props.post.is_pinned,text:M.fb("post_info.pin","Pin"),onClick:this.handlePinMenuItemActivated}),y.a.createElement(Ei.a.ItemAction,{id:"delete_post_".concat(this.props.post.id),show:this.state.canDelete,text:M.fb("post_info.del","Delete"),onClick:this.handleDeleteMenuItemActivated}),y.a.createElement(Ei.a.ItemAction,{id:"edit_post_".concat(this.props.post.id),show:this.state.canEdit,text:M.fb("post_info.edit","Edit"),onClick:this.handleEditMenuItemActivated}),a.length>0&&y.a.createElement("li",{id:"divider_post_".concat(this.props.post.id),className:"MenuItem__divider",role:"menuitem"}),a,y.a.createElement(R.a,{postId:this.props.post.id,pluggableName:"PostDropdownMenuItem"}))):null}}no(io,"propTypes",{post:_.a.object.isRequired,teamId:_.a.string,location:_.a.oneOf([S.r.CENTER,S.r.RHS_ROOT,S.r.RHS_COMMENT,S.r.SEARCH]).isRequired,commentCount:_.a.number,isFlagged:_.a.bool,handleCommentClick:_.a.func,handleDropdownOpened:_.a.func,handleAddReactionClick:_.a.func,isReadOnly:_.a.bool,pluginMenuItems:_.a.arrayOf(_.a.object),isLicensed:_.a.bool.isRequired,postEditTimeLimit:_.a.string.isRequired,enableEmojiPicker:_.a.bool.isRequired,actions:_.a.shape({flagPost:_.a.func.isRequired,unflagPost:_.a.func.isRequired,setEditingPost:_.a.func.isRequired,pinPost:_.a.func.isRequired,unpinPost:_.a.func.isRequired,openModal:_.a.func.isRequired}).isRequired}),no(io,"defaultProps",{post:{},commentCount:0,isFlagged:!1,isReadOnly:!1,pluginMenuItems:[],location:S.r.CENTER,enableEmojiPicker:!1});var oo=Object(n.connect)(function(e){return{postEditTimeLimit:Object(d.getConfig)(e).PostEditTimeLimit,isLicensed:"true"===Object(d.getLicense)(e).IsLicensed,teamId:Object(u.getCurrentTeamId)(e),pluginMenuItems:e.plugins.components.PostDropdownMenu}},function(e){return{actions:Object(s.bindActionCreators)({flagPost:q.d,unflagPost:q.l,setEditingPost:q.j,pinPost:q.g,unpinPost:q.m,openModal:U.b},e)}})(io);class ro extends y.a.PureComponent{render(){return y.a.createElement("span",this.props,y.a.createElement(W.c,{id:"generic_icons.download",defaultMessage:"Download Icon"},e=>y.a.createElement("svg",{width:"40px",height:"40px",viewBox:"0 0 42 42",role:"icon","aria-label":e},y.a.createElement("g",{stroke:"inherit",strokeWidth:"1",fill:"none",fillRule:"evenodd"},y.a.createElement("g",{transform:"translate(-986.000000, -1142.000000)"},y.a.createElement("g",{transform:"translate(50.000000, 1034.000000)"},y.a.createElement("g",{transform:"translate(539.000000, 54.000000)"},y.a.createElement("g",{transform:"translate(398.000000, 55.000000)"},y.a.createElement("g",{transform:"translate(11.000000, 11.000000)",fillRule:"nonzero",fill:"inherit"},y.a.createElement("path",{d:"M8.7345,14.1405 C8.74725,14.1525 8.763,14.15775 8.7765,14.16825 C8.802,14.18775 8.82675,14.20875 8.85675,14.22075 C8.9025,14.24025 8.95125,14.25 9,14.25 C9.04875,14.25 9.0975,14.24025 9.14325,14.22075 C9.18975,14.20125 9.23175,14.17275 9.267,14.1375 L13.764,9.6405 C13.91025,9.49425 13.91025,9.2565 13.764,9.11025 C13.61775,8.964 13.38,8.964 13.23375,9.11025 L9.375,12.969 L9.375,0.375 C9.375,0.168 9.207,0 9,0 C8.793,0 8.625,0.168 8.625,0.375 L8.625,12.9705 L4.76475,9.11025 C4.6185,8.964 4.38075,8.964 4.2345,9.11025 C4.08825,9.2565 4.08825,9.49425 4.2345,9.6405 L8.7345,14.1405 Z M17.25,13.5 C17.043,13.5 16.875,13.668 16.875,13.875 L16.875,17.25 L1.125,17.25 L1.125,13.875 C1.125,13.668 0.957,13.5 0.75,13.5 C0.543,13.5 0.375,13.668 0.375,13.875 L0.375,17.625 C0.375,17.832 0.543,18 0.75,18 L17.25,18 C17.457,18 17.625,17.832 17.625,17.625 L17.625,13.875 C17.625,13.668 17.457,13.5 17.25,13.5 Z"}))))))))))}}class lo extends y.a.PureComponent{render(){const{fileInfo:e}=this.props,t=Object(M.z)(e.extension);let a;if(t===S.m.IMAGE){let t="post-image";e.width<S.Q.THUMBNAIL_WIDTH&&e.height<S.Q.THUMBNAIL_HEIGHT?t+=" small":t+=" normal";let a=Object(Ws.getFileThumbnailUrl)(e.id);return Object(M.V)(e.extension)&&!e.has_preview_image&&(a=Object(Ws.getFileUrl)(e.id)),y.a.createElement("div",{className:t,style:{backgroundImage:"url(".concat(a,")"),backgroundSize:"cover"}})}return a=e.extension===S.m.SVG&&this.props.enableSVGs?y.a.createElement("img",{alt:"file thumbnail image",className:"post-image normal",src:Object(Ws.getFileUrl)(e.id)}):y.a.createElement("div",{className:"file-icon "+Object(M.B)(t)})}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(lo,"propTypes",{enableSVGs:_.a.bool.isRequired,fileInfo:_.a.object.isRequired});var co=Object(n.connect)(function(e){return{enableSVGs:"true"===Object(d.getConfig)(e).EnableSVGs}})(lo);function mo(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class uo extends y.a.PureComponent{constructor(e){super(e),mo(this,"loadFiles",()=>{const e=this.props.fileInfo;if(Object(M.z)(e.extension)===S.m.IMAGE){const t=Object(Ws.getFileThumbnailUrl)(e.id);Object(M.eb)(t,this.handleImageLoaded)}else e.extension===S.m.SVG&&this.props.enableSVGs&&Object(M.eb)(Object(Ws.getFileUrl)(e.id),this.handleImageLoaded)}),mo(this,"handleImageLoaded",()=>{this.mounted&&this.setState({loaded:!0})}),mo(this,"onAttachmentClick",e=>{e.preventDefault(),this.props.handleImageClick&&this.props.handleImageClick(this.props.index)}),this.state={loaded:Object(M.z)(e.fileInfo.extension)!==S.m.IMAGE}}componentDidMount(){this.mounted=!0,this.loadFiles()}UNSAFE_componentWillReceiveProps(e){if(e.fileInfo.id!==this.props.fileInfo.id){const t=e.fileInfo.extension;this.setState({loaded:Object(M.z)(t)!==S.m.IMAGE&&!(e.enableSVGs&&t===S.m.SVG)})}}componentDidUpdate(e){this.state.loaded||this.props.fileInfo.id===e.fileInfo.id||this.loadFiles()}componentWillUnmount(){this.mounted=!1}render(){const{compactDisplay:e,fileInfo:t}=this.props,a=Object(Xs.f)(t.name);let n,s;const i="".concat(Object(M.fb)("file_attachment.thumbnail","file thumbnail")," ").concat(t.name).toLowerCase();let o;return e||(n=y.a.createElement("a",{"aria-label":i,className:"post-image__thumbnail",href:"#",onClick:this.onAttachmentClick},this.state.loaded?y.a.createElement(co,{fileInfo:t}):y.a.createElement("div",{className:"post-image__load"})),s=y.a.createElement("div",{className:"post-image__detail_wrapper",onClick:this.onAttachmentClick},y.a.createElement("div",{className:"post-image__detail"},y.a.createElement("span",{className:"post-image__name"},a),y.a.createElement("span",{className:"post-image__type"},t.extension.toUpperCase()),y.a.createElement("span",{className:"post-image__size"},Object(M.p)(t.size))))),this.props.canDownloadFiles&&(o=y.a.createElement($s,{fileInfo:t,compactDisplay:e,canDownload:this.props.canDownloadFiles,handleImageClick:this.onAttachmentClick,iconClass:"post-image__download"},y.a.createElement(ro,null))),y.a.createElement("div",{className:"post-image__column"},n,y.a.createElement("div",{className:"post-image__details"},s,o))}}mo(uo,"propTypes",{fileInfo:_.a.object.isRequired,index:_.a.number.isRequired,handleImageClick:_.a.func,compactDisplay:_.a.bool,canDownloadFiles:_.a.bool,enableSVGs:_.a.bool.isRequired});var po=Object(n.connect)(function(e){const t=Object(d.getConfig)(e);return{canDownloadFiles:Object(Xs.a)(t),enableSVGs:"true"===t.EnableSVGs}})(uo),ho=a(1001),go=a(1073);function bo(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class fo extends y.a.PureComponent{constructor(e){super(e),bo(this,"handleFileInfoChanged",e=>{let t=bi.a.findDOMNode(this.refs.video);t||(t=document.createElement("video"));const a=t.canPlayType(e.mime_type);this.setState({canPlay:"probably"===a||"maybe"===a})}),bo(this,"handleLoadError",()=>{this.setState({canPlay:!1})}),bo(this,"stop",()=>{if(this.refs.video){const e=bi.a.findDOMNode(this.refs.video);e.pause(),e.currentTime=0}}),this.state={canPlay:!0}}UNSAFE_componentWillMount(){this.handleFileInfoChanged(this.props.fileInfo)}componentDidMount(){this.refs.source&&ys()(bi.a.findDOMNode(this.refs.source)).one("error",this.handleLoadError)}UNSAFE_componentWillReceiveProps(e){this.props.fileUrl!==e.fileUrl&&this.handleFileInfoChanged(e.fileInfo)}componentDidUpdate(){this.refs.source&&ys()(bi.a.findDOMNode(this.refs.source)).one("error",this.handleLoadError)}render(){if(!this.state.canPlay)return y.a.createElement(go.a,{fileInfo:this.props.fileInfo,fileUrl:this.props.fileUrl});let e=S.Q.WEB_VIDEO_WIDTH,t=S.Q.WEB_VIDEO_HEIGHT;return M.Z()&&(e=S.Q.MOBILE_VIDEO_WIDTH,t=S.Q.MOBILE_VIDEO_HEIGHT),y.a.createElement("video",{key:this.props.fileInfo.id,ref:"video","data-setup":"{}",controls:"controls",width:e,height:t},y.a.createElement("source",{ref:"source",src:this.props.fileUrl}))}}bo(fo,"propTypes",{fileInfo:_.a.object.isRequired,fileUrl:_.a.string.isRequired});var Eo=a(157),_o=a(935);function vo(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class yo extends y.a.Component{constructor(e){super(e),vo(this,"updateStateFromProps",e=>{const t=Eo.b(e.fileInfo.extension);!t||e.fileInfo.size>S.Q.CODE_PREVIEW_MAX_FILE_SIZE?this.setState({code:"",lang:"",loading:!1,success:!1}):(this.setState({code:"",lang:t,loading:!0}),ys.a.ajax({async:!0,url:e.fileUrl,type:"GET",dataType:"text",error:this.handleReceivedError,success:this.handleReceivedCode}))}),vo(this,"handleReceivedCode",e=>{let t=e;"#document"===e.nodeName&&(t=(new XMLSerializer).serializeToString(e)),this.setState({code:t,loading:!1,success:!0})}),vo(this,"handleReceivedError",()=>{this.setState({loading:!1,success:!1})}),this.state={code:"",lang:"",loading:!0,success:!0}}componentDidMount(){this.updateStateFromProps(this.props)}UNSAFE_componentWillReceiveProps(e){this.props.fileUrl!==e.fileUrl&&this.updateStateFromProps(e)}static supports(e){return Boolean(Eo.b(e.extension))}render(){if(this.state.loading)return y.a.createElement("div",{className:"view-image__loading"},y.a.createElement(_o.a,null));if(!this.state.success)return y.a.createElement(go.a,{fileInfo:this.props.fileInfo,fileUrl:this.props.fileUrl});const e=this.state.code.match(/\r\n|\r|\n|$/g).length;let t="";for(let a=1;a<=e;a++)t+=t?"\n"+a:a;const a=Eo.c(this.state.lang),n=Eo.d(this.state.lang,this.state.code);return y.a.createElement("div",{className:"post-code"},y.a.createElement("span",{className:"post-code__language"},"".concat(this.props.fileInfo.name," - ").concat(a)),y.a.createElement("div",{className:"post-code__container"},y.a.createElement("code",{className:"hljs"},y.a.createElement("table",null,y.a.createElement("tbody",null,y.a.createElement("tr",null,y.a.createElement("td",{className:"post-code__lineno"},t),y.a.createElement("td",{dangerouslySetInnerHTML:{__html:n}})))))))}}yo.propTypes={fileInfo:_.a.object.isRequired,fileUrl:_.a.string.isRequired};var Co=a(1184),wo=a(1466),To=a.n(wo);function Oo({fileInfo:e,canDownloadFiles:t}){const{has_preview_image:a,id:n,link:s}=e,i=s||Object(Ws.getFileDownloadUrl)(n),o=a?Object(Ws.getFilePreviewUrl)(n):i;return t?y.a.createElement("a",{href:i,target:"_blank",rel:"noopener noreferrer",download:!0},y.a.createElement("img",{alt:"preview url image",src:o})):y.a.createElement("img",{src:o})}function So(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Oo.propTypes={fileInfo:_.a.object.isRequired,canDownloadFiles:_.a.bool.isRequired};class Po extends y.a.PureComponent{render(){var e="";this.props.enablePublicLink&&this.props.showPublicLink&&(e=y.a.createElement("div",null,y.a.createElement("a",{href:"#",className:"public-link text","data-title":"Public Image",onClick:this.props.onGetPublicLink},y.a.createElement(W.c,{id:"view_image_popover.publicLink",defaultMessage:"Get Public Link"})),y.a.createElement("span",{className:"text"}," | ")));let t=null;if(this.props.canDownloadFiles){let a;const n={};this.props.isExternalFile&&!this.props.isDesktopApp?a=y.a.createElement(W.c,{id:"view_image_popover.open",defaultMessage:"Open"}):(a=y.a.createElement(W.c,{id:"view_image_popover.download",defaultMessage:"Download"}),n.download=this.props.filename),t=y.a.createElement("div",{className:"image-links"},e,y.a.createElement("a",Object.assign({href:this.props.fileURL,className:"text",target:"_blank",rel:"noopener noreferrer"},n),a))}return y.a.createElement("div",{ref:"imageFooter",className:"modal-button-bar"},y.a.createElement("span",{className:"pull-left text"},y.a.createElement(W.c,{id:"view_image_popover.file",defaultMessage:"File {count, number} of {total, number}",values:{count:this.props.fileIndex+1,total:this.props.totalFiles}})),t)}}So(Po,"propTypes",{fileIndex:_.a.number.isRequired,totalFiles:_.a.number.isRequired,filename:_.a.string.isRequired,fileURL:_.a.string.isRequired,showPublicLink:_.a.bool,enablePublicLink:_.a.bool.isRequired,canDownloadFiles:_.a.bool.isRequired,isExternalFile:_.a.bool.isRequired,onGetPublicLink:_.a.func,isDesktopApp:_.a.bool.isRequired}),So(Po,"defaultProps",{fileIndex:0,totalFiles:0,filename:"",fileURL:"",showPublicLink:!0});var Mo=Object(n.connect)(function(){return{isDesktopApp:Object(P.c)()}})(Po);function No(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Io(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?No(a,!0).forEach(function(t){Ao(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):No(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Ao(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const jo=S.Q.KeyCodes;class Ro extends y.a.PureComponent{constructor(e){super(e),Ao(this,"handleNext",e=>{e&&e.stopPropagation();let t=this.state.imageIndex+1;t>this.props.fileInfos.length-1&&(t=0),this.showImage(t)}),Ao(this,"handlePrev",e=>{e&&e.stopPropagation();let t=this.state.imageIndex-1;t<0&&(t=this.props.fileInfos.length-1),this.showImage(t)}),Ao(this,"handleKeyPress",e=>{M.X(e,jo.RIGHT)?this.handleNext():M.X(e,jo.LEFT)&&this.handlePrev()}),Ao(this,"onModalShown",e=>{document.addEventListener("keyup",this.handleKeyPress),this.showImage(e.startIndex)}),Ao(this,"onModalHidden",()=>{document.addEventListener("keyup",this.handleKeyPress),this.refs.video&&this.refs.video.stop()}),Ao(this,"showImage",e=>{this.setState({imageIndex:e});const t=window.innerHeight-100;this.setState({imageHeight:t}),this.state.loaded[e]||this.loadImage(e)}),Ao(this,"loadImage",e=>{const t=this.props.fileInfos[e];if(M.z(t.extension)===S.m.IMAGE&&Boolean(t.id)){let a;a=t.has_image_preview?Object(Ws.getFilePreviewUrl)(t.id):Object(Ws.getFileUrl)(t.id),M.eb(a,()=>this.handleImageLoaded(e),t=>this.handleImageProgress(e,t))}else this.handleImageLoaded(e)}),Ao(this,"handleImageLoaded",e=>{this.setState(t=>({loaded:Io({},t.loaded,{[e]:!0})}))}),Ao(this,"handleImageProgress",(e,t)=>{this.setState(a=>({progress:Io({},a.progress,{[e]:t})}))}),Ao(this,"handleGetPublicLink",()=>{this.props.onModalDismissed(),O.k(this.props.fileInfos[this.state.imageIndex].id)}),Ao(this,"onMouseEnterImage",()=>{this.setState({showCloseBtn:!0})}),Ao(this,"onMouseLeaveImage",()=>{this.setState({showCloseBtn:!1})}),this.state={imageIndex:this.props.startIndex,imageHeight:"100%",loaded:M.q(!1,this.props.fileInfos.length),progress:M.q(0,this.props.fileInfos.length),showCloseBtn:!1}}UNSAFE_componentWillReceiveProps(e){!0===e.show&&!1===this.props.show?this.onModalShown(e):!1===e.show&&!0===this.props.show&&this.onModalHidden(),this.props.fileInfos.length!==e.fileInfos.length&&this.setState({loaded:M.q(!1,e.fileInfos.length),progress:M.q(0,e.fileInfos.length)})}render(){if(this.props.fileInfos.length<1||this.props.fileInfos.length-1<this.state.imageIndex)return null;const e=this.props.fileInfos[this.state.imageIndex],t=!e.link,a=e.link||e.name,n=e.link||Object(Ws.getFileUrl)(e.id),s=e.link||Object(Ws.getFileDownloadUrl)(e.id),i=!e.id;let o;if(this.state.loaded[this.state.imageIndex]){const t=M.z(e.extension);o=t===S.m.IMAGE||t===S.m.SVG?y.a.createElement(Oo,{fileInfo:e,canDownloadFiles:this.props.canDownloadFiles}):t===S.m.VIDEO||t===S.m.AUDIO?y.a.createElement(fo,{fileInfo:e,fileUrl:n}):e&&e.extension&&e.extension===S.m.PDF?y.a.createElement(N.a,{doLoad:To.a,fileInfo:e,fileUrl:n}):yo.supports(e)?y.a.createElement(yo,{fileInfo:e,fileUrl:n}):y.a.createElement(go.a,{fileInfo:e,fileUrl:n})}else{const e=M.fb("view_image.loading","Loading"),t=Math.floor(this.state.progress[this.state.imageIndex]);o=y.a.createElement(Co.a,{loading:e,progress:t})}for(const t of this.props.pluginFilePreviewComponents)if(t.override(e,this.props.post)){o=y.a.createElement(t.component,{fileInfo:e,post:this.props.post});break}let r=null,l=null;this.props.fileInfos.length>1&&(r=y.a.createElement("a",{id:"previewArrowLeft",ref:"previewArrowLeft",className:"modal-prev-bar",href:"#",onClick:this.handlePrev},y.a.createElement("i",{className:"image-control image-prev"})),l=y.a.createElement("a",{id:"previewArrowRight",ref:"previewArrowRight",className:"modal-next-bar",href:"#",onClick:this.handleNext},y.a.createElement("i",{className:"image-control image-next"})));let c="modal-close";return this.state.showCloseBtn&&(c+=" modal-close--show"),y.a.createElement(V.a,{show:this.props.show,onHide:this.props.onModalDismissed,className:"modal-image",dialogClassName:"a11y__modal modal-image",role:"dialog","aria-labelledby":"viewImageModalLabel"},y.a.createElement(V.a.Body,null,y.a.createElement("div",{className:"modal-image__wrapper",onClick:this.props.onModalDismissed},y.a.createElement("div",{onMouseEnter:this.onMouseEnterImage,onMouseLeave:this.onMouseLeaveImage,onClick:e=>e.stopPropagation()},y.a.createElement(V.a.Title,{componentClass:"h1",id:"viewImageModalLabel",className:"hide"},a),y.a.createElement("div",{className:c,onClick:this.props.onModalDismissed}),y.a.createElement("div",{className:"modal-image__content"},o),y.a.createElement(Mo,{showPublicLink:t,fileIndex:this.state.imageIndex,totalFiles:this.props.fileInfos.length,filename:a,fileURL:s,enablePublicLink:this.props.enablePublicLink,canDownloadFiles:this.props.canDownloadFiles,isExternalFile:i,onGetPublicLink:this.handleGetPublicLink}))),r,l))}}Ao(Ro,"propTypes",{post:_.a.object.isRequired,show:_.a.bool.isRequired,onModalDismissed:_.a.func.isRequired,fileInfos:_.a.arrayOf(_.a.object).isRequired,startIndex:_.a.number.isRequired,canDownloadFiles:_.a.bool.isRequired,enablePublicLink:_.a.bool.isRequired,pluginFilePreviewComponents:_.a.arrayOf(_.a.object)}),Ao(Ro,"defaultProps",{show:!1,fileInfos:[],startIndex:0,pluginFilePreviewComponents:[]});var ko=Object(n.connect)(function(e,t){const a=Object(d.getConfig)(e);return{canDownloadFiles:Object(Xs.a)(a),enablePublicLink:"true"===a.EnablePublicLink,pluginFilePreviewComponents:e.plugins.components.FilePreview,post:t.post||Object(Na.getPost)(e,t.postId)}})(Ro);function Lo(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const xo=50;class Do extends y.a.PureComponent{constructor(e){super(e),Lo(this,"imageLoaded",()=>{this.mounted&&this.setState({loaded:!0})}),Lo(this,"handleImageClick",e=>{e.preventDefault(),this.setState({showPreviewModal:!0})}),Lo(this,"showPreviewModal",()=>{this.setState({showPreviewModal:!1})}),Lo(this,"toggleEmbedVisibility",()=>{this.props.actions.toggleEmbedVisibility(this.props.postId)}),this.state={loaded:!1,showPreviewModal:!1,dimensions:{width:e.fileInfo.width,height:e.fileInfo.height}}}componentDidMount(){this.mounted=!0}static getDerivedStateFromProps(e,t){return e.fileInfo.width!==t.dimensions.width||e.fileInfo.height!==t.dimensions.height?{dimensions:{width:e.fileInfo.width,height:e.fileInfo.height}}:null}componentWillUnmount(){this.mounted=!1}render(){const{fileInfo:e}=this.props,{loaded:t}=this.state,{has_preview_image:a,id:n}=e,s=Object(Ws.getFileUrl)(n),i=a?Object(Ws.getFilePreviewUrl)(n):s,o=e.height,r=e.width;let l="";(r<xo||o<xo)&&(l="min-preview ",o>r&&(l+="min-preview--portrait "));const c=y.a.createElement("button",{key:"toggle",className:"style--none post__embed-visibility color--link","data-expanded":this.props.isEmbedVisible,"aria-label":"Toggle Embed Visibility",onClick:this.toggleEmbedVisibility}),d=y.a.createElement("div",{"data-testid":"image-name",className:"image-name"},c,y.a.createElement("div",{onClick:this.handleImageClick},e.name));let m,u="";let p={},h={},g="";return Object(M.z)(e.extension)===S.m.SVG&&(g="svg",this.state.dimensions.height?p={width:"100%"}:h={height:350,maxWidth:"100%"}),t&&(m=y.a.createElement(ko,{show:this.state.showPreviewModal,onModalDismissed:this.showPreviewModal,fileInfos:[e],postId:this.props.postId}),u="image-fade-in"),y.a.createElement("div",{className:"file-view--single"},y.a.createElement("div",{className:"file__image"},d,this.props.isEmbedVisible&&y.a.createElement("div",{className:"image-container",style:h},y.a.createElement("div",{className:"image-loaded ".concat(u," ").concat(g),style:p},y.a.createElement(ho.a,{onClick:this.handleImageClick,className:l,src:i,dimensions:this.state.dimensions,fileInfo:this.props.fileInfo,onImageLoaded:this.imageLoaded,showLoader:this.props.isEmbedVisible}))),m))}}Lo(Do,"propTypes",{postId:_.a.string.isRequired,fileInfo:_.a.object.isRequired,isRhsOpen:_.a.bool.isRequired,isEmbedVisible:_.a.bool,actions:_.a.shape({toggleEmbedVisibility:_.a.func.isRequired}).isRequired}),Lo(Do,"defaultProps",{fileInfo:{}});var Uo=Object(n.connect)(function(e){return{isRhsOpen:Object(ms.c)(e)}},function(e){return{actions:Object(s.bindActionCreators)({toggleEmbedVisibility:q.k},e)}})(Do);function qo(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ho extends y.a.Component{constructor(e){super(e),qo(this,"handleImageClick",e=>{this.setState({showPreviewModal:!0,startImgIndex:e})}),qo(this,"hidePreviewModal",()=>{this.setState({showPreviewModal:!1})}),this.state={showPreviewModal:!1,startImgIndex:0}}render(){const{compactDisplay:e,enableSVGs:t,fileInfos:a,fileCount:n,locale:s}=this.props;if(!1===e)if(a&&1===a.length){const e=Object(M.z)(a[0].extension);if(e===S.m.IMAGE||e===S.m.SVG&&t)return y.a.createElement(Uo,{fileInfo:a[0],isEmbedVisible:this.props.isEmbedVisible,postId:this.props.post.id})}else if(1===n&&this.props.isEmbedVisible)return y.a.createElement("div",{style:Fo.minHeightPlaceholder});const i=Object(Ws.sortFileInfos)(a,s),o=[];if(i&&i.length>0)for(let t=0;t<i.length;t++){const a=i[t];o.push(y.a.createElement(po,{key:a.id,fileInfo:i[t],index:t,handleImageClick:this.handleImageClick,compactDisplay:e}))}else if(n>0)for(let e=0;e<n;e++)o.push(y.a.createElement("div",{key:"fileCount-".concat(e),className:"post-image__column post-image__column--placeholder"}));return y.a.createElement(y.a.Fragment,null,y.a.createElement("div",{className:"post-image__columns clearfix"},o),y.a.createElement(ko,{show:this.state.showPreviewModal,onModalDismissed:this.hidePreviewModal,startIndex:this.state.startImgIndex,fileInfos:i,postId:this.props.post.id}))}}qo(Ho,"propTypes",{post:_.a.object.isRequired,fileCount:_.a.number.isRequired,fileInfos:_.a.arrayOf(_.a.object),compactDisplay:_.a.bool,enableSVGs:_.a.bool,isEmbedVisible:_.a.bool,locale:_.a.string.isRequired});const Fo={minHeightPlaceholder:{minHeight:"385px"}};var Bo=Object(n.connect)(function(){const e=Object(Gn.makeGetFilesForPost)();return function(t,a){const n=a.post?a.post.id:"",s=e(t,n);let i=0;return a.post.metadata&&a.post.metadata.files?i=(a.post.metadata.files||[]).length:a.post.file_ids?i=a.post.file_ids.length:a.post.filenames&&(i=a.post.filenames.length),{enableSVGs:"true"===Object(d.getConfig)(t).EnableSVGs,fileInfos:s,fileCount:i,isEmbedVisible:Object(G.b)(t,a.post.id),locale:Object(Ss.a)(t)}}})(Ho),Go=a(963),Vo=a(1106);function Wo(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class zo extends y.a.PureComponent{constructor(...e){super(...e),Wo(this,"getProfilePictureURL",()=>{const{post:e,user:t}=this.props;return t&&t.id===e.user_id?M.N(t):e.user_id?M.N(e.user_id):""}),Wo(this,"getStatus",(e,t,a)=>e||t||a&&a.is_bot?"":this.props.status),Wo(this,"getPostIconURL",(e,t,a)=>{const{enablePostIconOverride:n,hasImageProxy:s,post:i}=this.props,o=i.props;let r="",l="";return o&&(r=o.override_icon_url,l=o.use_user_icon),this.props.compactDisplay?"":!t&&a&&!l&&n?r&&""!==r?Me.f(r,s):S.Q.DEFAULT_WEBHOOK_LOGO:e})}render(){const{compactDisplay:e,isBusy:t,isRHS:a,post:n,user:s,isBot:i}=this.props,o=Me.m(n),r=Me.l(n);if(o&&!e&&!r&&!i)return y.a.createElement(Vo.a,{className:"icon"});const l=Me.e(n),c=!l&&!r,d=this.getProfilePictureURL(),m=this.getPostIconURL(d,l,r),u=n.props?n.props.override_icon_emoji:"",p="string"==typeof u&&""!==u,h=this.getStatus(l,r,s);return y.a.createElement(Go.a,{hasMention:c,isBusy:t,isRHS:a,size:"lg",src:m,profileSrc:d,isEmoji:p,status:h,userId:s?s.id:null,username:s?s.username:null})}}Wo(zo,"propTypes",{compactDisplay:_.a.bool.isRequired,enablePostIconOverride:_.a.bool.isRequired,hasImageProxy:_.a.bool.isRequired,isBusy:_.a.bool,isRHS:_.a.bool,post:_.a.object.isRequired,status:_.a.string,user:_.a.object,isBot:_.a.bool,postIconOverrideURL:_.a.string}),Wo(zo,"defaultProps",{status:S.O.OFFLINE});var Yo=Object(n.connect)(function(e,t){const a=Object(d.getConfig)(e),n=Object(m.getUser)(e,t.userId);return{enablePostIconOverride:"true"===a.EnablePostIconOverride,hasImageProxy:"true"===a.HasImageProxy,status:Object(m.getStatusForUserId)(e,t.userId),isBot:Boolean(n&&n.is_bot),user:n}})(zo);function Ko(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Qo(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Zo extends y.a.PureComponent{constructor(...e){super(...e),Qo(this,"retryPost",e=>{e.preventDefault();const t=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ko(a,!0).forEach(function(t){Qo(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ko(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},this.props.post);Reflect.deleteProperty(t,"id"),this.props.actions.createPost(t)}),Qo(this,"cancelPost",e=>{e.preventDefault(),this.props.actions.removePost(this.props.post)})}render(){return y.a.createElement("span",{className:"pending-post-actions"},y.a.createElement("a",{className:"post-retry",href:"#",onClick:this.retryPost},y.a.createElement(W.c,{id:"pending_post_actions.retry",defaultMessage:"Retry"}))," - ",y.a.createElement("a",{className:"post-cancel",href:"#",onClick:this.cancelPost},y.a.createElement(W.c,{id:"pending_post_actions.cancel",defaultMessage:"Cancel"})))}}Qo(Zo,"propTypes",{post:_.a.object.isRequired,actions:_.a.shape({createPost:_.a.func.isRequired,removePost:_.a.func.isRequired}).isRequired});var Jo=Object(n.connect)(null,function(e){return{actions:Object(s.bindActionCreators)({createPost:q.b,removePost:L.removePost},e)}})(Zo);class Xo extends y.a.PureComponent{render(){return y.a.createElement("span",this.props,y.a.createElement(W.c,{id:"generic_icons.flag",defaultMessage:"Flag Icon"},e=>y.a.createElement("svg",{width:"14px",height:"14px",viewBox:"0 0 16 16",role:"icon","aria-label":e},y.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"inherit",fillRule:"evenodd"},y.a.createElement("g",{transform:"translate(-1106.000000, -33.000000)",fillRule:"nonzero",fill:"inherit"},y.a.createElement("g",null,y.a.createElement("g",{transform:"translate(1096.000000, 22.000000)"},y.a.createElement("g",{transform:"translate(10.000000, 11.000000)"},y.a.createElement("path",{d:"M8,1 L2,1 C2,0.447 1.553,0 1,0 C0.447,0 0,0.447 0,1 L0,15.5 C0,15.776 0.224,16 0.5,16 L1.5,16 C1.776,16 2,15.776 2,15.5 L2,11 L7,11 L7,12 C7,12.553 7.447,13 8,13 L15,13 C15.553,13 16,12.553 16,12 L16,4 C16,3.447 15.553,3 15,3 L9,3 L9,2 C9,1.447 8.553,1 8,1 Z M9,11 L9,9.5 C9,9.224 8.776,9 8.5,9 L2,9 L2,3 L7,3 L7,4.5 C7,4.776 7.224,5 7.5,5 L14,5 L14,11 L9,11 Z"})))))))))}}class $o extends y.a.PureComponent{render(){return y.a.createElement("span",this.props,y.a.createElement(W.c,{id:"generic_icons.flagged",defaultMessage:"Flagged Icon"},e=>y.a.createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 16 16",role:"icon","aria-label":e},y.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"inherit",fillRule:"evenodd"},y.a.createElement("g",{transform:"translate(-1073.000000, -33.000000)",fillRule:"nonzero",fill:"inherit"},y.a.createElement("g",{transform:"translate(-1.000000, 0.000000)"},y.a.createElement("g",{transform:"translate(1064.000000, 22.000000)"},y.a.createElement("g",{transform:"translate(10.000000, 11.000000)"},y.a.createElement("path",{d:"M8,1 L2,1 C2,0.447 1.553,0 1,0 C0.447,0 0,0.447 0,1 L0,15.5 C0,15.776 0.224,16 0.5,16 L1.5,16 C1.776,16 2,15.776 2,15.5 L2,11 L7,11 L7,12 C7,12.553 7.447,13 8,13 L15,13 C15.553,13 16,12.553 16,12 L16,4 C16,3.447 15.553,3 15,3 L9,3 L9,2 C9,1.447 8.553,1 8,1 Z"})))))))))}}function er(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class tr extends y.a.PureComponent{constructor(){super(),er(this,"handlePress",e=>{e.preventDefault();const{actions:t,isFlagged:a,postId:n}=this.props;a?t.unflagPost(n):t.flagPost(n)}),er(this,"handleA11yActivateEvent",()=>{this.setState({a11yActive:!0})}),er(this,"handleA11yDeactivateEvent",()=>{this.setState({a11yActive:!1})}),this.buttonRef=y.a.createRef(),this.state={a11yActive:!1}}componentDidMount(){this.buttonRef.current&&(this.buttonRef.current.addEventListener(S.c.ACTIVATE,this.handleA11yActivateEvent),this.buttonRef.current.addEventListener(S.c.DEACTIVATE,this.handleA11yDeactivateEvent))}componentWillUnmount(){this.buttonRef.current&&(this.buttonRef.current.removeEventListener(S.c.ACTIVATE,this.handleA11yActivateEvent),this.buttonRef.current.removeEventListener(S.c.DEACTIVATE,this.handleA11yDeactivateEvent))}componentDidUpdate(){this.state.a11yActive&&this.buttonRef.current&&this.buttonRef.current.dispatchEvent(new Event(S.c.UPDATE))}render(){if(this.props.isEphemeral)return null;const e=this.props.isFlagged,t=e?"visible":"";let a;return a=e?y.a.createElement($o,{className:"icon"}):y.a.createElement(Xo,{className:"icon"}),y.a.createElement("button",{ref:this.buttonRef,id:"".concat(this.props.location,"_flagIcon_").concat(this.props.postId),"aria-label":e?Object(M.fb)("flag_post.unflag","Unflag").toLowerCase():Object(M.fb)("flag_post.flag","Flag for follow up").toLowerCase(),className:"style--none flag-icon__container "+t,onClick:this.handlePress},y.a.createElement(Qs.a,{key:"flagtooltipkey"+t,delayShow:S.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:y.a.createElement(Zs.a,{id:"flagTooltip"},y.a.createElement(W.c,{id:e?Object(le.b)("flag_post.unflag"):Object(le.b)("flag_post.flag"),defaultMessage:e?"Unflag":"Flag for follow up"}))},a))}}er(tr,"propTypes",{location:_.a.oneOf([S.r.CENTER,S.r.RHS_ROOT,S.r.RHS_COMMENT,S.r.SEARCH]).isRequired,postId:_.a.string.isRequired,isFlagged:_.a.bool.isRequired,isEphemeral:_.a.bool,actions:_.a.shape({flagPost:_.a.func.isRequired,unflagPost:_.a.func.isRequired}).isRequired}),er(tr,"defaultProps",{isEphemeral:!1,location:S.r.CENTER});var ar=Object(n.connect)(null,function(e){return{actions:Object(s.bindActionCreators)({flagPost:q.d,unflagPost:q.l},e)}})(tr),nr=a(1296);function sr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ir extends y.a.PureComponent{constructor(...e){super(...e),sr(this,"handleClick",()=>{Object(M.Z)()&&O.c()})}render(){const e=y.a.createElement(nr.a,{eventTime:this.props.eventTime});if(Object(P.m)()||!this.props.isPermalink)return y.a.createElement("div",{role:"presentation",className:"post__permalink"},e);const{location:t,postId:a,teamUrl:n}=this.props;return y.a.createElement(vn.a,{role:"presentation",id:"".concat(t,"_time_").concat(a),to:"".concat(n,"/pl/").concat(a),className:"post__permalink",onClick:this.handleClick},e)}}sr(ir,"propTypes",{isPermalink:_.a.bool.isRequired,eventTime:_.a.number.isRequired,location:_.a.oneOf([S.r.CENTER,S.r.RHS_ROOT,S.r.RHS_COMMENT,S.r.SEARCH]).isRequired,postId:_.a.string,teamUrl:_.a.string}),sr(ir,"defaultProps",{eventTime:0,location:S.r.CENTER});var or=Object(n.connect)(function(e){return{teamUrl:Object(u.getCurrentRelativeTeamUrl)(e)}})(ir);function rr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const lr=-7;class cr extends y.a.PureComponent{constructor(...e){super(...e),rr(this,"handleAddEmoji",e=>{this.setState({showEmojiPicker:!1});const t=e.name||e.aliases[0];this.props.actions.addReaction(this.props.postId,t),this.props.toggleEmojiPicker()})}render(){const{channelId:e,location:t,postId:a,showEmojiPicker:n,teamId:s}=this.props;let i,o;return t!==S.r.RHS_ROOT&&t!==S.r.RHS_COMMENT||(i=ca.RHS_SPACE_REQUIRED_ABOVE,o=ca.RHS_SPACE_REQUIRED_BELOW),y.a.createElement(ao,{channelId:e,teamId:s,permissions:[$i.a.ADD_REACTION]},y.a.createElement("div",null,y.a.createElement(ca,{show:n,target:this.props.getDotMenuRef,onHide:this.props.toggleEmojiPicker,onEmojiClose:this.props.toggleEmojiPicker,onEmojiClick:this.handleAddEmoji,topOffset:lr,spaceRequiredAbove:i,spaceRequiredBelow:o}),y.a.createElement("button",{id:"".concat(t,"_reaction_").concat(a),"aria-label":Object(M.fb)("post_info.tooltip.add_reactions","Add Reaction").toLowerCase(),className:"reacticon__container color--link style--none",onClick:this.props.toggleEmojiPicker},y.a.createElement(Qs.a,{className:"hidden-xs",delayShow:500,placement:"top",overlay:y.a.createElement(Zs.a,{id:"reaction-icon-tooltip",className:"hidden-xs"},y.a.createElement(W.c,{id:"post_info.tooltip.add_reactions",defaultMessage:"Add Reaction"}))},y.a.createElement(ft,{className:"icon icon--emoji"})))))}}rr(cr,"propTypes",{channelId:_.a.string,postId:_.a.string.isRequired,teamId:_.a.string.isRequired,getDotMenuRef:_.a.func.isRequired,location:_.a.oneOf([S.r.CENTER,S.r.RHS_ROOT,S.r.RHS_COMMENT]).isRequired,showEmojiPicker:_.a.bool.isRequired,toggleEmojiPicker:_.a.func.isRequired,actions:_.a.shape({addReaction:_.a.func.isRequired}).isRequired}),rr(cr,"defaultProps",{location:S.r.CENTER,showEmojiPicker:!1});var dr=Object(n.connect)(null,function(e){return{actions:Object(s.bindActionCreators)({addReaction:q.a},e)}})(cr),mr=a(574),ur=a.n(mr);function pr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class hr extends y.a.PureComponent{constructor(...e){super(...e),pr(this,"handleAddReaction",e=>{e.preventDefault();const{actions:t,post:a,emojiName:n}=this.props;t.addReaction(a.id,n)}),pr(this,"handleRemoveReaction",e=>{e.preventDefault(),this.props.actions.removeReaction(this.props.post.id,this.props.emojiName)}),pr(this,"loadMissingProfiles",()=>{const e=this.props.reactions.map(e=>e.user_id);this.props.actions.getMissingProfilesByIds(e)})}render(){if(!this.props.emojiImageUrl)return null;let e=!1;const t=[],a=this.props.otherUsersCount;for(const a of this.props.profiles)a.id===this.props.currentUserId?e=!0:t.push(M.w(a));let n,s;t.sort(),e&&t.unshift(M.fb("reaction.you","You")),n=a>0?t.length>0?y.a.createElement(W.c,{id:"reaction.usersAndOthersReacted",defaultMessage:"{users} and {otherUsers, number} other {otherUsers, plural, one {user} other {users}}",values:{users:t.join(", "),otherUsers:a}}):y.a.createElement(W.c,{id:"reaction.othersReacted",defaultMessage:"{otherUsers, number} {otherUsers, plural, one {user} other {users}}",values:{otherUsers:a}}):t.length>1?y.a.createElement(W.c,{id:"reaction.usersReacted",defaultMessage:"{users} and {lastUser}",values:{users:t.slice(0,-1).join(", "),lastUser:t[t.length-1]}}):t[0],s=t.length+a>1?e?y.a.createElement(W.c,{id:"reaction.reactionVerb.youAndUsers",defaultMessage:"reacted"}):y.a.createElement(W.c,{id:"reaction.reactionVerb.users",defaultMessage:"reacted"}):e?y.a.createElement(W.c,{id:"reaction.reactionVerb.you",defaultMessage:"reacted"}):y.a.createElement(W.c,{id:"reaction.reactionVerb.user",defaultMessage:"reacted"});const i=y.a.createElement(W.c,{id:"reaction.reacted",defaultMessage:"{users} {reactionVerb} with {emoji}",values:{users:y.a.createElement("b",null,n),reactionVerb:s,emoji:y.a.createElement("b",null,":"+this.props.emojiName+":")}});let o,r,l="post-reaction";const c=this.props.emojiName.replace(/_/g," ");let d="".concat(M.fb("reaction.reactWidth.ariaLabel","react with")," ").concat(c);return e?(this.props.canRemoveReaction?(o=this.handleRemoveReaction,d="".concat(M.fb("reaction.removeReact.ariaLabel","remove reaction")," ").concat(c),r=y.a.createElement(W.c,{id:"reaction.clickToRemove",defaultMessage:"(click to remove)"})):l+=" post-reaction--read-only",l+=" post-reaction--current-user"):!e&&this.props.canAddReaction?(o=this.handleAddReaction,r=y.a.createElement(W.c,{id:"reaction.clickToAdd",defaultMessage:"(click to add)"})):l+=" post-reaction--read-only",y.a.createElement("button",{id:"postReaction-".concat(this.props.post.id,"-").concat(this.props.emojiName),"aria-label":d,className:"style--none ".concat(l),onClick:o},y.a.createElement(Qs.a,{delayShow:1e3,placement:"top",shouldUpdatePosition:!0,overlay:y.a.createElement(Zs.a,{id:"".concat(this.props.post.id,"-").concat(this.props.emojiName,"-reaction")},i,y.a.createElement("br",null),r),onEnter:this.loadMissingProfiles},y.a.createElement("span",null,y.a.createElement("span",{className:"post-reaction__emoji emoticon",style:{backgroundImage:"url("+this.props.emojiImageUrl+")"}}),y.a.createElement("span",{className:"post-reaction__count"},this.props.reactionCount))))}}function gr(e,t,a,n,s,i,o,r){return!!Object(D.haveIChannelPermission)(e,{team:t,channel:a,permission:r})&&!(n===ur.a.DEFAULT_CHANNEL&&"true"===s.ExperimentalTownSquareIsReadOnly&&"true"===i.IsLicensed&&!o.roles.includes("system_admin"))}pr(hr,"propTypes",{post:_.a.object.isRequired,currentUserId:_.a.string.isRequired,emojiName:_.a.string.isRequired,reactionCount:_.a.number.isRequired,profiles:_.a.array.isRequired,otherUsersCount:_.a.number.isRequired,reactions:_.a.arrayOf(_.a.object).isRequired,canAddReaction:_.a.bool.isRequired,canRemoveReaction:_.a.bool.isRequired,emojiImageUrl:_.a.string.isRequired,actions:_.a.shape({addReaction:_.a.func.isRequired,getMissingProfilesByIds:_.a.func.isRequired,removeReaction:_.a.func.isRequired})});var br=Object(n.connect)(function(){const e=Object(m.makeGetProfilesForReactions)();return function(t,a){const n=Object(d.getConfig)(t),s=Object(d.getLicense)(t),i=Object(m.getCurrentUser)(t),o=e(t,a.reactions);let r;r=Ot.a.has(a.emojiName)?Ot.d[Ot.a.get(a.emojiName)]:Object(Ms.getCustomEmojisByName)(t).get(a.emojiName);let l="";r&&(l=Object(Rt.getEmojiImageUrl)(r));const c=Object(p.getChannel)(t,a.post.channel_id)||{},u=0!==c.delete_at,h=c.team_id;let g=!1,b=!1;return u||(g=gr(t,h,a.post.channel_id,c.name,n,s,i,$i.a.REMOVE_REACTION),b=gr(t,h,a.post.channel_id,c.name,n,s,i,$i.a.ADD_REACTION)),{profiles:o,otherUsersCount:a.reactions.length-o.length,currentUserId:Object(m.getCurrentUserId)(t),reactionCount:a.reactions.length,canAddReaction:g,canRemoveReaction:b,emojiImageUrl:l}}},function(e){return{actions:Object(s.bindActionCreators)({addReaction:q.a,removeReaction:L.removeReaction,getMissingProfilesByIds:o.getMissingProfilesByIds},e)}})(hr);function fr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Er=15,_r=260;class vr extends y.a.PureComponent{constructor(e){super(e),fr(this,"getTarget",()=>this.refs.addReactionButton),fr(this,"handleEmojiClick",e=>{this.setState({showEmojiPicker:!1});const t=e.name||e.aliases[0];this.props.actions.addReaction(this.props.post.id,t)}),fr(this,"hideEmojiPicker",()=>{this.setState({showEmojiPicker:!1})}),fr(this,"toggleEmojiPicker",()=>{this.setState({showEmojiPicker:!this.state.showEmojiPicker})}),this.state={showEmojiPicker:!1}}componentDidUpdate(e){this.props.reactions!==e.reactions&&Object(M.k)()&&this.props.actions.scrollPostList()}render(){const e=new Map,t=[];if(this.props.reactions)for(const a of Object.values(this.props.reactions)){const n=a.emoji_name;e.has(n)?e.get(n).push(a):(t.push(n),e.set(n,[a]))}if(0===e.size)return null;const a=t.map(t=>y.a.createElement(br,{key:t,post:this.props.post,emojiName:t,reactions:e.get(t)||[]})),n=this.getTarget();let s=Er;n&&(s=window.innerWidth-n.getBoundingClientRect().right-_r)<0&&(s=Er);let i=null;if(this.props.enableEmojiPicker){const e=y.a.createElement(Zs.a,{id:"addReactionTooltip"},y.a.createElement(W.c,{id:"reaction_list.addReactionTooltip",defaultMessage:"Add reaction"}));i=y.a.createElement("span",{className:"emoji-picker__container"},y.a.createElement(ca,{show:this.state.showEmojiPicker,target:this.getTarget,onHide:this.hideEmojiPicker,onEmojiClose:this.hideEmojiPicker,onEmojiClick:this.handleEmojiClick,rightOffset:s,topOffset:-5}),y.a.createElement(Qs.a,{placement:"top",delayShow:S.Q.OVERLAY_TIME_DELAY,overlay:e},y.a.createElement(ao,{channelId:this.props.post.channel_id,teamId:this.props.teamId,permissions:[$i.a.ADD_REACTION]},y.a.createElement("button",{"aria-label":Object(M.fb)("reaction.add.ariaLabel","add reaction"),className:"style--none post-reaction",onClick:this.toggleEmojiPicker},y.a.createElement("span",{id:"addReaction-".concat(this.props.post.id),className:"post-reaction__add",ref:"addReactionButton"},"+")))))}let o="post-add-reaction";return this.state.showEmojiPicker&&(o+=" post-add-reaction-emoji-picker-open"),y.a.createElement("div",{"aria-label":Object(M.fb)("reaction.container.ariaLabel","reactions"),className:"post-reaction-list"},a,y.a.createElement("div",{className:o},i))}}fr(vr,"propTypes",{post:_.a.object.isRequired,teamId:_.a.string,reactions:_.a.object,enableEmojiPicker:_.a.bool.isRequired,actions:_.a.shape({addReaction:_.a.func.isRequired,scrollPostList:_.a.func.isRequired})});var yr=Object(n.connect)(function(){const e=Object(Na.makeGetReactionsForPost)();return function(t,a){const n="true"===Object(d.getConfig)(t).EnableEmojiPicker&&!a.isReadOnly;return{teamId:(Object(p.getChannel)(t,a.post.channel_id)||{}).team_id,reactions:e(t,a.post.id),enableEmojiPicker:n}}},function(e){return{actions:Object(s.bindActionCreators)({addReaction:q.a,scrollPostList:da.j},e)}})(vr),Cr=a(1467),wr=a.n(Cr),Tr=a(1026);function Or(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Sr=600,Pr=200,Mr=22;class Nr extends y.a.PureComponent{constructor(e){super(e),Or(this,"toggleCollapse",e=>{e.preventDefault(),this.setState(e=>({isCollapsed:!e.isCollapsed}))}),Or(this,"checkTextOverflow",()=>{this.overflowRef&&window.cancelAnimationFrame(this.overflowRef),this.overflowRef=window.requestAnimationFrame(()=>{const e=this.refs.textContainer;let t=!1;e&&e.scrollHeight>this.maxHeight&&(t=!0),t!==this.state.isOverflow&&this.setState({isOverflow:t})})}),Or(this,"handleResize",()=>{this.checkTextOverflow()}),this.maxHeight=this.props.isAttachmentText?Pr:Sr,this.state={isCollapsed:!0,isOverflow:!1}}componentDidMount(){this.checkTextOverflow(),window.addEventListener("resize",this.handleResize)}componentDidUpdate(e){this.props.text===e.text&&this.props.isRHSExpanded===e.isRHSExpanded&&this.props.isRHSOpen===e.isRHSOpen&&this.props.checkOverflow===e.checkOverflow||this.checkTextOverflow()}componentWillUnmount(){window.removeEventListener("resize",this.handleResize),this.overflowRef&&window.cancelAnimationFrame(this.overflowRef)}render(){const{isCollapsed:e,isOverflow:t}=this.state,{children:a,isAttachmentText:n,compactDisplay:s}=this.props;let i,o="post-message";e?(i=this.maxHeight,o+=" post-message--collapsed"):o+=" post-message--expanded";let r="post-collapse__gradient",l="post-collapse__show-more";n&&(r="post-attachment-collapse__gradient",l="post-attachment-collapse__show-more");let c=null;if(t){!n&&e&&s&&(i-=Mr);let t="fa fa-angle-up",a=Object(M.fb)("post_info.message.show_less","Show Less");e&&(t="fa fa-angle-down",a=Object(M.fb)("post_info.message.show_more","Show More")),c=y.a.createElement("div",{className:"post-collapse"},y.a.createElement("div",{id:"collapseGradient",className:r}),y.a.createElement("div",{className:l},y.a.createElement("div",{className:"post-collapse__show-more-line"}),y.a.createElement("button",{id:"showMoreButton",className:"post-collapse__show-more-button",onClick:this.toggleCollapse},y.a.createElement("span",{className:t}),a),y.a.createElement("div",{className:"post-collapse__show-more-line"}))),o+=" post-message--overflow"}return y.a.createElement("div",{className:o},y.a.createElement("div",{style:{maxHeight:i},className:"post-message__text-container",ref:"textContainer"},a),c)}}Or(Nr,"propTypes",{children:_.a.node,checkOverflow:_.a.number,isAttachmentText:_.a.bool,isRHSExpanded:_.a.bool.isRequired,isRHSOpen:_.a.bool.isRequired,text:_.a.string,compactDisplay:_.a.bool.isRequired});var Ir=Object(n.connect)(function(e){return{isRHSExpanded:Object(ms.a)(e),isRHSOpen:Object(ms.c)(e),compactDisplay:Object(c.get)(e,S.A.CATEGORY_DISPLAY_SETTINGS,S.A.MESSAGE_DISPLAY,S.A.MESSAGE_DISPLAY_DEFAULT)===S.A.MESSAGE_DISPLAY_COMPACT}})(Nr);class Ar extends y.a.PureComponent{render(){const{action:e,handleAction:t}=this.props;return y.a.createElement("button",{"data-action-id":e.id,"data-action-cookie":e.cookie,key:e.id,onClick:t},y.a.createElement(ua.a,{message:e.name,options:{mentionHighlight:!1,markdown:!1,autolinkedUrlSchemes:[]}}))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Ar,"propTypes",{action:_.a.object.isRequired,handleAction:_.a.func.isRequired});var jr=a(1164),Rr=a(1090),kr=a(1165),Lr=a(1167);function xr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Dr extends y.a.PureComponent{constructor(e){super(e),xr(this,"handleSelected",e=>{if(!e)return;const{action:t}=this.props;let a="",n="";"users"===t.data_source?(n=e.username,a=e.id):"channels"===t.data_source?(n=e.display_name,a=e.id):(n=e.text,a=e.value),this.props.actions.selectAttachmentMenuAction(this.props.postId,this.props.action.id,this.props.action.cookie,this.props.action.data_source,n,a),this.setState({value:n})});const t=e.action;let a;this.providers=[],t&&("users"===t.data_source?this.providers=[new Rr.a]:"channels"===t.data_source?this.providers=[new kr.a]:t.options&&(this.providers=[new jr.a(t.options)]));let n="";t.default_option&&t.options&&(n=(a=t.options.find(e=>e.value===t.default_option))?a.text:""),this.state={selected:a,value:n}}static getDerivedStateFromProps(e,t){return e.selected&&e.selected!==t.selected?{value:e.selected.text,selected:e.selected}:null}render(){const{action:e}=this.props;return y.a.createElement(Lr.a,{providers:this.providers,onSelected:this.handleSelected,placeholder:e.name,inputClassName:"post-attachment-dropdown",value:this.state.value})}}xr(Dr,"propTypes",{postId:_.a.string.isRequired,action:_.a.object.isRequired,selected:_.a.object,actions:_.a.shape({selectAttachmentMenuAction:_.a.func.isRequired}).isRequired});var Ur=Object(n.connect)(function(e,t){const a=e.views.posts.menuActions[t.postId];return{selected:a&&a[t.action&&t.action.id]}},function(e){return{actions:Object(s.bindActionCreators)({selectAttachmentMenuAction:B},e)}})(Dr),qr=a(455);class Hr extends qr.a{link(e,t,a){let n=e;Object(Mn.c)(e)||(n="http://".concat(n));let s='<a class="theme markdown__link" href="'.concat(n,'" target="_blank"');return t&&(s+=' title="'+t+'"'),s+=">".concat(a,"</a>")}}function Fr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Br extends y.a.PureComponent{constructor(e){super(e),Fr(this,"handleHeightReceivedForThumbUrl",({height:e})=>{const{attachment:t}=this.props;(!this.props.imagesMetadata||this.props.imagesMetadata&&!this.props.imagesMetadata[t.thumb_url])&&this.handleHeightReceived(e)}),Fr(this,"handleHeightReceivedForImageUrl",({height:e})=>{const{attachment:t}=this.props;(!this.props.imagesMetadata||this.props.imagesMetadata&&!this.props.imagesMetadata[t.image_url])&&this.handleHeightReceived(e)}),Fr(this,"handleHeightReceived",e=>{this.mounted&&e>0&&this.setState(e=>({checkOverflow:e.checkOverflow+1}))}),Fr(this,"renderPostActions",()=>{const e=this.props.attachment.actions;if(!e||!e.length)return"";const t=[];return e.forEach(e=>{if(e.id&&e.name)switch(e.type){case"select":t.push(y.a.createElement(Ur,{key:e.id,postId:this.props.postId,action:e}));break;case"button":default:t.push(y.a.createElement(Ar,{key:e.id,action:e,handleAction:this.handleAction}))}}),y.a.createElement("div",{className:"attachment-actions"},t)}),Fr(this,"handleAction",e=>{e.preventDefault();const t=e.currentTarget.getAttribute("data-action-id"),a=e.currentTarget.getAttribute("data-action-cookie");this.props.actions.doPostActionWithCookie(this.props.postId,t,a)}),Fr(this,"getFieldsTable",()=>{const e=this.props.attachment.fields;if(!e||!e.length)return"";const t=[];let a=[],n=[],s=0,i=!1,o=0;const r={markdown:!1,mentionHighlight:!1};return e.forEach((e,l)=>{(2===s||!0!==e.short||i)&&(t.push(y.a.createElement("table",{className:"attachment-fields",key:"attachment__table__"+o},y.a.createElement("thead",null,y.a.createElement("tr",null,a)),y.a.createElement("tbody",null,y.a.createElement("tr",null,n)))),a=[],n=[],s=0,o+=1,i=!1),a.push(y.a.createElement("th",{className:"attachment-field__caption",key:"attachment__field-caption-"+l+"__"+o,width:"50%"},y.a.createElement(ua.a,{message:e.title,options:r}))),n.push(y.a.createElement("td",{className:"attachment-field",key:"attachment__field-"+l+"__"+o},y.a.createElement(ua.a,{message:e.value}))),s+=1,i=!(!0===e.short)}),a.length>0&&t.push(y.a.createElement("table",{className:"attachment-fields",key:"attachment__table__"+o},y.a.createElement("thead",null,y.a.createElement("tr",null,a)),y.a.createElement("tbody",null,y.a.createElement("tr",null,n)))),y.a.createElement("div",null,t)}),this.state={checkOverflow:0},this.imageProps={onImageLoaded:this.handleHeightReceived}}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}render(){const{attachment:e,options:t}=this.props;let a,n="";e.pretext&&(n="attachment--pretext",a=y.a.createElement("div",{className:"attachment__thumb-pretext"},y.a.createElement(ua.a,{message:e.pretext})));let s,i,o,r,l,c=[];if((e.author_name||e.author_icon)&&(e.author_icon&&c.push(y.a.createElement(Tr.a,{key:"attachment__author-icon",src:e.author_icon,imageMetadata:this.props.imagesMetadata[e.author_icon]},e=>y.a.createElement("img",{alt:"attachment author icon",className:"attachment__author-icon",src:e,height:"14",width:"14"}))),e.author_name&&c.push(y.a.createElement("span",{className:"attachment__author-name",key:"attachment__author-name"},e.author_name))),e.author_link&&Object(Mn.f)(e.author_link)&&(c=y.a.createElement("a",{href:e.author_link,target:"_blank",rel:"noopener noreferrer"},c)),e.title&&(s=e.title_link&&Object(Mn.f)(e.title_link)?y.a.createElement("h1",{className:"attachment__title"},y.a.createElement("a",{className:"attachment__title-link",href:e.title_link,target:"_blank",rel:"noopener noreferrer"},e.title)):y.a.createElement("h1",{className:"attachment__title"},y.a.createElement(ua.a,{message:e.title,options:{mentionHighlight:!1,renderer:new Hr,autolinkedUrlSchemes:[]}}))),e.text&&(i=y.a.createElement(Ir,{checkOverflow:this.state.checkOverflow,isAttachmentText:!0,text:e.text},y.a.createElement(ua.a,{message:e.text||"",options:t,imageProps:this.imageProps}))),e.image_url){const t=this.props.imagesMetadata[e.image_url];o=y.a.createElement("div",{className:"attachment__image-container"},y.a.createElement(Tr.a,{src:e.image_url,imageMetadata:t},e=>y.a.createElement(ho.a,{className:"attachment__image",onImageLoaded:this.handleHeightReceivedForImageUrl,src:e,dimensions:t})))}if(e.footer){let t;if(e.footer_icon){const a=this.props.imagesMetadata[e.footer_icon];t=y.a.createElement(Tr.a,{src:e.footer_icon,imageMetadata:a},e=>y.a.createElement("img",{alt:"attachment footer icon",className:"attachment__footer-icon",src:e,height:"16",width:"16"}))}r=y.a.createElement("div",{className:"attachment__footer-container"},t,y.a.createElement("span",null,wr()(e.footer,{length:S.i.MAX_ATTACHMENT_FOOTER_LENGTH,omission:"…"})))}if(e.thumb_url){const t=this.props.imagesMetadata[e.thumb_url];l=y.a.createElement("div",{className:"attachment__thumb-container"},y.a.createElement(Tr.a,{src:e.thumb_url,imageMetadata:t},e=>y.a.createElement(ho.a,{onImageLoaded:this.handleHeightReceivedForThumbUrl,src:e,dimensions:t})))}const d=this.getFieldsTable(),m=this.renderPostActions();let u;return e.color&&"#"===e.color[0]&&(u={borderLeftColor:e.color}),y.a.createElement("div",{className:"attachment "+n,ref:"attachment"},a,y.a.createElement("div",{className:"attachment__content"},y.a.createElement("div",{className:u?"clearfix attachment__container":"clearfix attachment__container attachment__container--"+e.color,style:u},c,s,y.a.createElement("div",null,y.a.createElement("div",{className:l?"attachment__body":"attachment__body attachment__body--no_thumb",onClick:M.K},i,o,d,r,m),l,y.a.createElement("div",{style:Gr.footer})))))}}Fr(Br,"propTypes",{postId:_.a.string.isRequired,attachment:_.a.object.isRequired,options:_.a.object,imagesMetadata:_.a.object,actions:_.a.shape({doPostActionWithCookie:_.a.func.isRequired}).isRequired});const Gr={footer:{clear:"both"}};var Vr=Object(n.connect)(null,function(e){return{actions:Object(s.bindActionCreators)({doPostActionWithCookie:L.doPostActionWithCookie},e)}})(Br);function Wr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class zr extends y.a.PureComponent{render(){const e=[];return this.props.attachments.forEach((t,a)=>{e.push(y.a.createElement(Vr,{attachment:t,postId:this.props.postId,key:"att_"+a,options:this.props.options,imagesMetadata:this.props.imagesMetadata}))}),y.a.createElement("div",{id:"messageAttachmentList_".concat(this.props.postId),className:"attachment__list"},e)}}function Yr(e,t,a="x",n="y"){return Math.sqrt(Math.pow(e[a]-t[a],2)+Math.pow(e[n]-t[n],2))}function Kr(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Qr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Wr(zr,"propTypes",{postId:_.a.string.isRequired,attachments:_.a.array.isRequired,options:_.a.object,imagesMetadata:_.a.object}),Wr(zr,"defaultProps",{imagesMetadata:{}});const Zr={height:80,width:80};class Jr extends y.a.PureComponent{constructor(...e){super(...e),Qr(this,"getImageMetadata",e=>{if(!e)return null;const t=this.props.post.metadata.images;return t?t[e]:null}),Qr(this,"isLargeImage",e=>{if(!e)return!1;const{height:t,width:a}=e;return a>=150&&a/t>=16/9}),Qr(this,"handleRemovePreview",async()=>{const e=Object.assign({},this.props.post.props);e[S.z.REMOVE_LINK_PREVIEW]="true";const t={id:this.props.post.id,props:e};return this.props.actions.editPost(t)})}renderImageToggle(){return y.a.createElement("button",{className:"style--none post__embed-visibility color--link","data-expanded":this.props.isEmbedVisible,"aria-label":"Toggle Embed Visibility",onClick:this.props.toggleEmbedVisibility})}renderLargeImage(e,t){return this.props.isEmbedVisible?y.a.createElement(Tr.a,{src:e,imageMetadata:t},e=>y.a.createElement(ho.a,{className:"attachment__image attachment__image--opengraph large_image",src:e,dimensions:t})):null}renderSmallImage(e,t){return this.props.isEmbedVisible?y.a.createElement("div",{className:"attachment__image__container--opengraph"},y.a.createElement(Tr.a,{src:e,imageMetadata:t},e=>y.a.createElement(ho.a,{className:"attachment__image attachment__image--opengraph",src:e,dimensions:t}))):null}truncateText(e){return e&&e.length>300?e.substring(0,300-"...".length)+"...":e}hasPreviewBeenRemoved(){const{post:e}=this.props;return!(!e||!e.props)&&"true"===e.props[S.z.REMOVE_LINK_PREVIEW]}render(){if(!this.props.previewEnabled||!this.props.enableLinkPreviews)return null;if(!this.props.post||Object(Me.m)(this.props.post))return null;if(this.hasPreviewBeenRemoved())return null;const e=this.props.openGraphData;if(!e)return null;const t=function(e,t){if(!e||!e.images||0===e.images.length)return null;const a=e.images.map(e=>{const a=e.secure_url||e.url;return e.width&&e.height||!t||!t[a]?e:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Kr(a,!0).forEach(function(t){Qr(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Kr(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e,{height:e.height||t[a].height,width:e.width||t[a].width})}),n=function(e,t,a="x",n="y"){var s={};for(const i of t)void 0===s[a]||void 0===s[n]?s=i:Yr(i,e,a,n)<Yr(s,e,a,n)&&(s=i);return s}(Zr,a,"width","height");return n.secure_url||n.url}(e,this.props.post.metadata.images),a=this.getImageMetadata(t),n=this.isLargeImage(a);let s,i;return this.props.currentUserId===this.props.post.user_id&&(s=y.a.createElement("button",{id:"removePreviewButton",type:"button",className:"btn-close","aria-label":"Close",onClick:this.handleRemovePreview},y.a.createElement("span",{"aria-hidden":"true"},"×"))),(e.description||t)&&(i=y.a.createElement("div",{className:"attachment__body attachment__body--opengraph"},y.a.createElement("div",null,this.truncateText(e.description)," ",t&&n&&this.renderImageToggle()),t&&n&&this.renderLargeImage(t,a))),y.a.createElement("div",{className:"attachment attachment--opengraph"},y.a.createElement("div",{className:"attachment__content"},y.a.createElement("div",{className:"clearfix attachment__container attachment__container--opengraph"},y.a.createElement("div",{className:"attachment__body__wrap attachment__body__wrap--opengraph"},y.a.createElement("span",{className:"sitename"},this.truncateText(e.site_name)),s,y.a.createElement("h1",{className:"attachment__title attachment__title--opengraph"+(e.title?"":" is-url")},y.a.createElement("a",{className:"attachment__title-link attachment__title-link--opengraph",href:Object(Mn.g)(e.url||this.props.link),target:"_blank",rel:"noopener noreferrer",title:e.title||e.url||this.props.link},this.truncateText(e.title||e.url||this.props.link))),i),t&&!n&&this.renderSmallImage(t,a))))}}Qr(Jr,"propTypes",{link:_.a.string.isRequired,currentUserId:_.a.string,post:_.a.object,openGraphData:_.a.object,enableLinkPreviews:_.a.bool.isRequired,previewEnabled:_.a.bool.isRequired,isEmbedVisible:_.a.bool,toggleEmbedVisibility:_.a.func.isRequired,actions:_.a.shape({editPost:_.a.func.isRequired}).isRequired});var Xr=Object(n.connect)(function(e,t){const a=Object(d.getConfig)(e);return{currentUserId:Object(m.getCurrentUserId)(e),enableLinkPreviews:"true"===a.EnableLinkPreviews,openGraphData:Object(Na.getOpenGraphMetadataForUrl)(e,t.link),previewEnabled:Object(c.getBool)(e,S.A.CATEGORY_DISPLAY_SETTINGS,S.A.LINK_PREVIEW_DISPLAY,!0)}},function(e){return{actions:Object(s.bindActionCreators)({editPost:F},e)}})(Jr);function $r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class el extends y.a.PureComponent{constructor(e){super(e),$r(this,"showModal",e=>{e.preventDefault(),this.setState({showModal:!0})}),$r(this,"hideModal",()=>{this.setState({showModal:!1})}),this.state={showModal:!1}}render(){return y.a.createElement("div",{className:"post__embed-container"},y.a.createElement(Tr.a,{src:this.props.link,imageMetadata:this.props.imageMetadata},e=>y.a.createElement(y.a.Fragment,null,y.a.createElement(ho.a,{className:"img-div attachment__image cursor--pointer",src:e,dimensions:this.props.imageMetadata,showLoader:!0,onClick:this.showModal}),y.a.createElement(ko,{show:this.state.showModal,onModalDismissed:this.hideModal,post:this.props.post,startIndex:0,fileInfos:[{has_preview_image:!1,link:e,extension:this.props.imageMetadata.format}]}))))}}$r(el,"propTypes",{imageMetadata:_.a.object.isRequired,link:_.a.string.isRequired,post:_.a.object.isRequired});var tl=el;a(71);function al(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const nl=/(?:http|https):\/\/(?:www\.|m\.)?(?:(?:youtube\.com\/(?:(?:v\/)|(?:(?:watch|embed\/watch)(?:\/|.*v=))|(?:embed\/)|(?:user\/[^\/]+\/u\/[0-9]\/)))|(?:youtu\.be\/))([^#&?]*)/;class sl extends y.a.PureComponent{constructor(e){super(e),al(this,"updateStateFromProps",e=>{const t=e.link,a=t.trim().match(nl);a&&11===a[1].length&&(!1===e.show&&this.stop(),this.setState({videoId:a[1],time:this.handleYoutubeTime(t)}))}),al(this,"play",()=>{this.setState({playing:!0})}),al(this,"stop",()=>{this.setState({playing:!1})}),this.state={playing:!1}}UNSAFE_componentWillMount(){this.updateStateFromProps(this.props)}UNSAFE_componentWillReceiveProps(e){this.updateStateFromProps(e)}handleYoutubeTime(e){const t=e.match(/[\\?&](t|start|time_continue)=([0-9]+h)?([0-9]+m)?([0-9]+s?)/);if(!t||!t[0])return"";const a=t[2]?t[2].match(/([0-9]+)h/):null,n=t[3]?t[3].match(/([0-9]+)m/):null,s=t[4]?t[4].match(/([0-9]+)s?/):null;let i=0;return a&&a[1]&&(i+=3600*parseInt(a[1],10)),n&&n[1]&&(i+=60*parseInt(n[1],10)),s&&s[1]&&(i+=parseInt(s[1],10)),"&start="+i.toString()}render(){const{metadata:e}=this.props,t=y.a.createElement("h4",null,y.a.createElement("span",{className:"video-type"},"YouTube - "),y.a.createElement("span",{className:"video-title"},y.a.createElement("a",{href:this.props.link,target:"blank",rel:"noopener noreferrer"},e.title)));let a;if(this.state.playing)a=y.a.createElement("iframe",{src:"https://www.youtube.com/embed/"+this.state.videoId+"?autoplay=1&autohide=1&border=0&wmode=opaque&fs=1&enablejsapi=1"+this.state.time,width:"480px",height:"360px",type:"text/html",frameBorder:"0",allowFullScreen:"allowfullscreen"});else{const t=e.images[0];a=y.a.createElement("div",{className:"embed-responsive video-div__placeholder"},y.a.createElement("div",{className:"video-thumbnail__container"},y.a.createElement(Tr.a,{src:t.secure_url||t.url},e=>y.a.createElement("img",{src:e,alt:"youtube video thumbnail",className:"video-thumbnail"})),y.a.createElement("div",{className:"block"},y.a.createElement("span",{className:"play-button"},y.a.createElement("span",null)))))}return y.a.createElement("div",{className:"post__embed-container"},y.a.createElement("div",null,t,y.a.createElement("div",{className:"video-div embed-responsive-item",onClick:this.play},a)))}static isYoutubeLink(e){return e.trim().match(nl)}}al(sl,"propTypes",{link:_.a.string.isRequired,show:_.a.bool.isRequired,metadata:_.a.object});var il=Object(n.connect)(function(e,t){const a=Object(d.getConfig)(e);return{currentChannelId:Object(p.getCurrentChannelId)(e),googleDeveloperKey:a.GoogleDeveloperKey,hasImageProxy:"true"===a.HasImageProxy,metadata:Object(Na.getOpenGraphMetadataForUrl)(e,t.link)}})(sl);function ol(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class rl extends y.a.PureComponent{constructor(...e){super(...e),ol(this,"toggleEmbedVisibility",()=>{this.props.actions.toggleEmbedVisibility(this.props.post.id)}),ol(this,"getEmbed",()=>{const{metadata:e}=this.props.post;return e&&e.embeds&&0!==e.embeds.length?e.embeds[0]:null}),ol(this,"isEmbedToggleable",e=>{const t=this.props.pluginPostWillRenderEmbedComponents||[];for(const a of t)if(a.match(e))return Boolean(a.toggleable);return"image"===e.type||"opengraph"===e.type&&il.isYoutubeLink(e.url)}),ol(this,"renderEmbed",e=>{const t=this.props.pluginPostWillRenderEmbedComponents||[];for(const a of t)if(a.match(e)){const t=a.component;return this.props.isEmbedVisible&&y.a.createElement(t,{embed:e})}switch(e.type){case"image":return this.props.isEmbedVisible?y.a.createElement(tl,{imageMetadata:this.props.post.metadata.images[e.url],link:e.url,post:this.props.post}):null;case"message_attachment":{let e=[];return this.props.post.props&&this.props.post.props.attachments&&(e=this.props.post.props.attachments),y.a.createElement(zr,{attachments:e,postId:this.props.post.id,options:this.props.options,imagesMetadata:this.props.post.metadata.images})}case"opengraph":return il.isYoutubeLink(e.url)?this.props.isEmbedVisible?y.a.createElement(il,{link:e.url,show:this.props.isEmbedVisible}):null:y.a.createElement(Xr,{link:e.url,isEmbedVisible:this.props.isEmbedVisible,post:this.props.post,toggleEmbedVisibility:this.toggleEmbedVisibility});default:return null}}),ol(this,"renderToggle",e=>y.a.createElement("button",{key:"toggle",className:"style--none post__embed-visibility color--link ".concat(e?"pull-left":""),"data-expanded":this.props.isEmbedVisible,"aria-label":"Toggle Embed Visibility",onClick:this.toggleEmbedVisibility}))}render(){const e=this.getEmbed();if(e){const t=this.isEmbedToggleable(e),a=/^\s*https?:\/\/.*$/.test(this.props.post.message);return y.a.createElement("div",null,t&&a&&this.renderToggle(!0),this.props.children,t&&!a&&this.renderToggle(!1),this.renderEmbed(e))}return this.props.children}}ol(rl,"propTypes",{post:_.a.object.isRequired,pluginPostWillRenderEmbedComponents:_.a.arrayOf(_.a.object),children:_.a.element,isEmbedVisible:_.a.bool,options:_.a.object,actions:_.a.shape({toggleEmbedVisibility:_.a.func.isRequired}).isRequired});var ll=Object(n.connect)(function(e,t){return{isEmbedVisible:Object(G.b)(e,t.post.id),pluginPostWillRenderEmbedComponents:e.plugins.components.PostWillRenderEmbedComponent}},function(e){return{actions:Object(s.bindActionCreators)({toggleEmbedVisibility:q.k},e)}})(rl);function cl(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class dl extends y.a.PureComponent{constructor(e){super(e),cl(this,"handleHeightReceived",e=>{e>0&&this.setState(e=>({checkOverflow:e.checkOverflow+1}))}),this.state={collapse:!0,hasOverflow:!1,checkOverflow:0},this.imageProps={onImageLoaded:this.handleHeightReceived}}renderDeletedPost(){return y.a.createElement("p",null,y.a.createElement(W.c,{id:"post_body.deleted",defaultMessage:"(message deleted)"}))}renderEditedIndicator(){return Me.j(this.props.post)?y.a.createElement("span",{id:"postEdited_".concat(this.props.post.id),className:"post-edited__indicator"},y.a.createElement(W.c,{id:"post_message_view.edited",defaultMessage:"(edited)"})):null}render(){const{post:e,enableFormatting:t,options:a,pluginPostTypes:n,compactDisplay:s,isRHS:i,theme:o}=this.props;if(e.state===x.Posts.POST_DELETED)return this.renderDeletedPost();if(!t)return y.a.createElement("span",null,e.message);const r=e.props&&e.props.type?e.props.type:e.type;if(n.hasOwnProperty(r)){const t=n[r].component;return y.a.createElement(t,{post:e,compactDisplay:s,isRHS:i,theme:o})}let l=e.message;const c=M.ab(e);if(s&&c){const e=M.fb("post_info.message.visible.compact"," (Only visible to you)");l=l.concat(e)}return y.a.createElement(Ir,{checkOverflow:this.state.checkOverflow,text:l},y.a.createElement("div",{"aria-readonly":"true",tabIndex:"0",id:"postMessageText_".concat(e.id),className:"post-message__text",onClick:M.K},y.a.createElement(Ha,{message:l,imageProps:this.imageProps,isRHS:i,options:a,post:e,channelId:e.channel_id})),this.renderEditedIndicator(),y.a.createElement(R.a,{pluggableName:"PostMessageAttachment",postId:e.id,onHeightChange:this.handleHeightReceived}))}}cl(dl,"propTypes",{post:_.a.object.isRequired,enableFormatting:_.a.bool,options:_.a.object,compactDisplay:_.a.bool,isRHS:_.a.bool,isRHSOpen:_.a.bool,isRHSExpanded:_.a.bool,theme:_.a.object.isRequired,pluginPostTypes:_.a.object}),cl(dl,"defaultProps",{options:{},isRHS:!1,pluginPostTypes:{}});var ml=Object(n.connect)(function(e){return{enableFormatting:Object(c.getBool)(e,x.Preferences.CATEGORY_ADVANCED_SETTINGS,"formatting",!0),isRHSExpanded:Object(ms.a)(e),isRHSOpen:Object(ms.c)(e),pluginPostTypes:e.plugins.postTypes,theme:Object(c.getTheme)(e)}})(dl);function ul({post:e,previewCollapsed:t,previewEnabled:a,isEmbedVisible:n,pluginPostTypes:s}){const i=e.type&&s.hasOwnProperty(e.type);let o;const r=y.a.createElement(ml,{post:e,isRHS:!0,hasMention:!0});return o=e.state===x.Posts.POST_DELETED||i?r:y.a.createElement(ll,{post:e,previewCollapsed:t,previewEnabled:a,isEmbedVisible:n},r)}var pl=a(1032);class hl extends y.a.PureComponent{render(){return y.a.createElement("span",this.props,y.a.createElement(W.c,{id:"generic_icons.info",defaultMessage:"Info Icon"},e=>y.a.createElement("svg",{className:"svg-text-color","aria-label":e,width:"24px",height:"24px",viewBox:"0 0 24 24",version:"1.1"},y.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"inherit",fillRule:"evenodd"},y.a.createElement("g",{transform:"translate(-1015.000000, -516.000000)",fill:"inherit"},y.a.createElement("path",{d:"M1027,540 C1020.37258,540 1015,534.627417 1015,528 C1015,521.372583 1020.37258,516 1027,516 C1033.62742,516 1039,521.372583 1039,528 C1039,534.627417 1033.62742,540 1027,540 Z M1027,527 C1025.89543,527 1025,527.895431 1025,529 L1025,533 C1025,534.104569 1025.89543,535 1027,535 C1028.10457,535 1029,534.104569 1029,533 L1029,529 C1029,527.895431 1028.10457,527 1027,527 Z M1027,525 C1028.10457,525 1029,524.104569 1029,523 C1029,521.895431 1028.10457,521 1027,521 C1025.89543,521 1025,521.895431 1025,523 C1025,524.104569 1025.89543,525 1027,525 Z"}))))))}}var gl=a(1147);function bl(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class fl extends v.PureComponent{constructor(...e){super(...e),bl(this,"hideProfilePopover",()=>{this.refs.overlay.hide()})}render(){const{disablePopover:e,displayName:t,isBusy:a,isRHS:n,hasMention:s,hideStatus:i,overwriteName:o,user:r,userId:l}=this.props,c=o||t||"...";if(e)return y.a.createElement("div",{className:"user-popover"},c);let d="right";n&&!Object(M.Z)()&&(d="left");let m="";return r&&(m=Object(M.N)(r)),y.a.createElement(y.a.Fragment,null,y.a.createElement(Qs.a,{ref:"overlay",trigger:"click",placement:d,rootClose:!0,overlay:y.a.createElement(gl.a,{userId:l,src:m,isBusy:a,hide:this.hideProfilePopover,hideStatus:i,isRHS:n,hasMention:s})},y.a.createElement("button",{"aria-label":c.toLowerCase(),className:"user-popover style--none"},c)),y.a.createElement(Wa.a,{show:Boolean(r&&r.is_bot),className:"badge-popoverlist"}),y.a.createElement(za.a,{show:Boolean(r&&Object(M.W)(r)),className:"badge-popoverlist"}))}}bl(fl,"propTypes",{disablePopover:_.a.bool,displayName:_.a.string,hasMention:_.a.bool,hideStatus:_.a.bool,isBusy:_.a.bool,isRHS:_.a.bool,overwriteName:_.a.node,user:_.a.object,userId:_.a.string}),bl(fl,"defaultProps",{disablePopover:!1,hasMention:!1,hideStatus:!1,isRHS:!1,overwriteImage:"",overwriteName:""});var El=Object(n.connect)(function(){const e=Object(m.makeGetDisplayName)();return(t,a)=>({displayName:e(t,a.userId),user:Object(m.getUser)(t,a.userId)})})(fl);function _l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class vl extends y.a.PureComponent{constructor(e){super(e),_l(this,"removePost",()=>{this.props.removePost(this.props.post)}),_l(this,"createRemovePostButton",()=>y.a.createElement("button",{className:"post__remove theme color--link style--none",type:"button",onClick:this.removePost},"×")),_l(this,"renderPostTime",()=>{const e=this.props.post,t=!(x.Posts.POST_DELETED===e.state||Object(Ns.isPostPendingOrFailed)(e));return y.a.createElement(or,{isPermalink:t,eventTime:e.create_at,postId:e.id,location:S.r.RHS_COMMENT})}),_l(this,"toggleEmojiPicker",()=>{const e=!this.state.showEmojiPicker;this.setState({showEmojiPicker:e})}),_l(this,"getClassName",(e,t)=>{let a="post post--thread same--root post--comment";return this.props.currentUserId===e.user_id&&(a+=" current--user"),t&&(a+=" post--system"),this.props.compactDisplay&&(a+=" post--compact"),e.is_pinned&&(a+=" post--pinned"),(this.state.dropdownOpened||this.state.showEmojiPicker)&&(a+=" post--hovered"),this.props.isConsecutivePost&&(a+=" same--user"),a}),_l(this,"handleDropdownOpened",e=>{this.setState({dropdownOpened:e})}),_l(this,"getDotMenuRef",()=>this.refs.dotMenu),_l(this,"setHover",()=>{this.setState({hover:!0})}),_l(this,"unsetHover",()=>{this.setState({hover:!1})}),_l(this,"handleA11yActivateEvent",()=>{this.setState({a11yActive:!0})}),_l(this,"handleA11yDeactivateEvent",()=>{this.setState({a11yActive:!1})}),_l(this,"handlePostFocus",()=>{const{post:e,author:t,reactions:a,isFlagged:n}=this.props;this.setState({currentAriaLabel:Me.d(e,t,n,a,this.context.intl)})}),this.postRef=y.a.createRef(),this.state={showEmojiPicker:!1,dropdownOpened:!1,hover:!1,a11yActive:!1,currentAriaLabel:""}}componentDidMount(){this.postRef.current&&(this.postRef.current.addEventListener(S.c.ACTIVATE,this.handleA11yActivateEvent),this.postRef.current.addEventListener(S.c.DEACTIVATE,this.handleA11yDeactivateEvent))}componentWillUnmount(){this.postRef.current&&(this.postRef.current.removeEventListener(S.c.ACTIVATE,this.handleA11yActivateEvent),this.postRef.current.removeEventListener(S.c.DEACTIVATE,this.handleA11yDeactivateEvent))}componentDidUpdate(){this.state.a11yActive&&this.postRef.current.dispatchEvent(new Event(S.c.UPDATE))}render(){const{post:e,isConsecutivePost:t,isReadOnly:a,channelIsArchived:n}=this.props,s=e&&e.state===x.Posts.POST_DELETED,i=Object(Ns.isPostEphemeral)(e),o=Me.m(e),r=Me.e(e);let l,c,d,m,u=null;(this.props.compactDisplay||Object(M.Z)())&&(u=y.a.createElement(El,{userId:e.user_id,isBusy:this.props.isBusy,isRHS:!0,hasMention:!0})),t||(u=y.a.createElement(El,{userId:e.user_id,isBusy:this.props.isBusy,isRHS:!0,hasMention:!0}),c=y.a.createElement(Yo,{compactDisplay:this.props.compactDisplay,isBusy:this.props.isBusy,isRHS:!0,post:e,userId:e.user_id}),e.props&&e.props.from_webhook?(u=e.props.override_username&&this.props.enablePostUsernameOverride?y.a.createElement(El,{userId:e.user_id,hideStatus:!0,overwriteName:e.props.override_username,disablePopover:!0}):y.a.createElement(El,{userId:e.user_id,hideStatus:!0,disablePopover:!0}),l=y.a.createElement(Wa.a,{className:"col col__name"})):r?(u=y.a.createElement("span",{className:"auto-responder"},y.a.createElement(El,{userId:e.user_id,hideStatus:!0,isBusy:this.props.isBusy,isRHS:!0,hasMention:!0})),l=y.a.createElement(pl.a,{className:"col col__name"},y.a.createElement(W.c,{id:"post_info.auto_responder",defaultMessage:"AUTOMATIC REPLY"}))):o&&(u=y.a.createElement(El,{overwriteName:y.a.createElement(W.c,{id:"post_info.system",defaultMessage:"System"}),overwriteImage:S.Q.SYSTEM_MESSAGE_PROFILE_IMAGE,disablePopover:!0}),d=y.a.createElement("span",{className:"post__visibility"},y.a.createElement(W.c,{id:"post_info.message.visible",defaultMessage:"(Only visible to you)"}))));let p="";e.failed&&(p+=" post-failed",m=y.a.createElement(Jo,{post:this.props.post})),Me.j(this.props.post)&&(p+=" post--edited");let h,g,b,f=null;if(e.file_ids&&e.file_ids.length>0&&(f=y.a.createElement(Bo,{post:e,compactDisplay:this.props.compactDisplay})),a||i||e.failed||o||!this.props.enableEmojiPicker||n||(h=y.a.createElement(dr,{channelId:e.channel_id,postId:e.id,teamId:this.props.teamId,getDotMenuRef:this.getDotMenuRef,location:S.r.RHS_COMMENT,showEmojiPicker:this.state.showEmojiPicker,toggleEmojiPicker:this.toggleEmojiPicker})),i)g=y.a.createElement("div",{className:"col col__remove"},this.createRemovePostButton());else if(s)g=null;else if(!o&&(Object(M.Z)()||this.state.hover||this.state.a11yActive||this.state.dropdownOpened||this.state.showEmojiPicker)){const e=y.a.createElement(oo,{post:this.props.post,location:S.r.RHS_COMMENT,isFlagged:this.props.isFlagged,handleDropdownOpened:this.handleDropdownOpened,handleAddReactionClick:this.toggleEmojiPicker,isReadOnly:a||n,enableEmojiPicker:this.props.enableEmojiPicker});g=y.a.createElement("div",{ref:"dotMenu",className:"col col__reply"},e,h)}e.is_pinned&&(b=y.a.createElement("span",{className:"post__pinned-badge"},y.a.createElement(W.c,{id:"post_info.pinned",defaultMessage:"Pinned"})));let E=null;(this.state.hover||this.state.a11yActive||this.state.dropdownOpened||this.state.showEmojiPicker||this.props.isFlagged)&&(E=y.a.createElement(ar,{location:S.r.RHS_COMMENT,postId:e.id,isFlagged:this.props.isFlagged,isEphemeral:i}));const _=this.renderPostTime();let v;return e.props&&e.props.card&&(v=y.a.createElement(Qs.a,{delayShow:S.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:y.a.createElement(Zs.a,null,y.a.createElement(W.c,{id:"post_info.info.view_additional_info",defaultMessage:"View additional info"}))},y.a.createElement("button",{className:"card-icon__container icon--show style--none",onClick:e=>{e.preventDefault(),this.props.handleCardClick(this.props.post)}},y.a.createElement(hl,{className:"icon icon__info","aria-hidden":"true"})))),y.a.createElement("div",{role:"listitem",ref:this.postRef,id:"rhsPost_"+e.id,tabIndex:"-1",className:"a11y__section ".concat(this.getClassName(e,o)),onMouseOver:this.setHover,onMouseLeave:this.unsetHover,"aria-label":this.state.currentAriaLabel,onFocus:this.handlePostFocus},y.a.createElement("div",{role:"application",className:"post__content"},y.a.createElement("div",{className:"post__img"},c),y.a.createElement("div",null,y.a.createElement("div",{className:"post__header"},y.a.createElement("div",{className:"col col__name"},u,l),y.a.createElement("div",{className:"col"},_,b,v,E,d),g),y.a.createElement("div",{className:"post__body"},y.a.createElement("div",{className:p},m,y.a.createElement(ul,{post:e,previewCollapsed:this.props.previewCollapsed,previewEnabled:this.props.previewEnabled,isEmbedVisible:this.props.isEmbedVisible,pluginPostTypes:this.props.pluginPostTypes})),f,y.a.createElement(yr,{post:e,isReadOnly:a||n})))))}}function yl(e,t){const a=t.post,n=t.previousPostId&&Object(Na.getPost)(e,t.previousPostId);let s=!1;if(n){const e=Boolean(a.props&&a.props.from_webhook),t=Boolean(n.props&&n.props.from_webhook);!(n&&n.user_id===a.user_id&&a.create_at-n.create_at<=x.Posts.POST_COLLAPSE_TIMEOUT)||e||t||Object(Ns.isSystemMessage)(a)||Object(Ns.isSystemMessage)(n)||n.root_id!==a.root_id&&n.id!==a.root_id||(s=!0)}return s}_l(vl,"propTypes",{post:_.a.object,teamId:_.a.string.isRequired,currentUserId:_.a.string.isRequired,compactDisplay:_.a.bool,author:_.a.string,reactions:_.a.object,isFlagged:_.a.bool,isBusy:_.a.bool,removePost:_.a.func.isRequired,previewCollapsed:_.a.string.isRequired,previewEnabled:_.a.bool.isRequired,isEmbedVisible:_.a.bool,enableEmojiPicker:_.a.bool.isRequired,enablePostUsernameOverride:_.a.bool.isRequired,isReadOnly:_.a.bool.isRequired,pluginPostTypes:_.a.object,channelIsArchived:_.a.bool.isRequired,isConsecutivePost:_.a.bool,handleCardClick:_.a.func}),_l(vl,"contextTypes",{intl:W.i.isRequired});var Cl=Object(n.connect)(function(e,t){const a=Object(Na.makeGetReactionsForPost)(),n=Object(m.makeGetDisplayName)(),s=Object(d.getConfig)(e),i="true"===s.EnableEmojiPicker,o="true"===s.EnablePostUsernameOverride,r=t.teamId||Object(u.getCurrentTeamId)(e),l=e.entities.channels.channels[t.post.channel_id];return{author:n(e,t.post.user_id),reactions:a(e,t.post.id),enableEmojiPicker:i,enablePostUsernameOverride:o,isEmbedVisible:Object(G.b)(e,t.post.id),isReadOnly:Object(p.isChannelReadOnlyById)(e,t.post.channel_id),teamId:r,pluginPostTypes:e.plugins.postTypes,channelIsArchived:0!==l.delete_at,isConsecutivePost:yl(e,t),isFlagged:null!=Object(c.get)(e,S.A.CATEGORY_FLAGGED_POST,t.post.id,null),compactDisplay:Object(c.get)(e,S.A.CATEGORY_DISPLAY_SETTINGS,S.A.MESSAGE_DISPLAY,S.A.MESSAGE_DISPLAY_DEFAULT)===S.A.MESSAGE_DISPLAY_COMPACT}})(vl);function wl(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Tl extends y.a.Component{constructor(...e){super(...e),wl(this,"handleBack",e=>{switch(e.preventDefault(),this.props.previousRhsState){case S.B.SEARCH:this.props.actions.showSearchResults();break;case S.B.MENTION:this.props.actions.showMentions();break;case S.B.FLAG:this.props.actions.showFlaggedPosts();break;case S.B.PIN:this.props.actions.showPinnedPosts()}})}render(){let e;const t=y.a.createElement(Zs.a,{id:"closeSidebarTooltip"},y.a.createElement(W.c,{id:"rhs_header.closeSidebarTooltip",defaultMessage:"Close Sidebar"}));let a;switch(this.props.previousRhsState){case S.B.SEARCH:case S.B.MENTION:a=y.a.createElement(Zs.a,{id:"backToResultsTooltip"},y.a.createElement(W.c,{id:"rhs_header.backToResultsTooltip",defaultMessage:"Back to Search Results"}));break;case S.B.FLAG:a=y.a.createElement(Zs.a,{id:"backToResultsTooltip"},y.a.createElement(W.c,{id:"rhs_header.backToFlaggedTooltip",defaultMessage:"Back to Flagged Posts"}));break;case S.B.PIN:a=y.a.createElement(Zs.a,{id:"backToResultsTooltip"},y.a.createElement(W.c,{id:"rhs_header.backToPinnedTooltip",defaultMessage:"Back to Pinned Posts"}))}const n=y.a.createElement(Zs.a,{id:"expandSidebarTooltip"},y.a.createElement(W.c,{id:"rhs_header.expandSidebarTooltip",defaultMessage:"Expand Sidebar"})),s=y.a.createElement(Zs.a,{id:"shrinkSidebarTooltip"},y.a.createElement(W.c,{id:"rhs_header.shrinkSidebarTooltip",defaultMessage:"Shrink Sidebar"}));return a&&(e=y.a.createElement("a",{href:"#",onClick:this.handleBack,className:"sidebar--right__back"},y.a.createElement(Qs.a,{delayShow:S.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:a},y.a.createElement(W.c,{id:"generic_icons.back",defaultMessage:"Back Icon"},e=>y.a.createElement("i",{className:"fa fa-angle-left","aria-label":e}))))),y.a.createElement("div",{className:"sidebar--right__header"},y.a.createElement("span",{className:"sidebar--right__title"},e,y.a.createElement(W.c,{id:"rhs_header.details",defaultMessage:"Message Details"})),y.a.createElement("div",{className:"pull-right"},y.a.createElement("button",{type:"button",className:"sidebar--right__expand","aria-label":"Expand",onClick:this.props.actions.toggleRhsExpanded},y.a.createElement(Qs.a,{delayShow:S.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:n},y.a.createElement(W.c,{id:"rhs_header.expandSidebarTooltip.icon",defaultMessage:"Expand Sidebar Icon"},e=>y.a.createElement("i",{className:"fa fa-expand","aria-label":e}))),y.a.createElement(Qs.a,{delayShow:S.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:s},y.a.createElement(W.c,{id:"rhs_header.expandTooltip.icon",defaultMessage:"Shrink Sidebar Icon"},e=>y.a.createElement("i",{className:"fa fa-compress","aria-label":e})))),y.a.createElement("button",{id:"rhsCloseButton",type:"button",className:"sidebar--right__close","aria-label":"Close",onClick:this.props.actions.closeRightHandSide},y.a.createElement(Qs.a,{delayShow:S.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:t},y.a.createElement(W.c,{id:"rhs_header.closeTooltip.icon",defaultMessage:"Close Sidebar Icon"},e=>y.a.createElement("i",{className:"fa fa-sign-out","aria-label":e}))))))}}wl(Tl,"propTypes",{previousRhsState:_.a.oneOf(Object.values(S.B)),actions:_.a.shape({showMentions:_.a.func,showSearchResults:_.a.func,showFlaggedPosts:_.a.func,showPinnedPosts:_.a.func,closeRightHandSide:_.a.func,toggleRhsExpanded:_.a.func})});var Ol=Object(n.connect)(null,function(e){return{actions:Object(s.bindActionCreators)({showSearchResults:ds.o,showMentions:ds.l,showFlaggedPosts:ds.k,showPinnedPosts:ds.m,closeRightHandSide:ds.b,toggleRhsExpanded:ds.r},e)}})(Tl);function Sl(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Pl extends y.a.PureComponent{constructor(e){super(e),Sl(this,"renderPostTime",e=>{const t=this.props.post;if(t.type===S.Q.PostTypes.FAKE_PARENT_DELETED)return null;const a=!(e||x.Posts.POST_DELETED===t.state||Ns.isPostPendingOrFailed(t));return y.a.createElement(or,{isPermalink:a,eventTime:t.create_at,postId:t.id,location:S.r.RHS_ROOT})}),Sl(this,"toggleEmojiPicker",()=>{const e=!this.state.showEmojiPicker;this.setState({showEmojiPicker:e})}),Sl(this,"getClassName",(e,t)=>{let a="post post--root post--thread";return this.props.currentUserId===e.user_id&&(a+=" current--user"),t&&(a+=" post--system"),this.props.compactDisplay&&(a+=" post--compact"),e.is_pinned&&(a+=" post--pinned"),(this.state.dropdownOpened||this.state.showEmojiPicker)&&(a+=" post--hovered"),a}),Sl(this,"handleDropdownOpened",e=>{this.setState({dropdownOpened:e})}),Sl(this,"handlePostFocus",()=>{const{post:e,author:t,reactions:a,isFlagged:n}=this.props;this.setState({currentAriaLabel:Me.d(e,t,n,a,this.context.intl)})}),Sl(this,"getDotMenuRef",()=>this.refs.dotMenu),this.state={showEmojiPicker:!1,testStateObj:!0,dropdownOpened:!1,currentAriaLabel:""}}render(){const{post:e,isReadOnly:t,teamId:a,channelIsArchived:n,channelType:s,channelDisplayName:i}=this.props,o=e&&e.state===x.Posts.POST_DELETED,r=M.ab(e),l=Me.m(e);let c,d;c="D"===s?y.a.createElement(W.c,{id:"rhs_root.direct",defaultMessage:"Direct Message"}):i,t||r||e.failed||l||!this.props.enableEmojiPicker||n||(d=y.a.createElement(dr,{channelId:e.channel_id,postId:e.id,teamId:a,getDotMenuRef:this.getDotMenuRef,location:S.r.RHS_ROOT,showEmojiPicker:this.state.showEmojiPicker,toggleEmojiPicker:this.toggleEmojiPicker}));let m,u,p=null;e.file_ids&&e.file_ids.length>0&&(p=y.a.createElement(Bo,{post:e,compactDisplay:this.props.compactDisplay})),l?m=y.a.createElement(El,{overwriteName:y.a.createElement(W.c,{id:"post_info.system",defaultMessage:"System"}),overwriteImage:S.Q.SYSTEM_MESSAGE_PROFILE_IMAGE,disablePopover:!0}):e.props&&e.props.from_webhook?(m=e.props.override_username&&this.props.enablePostUsernameOverride?y.a.createElement(El,{key:e.user_id,userId:e.user_id,hideStatus:!0,overwriteName:e.props.override_username,disablePopover:!0}):y.a.createElement(El,{key:e.user_id,userId:e.user_id,hideStatus:!0,disablePopover:!0}),u=y.a.createElement(Wa.a,null)):m=y.a.createElement(El,{key:e.user_id,userId:e.user_id,isBusy:this.props.isBusy,isRHS:!0,hasMention:!0});let h,g="";Me.j(this.props.post)&&(g+=" post--edited"),e.is_pinned&&(h=y.a.createElement("span",{className:"post__pinned-badge"},y.a.createElement(W.c,{id:"post_info.pinned",defaultMessage:"Pinned"})));const b=y.a.createElement(oo,{post:this.props.post,location:S.r.RHS_ROOT,isFlagged:this.props.isFlagged,handleDropdownOpened:this.handleDropdownOpened,handleAddReactionClick:this.toggleEmojiPicker,commentCount:this.props.commentCount,isReadOnly:t||n,enableEmojiPicker:this.props.enableEmojiPicker});let f,E;let _;return o||this.props.post.type===S.Q.PostTypes.FAKE_PARENT_DELETED||(f=y.a.createElement("div",{ref:"dotMenu",className:"col col__reply"},b,d)),!r&&!e.failed&&!l&&(E=y.a.createElement(ar,{location:S.r.RHS_ROOT,postId:e.id,isFlagged:this.props.isFlagged})),this.props.post.props&&this.props.post.props.card&&(_=y.a.createElement(Qs.a,{delayShow:S.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:y.a.createElement(Zs.a,null,y.a.createElement(W.c,{id:"post_info.info.view_additional_info",defaultMessage:"View additional info"}))},y.a.createElement("button",{className:"card-icon__container icon--show style--none",onClick:e=>{e.preventDefault(),this.props.handleCardClick(this.props.post)}},y.a.createElement(hl,{className:"icon icon__info","aria-hidden":"true"})))),y.a.createElement("div",{role:"listitem",id:"rhsPost_"+e.id,tabIndex:"-1",className:"thread__root a11y__section ".concat(this.getClassName(e,l)),"aria-label":this.state.currentAriaLabel,onFocus:this.handlePostFocus},y.a.createElement("div",{className:"post-right-channel__name"},c),y.a.createElement("div",{role:"application",className:"post__content"},y.a.createElement("div",{className:"post__img"},y.a.createElement(Yo,{compactDisplay:this.props.compactDisplay,isBusy:this.props.isBusy,isRHS:!0,post:e,userId:e.user_id})),y.a.createElement("div",null,y.a.createElement("div",{className:"post__header"},y.a.createElement("div",{className:"col__name"},m,u),y.a.createElement("div",{className:"col"},this.renderPostTime(r),h,_,E),f),y.a.createElement("div",{className:"post__body"},y.a.createElement("div",{className:g},y.a.createElement(ul,{post:e,previewCollapsed:this.props.previewCollapsed,previewEnabled:this.props.previewEnabled,isEmbedVisible:this.props.isEmbedVisible,pluginPostTypes:this.props.pluginPostTypes})),p,y.a.createElement(yr,{post:e,isReadOnly:t||n})))))}}Sl(Pl,"propTypes",{post:_.a.object.isRequired,teamId:_.a.string.isRequired,currentUserId:_.a.string.isRequired,compactDisplay:_.a.bool,commentCount:_.a.number.isRequired,author:_.a.string,reactions:_.a.object,isFlagged:_.a.bool,previewCollapsed:_.a.string,previewEnabled:_.a.bool,isBusy:_.a.bool,isEmbedVisible:_.a.bool,enableEmojiPicker:_.a.bool.isRequired,enablePostUsernameOverride:_.a.bool.isRequired,isReadOnly:_.a.bool.isRequired,pluginPostTypes:_.a.object,channelIsArchived:_.a.bool.isRequired,channelType:_.a.string,channelDisplayName:_.a.string,handleCardClick:_.a.func.isRequired}),Sl(Pl,"contextTypes",{intl:W.i.isRequired}),Sl(Pl,"defaultProps",{commentCount:0});var Ml=Object(n.connect)(function(e,t){const a=Object(Na.makeGetReactionsForPost)(),n=Object(m.makeGetDisplayName)(),s=Object(d.getConfig)(e),i="true"===s.EnableEmojiPicker,o="true"===s.EnablePostUsernameOverride,r=t.teamId||Object(u.getCurrentTeamId)(e),l=Object(p.getChannel)(e,t.post.channel_id)||{};return{author:n(e,t.post.user_id),reactions:a(e,t.post.id),enableEmojiPicker:i,enablePostUsernameOverride:o,isEmbedVisible:Object(G.b)(e,t.post.id),isReadOnly:Object(p.isChannelReadOnlyById)(e,t.post.channel_id),teamId:r,pluginPostTypes:e.plugins.postTypes,channelIsArchived:0!==l.delete_at,channelType:l.type,channelDisplayName:l.display_name,isFlagged:null!=Object(c.get)(e,S.A.CATEGORY_FLAGGED_POST,t.post.id,null),compactDisplay:Object(c.get)(e,S.A.CATEGORY_DISPLAY_SETTINGS,S.A.MESSAGE_DISPLAY,S.A.MESSAGE_DISPLAY_DEFAULT)===S.A.MESSAGE_DISPLAY_COMPACT}})(Pl);function Nl(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Il(e){return y.a.createElement("div",Object.assign({},e,{className:"scrollbar--view"}))}function Al(e){return y.a.createElement("div",Object.assign({},e,{className:"scrollbar--horizontal"}))}function jl(e){return y.a.createElement("div",Object.assign({},e,{className:"scrollbar--vertical"}))}class Rl extends y.a.Component{constructor(e){super(e),Nl(this,"handleResize",()=>{this.setState({windowWidth:M.rb(),windowHeight:M.qb()}),P.m()&&"reply_textbox"===document.activeElement.id&&this.scrollToBottom()}),Nl(this,"handleCardClick",e=>{e&&this.props.actions.selectPostCard(e)}),Nl(this,"handleCardClickPost",e=>{e&&this.props.actions.selectPostCard(e)}),Nl(this,"onBusy",e=>{this.setState({isBusy:e})}),Nl(this,"filterPosts",(e,t,a)=>{const n=[];return e.forEach(e=>{"system_ephemeral"===e.type&&e.create_at<a||e.root_id===t.id&&n.unshift(e)}),n}),Nl(this,"scrollToBottom",()=>{ys()(".post-right__scroll")[0]&&ys()(".post-right__scroll").parent().scrollTop(ys()(".post-right__scroll")[0].scrollHeight)}),Nl(this,"updateFloatingTimestamp",()=>{if(M.Z()&&this.props.posts){const e=this.refs.rhspostlist.childNodes,t=this.refs.rhspostlist.getBoundingClientRect();let a="";const n=100;for(let s=0;s<e.length;s++)if(e[s].offsetTop+t.top-n>0){a=this.props.posts[s].id;break}a!==this.state.topRhsPostId&&this.setState({topRhsPostId:a})}}),Nl(this,"handleScroll",()=>{this.updateFloatingTimestamp(),this.state.isScrolling||this.setState({isScrolling:!0}),this.scrollStopAction.fireAfter(S.Q.SCROLL_DELAY)}),Nl(this,"handleScrollStop",()=>{this.setState({isScrolling:!1})}),Nl(this,"getSidebarBody",()=>this.refs.sidebarbody),this.scrollStopAction=new Ts(this.handleScrollStop);const t=(new Date).getTime();this.state={windowWidth:M.rb(),windowHeight:M.qb(),isScrolling:!1,topRhsPostId:0,openTime:t}}componentDidMount(){this.scrollToBottom(),window.addEventListener("resize",this.handleResize)}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}UNSAFE_componentWillReceiveProps(e){this.props.selected&&e.selected&&this.props.selected.id!==e.selected.id&&this.setState({openTime:(new Date).getTime()})}componentDidUpdate(e){const t=e.posts||[],a=this.props.posts||[];this.props.socketConnectionStatus&&!e.socketConnectionStatus&&this.props.actions.getPostThread(this.props.selected.id),t.length>=a.length||a[a.length-1].user_id===this.props.currentUserId&&this.scrollToBottom()}shouldComponentUpdate(e,t){return!M.c(t.postsArray,this.props.posts)||(!M.c(t.selected,this.props.selected)||(e.previewEnabled!==this.props.previewEnabled||(t.isBusy!==this.state.isBusy||(t.isScrolling!==this.state.isScrolling||t.topRhsPostId!==this.state.topRhsPostId))))}render(){if(null==this.props.posts||null==this.props.selected)return y.a.createElement("div",null);const e=this.filterPosts(this.props.posts,this.props.selected,this.state.openTime),{selected:t,currentUserId:a}=this.props;let n=t.create_at;!n&&this.props.posts.length>0&&(n=this.props.posts[this.props.posts.length-1].create_at);const s=M.s(n);let i=s;const o=[],r=e.length;for(let t=0;t<r;t++){const n=e[t],s=t>0?e[t-1].id:"",r=M.s(n.create_at);r.toDateString()!==i.toDateString()&&(i=r,o.push(y.a.createElement(Ki,{key:r,date:r})));const l=n.id?n.id:n.pending_post_id;o.push(y.a.createElement(Cl,{key:l+"commentKey",ref:n.id,post:n,previousPostId:s,teamId:this.props.channel.team_id,currentUserId:a,isBusy:this.state.isBusy,removePost:this.props.actions.removePost,previewCollapsed:this.props.previewCollapsed,previewEnabled:this.props.previewEnabled,handleCardClick:this.handleCardClickPost}))}let l;const c=t.type===S.Q.PostTypes.FAKE_PARENT_DELETED,d=0!==this.props.channel.delete_at;if(c||(l=d?y.a.createElement("div",{className:"channel-archived-warning"},y.a.createElement(ji.b,{id:"archivedChannelMessage",defaultMessage:"You are viewing an **archived channel**. New messages cannot be posted."})):y.a.createElement("div",{className:"post-create__container"},y.a.createElement(Hi,{channelId:t.channel_id,rootId:t.id,rootDeleted:t.state===x.Posts.POST_DELETED,latestPostId:r>0?e[r-1].id:t.id,getSidebarBody:this.getSidebarBody}))),this.props.channel.type===S.Q.DM_CHANNEL){const e=M.u(this.props.channel.id);e&&e.delete_at&&(l=y.a.createElement("div",{className:"post-create-message"},y.a.createElement(W.c,{id:"create_post.deactivated",defaultMessage:"You are viewing an archived channel with a deactivated user."})))}return y.a.createElement("div",{id:"rhsContainer",className:"sidebar-right__body",ref:"sidebarbody"},y.a.createElement(Ji,{isScrolling:this.state.isScrolling,isMobile:M.Z(),postId:this.state.topRhsPostId,isRhsPost:!0}),y.a.createElement(Ol,{previousRhsState:this.props.previousRhsState}),y.a.createElement(ws.a,{autoHide:!0,autoHideTimeout:500,autoHideDuration:500,renderThumbHorizontal:Al,renderThumbVertical:jl,renderView:Il,onScroll:this.handleScroll},y.a.createElement("div",{className:"post-right__scroll"},y.a.createElement("div",{role:"application",id:"rhsContent","aria-label":M.fb("accessibility.sections.rhsContent","message details complimentary region"),className:"post-right__content a11y__region","data-a11y-sort-order":"3","data-a11y-focus-child":!0,"data-a11y-order-reversed":!0},!c&&y.a.createElement(Ki,{date:s}),y.a.createElement(Ml,{ref:t.id,post:t,commentCount:r,teamId:this.props.channel.team_id,currentUserId:this.props.currentUserId,previewCollapsed:this.props.previewCollapsed,previewEnabled:this.props.previewEnabled,isBusy:this.state.isBusy,handleCardClick:this.handleCardClick}),c&&s&&y.a.createElement(Ki,{date:s}),y.a.createElement("div",{ref:"rhspostlist",className:"post-right-comments-container"},o)),l)))}}Nl(Rl,"propTypes",{posts:_.a.arrayOf(_.a.object).isRequired,channel:_.a.object.isRequired,selected:_.a.object.isRequired,previousRhsState:_.a.string,currentUserId:_.a.string.isRequired,previewCollapsed:_.a.string.isRequired,previewEnabled:_.a.bool.isRequired,socketConnectionStatus:_.a.bool.isRequired,actions:_.a.shape({removePost:_.a.func.isRequired,selectPostCard:_.a.func.isRequired,getPostThread:_.a.func.isRequired}).isRequired});var kl=Object(n.connect)(function(){const e=Object(Na.makeGetPostsForThread)();return function(t){const a=Object(ms.o)(t),n=Object(_s.a)(t);let s=null,i=[];a&&(i=e(t,{rootId:a.id}),s=Object(p.getChannel)(t,a.channel_id));const o=Object(c.get)(t,S.A.CATEGORY_DISPLAY_SETTINGS,S.A.COLLAPSE_DISPLAY,S.A.COLLAPSE_DISPLAY_DEFAULT);return{selected:a,channel:s,posts:i,socketConnectionStatus:n.connected,previewCollapsed:o,previewEnabled:Object(c.getBool)(t,S.A.CATEGORY_DISPLAY_SETTINGS,S.A.LINK_PREVIEW_DISPLAY,S.A.LINK_PREVIEW_DISPLAY_DEFAULT)}}},function(e){return{actions:Object(s.bindActionCreators)({removePost:L.removePost,selectPostCard:ds.f,getPostThread:L.getPostThread},e)}})(Rl);function Ll(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class xl extends y.a.Component{constructor(...e){super(...e),Ll(this,"handleBack",e=>{switch(e.preventDefault(),this.props.previousRhsState){case S.B.SEARCH:this.props.actions.showSearchResults();break;case S.B.MENTION:this.props.actions.showMentions();break;case S.B.FLAG:this.props.actions.showFlaggedPosts();break;case S.B.PIN:this.props.actions.showPinnedPosts()}})}render(){let e,t;switch(this.props.previousRhsState){case S.B.SEARCH:case S.B.MENTION:t=y.a.createElement(Zs.a,{id:"backToResultsTooltip"},y.a.createElement(W.c,{id:"rhs_header.backToResultsTooltip",defaultMessage:"Back to Search Results"}));break;case S.B.FLAG:t=y.a.createElement(Zs.a,{id:"backToResultsTooltip"},y.a.createElement(W.c,{id:"rhs_header.backToFlaggedTooltip",defaultMessage:"Back to Flagged Posts"}));break;case S.B.PIN:t=y.a.createElement(Zs.a,{id:"backToResultsTooltip"},y.a.createElement(W.c,{id:"rhs_header.backToPinnedTooltip",defaultMessage:"Back to Pinned Posts"}))}const a=y.a.createElement(Zs.a,{id:"closeSidebarTooltip"},y.a.createElement(W.c,{id:"rhs_header.closeSidebarTooltip",defaultMessage:"Close Sidebar"})),n=y.a.createElement(Zs.a,{id:"expandSidebarTooltip"},y.a.createElement(W.c,{id:"rhs_header.expandSidebarTooltip",defaultMessage:"Expand Sidebar"})),s=y.a.createElement(Zs.a,{id:"shrinkSidebarTooltip"},y.a.createElement(W.c,{id:"rhs_header.shrinkSidebarTooltip",defaultMessage:"Shrink Sidebar"}));return t&&(e=y.a.createElement("a",{href:"#",onClick:this.handleBack,className:"sidebar--right__back"},y.a.createElement(Qs.a,{delayShow:S.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:t},y.a.createElement(W.c,{id:"generic_icons.back",defaultMessage:"Back Icon"},e=>y.a.createElement("i",{className:"fa fa-angle-left","aria-label":e}))))),y.a.createElement("div",{className:"sidebar--right__header"},y.a.createElement("span",{className:"sidebar--right__title"},e,y.a.createElement(W.c,{id:"search_header.title5",defaultMessage:"Extra information"})),y.a.createElement("div",{className:"pull-right"},y.a.createElement("button",{type:"button",className:"sidebar--right__expand","aria-label":"Expand",onClick:this.props.actions.toggleRhsExpanded},y.a.createElement(Qs.a,{delayShow:S.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:n},y.a.createElement(W.c,{id:"rhs_header.expandSidebarTooltip.icon",defaultMessage:"Expand Sidebar Icon"},e=>y.a.createElement("i",{className:"fa fa-expand","aria-label":e}))),y.a.createElement(Qs.a,{delayShow:S.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:s},y.a.createElement(W.c,{id:"rhs_header.expandTooltip.icon",defaultMessage:"Shrink Sidebar Icon"},e=>y.a.createElement("i",{className:"fa fa-compress","aria-label":e})))),y.a.createElement("button",{type:"button",className:"sidebar--right__close","aria-label":"Close",onClick:this.props.actions.closeRightHandSide},y.a.createElement(Qs.a,{delayShow:S.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:a},y.a.createElement(W.c,{id:"rhs_header.closeTooltip.icon",defaultMessage:"Close Sidebar Icon"},e=>y.a.createElement("i",{className:"fa fa-sign-out","aria-label":e}))))))}}Ll(xl,"propTypes",{previousRhsState:_.a.oneOf(Object.values(S.B)),actions:_.a.shape({showMentions:_.a.func,showSearchResults:_.a.func,showFlaggedPosts:_.a.func,showPinnedPosts:_.a.func,closeRightHandSide:_.a.func,toggleRhsExpanded:_.a.func.isRequired})});var Dl=Object(n.connect)(null,function(e){return{actions:Object(s.bindActionCreators)({showMentions:ds.l,showSearchResults:ds.o,showFlaggedPosts:ds.k,showPinnedPosts:ds.m,closeRightHandSide:ds.b,toggleRhsExpanded:ds.r},e)}})(xl);function Ul(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ql(e){return y.a.createElement("div",Object.assign({},e,{className:"scrollbar--view"}))}function Hl(e){return y.a.createElement("div",Object.assign({},e,{className:"scrollbar--horizontal"}))}function Fl(e){return y.a.createElement("div",Object.assign({},e,{className:"scrollbar--vertical"}))}class Bl extends y.a.Component{constructor(e){super(e),Ul(this,"handleScroll",()=>{this.state.isScrolling||this.setState({isScrolling:!0}),this.scrollStopAction.fireAfter(S.Q.SCROLL_DELAY)}),Ul(this,"handleScrollStop",()=>{this.setState({isScrolling:!1})}),Ul(this,"getSidebarBody",()=>this.refs.sidebarbody),Ul(this,"handleClick",()=>{M.Z()&&O.c()}),this.scrollStopAction=new Ts(this.handleScrollStop),this.state={isScrolling:!1,topRhsPostCreateAt:0}}shouldComponentUpdate(e,t){return!M.c(t.selected,this.props.selected)||t.isScrolling!==this.state.isScrolling}render(){if(null==this.props.selected)return y.a.createElement("div",null);const{selected:e,pluginPostCardTypes:t,teamUrl:a}=this.props,n=e.type;let s=null;if(t.hasOwnProperty(n)){const a=t[n].component;s=y.a.createElement(a,{post:e})}s||(s=y.a.createElement("div",{className:"info-card"},y.a.createElement(ua.a,{message:e.props&&e.props.card})));let i=y.a.createElement(El,{userId:e.user_id,hideStatus:!0,disablePopover:!0});e.props.override_username&&this.props.enablePostUsernameOverride&&(i=y.a.createElement(El,{userId:e.user_id,hideStatus:!0,disablePopover:!0,overwriteName:e.props.override_username}));const o=y.a.createElement(Yo,{compactDisplay:!1,post:e,userId:e.user_id});return y.a.createElement("div",{className:"sidebar-right__body sidebar-right__card",ref:"sidebarbody"},y.a.createElement(Dl,{previousRhsState:this.props.previousRhsState}),y.a.createElement(ws.a,{autoHide:!0,autoHideTimeout:500,autoHideDuration:500,renderThumbHorizontal:Hl,renderThumbVertical:Fl,renderView:ql,onScroll:this.handleScroll},y.a.createElement("div",{className:"post-right__scroll"},s,y.a.createElement("div",{className:"d-flex post-card--info"},y.a.createElement("div",{className:"post-card--post-by overflow--ellipsis"},y.a.createElement(W.c,{id:"rhs_card.message_by",defaultMessage:"Message by {avatar} {user}",values:{user:i,avatar:o}})),y.a.createElement("div",{className:"post-card--view-post"},y.a.createElement(vn.a,{to:"".concat(a,"/pl/").concat(e.id),className:"post__permalink",onClick:this.handleClick},y.a.createElement(W.c,{id:"rhs_card.jump",defaultMessage:"Jump"})))))))}}Ul(Bl,"propTypes",{selected:_.a.object,pluginPostCardTypes:_.a.object,previousRhsState:_.a.oneOf(Object.values(S.B)),enablePostUsernameOverride:_.a.bool,teamUrl:_.a.string}),Ul(Bl,"defaultProps",{pluginPostCardTypes:{}});var Gl=Object(n.connect)(function(e){const t=Object(ms.p)(e);return{enablePostUsernameOverride:"true"===Object(d.getConfig)(e).EnablePostUsernameOverride,selected:t,pluginPostCardTypes:e.plugins.postCardTypes,teamUrl:Object(u.getCurrentRelativeTeamUrl)(e)}})(Bl),Vl=a(1181);class Wl extends y.a.PureComponent{render(){return y.a.createElement(W.c,{id:"generic_icons.select",defaultMessage:"Select Icon"},e=>y.a.createElement("i",{className:"fa fa fa-plus-square",title:e}))}}function zl(e){return e.type===S.Q.DM_CHANNEL?"@"+e.display_name:e.type===S.Q.GM_CHANNEL?"@"+e.display_name.replace(/ /g,""):e.name}class Yl extends Ka.a{render(){const{item:e,isSelection:t}=this.props;let a="search-autocomplete__item";t&&(a+=" selected a11y--focused");const n=zl(e);let s=null;if(e.type===S.Q.DM_CHANNEL){const t=Object(M.u)(e.id);s=y.a.createElement(Wa.a,{show:Boolean(t&&t.is_bot),className:"badge-popoverlist"})}return y.a.createElement("div",Object.assign({onClick:this.handleClick,className:a},Ka.a.baseProps),y.a.createElement(Wl,null),y.a.createElement("span",{className:"search-autocomplete__name"},n),s)}}class Kl extends Va.a{handlePretextChanged(e,t){const a=/\b(?:in|channel):\s*(\S*)$/i.exec(e.toLowerCase());if(a){const e=a[1];this.startNewRequest(e),Object(an.c)(e,a=>{if(this.shouldCancelDispatch(e))return;const n=a.sort(en.sortChannelsByTypeAndDisplayName.bind(null,"en")),s=n.map(zl);t({matchedPretext:e,terms:s,items:n,component:Yl})})}return Boolean(a)}}function Ql(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Zl(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Jl extends bn.a{constructor(e){super(e),this.suggestionReadOut=y.a.createRef()}generateLabel(e){e.username?(this.currentLabel=e.username,(e.first_name||e.last_name)&&e.nickname?this.currentLabel+=" ".concat(e.first_name," ").concat(e.last_name," ").concat(e.nickname):e.nickname?this.currentLabel+=" ".concat(e.nickname):(e.first_name||e.last_name)&&(this.currentLabel+=" ".concat(e.first_name," ").concat(e.last_name))):e.type===S.Q.DM_CHANNEL||e.type===S.Q.GM_CHANNEL?this.currentLabel=e.display_name:this.currentLabel=e.name,this.currentLabel&&(this.currentLabel=this.currentLabel.toLowerCase()),this.announceLabel()}getContent(){return ys()(bi.a.findDOMNode(this.refs.popover)).find(".popover-content")}renderChannelDivider(e){let t;return t=e===S.Q.OPEN_CHANNEL?y.a.createElement(W.c,{id:"suggestion.search.public",defaultMessage:"Public Channels"}):e===S.Q.PRIVATE_CHANNEL?y.a.createElement(W.c,{id:"suggestion.search.private",defaultMessage:"Private Channels"}):y.a.createElement(W.c,{id:"suggestion.search.direct",defaultMessage:"Direct Messages"}),y.a.createElement("div",{key:e+"-divider",className:"search-autocomplete__divider"},y.a.createElement("span",null,t))}render(){if(0===this.props.items.length)return null;const e=[];for(let t=0;t<this.props.items.length;t++){const a=this.props.items[t],n=this.props.terms[t],s=n===this.props.selection,i=this.props.components[t];this.props.renderDividers&&(0!==t&&a.type===this.props.items[t-1].type||(a.type===S.Q.OPEN_CHANNEL?e.push(this.renderChannelDivider(S.Q.OPEN_CHANNEL)):a.type===S.Q.PRIVATE_CHANNEL?e.push(this.renderChannelDivider(S.Q.PRIVATE_CHANNEL)):0!==t&&this.props.items[t-1].type!==S.Q.OPEN_CHANNEL&&this.props.items[t-1].type!==S.Q.PRIVATE_CHANNEL||e.push(this.renderChannelDivider(S.Q.DM_CHANNEL)))),s&&(this.currentItem=a),e.push(y.a.createElement(i,{key:n,ref:n,item:a,term:n,matchedPretext:this.props.matchedPretext[t],isSelection:s,onClick:this.props.onCompleteWord}))}return y.a.createElement(Vl.a,{ref:"popover",id:"search-autocomplete__popover",className:"search-help-popover autocomplete visible",placement:"bottom"},y.a.createElement("div",{ref:this.suggestionReadOut,"aria-live":"polite",className:"hidden-label"}),e)}}Zl(Jl,"propTypes",function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ql(a,!0).forEach(function(t){Zl(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ql(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},bn.a.propTypes));class Xl extends y.a.PureComponent{render(){if(0===this.props.items.length)return null;const e=this.props.items[0],t=this.props.terms[0],a=this.props.components[0],n=y.a.createElement(a,{key:t,ref:t,item:e,term:t,matchedPretext:this.props.matchedPretext[0],isSelection:!1,onClick:this.props.onCompleteWord});return y.a.createElement(Vl.a,{ref:"popover",id:"search-autocomplete__popover",className:"search-help-popover autocomplete visible",placement:"bottom"},n)}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Xl,"propTypes",{onCompleteWord:_.a.func.isRequired,items:_.a.array.isRequired,terms:_.a.array.isRequired,components:_.a.array.isRequired,matchedPretext:_.a.array.isRequired});class $l extends Ka.a{render(){const{item:e,isSelection:t}=this.props;let a="search-autocomplete__item";t&&(a+=" selected a11y--focused");const n=e.username;let s="";return(e.first_name||e.last_name)&&e.nickname?s="- ".concat(M.A(e)," (").concat(e.nickname,")"):e.nickname?s="- (".concat(e.nickname,")"):(e.first_name||e.last_name)&&(s="- ".concat(M.A(e))),y.a.createElement("div",Object.assign({className:a,onClick:this.handleClick},Ka.a.baseProps),y.a.createElement(Wl,null),y.a.createElement(Ya.a,{size:"xs",username:n,url:M.N(e)}),y.a.createElement("div",{className:"mention--align"},y.a.createElement("span",null,n),y.a.createElement(Wa.a,{show:Boolean(e.is_bot),className:"badge-autocomplete"}),y.a.createElement("span",{className:"mention__fullname"}," ",s)))}}class ec extends Va.a{handlePretextChanged(e,t){const a=/\bfrom:\s*(\S*)$/i.exec(e.toLowerCase());if(a){const e=a[1];this.startNewRequest(e),Object($n.c)(e,a=>{if(this.shouldCancelDispatch(e))return;const n=Object.assign([],a.users),s=n.map(e=>e.username);t({matchedPretext:e,terms:s,items:n,component:$l})})}return Boolean(a)}allowDividers(){return!1}}var tc=a(1480),ac=a.n(tc);a(1487);class nc extends Ka.a{constructor(...e){super(...e),function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(this,"handleDayClick",e=>{const t=e.toISOString().split("T")[0];this.props.onClick(t,this.props.matchedPretext)})}render(){return y.a.createElement(ac.a,{onDayClick:this.handleDayClick,showOutsideDays:!0})}}class sc extends Va.a{handlePretextChanged(e,t){const a=/\b(?:on|before|after):\s*(\S*)$/i.exec(e.toLowerCase());if(a){const e=a[1];this.startNewRequest(e);const n=Object.assign([],[{label:"Selected Date",date:e}]);t({matchedPretext:e,terms:n.map(e=>e.date),items:n,component:nc})}return Boolean(a)}allowDividers(){return!1}presentationType(){return"date"}}function ic({iconComponent:e,ariaLabel:t,buttonClass:a,buttonId:n,onClick:s,tooltipKey:i,tooltipText:o}){const r={flaggedPosts:{class:"text-nowrap",id:"flaggedTooltip",messageID:Object(le.b)("channel_header.flagged"),message:"Flagged Posts"},pinnedPosts:{class:"",id:"pinnedPostTooltip",messageID:Object(le.b)("channel_header.pinnedPosts"),message:"Pinned Posts"},recentMentions:{class:"",id:"recentMentionsTooltip",messageID:Object(le.b)("channel_header.recentMentions"),message:"Recent Mentions"},search:{class:"",id:"searchTooltip",messageID:Object(le.b)("channel_header.search"),message:"Search"}};let l,c;return l="plugin"===i&&o?y.a.createElement(Zs.a,{id:"pluginTooltip",className:""},y.a.createElement("span",null,o)):function(e){return null==r[e]?null:y.a.createElement(Zs.a,{id:r[e].id,className:r[e].class},y.a.createElement(W.c,{id:r[e].messageID,defaultMessage:r[e].message}))}(i),t&&(c="".concat(Object(M.fb)(r[i].messageID,r[i].message))),l?y.a.createElement("div",{className:"flex-child"},y.a.createElement(Qs.a,{trigger:["hover"],delayShow:S.i.OVERLAY_TIME_DELAY,placement:"bottom",overlay:l},y.a.createElement("button",{id:n,"aria-label":c,className:a||"channel-header__icon icon--hidden style--none",onClick:s},e))):y.a.createElement("div",{className:"flex-child"},y.a.createElement("button",{id:n,className:a||"channel-header__icon icon--hidden style--none",onClick:s},e))}ic.propTypes={ariaLabel:_.a.bool,buttonClass:_.a.string,buttonId:_.a.string.isRequired,iconComponent:_.a.element.isRequired,onClick:_.a.func.isRequired,tooltipKey:_.a.string,tooltipText:_.a.string};class oc extends v.PureComponent{render(){return y.a.createElement(y.a.Fragment,null,this.props.withTitle&&y.a.createElement("h4",null,y.a.createElement(W.c,{id:"search_bar.usage.title",defaultMessage:"Search Options"})),y.a.createElement(ji.b,{id:"search_bar.usage.tips",defaultMessage:'* Use **"quotation marks"** to search for phrases\\n* Use **from:** to find posts from specific users and **in:** to find posts in specific channels\\n* Use **on:** to find posts on a specific date\\n* Use **before:** to find posts before a specific date\\n* Use **after:** to find posts after a specific date\\n* Use **dash** "-" to exclude search terms and modifiers'}))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(oc,"propTypes",{withTitle:_.a.bool});class rc extends y.a.PureComponent{render(){return y.a.createElement("span",this.props,y.a.createElement(W.c,{id:"generic_icons.mention",defaultMessage:"Mention Icon"},e=>y.a.createElement("svg",{width:"14px",height:"14px",viewBox:"0 0 20 20",version:"1.1",role:"icon","aria-label":e},y.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"inherit",fillRule:"evenodd"},y.a.createElement("g",{transform:"translate(-1057.000000, -31.000000)",fill:"inherit"},y.a.createElement("g",null,y.a.createElement("g",{transform:"translate(1049.000000, 22.000000)"},y.a.createElement("path",{d:"M17.4296875,15.8867188 C15.9882812,15.8867188 15.1210938,17.0351562 15.1210938,18.96875 C15.1210938,20.8789062 15.9882812,22.0507812 17.4179688,22.0507812 C18.8945312,22.0507812 19.84375,20.8554688 19.84375,18.96875 C19.84375,17.0820312 18.90625,15.8867188 17.4296875,15.8867188 Z M17.8398438,9.125 C23.3242188,9.125 27.25,12.59375 27.25,17.7734375 C27.25,21.5117188 25.5625,23.9609375 22.7734375,23.9609375 C21.4023438,23.9609375 20.265625,23.1992188 20.078125,22.0390625 L19.9609375,22.0390625 C19.46875,23.2226562 18.4140625,23.8789062 17.0429688,23.8789062 C14.6054687,23.8789062 12.9648438,21.8867188 12.9648438,18.9101562 C12.9648438,16.0625 14.6171875,14.09375 16.9960938,14.09375 C18.25,14.09375 19.3632812,14.7382812 19.8085938,15.7460938 L19.9375,15.7460938 L19.9375,14.328125 L21.9179688,14.328125 L21.9179688,20.984375 C21.9179688,21.7578125 22.328125,22.2851562 23.171875,22.2851562 C24.4726562,22.2851562 25.421875,20.6679688 25.421875,17.8320312 C25.421875,13.5664062 22.2929688,10.7421875 17.7109375,10.7421875 C13.1640625,10.7421875 9.90625,14.140625 9.90625,18.96875 C9.90625,24.1367188 13.3515625,27.0429688 18.109375,27.0429688 C19.5625,27.0429688 21.0507812,26.84375 21.7773438,26.5390625 L21.7773438,28.15625 C20.78125,28.484375 19.4570312,28.671875 18.0273438,28.671875 C12.2382812,28.671875 8.078125,25.109375 8.078125,18.8984375 C8.078125,13.0625 12.0859375,9.125 17.8398438,9.125 Z"}))))))))}}var lc=a(1006);function cc(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const{KeyCodes:dc}=S.Q;class mc extends y.a.Component{constructor(){super(),cc(this,"handleClose",()=>{this.props.actions.closeRightHandSide()}),cc(this,"handleKeyDown",e=>{M.X(e,dc.ESCAPE)&&(e.stopPropagation(),e.preventDefault())}),cc(this,"handleChange",e=>{var t=e.target.value;this.props.actions.updateSearchTerms(t)}),cc(this,"handleUserBlur",()=>{setTimeout(()=>{this.setState({focused:!1})},200)}),cc(this,"handleClear",()=>{this.props.actions.updateSearchTerms("")}),cc(this,"handleUserFocus",()=>{this.setState({focused:!0})}),cc(this,"handleSearch",async e=>{if(e.length){const{error:e}=await this.props.actions.showSearchResults();e||this.handleSearchOnSuccess()}}),cc(this,"handleSearchOnSuccess",()=>{M.Z()&&this.search&&(this.search.value="")}),cc(this,"handleSubmit",e=>{e.preventDefault();const t=this.props.searchTerms.trim();0!==t.length&&(this.handleSearch(t),this.search.blur())}),cc(this,"searchMentions",e=>{e.preventDefault(),this.props.isMentionSearch?this.props.actions.closeRightHandSide():this.props.actions.showMentions()}),cc(this,"getFlagged",e=>{e.preventDefault(),this.props.isFlaggedPosts?this.props.actions.closeRightHandSide():this.props.actions.showFlaggedPosts()}),cc(this,"getSearch",e=>{this.search=e}),this.state={focused:!1},this.suggestionProviders=[new Kl,new ec,new sc]}componentDidMount(){M.Z()&&setTimeout(()=>{const e=document.querySelector(".app__body .sidebar--menu");e&&e.classList.remove("visible")})}renderHintPopover(){if(M.Z())return null;let e="search-help-popover";return!this.props.searchTerms&&this.state.focused&&(e+=" visible"),y.a.createElement(Vl.a,{id:"searchbar-help-popup",placement:"bottom",className:e},y.a.createElement(oc,{withTitle:!0}))}render(){let e,t;if(this.props.showMentionFlagBtns){var a=this.props.isMentionSearch?"active":"";e=y.a.createElement(ic,{iconComponent:y.a.createElement(rc,{className:"icon icon__mentions","aria-hidden":"true"}),buttonClass:"channel-header__icon style--none "+a,buttonId:"channelHeaderMentionButton",onClick:this.searchMentions,tooltipKey:"recentMentions"});var n=this.props.isFlaggedPosts?"active":"";t=y.a.createElement(ic,{iconComponent:y.a.createElement(Xo,{className:"icon icon__flag"}),buttonClass:"channel-header__icon style--none "+n,buttonId:"channelHeaderFlagButton",onClick:this.getFlagged,tooltipKey:"flaggedPosts"})}const s=!this.props.isSearchingTerm&&this.props.searchTerms&&""!==this.props.searchTerms.trim();let i="search__form";this.state.focused&&(i+=" focused");const o=y.a.createElement(Zs.a,{id:"searchClearTooltip"},y.a.createElement(W.c,{id:"search_bar.clear",defaultMessage:"Clear search query"}));return y.a.createElement("div",{className:"sidebar-right__table"},y.a.createElement("div",{className:"sidebar-collapse__container"},y.a.createElement("div",{id:"sidebarCollapse",className:"sidebar-collapse",onClick:this.handleClose},y.a.createElement(W.c,{id:"generic_icons.back",defaultMessage:"Back Icon"},e=>y.a.createElement("span",{className:"fa fa-2x fa-angle-left",title:e})))),y.a.createElement("div",{id:"searchFormContainer",className:"search-form__container"},y.a.createElement("form",{role:"application",className:i,onSubmit:this.handleSubmit,style:uc.searchForm,autoComplete:"off"},y.a.createElement(lc.a,{id:"searchIcon",className:"search__icon","aria-hidden":"true"}),y.a.createElement(gn.a,{ref:this.getSearch,id:"searchBox",tabIndex:"0",className:"search-bar a11y__region","data-a11y-sort-order":"8","aria-describedby":"searchbar-help-popup",placeholder:M.fb("search_bar.search","Search"),value:this.props.searchTerms,onFocus:this.handleUserFocus,onBlur:this.handleUserBlur,onChange:this.handleChange,onKeyDown:this.handleKeyDown,listComponent:Jl,dateComponent:Xl,providers:this.suggestionProviders,type:"search",autoFocus:this.props.isFocus&&""===this.props.searchTerms,delayInputUpdate:!0,renderDividers:!0}),s&&y.a.createElement("div",{id:"searchClearButton",className:"sidebar__search-clear visible",onClick:this.handleClear},y.a.createElement(Qs.a,{delayShow:S.Q.OVERLAY_TIME_DELAY,placement:"bottom",overlay:o},y.a.createElement("span",{className:"sidebar__search-clear-x","aria-hidden":"true"},"×"))),this.props.isSearchingTerm&&y.a.createElement(_o.a,null),this.renderHintPopover())),e,t)}}cc(mc,"propTypes",{isSearchingTerm:_.a.bool,searchTerms:_.a.string,isMentionSearch:_.a.bool,isFlaggedPosts:_.a.bool,showMentionFlagBtns:_.a.bool,isFocus:_.a.bool,actions:_.a.shape({updateSearchTerms:_.a.func,showSearchResults:_.a.func,showMentions:_.a.func,showFlaggedPosts:_.a.func,closeRightHandSide:_.a.func})}),cc(mc,"defaultProps",{showMentionFlagBtns:!0,isFocus:!1});const uc={searchForm:{overflow:"visible"}};var pc=Object(n.connect)(function(e){const t=Object(ms.k)(e);return{isSearchingTerm:Object(ms.g)(e),searchTerms:Object(ms.m)(e),isMentionSearch:t===S.B.MENTION,isFlaggedPosts:t===S.B.FLAG}},function(e){return{actions:Object(s.bindActionCreators)({updateSearchTerms:ds.t,showSearchResults:ds.o,showMentions:ds.l,showFlaggedPosts:ds.k,closeRightHandSide:ds.b},e)}})(mc),hc=a(156),gc=a(1488);class bc extends y.a.Component{render(){const e=y.a.createElement(Zs.a,{id:"closeSidebarTooltip"},y.a.createElement(W.c,{id:"rhs_header.closeSidebarTooltip",defaultMessage:"Close Sidebar"})),t=y.a.createElement(Zs.a,{id:"expandSidebarTooltip"},y.a.createElement(W.c,{id:"rhs_header.expandSidebarTooltip",defaultMessage:"Expand Sidebar"})),a=y.a.createElement(Zs.a,{id:"shrinkSidebarTooltip"},y.a.createElement(W.c,{id:"rhs_header.shrinkSidebarTooltip",defaultMessage:"Shrink Sidebar"}));return y.a.createElement("div",{className:"sidebar--right__header"},y.a.createElement("span",{className:"sidebar--right__title"},this.props.children),y.a.createElement("div",{className:"pull-right"},y.a.createElement("button",{type:"button",className:"sidebar--right__expand","aria-label":"Expand",onClick:this.props.actions.toggleRhsExpanded},y.a.createElement(Qs.a,{delayShow:S.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:t},y.a.createElement(W.c,{id:"rhs_header.expandSidebarTooltip.icon",defaultMessage:"Expand Sidebar Icon"},e=>y.a.createElement("i",{className:"fa fa-expand","aria-label":e}))),y.a.createElement(Qs.a,{delayShow:S.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:a},y.a.createElement(W.c,{id:"rhs_header.expandTooltip.icon",defaultMessage:"Shrink Sidebar Icon"},e=>y.a.createElement("i",{className:"fa fa-compress","aria-label":e})))),y.a.createElement("button",{id:"searchResultsCloseButton",type:"button",className:"sidebar--right__close","aria-label":"Close",onClick:this.props.actions.closeRightHandSide},y.a.createElement(Qs.a,{delayShow:S.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:e},y.a.createElement(W.c,{id:"rhs_header.closeTooltip.icon",defaultMessage:"Close Sidebar Icon"},e=>y.a.createElement("i",{className:"fa fa-sign-out","aria-label":e}))))))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(bc,"propTypes",{children:_.a.element,actions:_.a.shape({closeRightHandSide:_.a.func,toggleRhsExpanded:_.a.func.isRequired})});var fc=Object(n.connect)(null,function(e){return{actions:Object(s.bindActionCreators)({closeRightHandSide:ds.b,toggleRhsExpanded:ds.r},e)}})(bc);class Ec extends y.a.PureComponent{render(){return y.a.createElement("span",this.props,y.a.createElement(W.c,{id:"generic_icons.reply",defaultMessage:"Reply Icon"},e=>y.a.createElement("svg",{id:"Layer_1",x:"0px",y:"0px",width:"17px",height:"17px",viewBox:"-158 242 18 18",style:_c,role:"icon","aria-label":e},y.a.createElement("path",{d:"M-142.2,252.6c-2-3-4.8-4.7-8.3-4.8v-3.3c0-0.2-0.1-0.3-0.2-0.3s-0.3,0-0.4,0.1l-6.9,6.2c-0.1,0.1-0.1,0.2-0.1,0.3 c0,0.1,0,0.2,0.1,0.3l6.9,6.4c0.1,0.1,0.3,0.1,0.4,0.1c0.1-0.1,0.2-0.2,0.2-0.4v-3.8c4.2,0,7.4,0.4,9.6,4.4c0.1,0.1,0.2,0.2,0.3,0.2 c0,0,0.1,0,0.1,0c0.2-0.1,0.3-0.3,0.2-0.4C-140.2,257.3-140.6,255-142.2,252.6z M-150.8,252.5c-0.2,0-0.4,0.2-0.4,0.4v3.3l-6-5.5 l6-5.3v2.8c0,0.2,0.2,0.4,0.4,0.4c3.3,0,6,1.5,8,4.5c0.5,0.8,0.9,1.6,1.2,2.3C-144,252.8-147.1,252.5-150.8,252.5z"}))))}}const _c={enableBackground:"new -158 242 18 18"};function vc(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class yc extends y.a.PureComponent{render(){let e="",t="comment-icon__container";this.props.commentCount>0?(t+=" icon--show",e=y.a.createElement("span",{className:"comment-count"},this.props.commentCount)):""!==this.props.searchStyle&&(t=t+" "+this.props.searchStyle);const a=y.a.createElement(Zs.a,{id:"comment-icon-tooltip",className:"hidden-xs"},y.a.createElement(W.c,{id:"post_info.comment_icon.tooltip.reply",defaultMessage:"Reply"}));return y.a.createElement("button",{id:"".concat(this.props.location,"_commentIcon_").concat(this.props.postId),"aria-label":Object(M.fb)("post_info.comment_icon.tooltip.reply","Reply").toLowerCase(),className:t+" color--link style--none "+this.props.extraClass,onClick:this.props.handleCommentClick},y.a.createElement(Qs.a,{className:"hidden-xs",delayShow:500,placement:"top",overlay:a},y.a.createElement("span",{className:"d-flex"},y.a.createElement(Ec,{className:"comment-icon"}),e)))}}vc(yc,"propTypes",{location:_.a.oneOf([S.r.CENTER,S.r.SEARCH]).isRequired,handleCommentClick:_.a.func.isRequired,searchStyle:_.a.string,commentCount:_.a.number,postId:_.a.string,extraClass:_.a.string}),vc(yc,"defaultProps",{searchStyle:"",commentCount:0,extraClass:"",location:S.r.CENTER});var Cc=a(986);function wc(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Tc extends y.a.PureComponent{constructor(e){super(e),wc(this,"handleFocusRHSClick",e=>{e.preventDefault(),this.props.actions.selectPost(this.props.post)}),wc(this,"handleJumpClick",()=>{M.Z()&&this.props.actions.closeRightHandSide(),this.props.actions.setRhsExpanded(!1),z.a.push("/".concat(this.props.currentTeamName,"/pl/").concat(this.props.post.id))}),wc(this,"handleCardClick",e=>{e&&this.props.actions.selectPostCard(e)}),wc(this,"handleDropdownOpened",e=>{this.setState({dropdownOpened:e})}),wc(this,"renderPostTime",()=>{const e=this.props.post,t=!(x.Posts.POST_DELETED===e.state||Ns.isPostPendingOrFailed(e));return y.a.createElement(or,{isPermalink:t,eventTime:e.create_at,postId:e.id,location:S.r.SEARCH})}),wc(this,"getClassName",()=>{let e="post post--thread";return this.props.compactDisplay&&(e+=" post--compact"),this.state.dropdownOpened&&(e+=" post--hovered"),e}),this.state={dropdownOpened:!1}}render(){const{post:e,channelIsArchived:t,channelId:a,channelType:n}=this.props;let s,{channelName:i}=this.props;n===S.Q.DM_CHANNEL&&(i=y.a.createElement(W.c,{id:"search_item.direct",defaultMessage:"Direct Message (with {username})",values:{username:M.w(M.u(a))}}));let o=!1;e.props&&e.props.from_webhook&&e.props.override_username&&this.props.enablePostUsernameOverride&&(s=e.props.override_username,o=!0);const r=y.a.createElement(Yo,{compactDisplay:this.props.compactDisplay,post:e,userId:e.user_id}),l=y.a.createElement("div",{className:"post__img"},r);let c="";Me.j(this.props.post)&&(c+=" post--edited");let d,m,u,p,h,g=null;e.file_ids&&e.file_ids.length>0&&(g=y.a.createElement(Bo,{post:e,compactDisplay:this.props.compactDisplay})),e.state===S.Q.POST_DELETED||e.state===x.Posts.POST_DELETED?d=y.a.createElement("p",null,y.a.createElement(W.c,{id:"post_body.deleted",defaultMessage:"(message deleted)"})):(m=y.a.createElement(ar,{location:S.r.SEARCH,postId:e.id,isFlagged:this.props.isFlagged}),e.props&&e.props.card&&(u=y.a.createElement(Qs.a,{delayShow:S.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:y.a.createElement(Zs.a,null,y.a.createElement(W.c,{id:"post_info.info.view_additional_info",defaultMessage:"View additional info"}))},y.a.createElement("button",{className:"card-icon__container icon--show style--none",onClick:e=>{e.preventDefault(),this.handleCardClick(this.props.post)}},y.a.createElement(hl,{className:"icon icon__info","aria-hidden":"true"})))),p=y.a.createElement("div",{className:"col__controls col__reply"},y.a.createElement(oo,{post:e,location:S.r.SEARCH,isFlagged:this.props.isFlagged,handleDropdownOpened:this.handleDropdownOpened,commentCount:this.props.commentCountForPost,isReadOnly:t||null}),y.a.createElement(yc,{location:S.r.SEARCH,handleCommentClick:this.handleFocusRHSClick,postId:e.id,searchStyle:"search-item__comment"}),y.a.createElement("a",{onClick:this.handleJumpClick,className:"search-item__jump"},y.a.createElement(W.c,{id:"search_item.jump",defaultMessage:"Jump"}))),d=y.a.createElement(ll,{post:e,options:{searchTerm:this.props.term,searchMatches:this.props.matches}},y.a.createElement(ml,{post:e,options:{searchTerm:this.props.term,searchMatches:this.props.matches,mentionHighlight:this.props.isMentionSearch}}))),e.is_pinned&&(h=y.a.createElement("span",{className:"post__pinned-badge"},y.a.createElement(W.c,{id:"post_info.pinned",defaultMessage:"Pinned"})));const b=M.s(e.create_at);return y.a.createElement("div",{"data-testid":"search-item-container",className:"search-item__container"},y.a.createElement(Ki,{date:b}),y.a.createElement("div",{className:this.getClassName()},y.a.createElement("div",{className:"search-channel__name"},i,t&&y.a.createElement("span",{className:"search-channel__archived"},y.a.createElement(Cc.a,{className:"icon icon__archive channel-header-archived-icon svg-text-color"}),y.a.createElement(W.c,{id:"search_item.channelArchived",defaultMessage:"Archived"}))),y.a.createElement("div",{role:"application",className:"post__content"},l,y.a.createElement("div",null,y.a.createElement("div",{className:"post__header"},y.a.createElement("div",{className:"col col__name"},y.a.createElement(El,{userId:e.user_id,overwriteName:s,disablePopover:o,isRHS:!0}),y.a.createElement(Wa.a,{show:Boolean(e.props&&e.props.from_webhook&&!this.props.isBot)})),y.a.createElement("div",{className:"col"},this.renderPostTime(),h,u,m),p),y.a.createElement("div",{className:"search-item-snippet post__body"},y.a.createElement("div",{className:c},d,g))))))}}wc(Tc,"propTypes",{post:_.a.object,matches:_.a.array,channelId:_.a.string,channelName:_.a.string,channelType:_.a.string,channelIsArchived:_.a.bool,compactDisplay:_.a.bool,isMentionSearch:_.a.bool,term:_.a.string,isFlagged:_.a.bool,currentTeamName:_.a.string,commentCountForPost:_.a.number,enablePostUsernameOverride:_.a.bool.isRequired,isBot:_.a.bool.isRequired,actions:_.a.shape({closeRightHandSide:_.a.func.isRequired,selectPost:_.a.func.isRequired,selectPostCard:_.a.func.isRequired,setRhsExpanded:_.a.func.isRequired}).isRequired}),wc(Tc,"defaultProps",{isBot:!1,channelIsArchived:!1});var Oc=Object(n.connect)(function(){const e=Object(Na.makeGetCommentCountForPost)();return(t,a)=>{const n=Object(d.getConfig)(t),s=Object(c.getMyPreferences)(t),i="true"===n.EnablePostUsernameOverride,{post:o}=a,r=Object(m.getUser)(t,o.user_id),l=Object(p.getChannel)(t,o.channel_id)||{delete_at:0};return{channelId:l.id,channelName:l.display_name,channelType:l.type,channelIsArchived:0!==l.delete_at,currentTeamName:Object(u.getCurrentTeam)(t).name,commentCountForPost:e(t,{post:o}),enablePostUsernameOverride:i,isFlagged:Object(Ns.isPostFlagged)(o.id,s),isBot:!!r&&r.is_bot}}},function(e){return{actions:Object(s.bindActionCreators)({closeRightHandSide:ds.b,selectPost:ds.h,selectPostCard:ds.g,setRhsExpanded:ds.j},e)}})(Tc);class Sc extends v.PureComponent{render(){return y.a.createElement("li",null,y.a.createElement(W.c,{id:"search_results.usage.dataRetention",defaultMessage:"Only messages posted in the last {days} days are returned. Contact your System Administrator for more detail.",values:{days:this.props.dataRetentionMessageRetentionDays}}))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Sc,"propTypes",{dataRetentionMessageRetentionDays:_.a.string});class Pc extends v.PureComponent{render(){return y.a.createElement(y.a.Fragment,null,y.a.createElement("ul",null,y.a.createElement("li",null,y.a.createElement(W.c,{id:"search_results.usageFlag1",defaultMessage:"You haven't flagged any messages yet."})),y.a.createElement("li",null,y.a.createElement(W.c,{id:"search_results.usageFlag2",defaultMessage:"You can add a flag to messages and comments by clicking the {flagIcon} icon next to the timestamp.",values:{flagIcon:y.a.createElement(Xo,{className:"usage__icon"})}})),y.a.createElement("li",null,y.a.createElement(W.c,{id:"search_results.usageFlag4",defaultMessage:"Flags are a way to mark messages for follow up. Your flags are personal, and cannot be seen by other users."})),this.props.dataRetentionEnableMessageDeletion&&y.a.createElement(Sc,{dataRetentionMessageRetentionDays:this.props.dataRetentionMessageRetentionDays})))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Pc,"propTypes",{dataRetentionEnableMessageDeletion:_.a.bool,dataRetentionMessageRetentionDays:_.a.string});class Mc extends v.PureComponent{render(){return y.a.createElement(y.a.Fragment,null,y.a.createElement("h4",{id:"noResultsMessage"},y.a.createElement(W.c,{id:"search_results.noResults",defaultMessage:"No results found. Try again?"})),y.a.createElement("ul",null,y.a.createElement("li",null,y.a.createElement(W.c,{id:"search_results.noResults.partialPhraseSuggestion",defaultMessage:'If you\'re searching a partial phrase (ex. searching "rea", looking for "reach" or "reaction"), append a * to your search term.'})),y.a.createElement("li",null,y.a.createElement(W.c,{id:"search_results.noResults.stopWordsSuggestion",defaultMessage:'Two letter searches and common words like "this", "a" and "is" won\'t appear in search results due to the excessive results returned.'})),this.props.dataRetentionEnableMessageDeletion&&y.a.createElement(Sc,{dataRetentionMessageRetentionDays:this.props.dataRetentionMessageRetentionDays})))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Mc,"propTypes",{dataRetentionEnableMessageDeletion:_.a.bool,dataRetentionMessageRetentionDays:_.a.string});class Nc extends v.PureComponent{render(){return y.a.createElement(y.a.Fragment,null,y.a.createElement("ul",null,y.a.createElement("li",null,y.a.createElement(W.c,{id:"search_results.usagePin1",defaultMessage:"There are no pinned messages yet."})),y.a.createElement("li",null,y.a.createElement(W.c,{id:"search_results.usagePin2",defaultMessage:"All members of this channel can pin important or useful messages."})),y.a.createElement("li",null,y.a.createElement(W.c,{id:"search_results.usagePin3",defaultMessage:"Pinned messages are visible to all channel members."})),y.a.createElement("li",null,y.a.createElement(W.c,{id:"search_results.usagePin4",defaultMessage:'To pin a message: Go to the message that you want to pin and click [...] > "Pin to channel".'})),this.props.dataRetentionEnableMessageDeletion&&y.a.createElement(Sc,{dataRetentionMessageRetentionDays:this.props.dataRetentionMessageRetentionDays})))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Nc,"propTypes",{dataRetentionEnableMessageDeletion:_.a.bool,dataRetentionMessageRetentionDays:_.a.string});var Ic=a(940);function Ac(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const jc=30;function Rc(e){return y.a.createElement("div",Object.assign({},e,{className:"scrollbar--view"}))}function kc(e){return y.a.createElement("div",Object.assign({},e,{className:"scrollbar--horizontal"}))}function Lc(e){return y.a.createElement("div",Object.assign({},e,{className:"scrollbar--vertical"}))}class xc extends y.a.Component{constructor(e){super(e),Ac(this,"handleResize",()=>{this.setState({windowWidth:M.rb(),windowHeight:M.qb()})}),Ac(this,"scrollToTop",()=>{this.refs.scrollbars.scrollToTop()}),Ac(this,"handleScroll",()=>{if(!(this.props.isFlaggedPosts||this.props.isPinnedPosts||this.props.isSearchingTerm||this.props.isSearchGettingMore)){const e=this.refs.scrollbars.getScrollHeight();this.refs.scrollbars.getScrollTop()+this.refs.scrollbars.getClientHeight()+jc>=e&&this.loadMorePosts()}}),Ac(this,"loadMorePosts",Object(di.debounce)(()=>{this.props.actions.getMorePostsForSearch()},100)),this.state={windowWidth:M.rb(),windowHeight:M.qb()}}componentDidMount(){this.scrollToTop(),window.addEventListener("resize",this.handleResize)}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}shouldComponentUpdate(e,t){return function(e,t,a,n){for(const a in t)if(t.hasOwnProperty(a)&&"results"!==a&&t[a]!==e[a])return!0;for(const e in n)if(n.hasOwnProperty(e)&&n[e]!==a[e])return!0;const s=e.results,i=t.results;if(s.length!==i.length)return!0;for(let e=0;e<s.length;e++)if(s[e]!==i[e])return!0;return!1}(this.props,e,this.state,t)}componentDidUpdate(e){this.props.searchTerms!==e.searchTerms&&this.scrollToTop()}render(){const e=this.props.results,t=!e||0===e.length,a=this.props.searchTerms;let n=null,s=null;if(this.props.isSearchingTerm||this.props.isSearchingFlaggedPost||this.props.isSearchingPinnedPost||!this.props.isOpened)n=y.a.createElement("div",{className:"sidebar--right__subheader"},y.a.createElement("div",{className:"sidebar--right__loading"},y.a.createElement(Ic.a,{text:M.fb("search_header.loading","Searching")})));else if(this.props.isFlaggedPosts&&t)n=y.a.createElement("div",{className:"sidebar--right__subheader"},y.a.createElement(Pc,{dataRetentionEnableMessageDeletion:this.props.dataRetentionEnableMessageDeletion,dataRetentionMessageRetentionDays:this.props.dataRetentionMessageRetentionDays}));else if(this.props.isPinnedPosts&&t)n=y.a.createElement("div",{className:"sidebar--right__subheader"},y.a.createElement(Nc,{dataRetentionEnableMessageDeletion:this.props.dataRetentionEnableMessageDeletion,dataRetentionMessageRetentionDays:this.props.dataRetentionMessageRetentionDays}));else if(!a&&t)n=y.a.createElement("div",{className:"sidebar--right__subheader"},y.a.createElement(oc,null));else if(t)n=y.a.createElement("div",{className:"sidebar--right__subheader"},y.a.createElement(Mc,{dataRetentionEnableMessageDeletion:this.props.dataRetentionEnableMessageDeletion,dataRetentionMessageRetentionDays:this.props.dataRetentionMessageRetentionDays}));else{let t;this.props.isPinnedPosts?(t=[...e]).sort((e,t)=>t.create_at-e.create_at):t=e,n=t.map(e=>y.a.createElement(Oc,{key:e.id,compactDisplay:this.props.compactDisplay,post:e,matches:this.props.matches[e.id],term:this.props.isFlaggedPosts||this.props.isPinnedPosts||this.props.isMentionSearch?"":a,isMentionSearch:this.props.isMentionSearch}),this),this.props.isSearchAtEnd||this.props.isFlaggedPosts||this.props.isPinnedPosts||(s=y.a.createElement("div",{className:"loading-screen"},y.a.createElement("div",{className:"loading__content"},y.a.createElement("div",{className:"round round-1"}),y.a.createElement("div",{className:"round round-2"}),y.a.createElement("div",{className:"round round-3"}))))}var i=y.a.createElement(W.c,{id:"search_header.results",defaultMessage:"Search Results"});return this.props.isMentionSearch?i=y.a.createElement(W.c,{id:"search_header.title2",defaultMessage:"Recent Mentions"}):this.props.isFlaggedPosts?i=y.a.createElement(W.c,{id:"search_header.title3",defaultMessage:"Flagged Posts"}):this.props.isPinnedPosts?i=y.a.createElement(W.c,{id:"search_header.title4",defaultMessage:"Pinned posts in {channelDisplayName}",values:{channelDisplayName:this.props.channelDisplayName}}):this.props.isCard&&(i=y.a.createElement(W.c,{id:"search_header.title5",defaultMessage:"Extra information"})),y.a.createElement("div",{className:"sidebar-right__body"},y.a.createElement(fc,null,i),y.a.createElement(ws.a,{ref:"scrollbars",autoHide:!0,autoHideTimeout:500,autoHideDuration:500,renderThumbHorizontal:kc,renderThumbVertical:Lc,renderView:Rc,onScroll:this.handleScroll},y.a.createElement("div",{id:"search-items-container",className:"search-items-container"},n,s)))}}Ac(xc,"propTypes",{results:_.a.array,matches:_.a.object,currentUser:_.a.object,searchTerms:_.a.string,isSearchingTerm:_.a.bool,isSearchingFlaggedPost:_.a.bool,isSearchingPinnedPost:_.a.bool,isSearchGettingMore:_.a.bool,isSearchAtEnd:_.a.bool,compactDisplay:_.a.bool,isMentionSearch:_.a.bool,isFlaggedPosts:_.a.bool,isPinnedPosts:_.a.bool,isCard:_.a.bool,channelDisplayName:_.a.string.isRequired,dataRetentionEnableMessageDeletion:_.a.bool.isRequired,dataRetentionMessageRetentionDays:_.a.string,isOpened:_.a.bool,actions:_.a.shape({getMorePostsForSearch:_.a.func.isRequired})}),Ac(xc,"defaultProps",{matches:{},currentUser:{}});var Dc=Object(n.connect)(function(){let e,t;return function(a){const n=Object(d.getConfig)(a),s="true"===n.DataRetentionEnableMessageDeletion,i=n.DataRetentionMessageRetentionDays,o="true"===n.ExperimentalViewArchivedChannels,r=Object(Na.getSearchResults)(a);r&&r!==e&&(t=[],(e=r).forEach(e=>{if(!e)return;const n=Object(p.getChannel)(a,e.channel_id);n&&0!==n.delete_at&&!o||t.push(e)}));const l=Object(gc.getCurrentSearchForCurrentTeam)(a)||{};return{results:t,matches:Object(Na.getSearchMatches)(a),currentUser:Object(m.getCurrentUser)(a),searchTerms:Object(ms.l)(a),isSearchingTerm:Object(ms.g)(a),isSearchingFlaggedPost:Object(ms.e)(a),isSearchingPinnedPost:Object(ms.f)(a),isSearchGettingMore:Object(ms.d)(a),isSearchAtEnd:l.isEnd,compactDisplay:c.get(a,S.A.CATEGORY_DISPLAY_SETTINGS,S.A.MESSAGE_DISPLAY,S.A.MESSAGE_DISPLAY_DEFAULT)===S.A.MESSAGE_DISPLAY_COMPACT,dataRetentionEnableMessageDeletion:s,dataRetentionMessageRetentionDays:i}}},function(e){return{actions:Object(s.bindActionCreators)({getMorePostsForSearch:hc.getMorePostsForSearch},e)}})(xc);class Uc extends y.a.PureComponent{render(){return y.a.createElement("div",{id:"rhsContainer",className:"sidebar-right__body",ref:"sidebarbody"},y.a.createElement(fc,null,this.props.title),y.a.createElement(R.a,{pluggableName:"RightHandSidebarComponent",pluggableId:this.props.pluggableId}))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Uc,"propTypes",{title:_.a.oneOfType([_.a.string,_.a.object]),pluggableId:_.a.string.isRequired});var qc=Object(n.connect)(function(e){const t=e.plugins.components.RightHandSidebarComponent,a=Object(ms.h)(e),n=t.find(e=>e.id===a);return{title:n?n.title:"",pluggableId:a}})(Uc);function Hc(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Fc extends y.a.PureComponent{constructor(e){super(e),Hc(this,"determineTransition",()=>{const e=window.getComputedStyle(this.sidebarRight.current).getPropertyValue("transition"),t=Boolean(e)&&"all 0s ease 0s"!==e;this.sidebarRight.current&&t?(this.setState({isOpened:this.props.isOpen}),this.sidebarRight.current.addEventListener("transitionend",this.onFinishTransition)):(this.setState({isOpened:!0}),this.sidebarRight.current&&this.sidebarRight.current.removeEventListener("transitionend",this.onFinishTransition))}),Hc(this,"onFinishTransition",e=>{"transform"===e.propertyName&&this.setState({isOpened:this.props.isOpen})}),Hc(this,"onShrink",()=>{this.props.actions.setRhsExpanded(!1)}),this.sidebarRight=y.a.createRef(),this.state={isOpened:!1}}componentDidMount(){window.addEventListener("resize",this.determineTransition),this.determineTransition()}componentWillUnmount(){window.removeEventListener("resize",this.determineTransition),this.sidebarRight.current&&this.sidebarRight.current.removeEventListener("transitionend",this.onFinishTransition)}componentDidUpdate(e){const t=e.searchVisible||e.postRightVisible,a=this.props.searchVisible||this.props.postRightVisible;!t&&a&&(Object(Pe.d)("ui","ui_rhs_opened"),M.k()&&setTimeout(this.props.actions.scrollPostList,0));const{actions:n,isPinnedPosts:s,channel:i}=this.props;s&&e.isPinnedPosts===s&&i.id!==e.channel.id&&n.showPinnedPosts(i.id)}render(){const{channel:e,currentUserId:t,isFlaggedPosts:a,isMentionSearch:n,isPinnedPosts:s,postRightVisible:i,postCardVisible:o,previousRhsState:r,searchVisible:l,isPluginView:c}=this.props;let d=null,m="";this.props.isExpanded&&(m="sidebar--right--expanded");var u=null;t&&(u=y.a.createElement(pc,{isFocus:l&&!a&&!s}));let p="";return e&&(p=e.type===S.Q.DM_CHANNEL||e.type===S.Q.GM_CHANNEL?M.fb("rhs_root.direct","Direct Message"):e.display_name),l?d=y.a.createElement("div",{className:"sidebar--right__content"},y.a.createElement("div",{className:"search-bar__container channel-header alt"},u),y.a.createElement(Dc,{isMentionSearch:n,isFlaggedPosts:a,isPinnedPosts:s,toggleSize:this.toggleSize,shrink:this.onShrink,channelDisplayName:p,isOpened:this.state.isOpened})):i?d=y.a.createElement("div",{className:"post-right__container"},y.a.createElement(Es,{overlayType:"right"}),y.a.createElement("div",{className:"search-bar__container channel-header alt"},u),y.a.createElement(kl,{previousRhsState:r,currentUserId:t,toggleSize:this.toggleSize,shrink:this.onShrink})):c?d=y.a.createElement("div",{className:"post-right__container"},y.a.createElement("div",{className:"search-bar__container channel-header alt"},u),y.a.createElement(qc,null)):o&&(d=y.a.createElement("div",{className:"post-right__container"},y.a.createElement("div",{className:"search-bar__container channel-header alt"},u),y.a.createElement(Gl,{previousRhsState:r}))),d||(m=""),y.a.createElement("div",{className:ps()("sidebar--right",m,{"move--left":this.props.isOpen}),id:"sidebar-right",ref:this.sidebarRight},y.a.createElement("div",{onClick:this.onShrink,className:"sidebar--right__bg"}),y.a.createElement("div",{className:"sidebar-right-container"},d))}}Hc(Fc,"propTypes",{isExpanded:_.a.bool.isRequired,isOpen:_.a.bool.isRequired,currentUserId:_.a.string.isRequired,channel:_.a.object,postRightVisible:_.a.bool,postCardVisible:_.a.bool,searchVisible:_.a.bool,isMentionSearch:_.a.bool,isFlaggedPosts:_.a.bool,isPinnedPosts:_.a.bool,isPluginView:_.a.bool,previousRhsState:_.a.string,actions:_.a.shape({setRhsExpanded:_.a.func.isRequired,showPinnedPosts:_.a.func.isRequired,scrollPostList:_.a.func.isRequired})});var Bc=Object(n.connect)(function(e){const t=Object(ms.k)(e),a=Object(ms.n)(e);let n=null;if(a&&null==(n=Object(p.getChannel)(e,a))){const{focusedPostId:t}=e.views.channel,a=Object(Na.getPost)(e,t);null!=a&&(n=Object(p.getChannel)(e,a.channel_id))}return{isExpanded:Object(ms.a)(e),isOpen:Object(ms.c)(e),channel:n,currentUserId:Object(m.getCurrentUserId)(e),postRightVisible:Boolean(Object(ms.s)(e)),postCardVisible:Boolean(Object(ms.q)(e)),searchVisible:Boolean(t)&&t!==S.B.PLUGIN,previousRhsState:Object(ms.j)(e),isMentionSearch:t===S.B.MENTION,isFlaggedPosts:t===S.B.FLAG,isPinnedPosts:t===S.B.PIN,isPluginView:t===S.B.PLUGIN}},function(e){return{actions:Object(s.bindActionCreators)({setRhsExpanded:ds.j,showPinnedPosts:ds.m,scrollPostList:da.j},e)}})(Fc),Gc=a(1863),Vc=a(1489),Wc=a.n(Vc),zc=a(1490),Yc=a.n(zc);function Kc(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Qc=S.Q.Preferences,Zc=S.Q.TutorialSteps;class Jc extends y.a.Component{constructor(e){super(e),Kc(this,"show",()=>{this.setState({show:!0})}),Kc(this,"hide",()=>{this.setState({show:!1})}),Kc(this,"handleNext",()=>{if(this.state.currentScreen<this.props.screens.length-1)return void this.setState({currentScreen:this.state.currentScreen+1});if(this.props.diagnosticsTag){let e=this.props.diagnosticsTag;this.props.screens.length>1&&(e+="_"+(this.state.currentScreen+1).toString()),this.state.currentScreen===this.props.screens.length-1?e+="_okay":e+="_next",Object(Pe.d)("tutorial",e)}const{currentUserId:e,actions:t}=this.props,{closeRhsMenu:a,savePreferences:n}=t,s=[{user_id:e,category:Qc.TUTORIAL_STEP,name:e,value:(this.props.step+1).toString()}];a(),this.hide(),n(e,s)}),Kc(this,"skipTutorial",e=>{if(e.preventDefault(),this.props.diagnosticsTag){let e=this.props.diagnosticsTag;this.props.screens.length>1&&(e+="_"+this.state.currentScreen),e+="_skip",Object(Pe.d)("tutorial",e)}const{currentUserId:t,actions:a}=this.props,n=[{user_id:t,category:Qc.TUTORIAL_STEP,name:t,value:Zc.FINISHED.toString()}];a.savePreferences(t,n)}),Kc(this,"handleCircleClick",(e,t)=>{e.preventDefault(),this.setState({currentScreen:t})}),Kc(this,"getTarget",()=>this.refs.target),this.state={currentScreen:0,show:!1}}render(){const e=this.state.currentScreen===this.props.screens.length-1?y.a.createElement(W.c,{id:"tutorial_tip.ok",defaultMessage:"Okay"}):y.a.createElement(W.c,{id:"tutorial_tip.next",defaultMessage:"Next"}),t=[];if(this.props.screens.length>1)for(let e=0;e<this.props.screens.length;e++){let a="circle";e===this.state.currentScreen&&(a+=" active"),t.push(y.a.createElement("a",{href:"#",key:"dotactive"+e,className:a,"data-screen":e,onClick:t=>this.handleCircleClick(t,e)}))}var a=Wc.a;return"tip-overlay--header"!==this.props.overlayClass&&"tip-overlay--sidebar"!==this.props.overlayClass&&"tip-overlay--header--up"!==this.props.overlayClass||(a=Yc.a),y.a.createElement("div",{id:"tipButton",className:"tip-div "+this.props.overlayClass,onClick:this.show},y.a.createElement("img",{alt:"tutorial tip",className:"tip-button",src:a,width:"35",onClick:this.show,ref:"target"}),y.a.createElement(Z.a,{show:this.state.show},y.a.createElement("div",{className:"tip-backdrop"})),y.a.createElement(Z.a,{placement:this.props.placement,show:this.state.show,rootClose:!0,onHide:this.hide,target:this.getTarget},y.a.createElement("div",{className:"tip-overlay "+this.props.overlayClass},y.a.createElement("div",{className:"arrow"}),this.props.screens[this.state.currentScreen],y.a.createElement("div",{className:"tutorial__footer"},y.a.createElement("div",{className:"tutorial__circles"},t),y.a.createElement("div",{className:"text-right"},y.a.createElement("button",{id:"tipNextButton",className:"btn btn-primary",onClick:this.handleNext},e),y.a.createElement("div",{className:"tip-opt"},y.a.createElement(W.c,{id:"tutorial_tip.seen",defaultMessage:"Seen this before? "}),y.a.createElement("a",{href:"#",onClick:this.skipTutorial},y.a.createElement(W.c,{id:"tutorial_tip.out",defaultMessage:"Opt out of these tips."}))))))))}}Kc(Jc,"propTypes",{currentUserId:_.a.string.isRequired,step:_.a.number.isRequired,screens:_.a.array.isRequired,placement:_.a.string.isRequired,overlayClass:_.a.string,diagnosticsTag:_.a.string,actions:_.a.shape({closeRhsMenu:_.a.func.isRequired,savePreferences:_.a.func.isRequired})}),Kc(Jc,"defaultProps",{overlayClass:""});var Xc=Object(n.connect)(function(e){const t=Object(m.getCurrentUserId)(e);return{currentUserId:t,step:Object(c.getInt)(e,S.A.TUTORIAL_STEP,t,0)}},function(e){return{actions:Object(s.bindActionCreators)({closeRhsMenu:ds.a,savePreferences:Xn.savePreferences},e)}})(Jc);const $c=({toggleFunc:e,onBottom:t})=>{const a=[];a.push(y.a.createElement("div",null,y.a.createElement("h4",null,y.a.createElement(W.c,{id:"sidebar_header.tutorial.title",defaultMessage:"Main Menu"})),y.a.createElement("p",null,y.a.createElement(ji.b,{id:"sidebar_header.tutorial.body1",defaultMessage:"The **Main Menu** is where you can **Invite New Members**, access your **Account Settings** and set your **Theme Color**."})),y.a.createElement("p",null,y.a.createElement(ji.b,{id:"sidebar_header.tutorial.body2",defaultMessage:"Team administrators can also access their **Team Settings** from this menu."})),y.a.createElement("p",null,y.a.createElement(ji.b,{id:"sidebar_header.tutorial.body3",defaultMessage:"System administrators will find a **System Console** option to administrate the entire system."}))));let n="right",s="left";return t&&(n="bottom",s="up"),y.a.createElement("div",{onClick:e},y.a.createElement(Xc,{placement:n,screens:a,overlayClass:"tip-overlay--header--"+s,diagnosticsTag:"tutorial_tip_3_main_menu"}))};$c.propTypes={toggleFunc:_.a.func,onBottom:_.a.bool.isRequired};var ed=$c,td=a(976);function ad(e,t,a){return async(n,s)=>{t.length>0&&await n(l.getTeamMembersByIds(e,t.map(e=>e.id)));const i=s(),o=[],r=[],c=[];for(const a of t){const t=Object(u.getTeamMember)(i,e,a.id);Object(M.W)(a)?r.push({user:a,reason:Object(M.fb)("invite.members.user-is-guest","Contact your admin to make this guest a full member.")}):t?r.push({user:a,reason:Object(M.fb)("invite.members.already-member","This person is already a team member.")}):c.push(a)}if(c.length>0){let t;try{t=await n(Object(b.c)(e,c.map(e=>e.id)))}catch(e){t={error:Object(M.fb)("invite.members.unable-to-add-the-user-to-the-team","Unable to add the user to the team.")}}for(const e of c)t.error?r.push({user:e,reason:t.error.toString()}):o.push({user:e,reason:Object(M.fb)("invite.members.added-to-team","This member has been added to the team.")})}if(a.length>0){let t;try{t=await n(l.sendEmailInvitesToTeam(e,a))}catch(e){t={error:Object(M.fb)("invite.members.unable-to-add-the-user-to-the-team","Unable to add the user to the team.")}}for(const e of a)t.error?r.push({email:e,reason:t.error.toString()}):o.push({email:e,reason:Object(M.fb)("invite.members.invite-sent","An invitation email has been sent.")})}return{sent:o,notSent:r}}}function nd(e,t,a,n,s){return async(i,o)=>{a.length>0&&await i(l.getTeamMembersByIds(e,a.map(e=>e.id)));const c=o(),d=[],m=[],u=Object(p.getChannelMembersInChannels)(c),h=await Promise.all(a.map(a=>(async function(e,t,a,n,s){if(!Object(M.W)(t))return{notSent:{user:t,reason:Object(M.fb)("invite.members.user-is-not-guest","This person is already a member.")}};let i=!0,o=!1;for(const e of n)s&&s[e]&&s[e][t.id]?o=!0:i=!1;if(i)return{notSent:{user:t,reason:Object(M.fb)("invite.guests.already-all-channels-member","This person is already a member of all the channels.")}};try{await e(Object(b.c)(a,[t.id]));for(const i of n)s&&s[i]&&s[i][t.id]||await e(Object(r.joinChannel)(t.id,a,i))}catch(e){return{notSent:{user:t,reason:Object(M.fb)("invite.guests.unable-to-add-the-user-to-the-channels","Unable to add the guest to the channels.")}}}return o?{notSent:{user:t,reason:Object(M.fb)("invite.guests.already-some-channels-member","This person is already a member of some of the channels.")}}:{sent:{user:t,reason:{id:Object(le.b)("invite.guests.new-member"),message:"This guest has been added to the team and {count, plural, one {channel} other {channels}}.",values:{count:n.length}}}}})(i,a,e,t,u)));for(const e of h)e.sent&&d.push(e.sent),e.notSent&&m.push(e.notSent);if(n.length>0){let a;try{a=await i(l.sendEmailGuestInvitesToChannels(e,t,n,s))}catch(e){a={error:Object(M.fb)("invite.guests.unable-to-add-the-user-to-the-channels","Unable to add the guest to the channels.")}}for(const e of n)a.error?m.push({email:e,reason:a.error.toString()}):d.push({email:e,reason:Object(M.fb)("invite.guests.added-to-channel","An invitation email has been sent.")})}return{sent:d,notSent:m}}}class sd extends y.a.PureComponent{render(){return y.a.createElement("span",this.props,y.a.createElement(W.c,{id:"generic_icons.close",defaultMessage:"Close Icon"},e=>y.a.createElement("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",role:"icon","aria-label":e},y.a.createElement("path",{d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"}))))}}a(1491);function id(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const od=100;class rd extends y.a.Component{constructor(...e){super(...e),id(this,"handleKeypress",e=>{"Escape"===e.key&&this.props.show&&this.close()}),id(this,"close",()=>{this.props.onClose()})}componentDidMount(){document.addEventListener("keydown",this.handleKeypress)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeypress)}render(){return y.a.createElement(Gc.a,{in:this.props.show,classNames:"FullScreenModal",mountOnEnter:!0,unmountOnExit:!0,timeout:od,appear:!0},y.a.createElement("div",{className:"FullScreenModal"},y.a.createElement(sd,{className:"close-x",onClick:this.close,id:"closeIcon"}),this.props.children))}}id(rd,"propTypes",{show:_.a.bool.isRequired,onClose:_.a.func.isRequired,children:_.a.node.isRequired});class ld extends y.a.Component{constructor(e){super(e),this.el=document.createElement("div")}componentDidMount(){document.getElementById("root-portal").appendChild(this.el)}componentWillUnmount(){document.getElementById("root-portal").removeChild(this.el)}render(){return bi.a.createPortal(this.props.children,this.el)}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(ld,"propTypes",{children:_.a.node});class cd extends y.a.PureComponent{render(){return y.a.createElement("span",this.props,y.a.createElement(W.c,{id:"generic_icons.invite",defaultMessage:"Invite Icon"},e=>y.a.createElement("svg",{width:"126px",height:"32px",viewBox:"0 0 126 32",role:"icon","aria-label":e},y.a.createElement("path",{d:"M 106,18 86,5.52 V 4 c 0,-2.22 1.78,-4 4,-4 h 32 c 2.20914,0 4,1.790861 4,4 v 1.5 z m 20,10 c 0,2.209139 -1.79086,4 -4,4 H 90 c -2.22,0 -4,-1.8 -4,-4 V 10.22 l 4,2.5 V 28 h 32 V 12.72 l 4,-2.5 z M 1,15 h 62 c 0.552285,0 1,0.447715 1,1 0,0.552285 -0.447715,1 -1,1 H 1 C 0.44771525,17 0,16.552285 0,16 0,15.447715 0.44771525,15 1,15 Z M 21,5 h 48 c 0.552285,0 1,0.447715 1,1 0,0.552285 -0.447715,1 -1,1 H 21 C 20.447715,7 20,6.552285 20,6 20,5.447715 20.447715,5 21,5 Z m 0,20 h 48 c 0.552285,0 1,0.447715 1,1 0,0.552285 -0.447715,1 -1,1 H 21 c -0.552285,0 -1,-0.447715 -1,-1 0,-0.552285 0.447715,-1 1,-1 z"}))))}}class dd extends y.a.PureComponent{render(){return y.a.createElement("span",this.props,y.a.createElement(W.c,{id:"generic_icons.channel.arrow-right",defaultMessage:"Arrow right"},e=>y.a.createElement("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",role:"icon",title:e},y.a.createElement("path",{d:"M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"}))))}}a(1492);class md extends y.a.Component{render(){const e=this.props.teamName;return y.a.createElement("div",{className:"InvitationModalInitialStep"},y.a.createElement("div",{className:"modal-icon"},y.a.createElement(cd,null)),y.a.createElement("h1",null,y.a.createElement(ji.b,{id:"invitation_modal.title",defaultMessage:"Invite people to **{teamName}**",values:{teamName:e}})),y.a.createElement("div",{className:"invitation-modal-option",onClick:this.props.goToMembers,"data-testid":"inviteMembersLink"},y.a.createElement("div",{"data-testid":"inviteMembersSection"},y.a.createElement("h2",null,y.a.createElement(ji.b,{id:"invitation_modal.invite_members.title",defaultMessage:"Invite **Members**"})),y.a.createElement(W.c,{id:"invitation_modal.invite_members.description",defaultMessage:"Invite new team members with a link or by email. Team members have access to messages and files in open teams and public channels."})),y.a.createElement(dd,{className:"arrow"})),y.a.createElement("div",{className:"invitation-modal-option",onClick:this.props.goToGuests,"data-testid":"inviteGuestLink"},y.a.createElement("div",null,y.a.createElement("h2",null,y.a.createElement(ji.b,{id:"invitation_modal.invite_guests.title",defaultMessage:"Invite **Guests**"})),y.a.createElement(W.c,{id:"invitation_modal.invite_guests.description",defaultMessage:"Invite guests to one or more channels. Guests only have access to messages, files, and people in the channels they are members of."})),y.a.createElement(dd,{className:"arrow"})))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(md,"propTypes",{teamName:_.a.string.isRequired,goToMembers:_.a.func.isRequired,goToGuests:_.a.func.isRequired});var ud=a(50),pd=a(1499),hd=a.n(pd),gd=a(1007);class bd extends y.a.PureComponent{render(){return y.a.createElement("span",this.props,y.a.createElement(W.c,{id:"generic_icons.mail",defaultMessage:"Mail Icon"},e=>y.a.createElement("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",role:"icon","aria-label":e},y.a.createElement("path",{d:"M4,4H20A2,2 0 0,1 22,6V18A2,2 0 0,1 20,20H4C2.89,20 2,19.1 2,18V6C2,4.89 2.89,4 4,4M12,11L20,6H4L12,11M4,18H20V8.37L12,13.36L4,8.37V18Z"}))))}}class fd extends y.a.PureComponent{render(){return y.a.createElement("span",this.props,y.a.createElement(W.c,{id:"generic_icons.add-mail",defaultMessage:"Add Mail Icon"},e=>y.a.createElement("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",role:"icon","aria-label":e},y.a.createElement("path",{d:"M3,4C1.89,4 1,4.89 1,6V18A2,2 0 0,0 3,20H14V18H3V8.37L11,13.36L19,8.37V13H21V6A2,2 0 0,0 19,4H3M3,6H19L11,11L3,6M19,15V18H16V20H19V23H21V20H24V18H21V15H19Z"}))))}}class Ed extends y.a.PureComponent{render(){return y.a.createElement("span",this.props,y.a.createElement(W.c,{id:"generic_icons.close",defaultMessage:"Close Icon"},e=>y.a.createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 16 16",role:"icon","aria-label":e},y.a.createElement("path",{d:"m 8,0 c 4.424,0 8,3.576 8,8 0,4.424 -3.576,8 -8,8 C 3.576,16 0,12.424 0,8 0,3.576 3.576,0 8,0 Z M 10.872,4 8,6.872 5.128,4 4,5.128 6.872,8 4,10.872 5.128,12 8,9.128 10.872,12 12,10.872 9.128,8 12,5.128 Z"}))))}}a(1493);function _d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class vd extends y.a.Component{constructor(e){super(e),_d(this,"renderUserName",e=>{const t=Object(M.D)(e);let a=null;t.fullName&&(a=y.a.createElement("span",{className:"fullname"},t.fullName));let n=null;return t.nickname&&(n=y.a.createElement("span",{className:"nickname"},t.nickname)),y.a.createElement(y.a.Fragment,null,t.displayName,a,n)}),_d(this,"loadingMessage",()=>{let e="Loading";return this.context.intl&&(e=this.context.intl.formatMessage({id:this.props.loadingMessageId,defaultMessage:this.props.loadingMessageDefault})),y.a.createElement(_o.a,{text:e})}),_d(this,"getOptionValue",e=>e.id||e.value),_d(this,"formatOptionLabel",(e,t)=>{const a=Object(M.N)(e);let n=null;return!Object(ud.isEmail)(e.value)&&Object(M.W)(e)&&(n=y.a.createElement(za.a,null)),"menu"===t.context?e.value&&Object(ud.isEmail)(e.value)?this.getCreateLabel(e.value):y.a.createElement(y.a.Fragment,null,y.a.createElement(Ya.a,{size:"lg",username:e.username,url:a}),this.renderUserName(e),n):e.value&&Object(ud.isEmail)(e.value)?y.a.createElement(y.a.Fragment,null,y.a.createElement(bd,{className:"mail-icon"}),y.a.createElement("span",null,e.value)):y.a.createElement(y.a.Fragment,null,y.a.createElement(Ya.a,{size:"sm",username:e.username,url:a}),Object(M.v)(e),n)}),_d(this,"onChange",e=>{this.props.onChange&&this.props.onChange(e.map(e=>e.id?e:e.value))}),_d(this,"getCreateLabel",e=>y.a.createElement(y.a.Fragment,null,y.a.createElement(fd,{className:"mail-plus-icon"}),y.a.createElement(ji.b,{key:"widgets.users_emails_input.valid_email",id:this.props.validAddressMessageId,defaultMessage:this.props.validAddressMessageDefault,values:{email:e}}))),_d(this,"NoOptionsMessage",e=>{const t=e.selectProps.inputValue;return t?y.a.createElement("div",{className:"users-emails-input__option users-emails-input__option--no-matches"},y.a.createElement(ji.b,{id:this.props.noMatchMessageId,defaultMessage:this.props.noMatchMessageDefault,values:{text:t}},t=>y.a.createElement(gd.a.NoOptionsMessage,e,t))):null}),_d(this,"MultiValueRemove",({children:e,innerProps:t})=>y.a.createElement("div",t,e||y.a.createElement(Ed,null))),_d(this,"components",{NoOptionsMessage:this.NoOptionsMessage,MultiValueRemove:this.MultiValueRemove,IndicatorsContainer:()=>null}),_d(this,"handleInputChange",(e,t)=>{if("input-blur"===t.action){const e=this.props.value.map(e=>e.id?e:{label:e,value:e});for(const t of this.state.options){if(this.props.inputValue===t.username||this.props.inputValue==="@"+t.username)return this.onChange([...e,t]),void this.props.onInputChange("");if(this.props.inputValue===t.email)return this.onChange([...e,t]),void this.props.onInputChange("")}if(Object(ud.isEmail)(this.props.inputValue)){const t=this.props.inputValue;this.onChange([...e,{value:t,label:t}]),this.props.onInputChange("")}}"input-blur"!==t.action&&"menu-close"!==t.action&&this.props.onInputChange(e)}),_d(this,"optionsLoader",(e,t)=>{const a=e=>{this.setState({options:e}),t(e)},n=this.props.usersLoader(this.props.inputValue,a);n&&n.then&&n.then(a)}),_d(this,"showAddEmail",(e,t,a)=>0===a.length&&Object(ud.isEmail)(e)),_d(this,"onFocus",()=>{this.selectRef.current.handleInputChange(this.props.inputValue,{action:"custom"})}),this.selectRef=y.a.createRef(),this.state={options:[]}}render(){const e=this.props.value.map(e=>e.id?e:{label:e,value:e});return y.a.createElement(hd.a,{ref:this.selectRef,styles:this.customStyles,onChange:this.onChange,loadOptions:this.optionsLoader,isValidNewOption:this.showAddEmail,isMulti:!0,isClearable:!1,className:ps()("UsersEmailsInput",{empty:""===this.props.inputValue}),classNamePrefix:"users-emails-input",placeholder:this.props.placeholder,components:this.components,getOptionValue:this.getOptionValue,formatOptionLabel:this.formatOptionLabel,defaultOptions:!1,defaultMenuIsOpen:!1,openMenuOnClick:!1,loadingMessage:this.loadingMessage,onInputChange:this.handleInputChange,inputValue:this.props.inputValue,openMenuOnFocus:!0,onFocus:this.onFocus,tabSelectsValue:!0,value:e})}}_d(vd,"propTypes",{placeholder:_.a.string,usersLoader:_.a.func,onChange:_.a.func,value:_.a.arrayOf(_.a.oneOfType([_.a.object,_.a.string])),onInputChange:_.a.func,inputValue:_.a.string,noMatchMessageId:_.a.string,noMatchMessageDefault:_.a.string,validAddressMessageId:_.a.string,validAddressMessageDefault:_.a.string,loadingMessageId:_.a.string,loadingMessageDefault:_.a.string}),_d(vd,"contextTypes",{intl:W.i.isRequired}),_d(vd,"defaultProps",{noMatchMessageId:Object(le.b)("widgets.users_emails_input.no_user_found_matching"),noMatchMessageDefault:"No one found matching **{text}**, type email address",validAddressMessageId:Object(le.b)("widgets.users_emails_input.valid_email"),validAddressMessageDefault:"Add **{email}**",loadingMessageId:Object(le.b)("widgets.users_emails_input.loading"),loadingMessageDefault:"Loading"});class yd extends y.a.PureComponent{render(){return y.a.createElement("span",this.props,y.a.createElement(W.c,{id:"generic_icons.back",defaultMessage:"Back Icon"},e=>y.a.createElement("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",role:"icon","aria-label":e},y.a.createElement("path",{d:"M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z"}))))}}class Cd extends y.a.PureComponent{render(){return y.a.createElement("span",this.props,y.a.createElement(W.c,{id:"generic_icons.link",defaultMessage:"Link Icon"},e=>y.a.createElement("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",role:"icon","aria-label":e},y.a.createElement("path",{d:"M10.59,13.41C11,13.8 11,14.44 10.59,14.83C10.2,15.22 9.56,15.22 9.17,14.83C7.22,12.88 7.22,9.71 9.17,7.76V7.76L12.71,4.22C14.66,2.27 17.83,2.27 19.78,4.22C21.73,6.17 21.73,9.34 19.78,11.29L18.29,12.78C18.3,11.96 18.17,11.14 17.89,10.36L18.36,9.88C19.54,8.71 19.54,6.81 18.36,5.64C17.19,4.46 15.29,4.46 14.12,5.64L10.59,9.17C9.41,10.34 9.41,12.24 10.59,13.41M13.41,9.17C13.8,8.78 14.44,8.78 14.83,9.17C16.78,11.12 16.78,14.29 14.83,16.24V16.24L11.29,19.78C9.34,21.73 6.17,21.73 4.22,19.78C2.27,17.83 2.27,14.66 4.22,12.71L5.71,11.22C5.7,12.04 5.83,12.86 6.11,13.65L5.64,14.12C4.46,15.29 4.46,17.19 5.64,18.36C6.81,19.54 8.71,19.54 9.88,18.36L13.41,14.83C14.59,13.66 14.59,11.76 13.41,10.59C13,10.2 13,9.56 13.41,9.17Z"}))))}}a(1517);function wd(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Td extends y.a.Component{constructor(e){super(e),wd(this,"copyLink",()=>{const e=this.inviteLinkRef.current,t=document.createElement("textarea");t.innerText=e.value,t.style.position="fixed",t.style.opacity=0,document.body.appendChild(t),t.select();try{this.setState({copiedLink:document.execCommand("copy")})}catch(e){this.setState({copiedLink:!1})}t.remove(),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.setState({copiedLink:!1})},3e3)}),wd(this,"debouncedSearchProfiles",Object(di.debounce)((e,t)=>{this.props.searchProfiles(e).then(({data:a})=>{t(a),0===a.length?this.setState({termWithoutResults:e}):this.setState({termWithoutResults:null})}).catch(()=>{t([])})},150)),wd(this,"usersLoader",(e,t)=>{if(this.state.termWithoutResults&&e.startsWith(this.state.termWithoutResults))t([]);else try{this.debouncedSearchProfiles(e,t)}catch(e){t([])}}),wd(this,"onChange",e=>{this.setState({usersAndEmails:e}),this.props.onEdit(e.length>0||this.state.usersInputValue)}),wd(this,"onUsersInputChange",e=>{this.setState({usersInputValue:e}),this.props.onEdit(this.state.usersAndEmails.length>0||e)}),wd(this,"submit",()=>{const e=[],t=[];for(const a of this.state.usersAndEmails)Object(ud.isEmail)(a)?t.push(a):e.push(a);this.props.onSubmit(e,t,this.state.usersInputValue)}),this.inviteLinkRef=y.a.createRef(),this.timeout=null,this.state={usersAndEmails:[],copiedLink:!1,termWithoutResults:null,usersInputValue:""}}render(){const e=Object(Mn.e)()+"/signup_user_complete/?id="+this.props.inviteId;return y.a.createElement("div",{className:"InvitationModalMembersStep"},this.props.goBack&&y.a.createElement(yd,{className:"back",onClick:this.props.goBack}),y.a.createElement("div",{className:"modal-icon"},y.a.createElement(cd,null)),y.a.createElement("h1",null,y.a.createElement(ji.b,{id:"invitation_modal.members.title",defaultMessage:"Invite **Members**"})),y.a.createElement("div",{className:"share-link","data-testid":"shareLink"},y.a.createElement("h2",null,y.a.createElement(W.c,{id:"invitation_modal.members.share_link.title",defaultMessage:"Share This Link"})),y.a.createElement("div",{className:"share-link-input-block"},y.a.createElement("input",{ref:this.inviteLinkRef,className:"share-link-input",type:"text",readOnly:!0,value:e,"data-testid":"shareLinkInput"}),y.a.createElement("button",{className:"share-link-input-button",onClick:this.copyLink,"data-testid":"shareLinkInputButton"},y.a.createElement(Cd,null),!this.state.copiedLink&&y.a.createElement(W.c,{id:"invitation_modal.members.share_link.copy_button",defaultMessage:"Copy Link"}),this.state.copiedLink&&y.a.createElement(W.c,{id:"invitation_modal.members.share_link.link_copied",defaultMessage:"Link Copied"}))),y.a.createElement("div",{className:"help-text"},y.a.createElement(W.c,{id:"invitation_modal.members.share_link.description",defaultMessage:"Share this link to grant member access to this team."}))),y.a.createElement("div",{className:"invitation-modal-or"},y.a.createElement("hr",null),y.a.createElement("div",null,y.a.createElement(W.c,{id:"invitation_modal.members.or",defaultMessage:"OR"}))),y.a.createElement("div",{className:"search-and-add","data-testid":"searchAdd"},y.a.createElement("h2",null,y.a.createElement(W.c,{id:"invitation_modal.members.search_and_add.title",defaultMessage:"Invite People"})),y.a.createElement("div",{"data-testid":"inputPlaceholder"},y.a.createElement(W.c,{id:"invitation_modal.members.search-and-add.placeholder",defaultMessage:"Add members or email addresses"},e=>y.a.createElement(vd,{usersLoader:this.usersLoader,placeholder:e,onChange:this.onChange,value:this.state.usersAndEmails,validAddressMessageId:Object(le.b)("invitation_modal.members.users_emails_input.valid_email"),validAddressMessageDefault:"Invite **{email}** as a team member",noMatchMessageId:Object(le.b)("invitation_modal.members.users_emails_input.no_user_found_matching"),noMatchMessageDefault:"No one found matching **{text}**, type email to invite",onInputChange:this.onUsersInputChange,inputValue:this.state.usersInputValue}))),y.a.createElement("div",{className:"help-text"},y.a.createElement(W.c,{id:"invitation_modal.members.search-and-add.description",defaultMessage:"Search and add members from other teams or email invite new users."}))),y.a.createElement("div",{className:"invite-members"},y.a.createElement("button",{className:"btn "+(0===this.state.usersAndEmails.length?"btn-inactive":"btn-primary"),onClick:this.submit,disabled:0===this.state.usersAndEmails.length,id:"inviteMembersButton"},y.a.createElement(W.c,{id:"invitation_modal.members.invite_button",defaultMessage:"Invite Members"}))))}}wd(Td,"propTypes",{inviteId:_.a.string.isRequired,goBack:_.a.func,searchProfiles:_.a.func.isRequired,onEdit:_.a.func.isRequired,onSubmit:_.a.func.isRequired});class Od extends y.a.PureComponent{render(){return y.a.createElement("span",this.props,y.a.createElement(W.c,{id:"generic_icons.close",defaultMessage:"Close Icon"},e=>y.a.createElement("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",role:"icon","aria-label":e},y.a.createElement("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2C6.47,2 2,6.47 2,12C2,17.53 6.47,22 12,22C17.53,22 22,17.53 22,12C22,6.47 17.53,2 12,2M14.59,8L12,10.59L9.41,8L8,9.41L10.59,12L8,14.59L9.41,16L12,13.41L14.59,16L16,14.59L13.41,12L16,9.41L14.59,8Z"}))))}}var Sd=a(1211),Pd=a.n(Sd),Md=a(953),Nd=a(954);a(1518);function Id(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ad extends y.a.Component{constructor(e){super(e),Id(this,"getOptionValue",e=>e.id),Id(this,"handleInputChange",(e,t)=>{if("input-blur"===t.action)for(const e of this.state.options)if(this.props.inputValue===e.name)return this.onChange([...this.props.value,e]),void this.props.onInputChange("");"input-blur"!==t.action&&"menu-close"!==t.action&&this.props.onInputChange(e)}),Id(this,"optionsLoader",(e,t)=>{const a=e=>{this.setState({options:e}),t(e)},n=this.props.channelsLoader(this.props.inputValue,a);n&&n.then&&n.then(a)}),Id(this,"loadingMessage",()=>{let e="Loading";return this.context.intl&&(e=this.context.intl.formatMessage({id:this.props.loadingMessageId,defaultMessage:this.props.loadingMessageDefault})),y.a.createElement(_o.a,{text:e})}),Id(this,"NoOptionsMessage",e=>{const t=e.selectProps.inputValue;return t?y.a.createElement("div",{className:"channels-input__option channels-input__option--no-matches"},y.a.createElement(ji.b,{id:this.props.noOptionsMessageId,defaultMessage:this.props.noOptionsMessageDefault,values:{text:t}},t=>y.a.createElement(gd.a.NoOptionsMessage,e,t))):null}),Id(this,"formatOptionLabel",e=>{let t=y.a.createElement(Md.a,{className:"public-channel-icon"});return e.type===S.i.PRIVATE_CHANNEL&&(t=y.a.createElement(Nd.a,{className:"private-channel-icon"})),y.a.createElement(y.a.Fragment,null,t,e.display_name,y.a.createElement("span",{className:"channel-name"},e.name))}),Id(this,"onChange",e=>{this.props.onChange&&this.props.onChange(e)}),Id(this,"MultiValueRemove",({children:e,innerProps:t})=>y.a.createElement("div",t,e||y.a.createElement(Ed,null))),Id(this,"components",{NoOptionsMessage:this.NoOptionsMessage,MultiValueRemove:this.MultiValueRemove,IndicatorsContainer:()=>null}),Id(this,"onFocus",()=>{this.selectRef.current.handleInputChange(this.props.inputValue,{action:"custom"})}),this.selectRef=y.a.createRef(),this.state={options:[]}}render(){return y.a.createElement(Pd.a,{ref:this.selectRef,styles:this.customStyles,onChange:this.onChange,loadOptions:this.optionsLoader,isMulti:!0,isClearable:!1,className:ps()("ChannelsInput",{empty:""===this.props.inputValue}),classNamePrefix:"channels-input",placeholder:this.props.placeholder,components:this.components,getOptionValue:this.getOptionValue,formatOptionLabel:this.formatOptionLabel,noOptionsMessage:this.noOptionsMessage,loadingMessage:this.loadingMessage,defaultOptions:!1,defaultMenuIsOpen:!1,openMenuOnClick:!1,onInputChange:this.handleInputChange,inputValue:this.props.inputValue,openMenuOnFocus:!0,onFocus:this.onFocus,tabSelectsValue:!0,value:this.props.value})}}Id(Ad,"propTypes",{placeholder:_.a.string,channelsLoader:_.a.func,onChange:_.a.func,value:_.a.arrayOf(_.a.object),onInputChange:_.a.func,inputValue:_.a.string,loadingMessageId:_.a.string,loadingMessageDefault:_.a.string,noOptionsMessageId:_.a.string,noOptionsMessageDefault:_.a.string}),Id(Ad,"defaultProps",{loadingMessageId:Object(le.b)("widgets.channels_input.loading"),loadingMessageDefault:"Loading",noOptionsMessageId:Object(le.b)("widgets.channels_input.empty"),noOptionsMessageDefault:"No channels found"}),Id(Ad,"contextTypes",{intl:W.i.isRequired});a(1519);function jd(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Rd extends y.a.Component{constructor(e){super(e),jd(this,"onUsersEmailsChange",e=>{this.setState({usersAndEmails:e}),this.props.onEdit(e.length>0||this.state.channels.length>0||""!==this.state.customMessage||this.state.usersInputValue||this.state.channelsInputValue)}),jd(this,"onChannelsChange",e=>{this.setState({channels:e}),this.props.onEdit(this.state.usersAndEmails.length>0||e.length>0||""!==this.state.customMessage||this.state.usersInputValue||this.state.channelsInputValue)}),jd(this,"onMessageChange",e=>{this.setState({customMessage:e.target.value}),this.props.onEdit(this.state.usersAndEmails.length>0||this.state.channels.length>0||""!==e.target.value||this.state.usersInputValue||this.state.channelsInputValue)}),jd(this,"onUsersInputChange",e=>{this.setState({usersInputValue:e}),this.props.onEdit(this.state.usersAndEmails.length>0||this.state.channels.length>0||""!==this.state.customMessage||e||this.state.channelsInputValue)}),jd(this,"onChannelsInputChange",e=>{this.setState({channelsInputValue:e}),this.props.onEdit(this.state.usersAndEmails.length>0||this.state.channels.length>0||""!==this.state.customMessage||this.state.usersInputValue||e)}),jd(this,"debouncedSearchProfiles",Object(di.debounce)((e,t)=>{this.props.searchProfiles(e).then(({data:a})=>{t(a),0===a.length?this.setState({termWithoutResults:e}):this.setState({termWithoutResults:null})}).catch(()=>{t([])})},150)),jd(this,"usersLoader",(e,t)=>{if(this.state.termWithoutResults&&e.startsWith(this.state.termWithoutResults))t([]);else try{this.debouncedSearchProfiles(e,t)}catch(e){t([])}}),jd(this,"channelsLoader",async e=>e?this.props.myInvitableChannels.filter(t=>t.display_name.toLowerCase().startsWith(e.toLowerCase())||t.name.toLowerCase().startsWith(e.toLowerCase())):this.props.myInvitableChannels),jd(this,"openCustomMessage",()=>{this.setState({customMessageOpen:!0}),setTimeout(()=>{this.textareaRef.current&&this.textareaRef.current.focus()})}),jd(this,"closeCustomMessage",()=>{this.setState({customMessageOpen:!1})}),jd(this,"sendInvites",()=>{const e=[],t=[];for(const a of this.state.usersAndEmails)Object(ud.isEmail)(a)?t.push(a):e.push(a);this.props.onSubmit(e,t,this.state.channels,this.state.customMessageOpen?this.state.customMessage:"",this.state.usersInputValue,this.state.channelsInputValue)}),this.textareaRef=y.a.createRef(),this.state={customMessageOpen:Boolean(e.defaultMessage),customMessage:e.defaultMessage||"",usersAndEmails:[],channels:e.defaultChannels||[],usersInputValue:"",channelsInputValue:""}}render(){return y.a.createElement("div",{className:"InvitationModalGuestsStep"},this.props.goBack&&y.a.createElement(yd,{className:"back",id:"backIcon",onClick:this.props.goBack}),y.a.createElement("div",{className:"modal-icon"},y.a.createElement(cd,null)),y.a.createElement("h1",null,y.a.createElement(ji.b,{id:"invitation_modal.guests.title",defaultMessage:"Invite **Guests**"})),y.a.createElement("div",{className:"add-people","data-testid":"addPeople"},y.a.createElement("h2",null,y.a.createElement(W.c,{id:"invitation_modal.guests.add_people.title",defaultMessage:"Invite People"})),y.a.createElement("div",{"data-testid":"emailPlaceholder"},y.a.createElement(W.c,{id:"invitation_modal.guests.search-and-add.placeholder",defaultMessage:"Add guests or email addresses"},e=>y.a.createElement(vd,{usersLoader:this.usersLoader,placeholder:e,onChange:this.onUsersEmailsChange,value:this.state.usersAndEmails,onInputChange:this.onUsersInputChange,inputValue:this.state.usersInputValue,validAddressMessageId:Object(le.b)("invitation_modal.guests.users_emails_input.valid_email"),validAddressMessageDefault:"Invite **{email}** as a guest",noMatchMessageId:Object(le.b)("invitation_modal.guests.users_emails_input.no_user_found_matching"),noMatchMessageDefault:"No one found matching **{text}**, type email to invite"}))),y.a.createElement("div",{className:"help-text"},y.a.createElement(W.c,{id:"invitation_modal.guests.add_people.description",defaultMessage:"Search and add guests or email invite new users."}))),y.a.createElement("div",{className:"add-channels","data-testid":"channelPlaceholder"},y.a.createElement("h2",null,y.a.createElement(W.c,{id:"invitation_modal.guests.add_channels.title",defaultMessage:"Search and Add Channels"})),y.a.createElement("div",null,y.a.createElement(W.c,{id:"invitation_modal.guests.add_channels.placeholder",defaultMessage:"Search and add channels"},e=>y.a.createElement(Ad,{placeholder:e,channelsLoader:this.channelsLoader,onChange:this.onChannelsChange,onInputChange:this.onChannelsInputChange,inputValue:this.state.channelsInputValue,value:this.state.channels}))),y.a.createElement("div",{className:"help-text"},y.a.createElement(W.c,{id:"invitation_modal.guests.add-channels.description",defaultMessage:"Specify the channels the guests have access to."}))),y.a.createElement("div",{className:"custom-message","data-testid":"customMessage"},!this.state.customMessageOpen&&y.a.createElement("a",{onClick:this.openCustomMessage,href:"#"},y.a.createElement(W.c,{id:"invitation_modal.guests.custom-message.link",defaultMessage:"Set a custom message"})),this.state.customMessageOpen&&y.a.createElement(y.a.Fragment,null,y.a.createElement("div",null,y.a.createElement(W.c,{id:"invitation_modal.guests.custom-message.title",defaultMessage:"Custom message"}),y.a.createElement(Od,{onClick:this.closeCustomMessage})),y.a.createElement("textarea",{ref:this.textareaRef,onChange:this.onMessageChange,value:this.state.customMessage})),y.a.createElement("div",{className:"help-text"},y.a.createElement(W.c,{id:"invitation_modal.guests.custom-message.description",defaultMessage:"Create a custom message to make your invite more personal."}))),y.a.createElement("div",{className:"invite-guests"},y.a.createElement("button",{className:"btn "+(0===this.state.channels.length||0===this.state.usersAndEmails.length?"btn-inactive":"btn-primary"),disabled:0===this.state.channels.length||0===this.state.usersAndEmails.length,onClick:this.sendInvites,id:"inviteGuestButton"},y.a.createElement(W.c,{id:"invitation_modal.guests.invite_button",defaultMessage:"Invite Guests"}))))}}jd(Rd,"propTypes",{goBack:_.a.func,myInvitableChannels:_.a.array.isRequired,currentTeamId:_.a.string.isRequired,searchProfiles:_.a.func.isRequired,defaultChannels:_.a.array,defaultMessage:_.a.string,onEdit:_.a.func.isRequired,onSubmit:_.a.func.isRequired});class kd extends y.a.PureComponent{render(){return y.a.createElement("span",this.props,y.a.createElement(W.c,{id:"generic_icons.alert",defaultMessage:"Alert Icon"},e=>y.a.createElement("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",role:"icon","aria-label":e},y.a.createElement("path",{d:"M11,15H13V17H11V15M11,7H13V13H11V7M12,2C6.47,2 2,6.5 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20Z"}))))}}a(1520);class Ld extends y.a.Component{render(){const{invitation:e}=this.props;let t,a,n,s;if(e.user){n="name";const i=Object(M.N)(e.user);t=y.a.createElement(Ya.a,{username:e.user.username,url:i,size:"lg"}),a=Object(M.C)(e.user),Object(M.W)(e.user)&&(s=y.a.createElement(za.a,null))}else e.email?(n="email",t=y.a.createElement(bd,{className:"mail-icon"}),a=e.email):(n="name",t=y.a.createElement(kd,{className:"alert-icon"}),a=e.text);let i=e.reason;return e.reason&&e.reason.id&&(i=y.a.createElement(W.c,{id:e.reason.id,defaultMessage:e.reason.message,values:e.reason.values})),y.a.createElement("div",{className:"InvitationModalConfirmStepRow"},y.a.createElement("div",{className:"username-or-icon"},t,y.a.createElement("span",{className:n},a,s)),y.a.createElement("div",{className:"reason"},i))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Ld,"propTypes",{invitation:_.a.object.isRequired});a(1521);class xd extends y.a.Component{render(){return y.a.createElement("div",{className:"InvitationModalConfirmStepTable"},y.a.createElement("div",{className:"table-header"},y.a.createElement("div",{className:"people-header"},y.a.createElement(W.c,{id:"invitation-modal.confirm.people-header",defaultMessage:"People"})),y.a.createElement("div",{className:"details-header"},y.a.createElement(W.c,{id:"invitation-modal.confirm.details-header",defaultMessage:"Details"}))),y.a.createElement("div",{className:"rows"},this.props.invites.map(e=>y.a.createElement(Ld,{key:e.text||e.email||e.user.id,invitation:e}))))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(xd,"propTypes",{invites:_.a.arrayOf(_.a.object).isRequired});a(1522);function Dd(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ud extends y.a.Component{constructor(...e){super(...e),Dd(this,"getInvitesCountsMessage",(e,t)=>e>0&&t>0?y.a.createElement(ji.b,{id:"invitation_modal.confirm.members_subtitle",defaultMessage:"**{sentCount, number} {sentCount, plural, one {person} other {people}}** {sentCount, plural, one {has} other {have}} been invited, and **{notSentCount, number} {notSentCount, plural, one {invitation} other {invitations}}** {notSentCount, plural, one {was} other {were}} not sent",values:{sentCount:e,notSentCount:t}}):e>0&&0===t?y.a.createElement(ji.b,{id:"invitation_modal.confirm.members_subtitle_without_not_sent",defaultMessage:"**{sentCount, number} {sentCount, plural, one {person} other {people}}** {sentCount, plural, one {has} other {have}} been invited",values:{sentCount:e}}):0===e&&t>0?y.a.createElement(ji.b,{id:"invitation_modal.confirm.members_subtitle_without_sent",defaultMessage:"**{notSentCount, number} {notSentCount, plural, one {invitation} other {invitations}}** {notSentCount, plural, one {was} other {were}} not sent",values:{notSentCount:t}}):y.a.createElement(ji.b,{id:"invitation_modal.confirm.members_subtitle_without_sent_and_not_sent",defaultMessage:"No invitation sent"}))}render(){const{teamName:e,invitesType:t,invitesSent:a,invitesNotSent:n,onDone:s}=this.props;return y.a.createElement("div",{className:"InvitationModalConfirmStep"},this.props.goBack&&y.a.createElement(yd,{className:"back",onClick:this.props.goBack}),y.a.createElement("div",{className:"modal-icon"},y.a.createElement(cd,null)),t===S.o.INVITE_MEMBER&&y.a.createElement("h1",null,y.a.createElement(ji.b,{id:"invitation_modal.confirm.members_title",defaultMessage:"**Members** Invited to **{teamName}**",values:{teamName:e}})),t===S.o.INVITE_GUEST&&y.a.createElement("h1",null,y.a.createElement(ji.b,{id:"invitation_modal.confirm.guests_title",defaultMessage:"**Guests** Invited to **{teamName}**",values:{teamName:e}})),y.a.createElement("h2",{className:"subtitle"},this.getInvitesCountsMessage(a.length,n.length)),a.length>0&&y.a.createElement("div",{className:"invitation-modal-confirm-sent"},y.a.createElement("h2",null,y.a.createElement(W.c,{id:"invitation_modal.confirm.sent-header",defaultMessage:"Successful Invites"})),y.a.createElement(xd,{invites:a})),n.length>0&&y.a.createElement("div",{className:"invitation-modal-confirm-not-sent"},y.a.createElement("h2",null,y.a.createElement(W.c,{id:"invitation_modal.confirm.not-sent-header",defaultMessage:"Invitations Not Sent"})),y.a.createElement(xd,{invites:n})),y.a.createElement("div",{className:"confirm-done"},y.a.createElement("button",{className:"btn btn-primary",onClick:s},y.a.createElement(W.c,{id:"invitation_modal.confirm.done",defaultMessage:"Done"}))))}}Dd(Ud,"propTypes",{teamName:_.a.string.isRequired,goBack:_.a.func.isRequired,onDone:_.a.func.isRequired,invitesType:_.a.oneOf([S.o.INVITE_MEMBER,S.o.INVITE_GUEST]).isRequired,invitesSent:_.a.array.isRequired,invitesNotSent:_.a.array.isRequired});a(1523);function qd(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Hd="initial",Fd="members",Bd="guests",Gd="confirm";class Vd extends y.a.Component{constructor(e){super(e),qd(this,"goToInitialStep",()=>{this.state.hasChanges?this.setState({confirmBack:!0}):this.setState({step:Hd,hasChanges:!1,lastInviteChannels:[],lastInviteMesssage:"",prevStep:this.state.step})}),qd(this,"goToMembers",()=>{this.setState({step:Fd,prevStep:this.state.step,hasChanges:!1,invitesSent:[],invitesNotSent:[],invitesType:S.o.INVITE_MEMBER})}),qd(this,"goToGuests",()=>{this.setState({step:Bd,prevStep:this.state.step,hasChanges:!1,invitesSent:[],invitesNotSent:[],invitesType:S.o.INVITE_GUEST})}),qd(this,"goToPrevStep",()=>{this.state.prevStep===Bd?this.setState({step:Bd,prevStep:this.state.step,hasChanges:!1,invitesSent:[],invitesNotSent:[],invitesType:S.o.INVITE_GUEST}):this.state.prevStep===Fd&&this.setState({step:Fd,prevStep:this.state.step,hasChanges:!1,invitesSent:[],invitesNotSent:[],invitesType:S.o.INVITE_MEMBER})}),qd(this,"onEdit",e=>{this.setState({hasChanges:e})}),qd(this,"close",()=>{this.state.hasChanges?this.setState({confirmModal:!0}):this.props.actions.closeModal()}),qd(this,"confirmBack",()=>{this.setState({step:Hd,hasChanges:!1,confirmBack:!1})}),qd(this,"cancelBack",()=>{this.setState({confirmBack:!1})}),qd(this,"confirmClose",()=>{this.props.actions.closeModal(),this.setState({confirmModal:!1})}),qd(this,"cancelClose",()=>{this.setState({confirmModal:!1})}),qd(this,"onMembersSubmit",async(e,t,a)=>{const n=await this.props.actions.sendMembersInvites(this.props.currentTeam.id,e,t);""!==a&&n.notSent.push({text:a,reason:y.a.createElement(W.c,{id:"invitation-modal.confirm.not-valid-user-or-email",defaultMessage:"Does not match a valid user or email."})}),this.setState({step:Gd,prevStep:this.state.step,invitesSent:n.sent,invitesNotSent:n.notSent,invitesType:S.o.INVITE_MEMBER,hasChanges:!1})}),qd(this,"onGuestsSubmit",async(e,t,a,n,s,i)=>{const o=await this.props.actions.sendGuestsInvites(this.props.currentTeam.id,a.map(e=>e.id),e,t,n);""!==s&&o.notSent.push({text:s,reason:y.a.createElement(W.c,{id:"invitation-modal.confirm.not-valid-user-or-email",defaultMessage:"Does not match a valid user or email."})}),""!==i&&o.notSent.push({text:i,reason:y.a.createElement(W.c,{id:"invitation-modal.confirm.not-valid-channel",defaultMessage:"Does not match a valid channel name."})}),this.setState({step:Gd,prevStep:this.state.step,lastInviteChannels:a,lastInviteMessage:n,invitesSent:o.sent,invitesNotSent:o.notSent,invitesType:S.o.INVITE_GUEST,hasChanges:!1})});let t=Hd;e.canInviteGuests||(t=Fd),e.canAddUsers||(t=Bd),this.state={step:t,prevStep:null,lastInviteChannels:[],lastInviteMessage:"",confirmModal:!1,confirmBack:!1,hasChanges:!1,invitesType:S.o.INVITE_MEMBER,invitesSent:[],invitesNotSent:[]}}render(){return y.a.createElement(ld,null,y.a.createElement(rd,{show:Boolean(this.props.show),onClose:this.close},y.a.createElement("div",{"data-testid":"invitationModal",className:"InvitationModal"},y.a.createElement(Yn.a,{show:this.state.confirmModal||this.state.confirmBack,title:y.a.createElement(W.c,{id:"invitation-modal.discard-changes.title",defaultMessage:"Discard Changes"}),message:y.a.createElement(W.c,{id:"invitation-modal.discard-changes.message",defaultMessage:"You have unsent invitations, are you sure you want to discard them?"}),confirmButtonText:y.a.createElement(W.c,{id:"invitation-modal.discard-changes.button",defaultMessage:"Yes, Discard"}),modalClass:"invitation-modal-confirm",onConfirm:this.state.confirmModal?this.confirmClose:this.confirmBack,onCancel:this.state.confirmModal?this.cancelClose:this.cancelBack}),this.state.step===Hd&&y.a.createElement(md,{teamName:this.props.currentTeam.display_name,goToMembers:this.goToMembers,goToGuests:this.goToGuests}),this.state.step===Fd&&y.a.createElement(Td,{inviteId:this.props.currentTeam.invite_id,goBack:this.props.canInviteGuests&&this.props.canAddUsers&&this.goToInitialStep||null,searchProfiles:this.props.actions.searchProfiles,onSubmit:this.onMembersSubmit,onEdit:this.onEdit}),this.state.step===Bd&&y.a.createElement(Rd,{goBack:this.props.canInviteGuests&&this.props.canAddUsers&&this.goToInitialStep||null,currentTeamId:this.props.currentTeam.id,myInvitableChannels:this.props.invitableChannels,searchProfiles:this.props.actions.searchProfiles,defaultChannels:this.state.lastInviteChannels,defaultMessage:this.state.lastInviteMessage,onSubmit:this.onGuestsSubmit,onEdit:this.onEdit}),this.state.step===Gd&&y.a.createElement(Ud,{teamName:this.props.currentTeam.display_name,currentTeamId:this.props.currentTeam.id,goBack:this.goToPrevStep,onDone:this.close,invitesType:this.state.invitesType,invitesSent:this.state.invitesSent,invitesNotSent:this.state.invitesNotSent}))))}}qd(Vd,"propTypes",{show:_.a.bool,currentTeam:_.a.object.isRequired,invitableChannels:_.a.array.isRequired,canInviteGuests:_.a.bool.isRequired,canAddUsers:_.a.bool.isRequired,actions:_.a.shape({closeModal:_.a.func.isRequired,sendGuestsInvites:_.a.func.isRequired,sendMembersInvites:_.a.func.isRequired,searchProfiles:_.a.func.isRequired}).isRequired}),qd(Vd,"contextTypes",{intl:W.i.isRequired});const Wd=(e,t={})=>e?Object(o.searchProfiles)(e,t):Object(o.getProfiles)(0,20,t);var zd=Object(n.connect)(function(e){const t=Object(d.getConfig)(e),a=Object(d.getLicense)(e),n=Object(p.getMyChannels)(e),s=Object(u.getCurrentTeam)(e),i=n.filter(t=>t.type!==S.i.DM_CHANNEL&&t.type!==S.i.GM_CHANNEL&&(t.type===S.i.PRIVATE_CHANNEL?Object(D.haveIChannelPermission)(e,{channel:t.id,team:s.id,permission:x.Permissions.MANAGE_PRIVATE_CHANNEL_MEMBERS}):Object(D.haveIChannelPermission)(e,{channel:t.id,team:s.id,permission:x.Permissions.MANAGE_PUBLIC_CHANNEL_MEMBERS}))),o="true"===t.EnableGuestAccounts,r=a&&"true"===a.IsLicensed&&o&&Object(D.haveITeamPermission)(e,{team:s.id,permission:x.Permissions.INVITE_GUEST}),l=Object(D.haveITeamPermission)(e,{team:s.id,permission:x.Permissions.ADD_USER_TO_TEAM});return{invitableChannels:i,currentTeam:s,canInviteGuests:r,canAddUsers:l,show:Object(td.a)(e,S.s.INVITATION)}},function(e){return{actions:Object(s.bindActionCreators)({closeModal:()=>Object(U.a)(S.s.INVITATION),sendGuestsInvites:nd,sendMembersInvites:ad,searchProfiles:Wd},e)}})(Vd),Yd=a(981),Kd=a(968);class Qd extends y.a.PureComponent{render(){return y.a.createElement("span",this.props,y.a.createElement(W.c,{id:"navbar_dropdown.leave.icon",defaultMessage:"Leave Team Icon"},e=>y.a.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 164 164",style:Zd,role:"icon","aria-label":e},y.a.createElement("path",{d:"M26.023,164L26.023,7.035L26.022,0.32L137.658,0.32L137.658,164L124.228,164L124.228, 13.749L39.452,13.749L39.452,164L26.023, 164ZM118.876,164L118.876,18.619L58.137,32.918L58.137,149.701L118.876,164Z"}))))}}const Zd={fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:1.41421};function Jd(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Xd extends y.a.PureComponent{constructor(...e){super(...e),Jd(this,"handleKeyPress",e=>{Object(M.X)(e,S.Q.KeyCodes.ENTER)&&this.handleSubmit(e)}),Jd(this,"handleSubmit",()=>{this.props.onHide(),this.props.actions.leaveTeam(this.props.currentTeamId,this.props.currentUserId),this.props.actions.toggleSideBarRightMenu()})}componentDidMount(){this.props.show&&document.addEventListener("keypress",this.handleKeyPress)}componentWillUnmount(){document.removeEventListener("keypress",this.handleKeyPress)}render(){return y.a.createElement(V.a,{dialogClassName:"a11y__modal",className:"modal-confirm",show:this.props.show,onHide:this.props.onHide,id:"leaveTeamModal",role:"dialog","aria-labelledby":"leaveTeamModalLabel"},y.a.createElement(V.a.Header,{closeButton:!1},y.a.createElement(V.a.Title,{componentClass:"h1",id:"leaveTeamModalLabel"},y.a.createElement(W.c,{id:"leave_team_modal.title",defaultMessage:"Leave the team?"}))),y.a.createElement(V.a.Body,null,y.a.createElement(W.c,{id:"leave_team_modal.desc",defaultMessage:"You will be removed from all public and private channels.  If the team is private you will not be able to rejoin the team.  Are you sure?"})),y.a.createElement(V.a.Footer,null,y.a.createElement("button",{type:"button",className:"btn btn-link",onClick:this.props.onHide,id:"leaveTeamNo"},y.a.createElement(W.c,{id:"leave_team_modal.no",defaultMessage:"No"})),y.a.createElement("button",{type:"button",className:"btn btn-danger",onClick:this.handleSubmit,id:"leaveTeamYes"},y.a.createElement(W.c,{id:"leave_team_modal.yes",defaultMessage:"Yes"}))))}}Jd(Xd,"propTypes",{currentUserId:_.a.string.isRequired,currentTeamId:_.a.string.isRequired,onHide:_.a.func.isRequired,show:_.a.bool.isRequired,intl:W.i.isRequired,actions:_.a.shape({leaveTeam:_.a.func.isRequired,toggleSideBarRightMenu:_.a.func.isRequired})});var $d=Object(W.h)(Xd);var em=Object(n.connect)(function(e){const t=S.s.LEAVE_TEAM;return{currentUserId:Object(m.getCurrentUserId)(e),currentTeamId:Object(u.getCurrentTeamId)(e),show:Object(td.a)(e,t)}},function(e){return{actions:Object(s.bindActionCreators)({leaveTeam:l.removeUserFromTeam,toggleSideBarRightMenu:O.n},e)}})($d),tm=a(964),am=a(1293);function nm(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class sm extends y.a.Component{constructor(e){super(e),nm(this,"handleTermChange",e=>{this.setState({term:e})}),nm(this,"nextPage",()=>{this.setState({page:this.state.page+1}),this.props.nextPage(this.state.page+1)}),nm(this,"previousPage",()=>{this.setState({page:this.state.page-1})}),nm(this,"search",e=>{this.props.search(e),""!==e&&this.setState({page:0})}),this.state={term:"",page:0}}render(){return y.a.createElement(am.a,Object.assign({},this.props,{nextPage:this.nextPage,previousPage:this.previousPage,search:this.search,page:this.state.page,term:this.state.term,onTermChange:this.handleTermChange}))}}nm(sm,"propTypes",{users:_.a.arrayOf(_.a.object),usersPerPage:_.a.number,total:_.a.number,extraInfo:_.a.object,nextPage:_.a.func.isRequired,search:_.a.func.isRequired,actions:_.a.arrayOf(_.a.func),actionProps:_.a.object,actionUserProps:_.a.object,focusOnMount:_.a.bool});class im extends y.a.PureComponent{render(){return y.a.createElement(W.c,{id:"generic_icons.dropdown",defaultMessage:"Dropdown Icon"},e=>y.a.createElement("i",{className:"fa fa-angle-down",title:e}))}}function om(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const rm=3;class lm extends y.a.Component{constructor(e){super(e),om(this,"handleMakeMember",async()=>{const e=this.props.currentUser;if(this.props.user.id===e.id&&e.roles.includes("system_admin"))this.handleDemote(this.props.user,"team_user");else{const{error:t}=await this.props.actions.updateTeamMemberSchemeRoles(this.props.teamMember.team_id,this.props.user.id,!0,!1);t?this.setState({serverError:t.message}):(this.props.actions.getUser(this.props.user.id),this.props.actions.getTeamMember(this.props.teamMember.team_id,this.props.user.id),this.props.user.id===e.id&&(await this.props.actions.getMyTeamMembers(),this.props.actions.getMyTeamUnreads()))}}),om(this,"handleRemoveFromTeam",async()=>{const{error:e}=await this.props.actions.removeUserFromTeamAndGetStats(this.props.teamMember.team_id,this.props.user.id);e&&this.setState({serverError:e.message})}),om(this,"handleMakeAdmin",async()=>{const e=this.props.currentUser;if(this.props.user.id===e.id&&e.roles.includes("system_admin"))this.handleDemote(this.props.user,"team_user team_admin");else{const{error:e}=await this.props.actions.updateTeamMemberSchemeRoles(this.props.teamMember.team_id,this.props.user.id,!0,!0);e?this.setState({serverError:e.message}):(this.props.actions.getUser(this.props.user.id),this.props.actions.getTeamMember(this.props.teamMember.team_id,this.props.user.id))}}),om(this,"handleDemote",(e,t,a)=>{this.setState({serverError:this.state.serverError,showDemoteModal:!0,user:e,role:t,newRole:a})}),om(this,"handleDemoteCancel",()=>{this.setState({serverError:null,showDemoteModal:!1,user:null,role:null,newRole:null})}),om(this,"handleDemoteSubmit",async()=>{const{error:e}=await this.props.actions.updateTeamMemberSchemeRoles(this.props.teamMember.team_id,this.props.user.id,!0,!1);e?this.setState({serverError:e.message}):(this.props.actions.getUser(this.props.user.id),z.a.push(this.props.teamUrl))}),this.state={serverError:null,showDemoteModal:!1,user:null,role:null}}render(){let e=null;this.state.serverError&&(e=y.a.createElement("div",{className:"has-error"},y.a.createElement("label",{className:"has-error control-label"},this.state.serverError)));const{currentTeam:t,teamMember:a,user:n}=this.props;let s=null;s=M.W(n)?y.a.createElement(W.c,{id:"team_members_dropdown.guest",defaultMessage:"Guest"}):n.roles.length>0&&M.bb(n.roles)?y.a.createElement(W.c,{id:"team_members_dropdown.systemAdmin",defaultMessage:"System Admin"}):a.roles.length>0&&M.P(a.roles)||a.scheme_admin?y.a.createElement(W.c,{id:"team_members_dropdown.teamAdmin",defaultMessage:"Team Admin"}):y.a.createElement(W.c,{id:"team_members_dropdown.member",defaultMessage:"Member"});const i=this.props.currentUser;let o=!M.W(n)&&(M.P(a.roles)||a.scheme_admin)&&!M.bb(n.roles),r=!(M.W(n)||M.P(a.roles)||M.bb(n.roles)||a.scheme_admin);n.delete_at>0&&(s=y.a.createElement(W.c,{id:"team_members_dropdown.inactive",defaultMessage:"Inactive"}),o=!1,r=!1);const l=n.id!==i.id&&!t.group_constrained;let c=null;if(n.id===i.id){const t=y.a.createElement(W.c,{id:"team_members_dropdown.confirmDemoteRoleTitle",defaultMessage:"Confirm demotion from System Admin role"}),a=y.a.createElement("div",null,y.a.createElement(W.c,{id:"team_members_dropdown.confirmDemoteDescription",defaultMessage:"If you demote yourself from the System Admin role and there is not another user with System Admin privileges, you'll need to re-assign a System Admin by accessing the Vue server through a terminal and running the following command."}),y.a.createElement("br",null),y.a.createElement("br",null),y.a.createElement(W.c,{id:"team_members_dropdown.confirmDemotionCmd",defaultMessage:"platform roles system_admin {username}",vallues:{username:i.username}}),e),n=y.a.createElement(W.c,{id:"team_members_dropdown.confirmDemotion",defaultMessage:"Confirm Demotion"});c=y.a.createElement(Yn.a,{show:this.state.showDemoteModal,title:t,message:a,confirmButtonText:n,onConfirm:this.handleDemoteSubmit,onCancel:this.handleDemoteCancel})}if(!l&&!r&&!o)return y.a.createElement("div",null,s);const{index:d,totalUsers:m}=this.props;let u=!1;return m>rm&&m-d<=rm&&(u=!0),y.a.createElement(fi.a,null,y.a.createElement("button",{id:"teamMembersDropdown_".concat(n.username),className:"dropdown-toggle theme color--link style--none",type:"button","aria-expanded":"true"},y.a.createElement("span",null,s," "),y.a.createElement(im,null)),y.a.createElement("div",null,y.a.createElement(Ei.a,{openLeft:!0,openUp:u,ariaLabel:M.fb("team_members_dropdown.menuAriaLabel","Team member role change")},y.a.createElement(Ei.a.ItemAction,{id:"removeFromTeam",show:l,onClick:this.handleRemoveFromTeam,text:M.fb("team_members_dropdown.leave_team","Remove From Team")}),y.a.createElement(Ei.a.ItemAction,{show:r,onClick:this.handleMakeAdmin,text:M.fb("team_members_dropdown.makeAdmin","Make Team Admin")}),y.a.createElement(Ei.a.ItemAction,{show:o,onClick:this.handleMakeMember,text:M.fb("team_members_dropdown.makeMember","Make Member")})),c,e))}}om(lm,"propTypes",{user:_.a.object.isRequired,currentUser:_.a.object.isRequired,teamMember:_.a.object.isRequired,teamUrl:_.a.string.isRequired,currentTeam:_.a.object.isRequired,index:_.a.number.isRequired,totalUsers:_.a.number.isRequired,actions:_.a.shape({getMyTeamMembers:_.a.func.isRequired,getMyTeamUnreads:_.a.func.isRequired,getUser:_.a.func.isRequired,getTeamMember:_.a.func.isRequired,getTeamStats:_.a.func.isRequired,getChannelStats:_.a.func.isRequired,updateTeamMemberSchemeRoles:_.a.func.isRequired,removeUserFromTeamAndGetStats:_.a.func.isRequired,updateUserActive:_.a.func.isRequired}).isRequired});var cm=Object(n.connect)(function(e){return{currentUser:Object(m.getCurrentUser)(e),currentChannelId:Object(p.getCurrentChannelId)(e),teamUrl:Object(u.getCurrentRelativeTeamUrl)(e),currentTeam:Object(u.getCurrentTeam)(e)}},function(e){return{actions:Object(s.bindActionCreators)({getMyTeamMembers:l.getMyTeamMembers,getMyTeamUnreads:l.getMyTeamUnreads,getUser:o.getUser,getTeamMember:l.getTeamMember,getTeamStats:l.getTeamStats,getChannelStats:r.getChannelStats,updateUserActive:o.updateUserActive,updateTeamMemberSchemeRoles:l.updateTeamMemberSchemeRoles,removeUserFromTeamAndGetStats:b.d},e)}})(lm);function dm(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const mm=50;class um extends y.a.Component{constructor(e){super(e),dm(this,"loadComplete",()=>{this.setState({loading:!1})}),dm(this,"nextPage",e=>{this.props.actions.loadProfilesAndTeamMembers(e+1,mm)}),dm(this,"search",e=>{this.props.actions.setModalSearchTerm(e)}),this.searchTimeoutId=0,this.state={loading:!0}}componentDidMount(){this.props.actions.loadProfilesAndTeamMembers(0,S.Q.PROFILE_CHUNK_SIZE,this.props.currentTeamId).then(({data:e})=>{e&&this.loadComplete()}),this.props.actions.getTeamStats(this.props.currentTeamId)}componentWillUnmount(){this.props.actions.setModalSearchTerm("")}UNSAFE_componentWillReceiveProps(e){if(this.props.searchTerm!==e.searchTerm){clearTimeout(this.searchTimeoutId);const t=e.searchTerm;if(""===t)return this.loadComplete(),void(this.searchTimeoutId="");const a=setTimeout(async()=>{const{loadStatusesForProfilesList:n,loadTeamMembersForProfilesList:s,searchProfiles:i}=e.actions,{data:o}=await i(t,{team_id:e.currentTeamId});a===this.searchTimeoutId&&(this.setState({loading:!0}),n(o),s(o,e.currentTeamId).then(({data:e})=>{e&&this.loadComplete()}))},S.Q.SEARCH_TIMEOUT_MILLISECONDS);this.searchTimeoutId=a}}render(){let e=null;this.props.canManageTeamMembers&&(e=[cm]);const t=this.props.teamMembers,a=this.props.users,n={};let s;if(this.state.loading)s=null;else{s=[];for(let e=0;e<a.length;e++){const i=a[e];t[i.id]&&0===i.delete_at&&(s.push(i),n[i.id]={teamMember:t[i.id]})}}return y.a.createElement(sm,{users:s,usersPerPage:mm,total:this.props.totalTeamMembers,nextPage:this.nextPage,search:this.search,actions:e,actionUserProps:n,focusOnMount:!P.m()})}}dm(um,"propTypes",{searchTerm:_.a.string.isRequired,users:_.a.arrayOf(_.a.object).isRequired,teamMembers:_.a.object.isRequired,currentTeamId:_.a.string.isRequired,totalTeamMembers:_.a.number.isRequired,canManageTeamMembers:_.a.bool,actions:_.a.shape({searchProfiles:_.a.func.isRequired,getTeamStats:_.a.func.isRequired,loadProfilesAndTeamMembers:_.a.func.isRequired,loadStatusesForProfilesList:_.a.func.isRequired,loadTeamMembersForProfilesList:_.a.func.isRequired,setModalSearchTerm:_.a.func.isRequired}).isRequired});var pm=Object(n.connect)(function(e,t){const a=Object(D.haveITeamPermission)(e,{team:t.teamId,permission:x.Permissions.MANAGE_TEAM_ROLES}),n=e.views.search.modalSearch;let s;s=n?Object(m.searchProfilesInCurrentTeam)(e,n):Object(m.getProfilesInCurrentTeam)(e);const i=Object(u.getCurrentTeamStats)(e)||{active_member_count:0};return{searchTerm:n,users:s,teamMembers:Object(u.getMembersInCurrentTeam)(e)||{},currentTeamId:e.entities.teams.currentTeamId,totalTeamMembers:i.active_member_count,canManageTeamMembers:a}},function(e){return{actions:Object(s.bindActionCreators)({searchProfiles:o.searchProfiles,getTeamStats:l.getTeamStats,loadProfilesAndTeamMembers:$n.g,loadStatusesForProfilesList:h.b,loadTeamMembersForProfilesList:$n.m,setModalSearchTerm:tm.a},e)}})(um);function hm(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class gm extends y.a.PureComponent{constructor(...e){super(...e),hm(this,"onHide",()=>{this.props.onHide()})}componentDidMount(){this.props.onLoad&&this.props.onLoad()}render(){let e="";return this.props.currentTeam&&(e=this.props.currentTeam.display_name),y.a.createElement(V.a,{dialogClassName:"a11y__modal more-modal",show:this.props.show,onHide:this.onHide,onExited:this.props.onHide,role:"dialog","aria-labelledby":"teamMemberModalLabel"},y.a.createElement(V.a.Header,{closeButton:!0},y.a.createElement(V.a.Title,{componentClass:"h1",id:"teamMemberModalLabel"},y.a.createElement(W.c,{id:"team_member_modal.members",defaultMessage:"{team} Members",values:{team:e}}))),y.a.createElement(V.a.Body,null,y.a.createElement(pm,{teamId:this.props.currentTeam.id})))}}hm(gm,"propTypes",{show:_.a.bool.isRequired,currentTeam:_.a.object.isRequired,onHide:_.a.func.isRequired,onLoad:_.a.func});var bm=Object(n.connect)(function(e){const t=S.s.TEAM_MEMBERS;return{currentTeam:Object(u.getCurrentTeam)(e),show:Object(td.a)(e,t)}})(gm),fm=a(1176),Em=a.n(fm),_m=a(914),vm=a(926),ym=a(1221),Cm=a(1008);function wm(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Tm(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?wm(a,!0).forEach(function(t){Om(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):wm(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Om(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Sm=["image/jpeg","image/png","image/bmp"];class Pm extends y.a.Component{constructor(e){super(e),Om(this,"updateSection",e=>{ys()(".section-max").length&&ys()(".settings-modal .modal-body").scrollTop(0).perfectScrollbar("update"),this.setState(this.setupInitialState(this.props)),this.props.updateSection(e)}),Om(this,"handleOpenInviteRadio",e=>{this.setState({allow_open_invite:e})}),Om(this,"handleAllowedDomainsSubmit",async()=>{var e={serverError:"",clientError:""},t=Tm({},this.props.team);t.allowed_domains=this.state.allowed_domains;const{error:a}=await this.props.actions.patchTeam(t);a?(e.serverError=a.message,this.setState(e)):this.updateSection("")}),Om(this,"handleOpenInviteSubmit",async()=>{var e={serverError:"",clientError:""},t=Tm({},this.props.team);t.allow_open_invite=this.state.allow_open_invite;const{error:a}=await this.props.actions.patchTeam(t);a?(e.serverError=a.message,this.setState(e)):this.updateSection("")}),Om(this,"handleNameSubmit",async()=>{var e={serverError:"",clientError:""};let t=!0;const a=this.state.name.trim();if(a?a.length<S.Q.MIN_TEAMNAME_LENGTH?(e.clientError=y.a.createElement(W.c,{id:"general_tab.teamNameRestrictions",defaultMessage:"Team Name must be {min} or more characters up to a maximum of {max}. You can add a longer team description.",values:{min:S.Q.MIN_TEAMNAME_LENGTH,max:S.Q.MAX_TEAMNAME_LENGTH}}),t=!1):e.clientError="":(e.clientError=M.fb("general_tab.required","This field is required"),t=!1),this.setState(e),!t)return;var n=Tm({},this.props.team);n.display_name=this.state.name;const{error:s}=await this.props.actions.patchTeam(n);s?(e.serverError=s.message,this.setState(e)):this.updateSection("")}),Om(this,"handleInviteIdSubmit",async()=>{const e={serverError:"",clientError:""};this.setState(e);const{error:t}=await this.props.actions.regenerateTeamInviteId(this.props.team.id);t?(e.serverError=t.message,this.setState(e)):this.updateSection("")}),Om(this,"handleClose",()=>{this.updateSection("")}),Om(this,"handleDescriptionSubmit",async()=>{var e={serverError:"",clientError:""};let t=!0;if(this.state.description.trim()===this.props.team.description?(e.clientError=M.fb("general_tab.chooseDescription","Please choose a new description for your team"),t=!1):e.clientError="",this.setState(e),!t)return;var a=Tm({},this.props.team);a.description=this.state.description;const{error:n}=await this.props.actions.patchTeam(a);n?(e.serverError=n.message,this.setState(e)):this.updateSection("")}),Om(this,"handleTeamIconSubmit",async()=>{if(!this.state.teamIconFile)return;if(!this.state.submitActive)return;this.setState({loadingIcon:!0,clientError:"",serverError:""});const{error:e}=await this.props.actions.setTeamIcon(this.props.team.id,this.state.teamIconFile);e?this.setState({loadingIcon:!1,serverError:e.message}):(this.setState({loadingIcon:!1,submitActive:!1}),this.updateSection(""))}),Om(this,"handleTeamIconRemove",async()=>{this.setState({loadingIcon:!0,clientError:"",serverError:""});const{error:e}=await this.props.actions.removeTeamIcon(this.props.team.id);e?this.setState({loadingIcon:!1,serverError:e.message}):(this.setState({loadingIcon:!1,submitActive:!1}),this.updateSection(""))}),Om(this,"handleUpdateSection",e=>{this.updateSection(e)}),Om(this,"updateName",e=>{this.setState({name:e.target.value})}),Om(this,"updateDescription",e=>{this.setState({description:e.target.value})}),Om(this,"updateTeamIcon",e=>{if(e&&e.target&&e.target.files&&e.target.files[0]){const t=e.target.files[0];Sm.includes(t.type)?t.size>this.props.maxFileSize?this.setState({clientError:M.fb("general_tab.teamIconTooLarge","Unable to upload team icon. File is too large.")}):this.setState({teamIconFile:e.target.files[0],clientError:"",submitActive:!0}):this.setState({clientError:M.fb("general_tab.teamIconInvalidFileType","Only BMP, JPG or PNG images may be used for team icons")})}else this.setState({teamIconFile:null,clientError:M.fb("general_tab.teamIconError","An error occurred while selecting the image.")})}),Om(this,"updateAllowedDomains",e=>{this.setState({allowed_domains:e.target.value})}),this.state=this.setupInitialState(e)}setupInitialState(e){const t=e.team;return{name:t.display_name,invite_id:t.invite_id,allow_open_invite:t.allow_open_invite,description:t.description,allowed_domains:t.allowed_domains,serverError:"",clientError:"",teamIconFile:null,loadingIcon:!1,submitActive:!1}}UNSAFE_componentWillReceiveProps(e){this.setState({name:e.team.display_name,description:e.team.description,allowed_domains:e.team.allowed_domains,invite_id:e.team.invite_id,allow_open_invite:e.team.allow_open_invite})}componentDidMount(){ys()("#team_settings").on("hidden.bs.modal",this.handleClose)}componentWillUnmount(){ys()("#team_settings").off("hidden.bs.modal",this.handleClose)}render(){const e=this.props.team;let t,a,n,s,i,o,r=null,l=null;if(this.state.clientError&&(r=this.state.clientError),this.state.serverError&&(l=this.state.serverError),"open_invite"===this.props.activeSection){let a;a=e.group_constrained?[y.a.createElement("div",{key:"userOpenInviteOptions"},y.a.createElement("div",null,y.a.createElement(ji.b,{id:"team_settings.openInviteDescription.groupConstrained",defaultMessage:"No, members of this team are added and removed by linked groups. [Learn More](!https://mattermost.com/pl/default-ldap-group-constrained-team-channel.html)"})))]:[y.a.createElement("fieldset",{key:"userOpenInviteOptions"},y.a.createElement("div",{className:"radio"},y.a.createElement("label",null,y.a.createElement("input",{id:"teamOpenInvite",name:"userOpenInviteOptions",type:"radio",defaultChecked:this.state.allow_open_invite,onChange:this.handleOpenInviteRadio.bind(this,!0)}),y.a.createElement(W.c,{id:"general_tab.yes",defaultMessage:"Yes"})),y.a.createElement("br",null)),y.a.createElement("div",{className:"radio"},y.a.createElement("label",null,y.a.createElement("input",{id:"teamOpenInviteNo",name:"userOpenInviteOptions",type:"radio",defaultChecked:!this.state.allow_open_invite,onChange:this.handleOpenInviteRadio.bind(this,!1)}),y.a.createElement(W.c,{id:"general_tab.no",defaultMessage:"No"})),y.a.createElement("br",null)),y.a.createElement("div",{className:"margin-top x3"},y.a.createElement(W.c,{id:"general_tab.openInviteDesc",defaultMessage:"When allowed, a link to this team will be included on the landing page allowing anyone with an account to join this team."})))],t=y.a.createElement(_m.a,{title:M.fb("general_tab.openInviteTitle","Allow any user with an account on this server to join this team"),inputs:a,submit:this.handleOpenInviteSubmit,serverError:l,updateSection:this.handleUpdateSection})}else{let a="";a=!0===this.state.allow_open_invite?M.fb("general_tab.yes","Yes"):e.group_constrained?M.fb("team_settings.openInviteSetting.groupConstrained","No, members of this team are added and removed by linked groups."):M.fb("general_tab.no","No"),t=y.a.createElement(vm.a,{title:M.fb("general_tab.openInviteTitle","Allow any user with an account on this server to join this team"),describe:a,updateSection:this.handleUpdateSection,section:"open_invite"})}if("invite_id"===this.props.activeSection&&this.props.canInviteTeamMembers){const e=[];e.push(y.a.createElement("div",{key:"teamInviteSetting"},y.a.createElement("div",{className:"row"},y.a.createElement("label",{className:"col-sm-5 control-label visible-xs-block"}),y.a.createElement("div",{className:"col-sm-12"},y.a.createElement("input",{id:"teamInviteId",autoFocus:!0,className:"form-control",type:"text",value:this.state.invite_id,maxLength:"32",onFocus:M.hb,readOnly:!0}))),y.a.createElement("div",{className:"setting-list__hint"},y.a.createElement(W.c,{id:"general_tab.codeLongDesc",defaultMessage:"The Invite Code is used as part of the URL in the team invitation link created by {getTeamInviteLink} in the main menu. Regenerating creates a new team invitation link and invalidates the previous link.",values:{getTeamInviteLink:y.a.createElement("strong",null,y.a.createElement(W.c,{id:"general_tab.getTeamInviteLink",defaultMessage:"Get Team Invite Link"}))}})))),a=y.a.createElement(_m.a,{title:M.fb("general_tab.codeTitle","Invite Code"),inputs:e,submit:this.handleInviteIdSubmit,serverError:l,clientError:r,updateSection:this.handleUpdateSection,saveButtonText:M.fb("general_tab.regenerate","Regenerate")})}else this.props.canInviteTeamMembers&&(a=y.a.createElement(vm.a,{title:M.fb("general_tab.codeTitle","Invite Code"),describe:M.fb("general_tab.codeDesc","Click 'Edit' to regenerate Invite Code."),updateSection:this.handleUpdateSection,section:"invite_id"}));if("name"===this.props.activeSection){const e=[];let t=y.a.createElement(W.c,{id:"general_tab.teamName",defaultMessage:"Team Name"});M.Z()&&(t=""),e.push(y.a.createElement("div",{key:"teamNameSetting",className:"form-group"},y.a.createElement("label",{className:"col-sm-5 control-label"},t),y.a.createElement("div",{className:"col-sm-7"},y.a.createElement("input",{id:"teamName",autoFocus:!0,className:"form-control",type:"text",maxLength:S.Q.MAX_TEAMNAME_LENGTH.toString(),onChange:this.updateName,value:this.state.name,onFocus:M.hb}))));const a=y.a.createElement("span",null,M.fb("general_tab.teamNameInfo","Set the name of the team as it appears on your sign-in screen and at the top of the left-hand sidebar."));n=y.a.createElement(_m.a,{title:M.fb("general_tab.teamName","Team Name"),inputs:e,submit:this.handleNameSubmit,serverError:l,clientError:r,updateSection:this.handleUpdateSection,extraInfo:a})}else{var c=this.state.name;n=y.a.createElement(vm.a,{title:M.fb("general_tab.teamName","Team Name"),describe:c,updateSection:this.handleUpdateSection,section:"name"})}if("description"===this.props.activeSection){const e=[];let t=y.a.createElement(W.c,{id:"general_tab.teamDescription",defaultMessage:"Team Description"});M.Z()&&(t=""),e.push(y.a.createElement("div",{key:"teamDescriptionSetting",className:"form-group"},y.a.createElement("label",{className:"col-sm-5 control-label"},t),y.a.createElement("div",{className:"col-sm-7"},y.a.createElement("input",{id:"teamDescription",autoFocus:!0,className:"form-control",type:"text",maxLength:S.Q.MAX_TEAMDESCRIPTION_LENGTH.toString(),onChange:this.updateDescription,value:this.state.description,onFocus:M.hb}))));const a=y.a.createElement("span",null,M.fb("general_tab.teamDescriptionInfo","Team description provides additional information to help users select the right team. Maximum of 50 characters."));s=y.a.createElement(_m.a,{title:M.fb("general_tab.teamDescription","Team Description"),inputs:e,submit:this.handleDescriptionSubmit,serverError:l,clientError:r,updateSection:this.handleUpdateSection,extraInfo:a})}else{let e="";e=this.state.description?this.state.description:y.a.createElement(W.c,{id:"general_tab.emptyDescription",defaultMessage:"Click 'Edit' to add a team description."}),s=y.a.createElement(vm.a,{title:M.fb("general_tab.teamDescription","Team Description"),describe:e,updateSection:this.handleUpdateSection,section:"description"})}if("team_icon"===this.props.activeSection)i=y.a.createElement(ym.a,{imageContext:"team",title:M.fb("general_tab.teamIcon","Team Icon"),src:M.M(e),file:this.state.teamIconFile,serverError:this.state.serverError,clientError:this.state.clientError,loadingPicture:this.state.loadingIcon,submitActive:this.state.submitActive,updateSection:e=>{this.updateSection(""),e.preventDefault()},onFileChange:this.updateTeamIcon,onSubmit:this.handleTeamIconSubmit,onRemove:this.handleTeamIconRemove});else{let t;t=e.last_team_icon_update?y.a.createElement(W.c,{id:"general_tab.teamIconLastUpdated",defaultMessage:"Image last updated {date}",values:{date:y.a.createElement(W.a,{value:new Date(e.last_team_icon_update),day:"2-digit",month:"short",year:"numeric"})}}):M.Z()?M.fb("general_tab.teamIconEditHintMobile","Click to upload an image"):M.fb("general_tab.teamIconEditHint","Click 'Edit' to upload an image."),i=y.a.createElement(vm.a,{title:M.fb("general_tab.teamIcon","Team Icon"),describe:t,section:"team_icon",updateSection:this.handleUpdateSection})}if("allowed_domains"===this.props.activeSection){const e=[];e.push(y.a.createElement("div",{key:"allowedDomainsSetting",className:"form-group"},y.a.createElement("div",{className:"col-sm-12"},y.a.createElement(re.a,{id:"allowedDomains",autoFocus:!0,className:"form-control",type:"text",onChange:this.updateAllowedDomains,value:this.state.allowed_domains,onFocus:M.hb,placeholder:{id:Object(le.b)("general_tab.AllowedDomainsExample"),defaultMessage:"corp.vueteams.com, vueteams.com"}}))));const t=y.a.createElement("span",null,M.fb("general_tab.AllowedDomainsInfo",'Users can only join the team if their email matches a specific domain (e.g. "vueteams.com") or list of comma-separated domains (e.g. "corp.vueteams.com, vueteams.com").'));o=y.a.createElement(_m.a,{title:M.fb("general_tab.allowedDomains","Allow only users with a specific email domain to join this team"),inputs:e,submit:this.handleAllowedDomainsSubmit,serverError:l,clientError:r,updateSection:this.handleUpdateSection,extraInfo:t})}else{let e="";e=this.state.allowed_domains?this.state.allowed_domains:y.a.createElement(W.c,{id:"general_tab.allowedDomainsEdit",defaultMessage:"Click 'Edit' to add an email domain whitelist."}),o=y.a.createElement(vm.a,{title:M.fb("general_tab.allowedDomains","allowedDomains"),describe:e,updateSection:this.handleUpdateSection,section:"allowed_domains"})}return y.a.createElement("div",null,y.a.createElement("div",{className:"modal-header"},y.a.createElement("button",{id:"closeButton",type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:this.props.closeModal},y.a.createElement("span",{"aria-hidden":"true"},"×")),y.a.createElement("h4",{className:"modal-title",ref:"title"},y.a.createElement("div",{className:"modal-back"},y.a.createElement("span",{onClick:this.props.collapseModal},y.a.createElement(Cm.a,null))),y.a.createElement(W.c,{id:"general_tab.title",defaultMessage:"General Settings"}))),y.a.createElement("div",{ref:"wrapper",className:"user-settings"},y.a.createElement("h3",{className:"tab-header"},y.a.createElement(W.c,{id:"general_tab.title",defaultMessage:"General Settings"})),y.a.createElement("div",{className:"divider-dark first"}),n,y.a.createElement("div",{className:"divider-light"}),s,y.a.createElement("div",{className:"divider-light"}),i,!e.group_constrained&&y.a.createElement(y.a.Fragment,null,y.a.createElement("div",{className:"divider-light"}),o),y.a.createElement("div",{className:"divider-light"}),t,!e.group_constrained&&y.a.createElement(y.a.Fragment,null,y.a.createElement("div",{className:"divider-light"}),a),y.a.createElement("div",{className:"divider-dark"})))}}Om(Pm,"propTypes",{updateSection:_.a.func.isRequired,team:_.a.object.isRequired,activeSection:_.a.string.isRequired,closeModal:_.a.func.isRequired,collapseModal:_.a.func.isRequired,maxFileSize:_.a.number.isRequired,actions:_.a.shape({patchTeam:_.a.func.isRequired,regenerateTeamInviteId:_.a.func.isRequired,removeTeamIcon:_.a.func.isRequired,setTeamIcon:_.a.func.isRequired}).isRequired,canInviteTeamMembers:_.a.bool.isRequired});var Mm=Object(n.connect)(function(e,t){const a=Object(d.getConfig)(e);return{maxFileSize:parseInt(a.MaxFileSize,10),canInviteTeamMembers:Object(D.haveITeamPermission)(e,{team:t.team.id,permission:x.Permissions.INVITE_USER})}},function(e){return{actions:Object(s.bindActionCreators)({patchTeam:l.patchTeam,regenerateTeamInviteId:l.regenerateTeamInviteId,removeTeamIcon:l.removeTeamIcon,setTeamIcon:l.setTeamIcon},e)}})(Pm);function Nm(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Im extends y.a.Component{constructor(e){super(e),Nm(this,"doFileSelect",e=>{e.preventDefault();var t=ys()(e.target).val();"fakepath"===t.substring(3,11)&&(t=t.substring(12)),this.setState({clientError:"",serverError:"",filename:t})}),Nm(this,"doSubmit",e=>{e.preventDefault();var t=bi.a.findDOMNode(this.refs.uploadinput);t.files&&t.files[0]?this.props.submit(t.files[0]):this.setState({clientError:!0})}),this.state={clientError:this.props.clientError,serverError:this.props.serverError,filename:""}}UNSAFE_componentWillReceiveProps(){this.setState({clientError:this.props.clientError,serverError:this.props.serverError})}render(){let e=null;this.state.clientError&&(e=y.a.createElement("div",{className:"file-status"},y.a.createElement(W.c,{id:"setting_upload.noFile",defaultMessage:"No file selected."})));let t=null;this.state.serverError&&(t=y.a.createElement("div",{className:"file-status"},this.state.serverError));let a=null,n="btn btn-sm btn-primary disabled";return this.state.filename&&(a=y.a.createElement("div",{className:"file-status file-name"},this.state.filename),n="btn btn-sm btn-primary"),y.a.createElement("ul",{className:"section-max"},y.a.createElement("li",{className:"col-sm-12 section-title"},this.props.title),y.a.createElement("li",{className:"col-sm-offset-3 col-sm-9"},this.props.helpText),y.a.createElement("li",{className:"col-sm-offset-3 col-sm-9"},y.a.createElement("ul",{className:"setting-list"},y.a.createElement("li",{className:"setting-list-item"},y.a.createElement("span",{className:"btn btn-sm btn-primary btn-file sel-btn"},y.a.createElement(W.c,{id:"setting_upload.select",defaultMessage:"Select file"}),y.a.createElement("input",{ref:"uploadinput",accept:this.props.fileTypesAccepted,type:"file",onChange:this.doFileSelect})),y.a.createElement("a",{className:n,onClick:this.doSubmit},y.a.createElement(W.c,{id:"setting_upload.import",defaultMessage:"Import"})),a,t,e))))}}Im.propTypes={title:_.a.string.isRequired,submit:_.a.func.isRequired,fileTypesAccepted:_.a.string.isRequired,clientError:_.a.string,serverError:_.a.string,helpText:_.a.object};var Am=a(949);function jm(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Rm=Object(W.g)({importSlack:{id:Object(le.b)("team_import_tab.importSlack"),defaultMessage:"Import from Slack (Beta)"}});class km extends y.a.Component{constructor(e){super(e),jm(this,"onImportFailure",()=>{this.setState({status:"fail"})}),jm(this,"onImportSuccess",e=>{this.setState({status:"done",link:"data:application/octet-stream;charset=utf-8,"+encodeURIComponent(atob(e.results))})}),jm(this,"doImportSlack",e=>{this.setState({status:"in-progress",link:""}),M.O(e,this.onImportSuccess,this.onImportFailure)}),this.state={status:"ready",link:""}}render(){const{formatMessage:e}=this.props.intl,t=y.a.createElement("a",{href:"https://docs.vueteams.com/administration/migrating.html#migrating-from-slack",target:"_blank",rel:"noopener noreferrer"},y.a.createElement(W.c,{id:"team_import_tab.importHelpDocsLink",defaultMessage:"documentation"})),a=y.a.createElement("strong",null,y.a.createElement(W.c,{id:"team_import_tab.importHelpExportInstructions",defaultMessage:"Slack > Administration > Workspace settings > Import/Export Data > Export > Start Export"})),n=y.a.createElement("a",{href:"https://github.com/grundleborg/slack-advanced-exporter",target:"_blank",rel:"noopener noreferrer"},y.a.createElement(W.c,{id:"team_import_tab.importHelpExporterLink",defaultMessage:"Slack Advanced Exporter"})),s=y.a.createElement("a",{href:"https://docs.vueteams.com/administration/migrating.html#migrating-from-slack-using-the-mattermost-cli",target:"_blank",rel:"noopener noreferrer"},y.a.createElement(W.c,{id:"team_import_tab.importHelpCliDocsLink",defaultMessage:"CLI tool for Slack import"})),i=y.a.createElement("div",null,y.a.createElement("p",null,y.a.createElement(W.c,{id:"team_import_tab.importHelpLine1",defaultMessage:"Slack import to Vue supports importing of messages in your Slack team's public channels."})),y.a.createElement("p",null,y.a.createElement(W.c,{id:"team_import_tab.importHelpLine2",defaultMessage:"To import a team from Slack, go to {exportInstructions}. See {uploadDocsLink} to learn more.",values:{exportInstructions:a,uploadDocsLink:t}})),y.a.createElement("p",null,y.a.createElement(W.c,{id:"team_import_tab.importHelpLine3",defaultMessage:"To import posts with attached files, see {slackAdvancedExporterLink} for details.",values:{slackAdvancedExporterLink:n}})),y.a.createElement("p",null,y.a.createElement(W.c,{id:"team_import_tab.importHelpLine4",defaultMessage:"For Slack teams with over 10,000 messages, we recommend using the {cliLink}.",values:{cliLink:s}}))),o=y.a.createElement(Im,{title:e(Rm.importSlack),submit:this.doImportSlack,helpText:i,fileTypesAccepted:".zip"});let r;switch(this.state.status){case"ready":r="";break;case"in-progress":r=y.a.createElement("p",{className:"confirm-import alert alert-warning"},y.a.createElement(_o.a,{text:M.fb("team_import_tab.importing","Importing...")}));break;case"done":r=y.a.createElement("p",{className:"confirm-import alert alert-success"},y.a.createElement(xn.a,null),y.a.createElement(W.c,{id:"team_import_tab.successful",defaultMessage:" Import successful: "}),y.a.createElement("a",{href:this.state.link,download:"MattermostImportSummary.txt"},y.a.createElement(W.c,{id:"team_import_tab.summary",defaultMessage:"View Summary"})));break;case"fail":r=y.a.createElement("p",{className:"confirm-import alert alert-warning"},y.a.createElement(Am.a,null),y.a.createElement(W.c,{id:"team_import_tab.failure",defaultMessage:" Import failure: "}),y.a.createElement("a",{href:this.state.link,download:"MattermostImportSummary.txt"},y.a.createElement(W.c,{id:"team_import_tab.summary",defaultMessage:"View Summary"})))}return y.a.createElement("div",null,y.a.createElement("div",{className:"modal-header"},y.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:this.props.closeModal},y.a.createElement("span",{"aria-hidden":"true"},"×")),y.a.createElement("h4",{className:"modal-title",ref:"title"},y.a.createElement("div",{className:"modal-back"},y.a.createElement("span",{onClick:this.props.collapseModal},y.a.createElement(Cm.a,null))),y.a.createElement(W.c,{id:"team_import_tab.import",defaultMessage:"Import"}))),y.a.createElement("div",{ref:"wrapper",className:"user-settings"},y.a.createElement("h3",{className:"tab-header"},y.a.createElement(W.c,{id:"team_import_tab.import",defaultMessage:"Import"})),y.a.createElement("div",{className:"divider-dark first"}),o,y.a.createElement("div",{className:"divider-dark"}),r))}}km.propTypes={intl:W.i.isRequired,closeModal:_.a.func.isRequired,collapseModal:_.a.func.isRequired};var Lm=Object(W.h)(km);const xm=({activeTab:e,activeSection:t,updateSection:a,closeModal:n,collapseModal:s,team:i})=>{if(!i)return null;let o;switch(e){case"general":o=y.a.createElement("div",null,y.a.createElement(Mm,{team:i,activeSection:t,updateSection:a,closeModal:n,collapseModal:s}));break;case"import":o=y.a.createElement("div",null,y.a.createElement(Lm,{team:i,activeSection:t,updateSection:a,closeModal:n,collapseModal:s}));break;default:o=y.a.createElement("div",null)}return o};xm.defaultProps={activeTab:"",activeSection:""},xm.propTypes={activeTab:_.a.string.isRequired,activeSection:_.a.string.isRequired,updateSection:_.a.func.isRequired,closeModal:_.a.func.isRequired,collapseModal:_.a.func.isRequired,team:_.a.object.isRequired};var Dm=xm;var Um=Object(n.connect)(function(e){return{team:Object(u.getCurrentTeam)(e)}})(Dm);function qm(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Hm extends y.a.Component{constructor(e){super(e),qm(this,"updateTab",e=>{this.setState({activeTab:e,activeSection:""}),M.Z()||ys()(".settings-modal .modal-body").scrollTop(0).perfectScrollbar("update")}),qm(this,"updateSection",e=>{ys()(".section-max").length&&ys()(".settings-modal .modal-body").scrollTop(0).perfectScrollbar("update"),this.setState({activeSection:e})}),qm(this,"closeModal",()=>{this.props.onHide()}),qm(this,"collapseModal",()=>{ys()(bi.a.findDOMNode(this.refs.modalBody)).closest(".modal-dialog").removeClass("display--content"),this.setState({active_tab:"",active_section:""})}),qm(this,"handleHide",()=>{this.props.onHide()}),qm(this,"handleHidden",()=>{this.setState({activeTab:"general",activeSection:""})}),this.state={activeTab:"general",activeSection:""}}componentDidMount(){M.Z()||ys()(".settings-modal .settings-content").perfectScrollbar()}render(){const e=[];return e.push({name:"general",uiName:M.fb("team_settings_modal.generalTab","General"),icon:"icon fa fa-cog",iconTitle:M.fb("generic_icons.settings","Settings Icon")}),e.push({name:"import",uiName:M.fb("team_settings_modal.importTab","Import"),icon:"icon fa fa-upload",iconTitle:M.fb("generic_icons.upload","Upload Icon")}),y.a.createElement(V.a,{dialogClassName:"a11y__modal settings-modal settings-modal--action",show:this.props.show,onHide:this.handleHide,onExited:this.handleHidden,role:"dialog","aria-labelledby":"teamSettingsModalLabel"},y.a.createElement(V.a.Header,{id:"teamSettingsModalLabel",closeButton:!0},y.a.createElement(V.a.Title,{componentClass:"h1"},y.a.createElement(W.c,{id:"team_settings_modal.title",defaultMessage:"Team Settings"}))),y.a.createElement(V.a.Body,{ref:"modalBody"},y.a.createElement("div",{className:"settings-table"},y.a.createElement("div",{className:"settings-links"},y.a.createElement(N.a,{doLoad:Em.a,tabs:e,activeTab:this.state.activeTab,updateTab:this.updateTab})),y.a.createElement("div",{className:"settings-content minimize-settings"},y.a.createElement(Um,{activeTab:this.state.activeTab,activeSection:this.state.activeSection,updateSection:this.updateSection,closeModal:this.closeModal,collapseModal:this.collapseModal})))))}}qm(Hm,"propTypes",{show:_.a.bool,onHide:_.a.func});var Fm=Object(n.connect)(function(e){const t=S.s.TEAM_SETTINGS;return{show:Object(td.a)(e,t)}})(Hm),Bm=a(1297),Gm=a(1071),Vm=a(1524),Wm=a(1525),zm=a(1033);class Ym extends y.a.PureComponent{render(){return y.a.createElement("span",this.props,y.a.createElement(W.c,{id:"generic_icons.plugin",defaultMessage:"Plugin Icon"},e=>y.a.createElement("svg",{width:"61px",height:"61px",viewBox:"0 0 61 61","aria-label":e},y.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"inherit",fillRule:"evenodd"},y.a.createElement("g",{transform:"translate(-347.000000, -211.000000)",fill:"inherit"},y.a.createElement("g",{transform:"translate(377.585786, 241.500000) rotate(-315.000000) translate(-377.585786, -241.500000) translate(358.585786, 200.000000)"},y.a.createElement("g",{transform:"translate(0.000000, -0.000000)"},y.a.createElement("path",{d:"M3.28846154,6.10822511 L3.05411255,6.10822511 C1.36737277,6.10822511 2.06566048e-16,4.74085234 0,3.05411255 C-2.06566048e-16,1.36737277 1.36737277,-7.78498519e-14 3.05411255,-7.81597009e-14 L34.9458874,-7.81597009e-14 C36.6326272,-8.16905472e-14 38,1.36737277 38,3.05411255 C38,4.74085234 36.6326272,6.10822511 34.9458874,6.10822511 L34.7115385,6.10822511 L34.7115385,14.7316017 C34.7115385,20.9798931 29.0184395,26.1638765 21.5576923,27.1415606 L21.5576923,33.1964286 C21.5576923,34.5081049 20.4943686,35.5714286 19.1826923,35.5714286 C17.871016,35.5714286 16.8076923,34.5081049 16.8076923,33.1964286 L16.8076923,27.1859094 C9.16823824,26.3322077 3.28846154,21.0815081 3.28846154,14.7316017 L3.28846154,6.10822511 Z M19.1431901,14.7316017 C17.8533303,14.7316017 16.8076923,15.7772397 16.8076923,17.0670996 C16.8076923,18.3569594 17.8533303,19.4025974 19.1431901,19.4025974 L19.2221945,19.4025974 C20.5120543,19.4025974 21.5576923,18.3569594 21.5576923,17.0670996 C21.5576923,15.7772397 20.5120543,14.7316017 19.2221945,14.7316017 L19.1431901,14.7316017 Z",transform:"translate(19.000000, 17.785714) rotate(-180.000000) translate(-19.000000, -17.785714) "}),y.a.createElement("path",{d:"M32.1538462,53.5367965 L34.7115385,53.5367965 L34.7115385,62.1601732 C34.7115385,68.4084646 29.0184395,73.592448 21.5576923,74.5701321 L21.5576923,80.625 C21.5576923,81.9366763 20.4943686,83 19.1826923,83 C17.871016,83 16.8076923,81.9366763 16.8076923,80.625 L16.8076923,74.6144809 C9.16823824,73.7607791 3.28846154,68.5100796 3.28846154,62.1601732 L3.28846154,53.5367965 L3.05411255,53.5367965 C1.36737277,53.5367965 2.06566048e-16,52.1694238 0,50.482684 C-2.06566048e-16,48.7959442 1.36737277,47.4285714 3.05411255,47.4285714 L8.40384615,47.4285714 L8.40384615,42.2581169 C8.40384615,40.9464406 9.46716987,39.8831169 10.7788462,39.8831169 C12.0905224,39.8831169 13.1538462,40.9464406 13.1538462,42.2581169 L13.1538462,47.4285714 L24.8461538,47.4285714 L24.8461538,42.2581169 C24.8461538,40.9464406 25.9094776,39.8831169 27.2211538,39.8831169 C28.5328301,39.8831169 29.5961538,40.9464406 29.5961538,42.2581169 L29.5961538,47.4285714 L34.9458874,47.4285714 C36.6326272,47.4285714 38,48.7959442 38,50.482684 C38,52.1694238 36.6326272,53.5367965 34.9458874,53.5367965 L32.1538462,53.5367965 Z M19.1431901,62.1601732 C17.8533303,62.1601732 16.8076923,63.2058112 16.8076923,64.495671 C16.8076923,65.7855308 17.8533303,66.8311688 19.1431901,66.8311688 L19.2221945,66.8311688 C20.5120543,66.8311688 21.5576923,65.7855308 21.5576923,64.495671 C21.5576923,63.2058112 20.5120543,62.1601732 19.2221945,62.1601732 L19.1431901,62.1601732 Z",transform:"translate(19.000000, 61.441558) rotate(-360.000000) translate(-19.000000, -61.441558) "}))))))))}}var Km=a(899),Qm=a(79),Zm=a(928);function Jm(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Xm extends y.a.Component{constructor(e){super(e),Jm(this,"onClickOverwriteModal",()=>(this.setState({confirmOverwriteInstallModal:!1}),this.installPlugin(!0))),Jm(this,"onCancelOverwriteModal",()=>{this.setState({confirmOverwriteInstallModal:!1,installing:!1,serverError:null})}),Jm(this,"installPlugin",async e=>{const{error:t}=await this.props.actions.installPluginFromUrl(this.props.downloadUrl,e);if(t)return"app.plugin.install_id.app_error"!==t.server_error_id||e?(this.setState({installing:!1}),void("app.plugin.extract.app_error"===t.server_error_id?this.setState({serverError:Object(M.fb)("admin.plugin.error.extract","Encountered an error when extracting the plugin.")}):this.setState({serverError:t.message}))):void this.setState({confirmOverwriteInstallModal:!0});this.setState({serverError:null}),this.props.onInstalled()}),Jm(this,"onInstall",()=>{this.setState({installing:!0}),Object(Pe.d)("plugins","ui_marketplace_download"),this.installPlugin(!1)}),Jm(this,"onConfigure",()=>{Object(Pe.d)("plugins","ui_marketplace_configure"),this.props.onConfigure()}),this.state={installing:!1,confirmOverwriteInstallModal:!1,serverError:null}}getItemButton(){let e=y.a.createElement("button",{onClick:this.onInstall,className:"btn btn-primary",disabled:this.state.installing||""===this.props.downloadUrl},y.a.createElement(Ic.a,{loading:this.state.installing,text:Object(M.fb)("marketplace_modal.installing","Installing...")},this.state.serverError?y.a.createElement(W.c,{id:"marketplace_modal.list.try_again",defaultMessage:"Try Again"}):y.a.createElement(W.c,{id:"marketplace_modal.list.Install",defaultMessage:"Install"})));return this.props.installed&&(e=y.a.createElement(vn.a,{to:"/admin_console/plugins/plugin_"+this.props.id},y.a.createElement("button",{onClick:this.onConfigure,className:"btn btn-outline"},y.a.createElement(W.c,{id:"marketplace_modal.list.configure",defaultMessage:"Configure"})))),e}render(){const e="".concat(this.props.name,", ").concat(this.props.description).toLowerCase(),t="(".concat(this.props.version,")");let a;return a=this.props.iconData?y.a.createElement("img",{src:this.props.iconData,className:"icon__plugin"}):y.a.createElement(Ym,{className:"icon__plugin"}),y.a.createElement("div",{className:"more-modal__row more-modal__row--link"+(this.state.serverError?" item_error":""),key:this.props.id},a,y.a.createElement("div",{className:"more-modal__details"},y.a.createElement("a",{"aria-label":e,className:"style--none more-modal__row--link",target:"_blank",rel:"noopener noreferrer",href:this.props.homepageUrl},this.props.name," ",y.a.createElement("span",{className:"light subtitle"},t),y.a.createElement("p",{className:"more-modal__description"+(this.state.serverError?" error_text":"")},this.state.serverError?this.state.serverError:this.props.description))),y.a.createElement("div",{className:"more-modal__actions"},this.getItemButton()),y.a.createElement(Yn.a,{show:this.state.confirmOverwriteInstallModal,title:y.a.createElement(W.c,{id:"admin.plugin.upload.overwrite_modal.title",defaultMessage:"Overwrite existing plugin?"}),message:y.a.createElement(W.c,{id:"admin.plugin.upload.overwrite_modal.desc",defaultMessage:"A plugin with this ID already exists. Would you like to overwrite it?"}),confirmButtonClass:"btn btn-danger",confirmButtonText:y.a.createElement(W.c,{id:"admin.plugin.upload.overwrite_modal.overwrite",defaultMessage:"Overwrite"}),onConfirm:this.onClickOverwriteModal,onCancel:this.onCancelOverwriteModal}))}}Jm(Xm,"propTypes",{id:_.a.string.isRequired,name:_.a.string.isRequired,description:_.a.string.isRequired,version:_.a.string.isRequired,downloadUrl:_.a.string,homepageUrl:_.a.string,iconData:_.a.string,installed:_.a.bool.isRequired,onConfigure:_.a.func.isRequired,onInstalled:_.a.func.isRequired,actions:_.a.shape({installPluginFromUrl:_.a.func.isRequired}).isRequired});var $m=Object(n.connect)(null,function(e){return{actions:Object(s.bindActionCreators)({installPluginFromUrl:Zm.installPluginFromUrl},e)}})(Xm);a(1526);function eu(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const tu={ALL_PLUGINS:"allPlugins",INSTALLED_PLUGINS:"installed"},au=1e3;class nu extends y.a.Component{constructor(e){super(e),eu(this,"getMarketplacePlugins",async()=>{const e=this.refs.filter?this.refs.filter.value:null,{error:t}=await this.props.actions.getMarketplacePlugins(e);this.setState({loading:!1,serverError:t})}),eu(this,"handleSelect",e=>{this.setState({tabKey:e})}),eu(this,"close",()=>{Object(Pe.d)("plugins","ui_marketplace_closed"),this.props.actions.closeModal()}),eu(this,"changeTab",e=>{this.setState({tabKey:e})}),eu(this,"trackSearch",()=>{Object(Pe.d)("plugins","ui_marketplace_search")}),eu(this,"doSearch",()=>{jt()(this.trackSearch,au),this.getMarketplacePlugins()}),eu(this,"getPluginsListContent",(e,t)=>{if(0===e.length){let e=y.a.createElement(W.c,{id:"marketplace_modal.no_plugins",defaultMessage:"There are no plugins available at this time."});t&&(e=y.a.createElement(W.c,{id:"marketplace_modal.no_plugins_installed",defaultMessage:"You do not have any plugins installed."}));let a=null;return t&&(a=y.a.createElement("a",{onClick:()=>this.changeTab(tu.ALL_PLUGINS)},y.a.createElement(W.c,{id:"marketplace_modal.install_plugins",defaultMessage:"Install Plugins"}))),y.a.createElement("div",{className:"no_plugins_div"},y.a.createElement("br",null),y.a.createElement(Ym,{className:"icon__plugin"}),y.a.createElement("br",null),y.a.createElement("br",null),e,y.a.createElement("br",null),y.a.createElement("br",null),a)}return y.a.createElement("div",{className:"more-modal__list"},e.map(e=>y.a.createElement($m,{key:e.manifest.id,id:e.manifest.id,name:e.manifest.name,description:e.manifest.description,version:e.manifest.version,isPrepackaged:!1,downloadUrl:e.download_url,homepageUrl:e.homepage_url,iconData:e.icon_data,installed:""!==e.installed_version,onConfigure:this.close,onInstalled:this.getMarketplacePlugins})))}),this.state={tabKey:tu.ALL_PLUGINS,loading:!0,serverError:null}}componentDidMount(){Object(Pe.d)("plugins","ui_marketplace_opened"),this.getMarketplacePlugins()}render(){const e=y.a.createElement("div",{className:"filter-row filter-row--full"},y.a.createElement("div",{className:"col-sm-12"},y.a.createElement(zm.a,{id:"searchMarketplaceTextbox",ref:"filter",className:"form-control filter-textbox search_input",placeholder:{id:Object(le.b)("marketplace_modal.search"),defaultMessage:"Search Plugins"},inputComponent:re.a,onInput:this.doSearch})));let t=null;return this.state.serverError&&(t=y.a.createElement("div",{className:"error-bar",id:"error_bar",dangerouslySetInnerHTML:{__html:Qm.a(Object(M.fb)("app.plugin.marketplace_plugins.app_error","Error connecting to the marketplace server. Please check your settings in the [System Console](/admin_console/plugins/plugin_management)."))}})),y.a.createElement(ld,null,y.a.createElement(rd,{show:Boolean(this.props.show),onClose:this.close},t,y.a.createElement("div",{className:"modal-marketplace",id:"modal_marketplace"},y.a.createElement("h1",null,y.a.createElement("strong",null,y.a.createElement(W.c,{id:"marketplace_modal.title",defaultMessage:"Plugin Marketplace"}))),e,y.a.createElement(X.a,{id:"marketplaceTabs",className:"tabs",defaultActiveKey:"allPlugins",activeKey:this.state.tabKey,onSelect:this.handleSelect,unmountOnExit:!0},y.a.createElement($.a,{eventKey:tu.ALL_PLUGINS,title:Object(M.fb)("marketplace_modal.tabs.all_plugins","All Plugins")},this.state.loading?y.a.createElement(Km.a,null):this.getPluginsListContent(this.props.marketplacePlugins,!1)),y.a.createElement($.a,{eventKey:tu.INSTALLED_PLUGINS,title:Object(M.fb)("marketplace_modal.tabs.installed_plugins","Installed (".concat(this.props.installedPlugins.length,")"))},this.getPluginsListContent(this.props.installedPlugins,!0))))))}}eu(nu,"propTypes",{show:_.a.bool,installedPlugins:_.a.array.isRequired,marketplacePlugins:_.a.array.isRequired,actions:_.a.shape({closeModal:_.a.func.isRequired,getMarketplacePlugins:_.a.func.isRequired}).isRequired});var su=Object(n.connect)(function(e){return{show:Object(td.a)(e,S.s.PLUGIN_MARKETPLACE),installedPlugins:Object(Wm.getMarketplaceInstalledPlugins)(e),marketplacePlugins:e.entities.plugins.marketplacePlugins}},function(e){return{actions:Object(s.bindActionCreators)({closeModal:()=>Object(U.a)(S.s.PLUGIN_MARKETPLACE),getMarketplacePlugins:Vm.getMarketplacePlugins},e)}})(nu),iu=a(977);function ou(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const ru=50;class lu extends y.a.PureComponent{constructor(e){super(e),ou(this,"handleHide",()=>{this.setState({show:!1})}),ou(this,"handleExit",()=>{this.props.onHide&&this.props.onHide()}),ou(this,"onNext",()=>{const e=this.state.page+1;this.onPageChange(e)}),ou(this,"onPrev",()=>{const e=this.state.page-1;this.onPageChange(e)}),ou(this,"onPageChange",async e=>{this.setState({loading:!0});const t=await this.props.loadItems(e,this.state.searchTerm);this.setState({page:e,items:t.items,loading:!1})}),ou(this,"onSearchInput",async e=>{const{target:t}=e,a=t.value;this.setState({loading:!0,searchTerm:a});const n=await this.props.loadItems(0,a),{items:s,totalCount:i}=n;this.setState({loading:!1,items:s,totalCount:i})}),this.numPerPage=e.numPerPage||ru,this.state={show:!0,page:0,items:[],totalCount:0,loading:!0,searchTerm:""}}async componentWillMount(){const{totalCount:e,items:t}=await this.props.loadItems(0,"");this.setState({totalCount:e,items:t,loading:!1})}renderRows(){return this.state.loading?y.a.createElement("div",null,y.a.createElement(Km.a,{position:"absolute",key:"loading"})):this.state.items.map(e=>this.props.renderRow(e,this))}paginationRange(){let e=this.state.page*this.numPerPage+1;const t=e+this.state.items.length-1;return 0===t&&(e=0),{startCount:e,endCount:t}}render(){if(!this.props.show)return null;const{endCount:e,startCount:t}=this.paginationRange();return y.a.createElement("div",null,y.a.createElement(V.a,{dialogClassName:"a11y__modal more-modal more-modal--action",show:this.state.show,onHide:this.handleHide,onExited:this.handleExit},y.a.createElement(V.a.Header,{closeButton:!0},y.a.createElement(V.a.Title,{componentClass:"h1"},y.a.createElement("span",{className:"name"},this.props.titleText)),this.props.titleBarButtonText&&this.props.titleBarButtonOnClick&&y.a.createElement("a",{className:"btn btn-md btn-primary",href:"#",onClick:this.props.titleBarButtonOnClick},this.props.titleBarButtonText)),y.a.createElement(V.a.Body,null,y.a.createElement("div",{className:"filtered-user-list"},y.a.createElement("div",{className:"filter-row"},y.a.createElement("div",{className:"col-xs-12"},y.a.createElement("input",{id:"searchUsersInput",className:"form-control filter-textbox",placeholder:this.props.searchPlaceholderText,onChange:this.onSearchInput})),y.a.createElement("div",{className:"col-sm-12"},y.a.createElement("span",{className:"member-count pull-left"},y.a.createElement(W.c,{id:"list_modal.paginatorCount",defaultMessage:"{startCount, number} - {endCount, number} of {total, number} total",values:{startCount:t,endCount:e,total:this.state.totalCount}})))),y.a.createElement("div",{className:"more-modal__list"},y.a.createElement("div",null,this.renderRows())),y.a.createElement("div",{className:"filter-controls"},this.state.page>0&&y.a.createElement("button",{onClick:this.onPrev,className:"btn btn-link filter-control filter-control__prev"},y.a.createElement(W.c,{id:"filtered_user_list.prev",defaultMessage:"Previous"})),this.state.items.length>=this.props.numPerPage&&e!==this.state.totalCount&&y.a.createElement("button",{onClick:this.onNext,className:"btn btn-link filter-control filter-control__next"},y.a.createElement(W.c,{id:"filtered_user_list.next",defaultMessage:"Next"})))))))}}ou(lu,"propTypes",{loadItems:_.a.func.isRequired,renderRow:_.a.func.isRequired,onHide:_.a.func,titleText:_.a.string,searchPlaceholderText:_.a.string,titleBarButtonText:_.a.string,titleBarButtonOnClick:_.a.func,numPerPage:_.a.number,show:_.a.bool}),ou(lu,"defaultProps",{show:!0});var cu=a(1051),du=a.n(cu);function mu(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class uu extends y.a.PureComponent{constructor(...e){super(...e),mu(this,"state",{showConfirmModal:!1,item:{member_count:0},listModal:null}),mu(this,"loadItems",async(e,t)=>{const{data:a}=await this.props.actions.getGroupsAssociatedToTeam(this.props.team.id,t,e,ru);return{items:a.groups,totalCount:a.totalGroupCount}}),mu(this,"handleDeleteCanceled",()=>{this.setState({showConfirmModal:!1})}),mu(this,"handleDeleteConfirmed",()=>{this.setState({showConfirmModal:!1});const{item:e,listModal:t}=this.state;this.props.actions.unlinkGroupSyncable(e.id,this.props.team.id,x.Groups.SYNCABLE_TYPE_TEAM).then(async()=>{t.setState({loading:!0});const{items:e}=await t.props.loadItems(t.setState.page,t.state.searchTerm);t.setState({loading:!1,items:e})})}),mu(this,"onClickRemoveGroup",(e,t)=>{this.setState({showConfirmModal:!0,item:e,listModal:t})}),mu(this,"onClickConfirmRemoveGroup",(e,t)=>this.props.actions.unlinkGroupSyncable(e.id,this.props.team.id,x.Groups.SYNCABLE_TYPE_TEAM).then(async()=>{t.setState({loading:!0});const{items:e}=await t.props.loadItems(t.setState.page,t.state.searchTerm);t.setState({loading:!1,items:e})})),mu(this,"onHide",()=>{this.props.actions.closeModal(S.s.MANAGE_TEAM_GROUPS)}),mu(this,"titleButtonOnClick",()=>{this.onHide(),this.props.actions.openModal({modalId:S.s.ADD_GROUPS_TO_TEAM,dialogType:Gm.a})}),mu(this,"renderRow",(e,t)=>y.a.createElement("div",{key:e.id,className:"more-modal__row"},y.a.createElement("img",{className:"more-modal__image",src:du.a,alt:"group picture",width:"32",height:"32"}),y.a.createElement("div",{className:"more-modal__details"},y.a.createElement("div",{className:"more-modal__name"},e.display_name," ","-"," ",y.a.createElement("span",null,y.a.createElement(W.c,{id:"numMembers",defaultMessage:"{num, number} {num, plural, one {member} other {members}}",values:{num:e.member_count}})))),y.a.createElement("div",{className:"more-modal__actions"},y.a.createElement("button",{id:"removeMember",type:"button",className:"btn btn-danger btn-message",onClick:()=>this.onClickRemoveGroup(e,t)},y.a.createElement(W.c,{id:"group_list_modal.removeGroupButton",defaultMessage:"Remove Group"})))))}render(){const{formatMessage:e}=this.context.intl,t=this.state.item.member_count;return y.a.createElement(y.a.Fragment,null,y.a.createElement(lu,{show:!this.state.showConfirmModal,titleText:e({id:"groups",defaultMessage:"{team} Groups"},{team:this.props.team.display_name}),searchPlaceholderText:e({id:"manage_team_groups_modal.search_placeholder",defaultMessage:"Search groups"}),renderRow:this.renderRow,loadItems:this.loadItems,onHide:this.onHide,titleBarButtonText:e({id:"group_list_modal.addGroupButton",defaultMessage:"Add Groups"}),titleBarButtonOnClick:this.titleButtonOnClick}),y.a.createElement(Yn.a,{show:this.state.showConfirmModal,title:e({id:"remove_group_confirm_title",defaultMessage:"Remove Group and {memberCount, number} {memberCount, plural, one {Member} other {Members}}"},{memberCount:t}),message:e({id:"remove_group_confirm_message",defaultMessage:"{memberCount, number} {memberCount, plural, one {member} other {members}} associated to this group will be removed from the team on the next scheduled AD/LDAP synchronization. Are you sure you wish to remove this group and {memberCount} {memberCount, plural, one {member} other {members}}?"},{memberCount:t}),confirmButtonText:e({id:"remove_group_confirm_button",defaultMessage:"Yes, Remove Group and {memberCount, plural, one {Member} other {Members}}"},{memberCount:t}),onConfirm:this.handleDeleteConfirmed,onCancel:this.handleDeleteCanceled}))}}mu(uu,"propTypes",{team:_.a.object.isRequired,actions:_.a.shape({getGroupsAssociatedToTeam:_.a.func.isRequired,unlinkGroupSyncable:_.a.func.isRequired,closeModal:_.a.func.isRequired,openModal:_.a.func.isRequired}).isRequired}),mu(uu,"contextTypes",{intl:W.i});var pu=Object(n.connect)((e,t)=>({team:e.entities.teams.teams[t.teamID]}),e=>({actions:Object(s.bindActionCreators)({getGroupsAssociatedToTeam:iu.getGroupsAssociatedToTeam,closeModal:U.a,openModal:U.b,unlinkGroupSyncable:iu.unlinkGroupSyncable},e)}))(uu);function hu(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class gu extends y.a.PureComponent{constructor(...e){super(...e),hu(this,"toggleShortcutsModal",e=>{e.preventDefault(),O.m()}),hu(this,"handleKeyDown",e=>{Object(M.e)(e)&&e.shiftKey&&Object(M.X)(e,S.i.KeyCodes.A)&&this.props.actions.openModal({ModalId:S.s.USER_SETTINGS,dialogType:Is.a})}),hu(this,"handleEmitUserLoggedOutEvent",()=>{O.e()}),hu(this,"getFlagged",e=>{e.preventDefault(),this.props.actions.showFlaggedPosts(),this.props.actions.closeRhsMenu()}),hu(this,"searchMentions",e=>{e.preventDefault(),this.props.isMentionSearch?this.props.actions.closeRightHandSide():(this.props.actions.closeRhsMenu(),this.props.actions.showMentions())})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}render(){const{currentUser:e,teamIsGroupConstrained:t}=this.props;if(!e)return null;const{formatMessage:a}=this.context.intl,n=this.props.pluginMenuItems.map(e=>y.a.createElement(Ei.a.ItemAction,{id:e.id+"_pluginmenuitem",key:e.id+"_pluginmenuitem",onClick:()=>{e.action&&e.action()},text:e.text,icon:this.props.mobile&&e.mobileIcon}));return y.a.createElement(Ei.a,{mobile:this.props.mobile,id:this.props.id,ariaLabel:Object(M.fb)("navbar_dropdown.menuAriaLabel","main menu")},y.a.createElement(Ei.a.Group,null,y.a.createElement(Ei.a.ItemAction,{id:"recentMentions",show:this.props.mobile,onClick:this.searchMentions,icon:this.props.mobile&&y.a.createElement("i",{className:"mentions"},"@"),text:Object(M.fb)("sidebar_right_menu.recentMentions","Recent Mentions")}),y.a.createElement(Ei.a.ItemAction,{id:"flaggedPosts",show:this.props.mobile,onClick:this.getFlagged,icon:this.props.mobile&&y.a.createElement("i",{className:"fa fa-flag"}),text:Object(M.fb)("sidebar_right_menu.flagged","Flagged Posts")})),y.a.createElement(Ei.a.Group,null,y.a.createElement(Ei.a.ItemToggleModalRedux,{id:"accountSettings",modalId:S.s.USER_SETTINGS,dialogType:Is.a,text:Object(M.fb)("navbar_dropdown.accountSettings","Account Settings"),icon:this.props.mobile&&y.a.createElement("i",{className:"fa fa-cog"})})),y.a.createElement(Ei.a.Group,null,y.a.createElement(Yd.a,{teamId:this.props.teamId,permissions:[x.Permissions.MANAGE_TEAM]},y.a.createElement(Ei.a.ItemToggleModalRedux,{id:"addGroupsToTeam",show:t,modalId:S.s.ADD_GROUPS_TO_TEAM,dialogType:Gm.a,text:Object(M.fb)("navbar_dropdown.addGroupsToTeam","Add Groups to Team"),icon:this.props.mobile&&y.a.createElement("i",{className:"fa fa-user-plus"})})),y.a.createElement(Yd.a,{teamId:this.props.teamId,permissions:[x.Permissions.ADD_USER_TO_TEAM,x.Permissions.INVITE_GUEST]},y.a.createElement(Ei.a.ItemToggleModalRedux,{id:"invitePeople",modalId:S.s.INVITATION,dialogType:zd,text:Object(M.fb)("navbar_dropdown.invitePeople","Invite People"),icon:this.props.mobile&&y.a.createElement("i",{className:"fa fa-user-plus"})}))),y.a.createElement(Ei.a.Group,null,y.a.createElement(Yd.a,{teamId:this.props.teamId,permissions:[x.Permissions.MANAGE_TEAM]},y.a.createElement(Ei.a.ItemToggleModalRedux,{id:"teamSettings",modalId:S.s.TEAM_SETTINGS,dialogType:Fm,text:Object(M.fb)("navbar_dropdown.teamSettings","Team Settings"),icon:this.props.mobile&&y.a.createElement("i",{className:"fa fa-globe"})})),y.a.createElement(Yd.a,{teamId:this.props.teamId,permissions:[x.Permissions.MANAGE_TEAM]},y.a.createElement(Ei.a.ItemToggleModalRedux,{id:"manageGroups",show:t,modalId:S.s.MANAGE_TEAM_GROUPS,dialogProps:{teamID:this.props.teamId},dialogType:pu,text:Object(M.fb)("navbar_dropdown.manageGroups","Manage Groups"),icon:this.props.mobile&&y.a.createElement("i",{className:"fa fa-user-plus"})})),y.a.createElement(Yd.a,{teamId:this.props.teamId,permissions:[x.Permissions.REMOVE_USER_FROM_TEAM,x.Permissions.MANAGE_TEAM_ROLES]},y.a.createElement(Ei.a.ItemToggleModalRedux,{id:"manageMembers",modalId:S.s.TEAM_MEMBERS,dialogType:bm,text:Object(M.fb)("navbar_dropdown.manageMembers","Manage Members"),icon:this.props.mobile&&y.a.createElement("i",{className:"fa fa-users"})})),y.a.createElement(Yd.a,{teamId:this.props.teamId,permissions:[x.Permissions.REMOVE_USER_FROM_TEAM,x.Permissions.MANAGE_TEAM_ROLES],invert:!0},y.a.createElement(Ei.a.ItemToggleModalRedux,{id:"viewMembers",modalId:S.s.TEAM_MEMBERS,dialogType:bm,text:Object(M.fb)("navbar_dropdown.viewMembers","View Members"),icon:this.props.mobile&&y.a.createElement("i",{className:"fa fa-users"})}))),y.a.createElement(Ei.a.Group,null,y.a.createElement(Kd.a,{permissions:[x.Permissions.CREATE_TEAM]},y.a.createElement(Ei.a.ItemLink,{id:"createTeam",to:"/create_team",text:Object(M.fb)("navbar_dropdown.create","Create a New Team"),icon:this.props.mobile&&y.a.createElement("i",{className:"fa fa-plus-square"})})),y.a.createElement(Ei.a.ItemLink,{id:"joinTeam",show:!this.props.experimentalPrimaryTeam&&this.props.moreTeamsToJoin,to:"/select_team",text:Object(M.fb)("navbar_dropdown.join","Join Another Team"),icon:this.props.mobile&&y.a.createElement("i",{className:"fa fa-plus-square"})}),y.a.createElement(Ei.a.ItemToggleModalRedux,{id:"leaveTeam",show:!t&&this.props.experimentalPrimaryTeam!==this.props.teamName,modalId:S.s.LEAVE_TEAM,dialogType:em,text:Object(M.fb)("navbar_dropdown.leave","Leave Team"),icon:this.props.mobile&&y.a.createElement(Qd,null)})),y.a.createElement(Ei.a.Group,null,n),y.a.createElement(Ei.a.Group,null,y.a.createElement(Yd.a,{teamId:this.props.teamId,permissions:[x.Permissions.MANAGE_SLASH_COMMANDS,x.Permissions.MANAGE_OAUTH,x.Permissions.MANAGE_INCOMING_WEBHOOKS,x.Permissions.MANAGE_OUTGOING_WEBHOOKS]},y.a.createElement(Ei.a.ItemLink,{id:"integrations",show:!this.props.mobile&&(this.props.enableIncomingWebhooks||this.props.enableOutgoingWebhooks||this.props.enableCommands||this.props.enableOAuthServiceProvider),to:"/"+this.props.teamName+"/integrations",text:Object(M.fb)("navbar_dropdown.integrations","Integrations")})),y.a.createElement(Yd.a,{teamId:this.props.teamId,permissions:[x.Permissions.MANAGE_SYSTEM]},y.a.createElement(Ei.a.ItemToggleModalRedux,{id:"marketplaceModal",modalId:S.s.PLUGIN_MARKETPLACE,show:!this.props.mobile&&this.props.enablePluginMarketplace,dialogType:su,text:Object(M.fb)("navbar_dropdown.marketplace","Plugin Marketplace")})),y.a.createElement(Ei.a.ItemLink,{id:"customEmojis",show:!this.props.mobile&&this.props.enableCustomEmoji&&this.props.canCreateOrDeleteCustomEmoji,to:"/"+this.props.teamName+"/emoji",text:Object(M.fb)("navbar_dropdown.emoji","Custom Emoji")})),y.a.createElement(Ei.a.Group,null,y.a.createElement(Kd.a,{permissions:[x.Permissions.MANAGE_SYSTEM]},y.a.createElement(Ei.a.ItemLink,{id:"systemConsole",show:!this.props.mobile,to:"/admin_console",text:Object(M.fb)("navbar_dropdown.console","System Console"),icon:this.props.mobile&&y.a.createElement("i",{className:"fa fa-wrench"})}))),y.a.createElement(Ei.a.Group,null,y.a.createElement(Ei.a.ItemExternalLink,{id:"helpLink",show:Boolean(this.props.helpLink),url:this.props.helpLink,text:Object(M.fb)("navbar_dropdown.help","Help"),icon:this.props.mobile&&y.a.createElement("i",{className:"fa fa-question"})}),y.a.createElement(Ei.a.ItemAction,{id:"keyboardShortcuts",show:!this.props.mobile,onClick:this.toggleShortcutsModal,text:Object(M.fb)("navbar_dropdown.keyboardShortcuts","Keyboard Shortcuts")}),y.a.createElement(Ei.a.ItemExternalLink,{id:"reportLink",show:Boolean(this.props.reportAProblemLink),url:this.props.reportAProblemLink,text:Object(M.fb)("navbar_dropdown.report","Report a Problem"),icon:this.props.mobile&&y.a.createElement("i",{className:"fa fa-phone"})}),y.a.createElement(Ei.a.ItemExternalLink,{id:"nativeAppLink",show:this.props.appDownloadLink&&!P.n(),url:Object(Mn.g)(this.props.appDownloadLink),text:Object(M.fb)("navbar_dropdown.nativeApps","Download Apps"),icon:this.props.mobile&&y.a.createElement("i",{className:"fa fa-mobile"})}),y.a.createElement(Ei.a.ItemToggleModalRedux,{id:"about",modalId:S.s.ABOUT,dialogType:Bm.a,text:a({id:"navbar_dropdown.about",defaultMessage:"About {appTitle}"},{appTitle:this.props.siteName||"Vue"}),icon:this.props.mobile&&y.a.createElement("i",{className:"fa fa-info"})})),y.a.createElement(Ei.a.Group,null,y.a.createElement(Ei.a.ItemAction,{id:"logout",onClick:this.handleEmitUserLoggedOutEvent,text:Object(M.fb)("navbar_dropdown.logout","Logout"),icon:this.props.mobile&&y.a.createElement("i",{className:"fa fa-sign-out"})})))}}hu(gu,"propTypes",{mobile:_.a.bool.isRequired,id:_.a.string,teamId:_.a.string,teamType:_.a.string,teamName:_.a.string,siteName:_.a.string,currentUser:_.a.object,appDownloadLink:_.a.string,enableCommands:_.a.bool.isRequired,enableCustomEmoji:_.a.bool.isRequired,canCreateOrDeleteCustomEmoji:_.a.bool.isRequired,enableIncomingWebhooks:_.a.bool.isRequired,enableOAuthServiceProvider:_.a.bool.isRequired,enableOutgoingWebhooks:_.a.bool.isRequired,enableUserCreation:_.a.bool.isRequired,enableEmailInvitations:_.a.bool.isRequired,enablePluginMarketplace:_.a.bool.isRequired,experimentalPrimaryTeam:_.a.string,helpLink:_.a.string,reportAProblemLink:_.a.string,moreTeamsToJoin:_.a.bool.isRequired,pluginMenuItems:_.a.arrayOf(_.a.object),isMentionSearch:_.a.bool,teamIsGroupConstrained:_.a.bool.isRequired,actions:_.a.shape({openModal:_.a.func.isRequred,showMentions:_.a.func,showFlaggedPosts:_.a.func,closeRightHandSide:_.a.func.isRequired,closeRhsMenu:_.a.func.isRequired}).isRequired}),hu(gu,"defaultProps",{teamType:"",mobile:!1,pluginMenuItems:[]}),hu(gu,"contextTypes",{intl:W.i.isRequired});var bu=Object(n.connect)(function(e){const t=Object(d.getConfig)(e),a=Object(u.getCurrentTeam)(e),n=Object(m.getCurrentUser)(e),s=t.AppDownloadLink,i="true"===t.EnableCommands,o="true"===t.EnableCustomEmoji,r=t.SiteName,l="true"===t.EnableIncomingWebhooks,c="true"===t.EnableOAuthServiceProvider,p="true"===t.EnableOutgoingWebhooks,h="true"===t.EnableUserCreation,g="true"===t.EnableEmailInvitations,b="true"===t.PluginsEnabled&&"true"===t.EnableMarketplace,f=t.ExperimentalPrimaryTeam,E=t.HelpLink,_=t.ReportAProblemLink;let v=Object(D.haveISystemPermission)(e,{permission:x.Permissions.CREATE_EMOJIS})||Object(D.haveISystemPermission)(e,{permission:x.Permissions.DELETE_EMOJIS});if(!v)for(const t of Object(u.getMyTeams)(e))if(Object(D.haveITeamPermission)(e,{team:t.id,permission:x.Permissions.CREATE_EMOJIS})||Object(D.haveITeamPermission)(e,{team:t.id,permission:x.Permissions.DELETE_EMOJIS})){v=!0;break}const y=Object(u.getJoinableTeamIds)(e),C=y&&y.length>0,w=Object(ms.k)(e);return{appDownloadLink:s,enableCommands:i,enableCustomEmoji:o,enableIncomingWebhooks:l,enableOAuthServiceProvider:c,enableOutgoingWebhooks:p,enableUserCreation:h,enableEmailInvitations:g,enablePluginMarketplace:b,experimentalPrimaryTeam:f,helpLink:E,reportAProblemLink:_,pluginMenuItems:e.plugins.components.MainMenu,canCreateOrDeleteCustomEmoji:v,moreTeamsToJoin:C,siteName:r,teamId:a.id,teamName:a.name,teamType:a.type,currentUser:n,isMentionSearch:w===S.B.MENTION,teamIsGroupConstrained:Boolean(a.group_constrained)}},function(e){return{actions:Object(s.bindActionCreators)({openModal:U.b,showMentions:ds.l,showFlaggedPosts:ds.k,closeRightHandSide:ds.b,closeRhsMenu:ds.a},e)}})(gu);function fu(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Eu=500;class _u extends y.a.PureComponent{constructor(...e){super(...e),fu(this,"handleEmitUserLoggedOutEvent",()=>{O.e()})}render(){var e="";null!=this.props.siteName&&(e=this.props.siteName);var t=e;this.props.teamDisplayName&&(t=this.props.teamDisplayName);let a=null;return this.props.showTutorialTip&&(a=y.a.createElement(ed,{onBottom:!0}),this.props.actions.openRhsMenu()),y.a.createElement("div",{className:ps()("sidebar--menu",{"move--left":this.props.isOpen&&M.Z()}),id:"sidebar-menu"},y.a.createElement("div",{className:"team__header theme"},y.a.createElement(vn.a,{className:"team__name",to:"/channels/".concat(S.i.DEFAULT_CHANNEL)},t)),y.a.createElement("div",{className:"nav-pills__container mobile-main-menu"},a,y.a.createElement(Gc.a,{in:this.props.isOpen&&M.Z(),classNames:"MobileRightSidebarMenu",enter:!0,exit:!0,mountOnEnter:!0,unmountOnExit:!0,timeout:{enter:Eu,exit:Eu}},y.a.createElement(bu,{mobile:!0}))))}}fu(_u,"propTypes",{isOpen:_.a.bool.isRequired,teamDisplayName:_.a.string,showTutorialTip:_.a.bool.isRequired,siteName:_.a.string,actions:_.a.shape({openRhsMenu:_.a.func.isRequired})});var vu=Object(n.connect)(function(e){const t=Object(d.getConfig)(e),a=Object(u.getCurrentTeam)(e),n="true"===t.EnableTutorial,s=Object(c.getInt)(e,S.A.TUTORIAL_STEP,Object(m.getCurrentUserId)(e),S.J.FINISHED),i=t.SiteName;return{teamDisplayName:a.display_name,isOpen:Object(ms.b)(e),showTutorialTip:n&&Object(M.Z)()&&s===S.J.MENU_POPOVER,siteName:i}},function(e){return{actions:Object(s.bindActionCreators)({openRhsMenu:ds.d},e)}})(_u);function yu(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Cu=S.Q.ActionTypes;class wu extends y.a.Component{constructor(e){super(e),yu(this,"updateShow",(e,t)=>{this.setState({show:e,callback:t.callback})}),yu(this,"handleSubmit",e=>{e.preventDefault();const t=this.state.value;if(!this.isInputValid(t))return void this.setState({inputError:y.a.createElement(W.c,{id:"user.settings.import_theme.submitError",defaultMessage:"Invalid format, please try copying and pasting in again."})});const a=t.split(","),n={type:"custom"};n.sidebarBg=a[0],n.sidebarText=a[5],n.sidebarUnreadText=a[5],n.sidebarTextHoverBg=a[4],n.sidebarTextActiveBorder=a[2],n.sidebarTextActiveColor=a[3],n.sidebarHeaderBg=a[1],n.sidebarHeaderTextColor=a[5],n.onlineIndicator=a[6],n.awayIndicator="#E0B333",n.mentionBg=a[7],n.mentionColor="#ffffff",n.centerChannelBg="#ffffff",n.centerChannelColor="#333333",n.newMessageSeparator="#F80",n.linkColor="#2389d7",n.buttonBg="#26a970",n.buttonColor="#ffffff",n.mentionHighlightBg="#fff2bb",n.mentionHighlightLink="#2f81b7",n.codeTheme="github",this.state.callback(n),this.setState({show:!1,callback:null})}),yu(this,"handleChange",e=>{const t=e.target.value;this.setState({value:t}),this.isInputValid(t)?this.setState({inputError:null}):this.setState({inputError:y.a.createElement(W.c,{id:"user.settings.import_theme.submitError",defaultMessage:"Invalid format, please try copying and pasting in again."})})}),yu(this,"handleOnHide",()=>{this.setState({show:!1})}),this.state={value:"",inputError:"",show:!1,callback:null}}componentDidMount(){Ln.addModalListener(Cu.TOGGLE_IMPORT_THEME_MODAL,this.updateShow)}componentWillUnmount(){Ln.removeModalListener(Cu.TOGGLE_IMPORT_THEME_MODAL,this.updateShow)}isInputValid(e){if(0===e.length)return!1;if(-1!==e.indexOf(" "))return!1;if(e.length>0&&-1===e.indexOf(","))return!1;if(e.length>0){const t=e.split(",");if(8!==t.length)return!1;for(let e=0;e<t.length;e++){if(7!==t[e].length&&4!==t[e].length)return!1;if("#"!==t[e].charAt(0))return!1}}return!0}render(){return y.a.createElement("span",null,y.a.createElement(V.a,{dialogClassName:"a11y__modal",show:this.state.show,onHide:this.handleOnHide,role:"dialog","aria-labelledby":"importThemeModalLabel"},y.a.createElement(V.a.Header,{closeButton:!0},y.a.createElement(V.a.Title,{componentClass:"h1",id:"importThemeModalLabel"},y.a.createElement(W.c,{id:"user.settings.import_theme.importHeader",defaultMessage:"Import Slack Theme"}))),y.a.createElement("form",{role:"form",className:"form-horizontal"},y.a.createElement(V.a.Body,null,y.a.createElement("p",null,y.a.createElement(W.c,{id:"user.settings.import_theme.importBody",defaultMessage:'To import a theme, go to a Slack team and look for "Preferences -> Sidebar Theme". Open the custom theme option, copy the theme color values and paste them here:'})),y.a.createElement("div",{className:"form-group less"},y.a.createElement("div",{className:"col-sm-12"},y.a.createElement("input",{id:"themeVector",type:"text",className:"form-control",value:this.state.value,onChange:this.handleChange}),y.a.createElement("div",{className:"input__help"},this.state.inputError)))),y.a.createElement(V.a.Footer,null,y.a.createElement("button",{id:"cancelButton",type:"button",className:"btn btn-link",onClick:this.handleOnHide},y.a.createElement(W.c,{id:"user.settings.import_theme.cancel",defaultMessage:"Cancel"})),y.a.createElement("button",{id:"submitButton",onClick:this.handleSubmit,type:"submit",className:"btn btn-primary",tabIndex:"3"},y.a.createElement(W.c,{id:"user.settings.import_theme.submit",defaultMessage:"Submit"}))))))}}var Tu=a(1295);function Ou(e){return e.views.lhs.isOpen}var Su=a(1035),Pu=(a(233),a(1835));function Mu(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Nu extends y.a.Component{constructor(...e){super(...e),Mu(this,"copy",()=>{let e=this.props.link;-1===e.indexOf("http://")&&-1===e.indexOf("https://")&&(e=this.props.siteURL+e),this.props.actions.copyToClipboard(e)})}render(){const e=y.a.createElement(Pu.a,{id:"copy-url-context-menu"+this.props.menuId},y.a.createElement(Pu.c,{onClick:this.copy},y.a.createElement(W.c,{id:"copy_url_context_menu.getChannelLink",defaultMessage:"Copy Link"}))),t=y.a.createElement(Pu.b,{id:"copy-url-context-menu"+this.props.menuId},this.props.children);return y.a.createElement("span",null,e,t)}}Mu(Nu,"propTypes",{children:_.a.element,link:_.a.string.isRequired,menuId:_.a.string.isRequired,siteURL:_.a.string.isRequired,actions:_.a.shape({copyToClipboard:_.a.func.isRequired})});var Iu=Object(n.connect)(function(e){return{siteURL:Object(d.getConfig)(e).SiteURL}},function(){return{actions:{copyToClipboard:M.g}}})(Nu),Au=a(1011);function ju(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ru extends y.a.Component{constructor(...e){super(...e),ju(this,"handleSwitch",e=>{e.preventDefault(),Object(Pe.b)("TeamLink#click"),Object(Pe.d)("ui","ui_team_sidebar_switch_team"),this.props.switchTeam(this.props.url)}),ju(this,"handleDisabled",e=>{e.preventDefault()})}render(){const{teamIconUrl:e,displayName:t,btnClass:a,mentions:n,unread:s}=this.props,{formatMessage:i}=this.context.intl;let o=this.props.active?"active":"";const r=this.props.disabled?"team-disabled":"",l=this.props.active||this.props.disabled?this.handleDisabled:this.handleSwitch;let c,d=i({id:"team.button.ariaLabel",defaultMessage:"{teamName} team"},{teamName:t});o||(o=s?"unread":"",d=i({id:"team.button.unread.ariaLabel",defaultMessage:"{teamName} team unread"},{teamName:t}),n&&(d=i({id:"team.button.mentions.ariaLabel",defaultMessage:"{teamName} team, {mentionCount} mentions"},{teamName:t,mentionCount:n}),c=y.a.createElement("span",{className:"badge pull-right small"},n))),d=d.toLowerCase();const m=y.a.createElement(Au.a,{withHover:!0,name:this.props.content||t,url:e}),u=this.props.tip||Object(M.fb)("team.button.name_undefined","Name undefined"),p=y.a.createElement(Qs.a,{delayShow:S.Q.OVERLAY_TIME_DELAY,placement:this.props.placement,overlay:y.a.createElement(Zs.a,{id:"tooltip-".concat(this.props.url)},u)},y.a.createElement("div",{className:"team-btn "+a},c,m));let h;return Object(P.c)()?(h=y.a.createElement("button",{className:"btn btn-link "+r,onClick:l},p),this.props.url.endsWith("create_team")||this.props.url.endsWith("select_team")||(h=y.a.createElement(Iu,{link:this.props.url,menuId:this.props.url},h))):h=y.a.createElement(vn.a,{id:"".concat(this.props.url.slice(1),"TeamButton"),"aria-label":d,className:r,to:this.props.url,onClick:l},p),y.a.createElement("div",{className:"team-container ".concat(o)},h)}}function ku(e){return y.a.createElement("div",Object.assign({},e,{className:"scrollbar--view"}))}function Lu(e){return y.a.createElement("div",Object.assign({},e,{className:"scrollbar--horizontal"}))}function xu(e){return y.a.createElement("div",Object.assign({},e,{className:"scrollbar--vertical"}))}ju(Ru,"contextTypes",{intl:W.i.isRequired}),Ru.defaultProps={btnClass:"",tip:"",placement:"right",active:!1,disabled:!1,unread:!1,mentions:0},Ru.propTypes={btnClass:_.a.string,url:_.a.string.isRequired,displayName:_.a.string,content:_.a.node,tip:_.a.node.isRequired,active:_.a.bool,disabled:_.a.bool,unread:_.a.bool,mentions:_.a.number,placement:_.a.oneOf(["left","right","top","bottom"]),teamIconUrl:_.a.string,switchTeam:_.a.func.isRequired};class Du extends y.a.PureComponent{componentDidMount(){this.props.actions.getTeams(0,200)}render(){const e=document.querySelector("#root");if(this.props.myTeams.length<=1)return e.classList.remove("multi-teams"),null;e.classList.add("multi-teams");const t=[],a=Object(Su.a)(this.props.myTeams,this.props.locale).map(e=>{const t=this.props.myTeamMembers[e.id];return y.a.createElement(Ru,{key:"switch_team_"+e.name,url:"/".concat(e.name),tip:e.display_name,active:e.id===this.props.currentTeamId,displayName:e.display_name,unread:t.msg_count>0,mentions:t.mention_count,teamIconUrl:M.M(e),switchTeam:this.props.actions.switchTeam})});return this.props.moreTeamsToJoin&&!this.props.experimentalPrimaryTeam?a.push(y.a.createElement(Ru,{btnClass:"team-btn__add",key:"more_teams",url:"/select_team",tip:y.a.createElement(W.c,{id:"team_sidebar.join",defaultMessage:"Other teams you can join."}),content:"+",switchTeam:this.props.actions.switchTeam})):a.push(y.a.createElement(Kd.a,{permissions:[$i.a.CREATE_TEAM],key:"more_teams"},y.a.createElement(Ru,{btnClass:"team-btn__add",url:"/create_team",tip:y.a.createElement(W.c,{id:"navbar_dropdown.create",defaultMessage:"Create a New Team"}),content:"+",switchTeam:this.props.actions.switchTeam}))),t.push(y.a.createElement("div",{key:"team-sidebar-bottom-plugin",className:"team-sidebar-bottom-plugin is-empty"},y.a.createElement(R.a,{pluggableName:"BottomTeamSidebar"}))),y.a.createElement("div",{className:ps()("team-sidebar",{"move--right":this.props.isOpen})},y.a.createElement("div",{className:"team-wrapper"},y.a.createElement(ws.a,{autoHide:!0,autoHideTimeout:500,autoHideDuration:500,renderThumbHorizontal:Lu,renderThumbVertical:xu,renderView:ku,onScroll:this.handleScroll},a)),t)}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Du,"propTypes",{myTeams:_.a.array.isRequired,currentTeamId:_.a.string.isRequired,moreTeamsToJoin:_.a.bool.isRequired,myTeamMembers:_.a.object.isRequired,isOpen:_.a.bool.isRequired,experimentalPrimaryTeam:_.a.string,locale:_.a.string.isRequired,actions:_.a.shape({getTeams:_.a.func.isRequired,switchTeam:_.a.func.isRequired}).isRequired});var Uu=Object(i.g)(Object(n.connect)(function(e){const t=Object(d.getConfig)(e).ExperimentalPrimaryTeam,a=Object(u.getJoinableTeamIds)(e),n=a&&a.length>0;return{currentTeamId:Object(u.getCurrentTeamId)(e),myTeams:Object(u.getMyTeams)(e),myTeamMembers:Object(u.getTeamMemberships)(e),isOpen:Ou(e),experimentalPrimaryTeam:t,locale:Object(Ss.a)(e),moreTeamsToJoin:n}},function(e){return{actions:Object(s.bindActionCreators)({getTeams:l.getTeams,switchTeam:b.e},e)}})(Du)),qu=a(996),Hu=a(1528),Fu=a(1529),Bu=a.n(Fu),Gu=a(1530),Vu=a.n(Gu),Wu=a(1531),zu=a.n(Wu),Yu=a(1532),Ku=a.n(Yu),Qu=a(1533),Zu=a.n(Qu),Ju=a(1534),Xu=a.n(Ju);function $u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const ep=500;class tp extends y.a.Component{constructor(e){super(e),$u(this,"createChannelRow",e=>{const t="".concat(e.display_name,", ").concat(e.purpose).toLowerCase();return y.a.createElement("div",{className:"more-modal__row",key:e.id},y.a.createElement("div",{className:"more-modal__details"},y.a.createElement("button",{onClick:this.handleJoin.bind(this,e),"aria-label":t,className:"style--none more-modal__name"},e.display_name),y.a.createElement("p",{className:"more-modal__description"},e.purpose)),y.a.createElement("div",{className:"more-modal__actions"},y.a.createElement("button",{onClick:this.handleJoin.bind(this,e),className:"btn btn-primary",disabled:this.state.joiningChannel},y.a.createElement(Ic.a,{loading:this.state.joiningChannel===e.id,text:Object(M.fb)("more_channels.joining","Joining...")},y.a.createElement(W.c,{id:"more_channels.join",defaultMessage:"Join"})))))}),$u(this,"nextPage",e=>{e.preventDefault(),this.setState({page:this.state.page+1,nextDisabled:!0}),this.nextTimeoutId=setTimeout(()=>this.setState({nextDisabled:!1}),ep),this.props.nextPage(this.state.page+1),ys()(bi.a.findDOMNode(this.refs.channelListScroll)).scrollTop(0)}),$u(this,"previousPage",e=>{e.preventDefault(),this.setState({page:this.state.page-1}),ys()(bi.a.findDOMNode(this.refs.channelListScroll)).scrollTop(0)}),$u(this,"doSearch",()=>{const e=this.refs.filter.value;this.props.search(e),""===e&&this.setState({page:0})}),this.nextTimeoutId=0,this.state={joiningChannel:"",page:0,nextDisabled:!1}}componentDidMount(){!P.m()&&this.refs.filter&&this.refs.filter.focus()}componentDidUpdate(e,t){t.page!==this.state.page&&ys()(this.refs.channelList).scrollTop(0)}UNSAFE_componentWillReceiveProps(e){e.isSearch&&!this.props.isSearch&&this.setState({page:0})}handleJoin(e){this.setState({joiningChannel:e.id}),this.props.handleJoin(e,()=>{this.setState({joiningChannel:""})})}render(){const e=this.props.channels;let t,a,n;if(this.props.loading&&0===e.length)t=y.a.createElement(Km.a,{style:{marginTop:"50%"}});else if(0===e.length)t=y.a.createElement("div",{className:"no-channel-message"},y.a.createElement("p",{className:"primary-message"},y.a.createElement(W.c,{id:"more_channels.noMore",defaultMessage:"No more channels to join"})),this.props.noResultsText);else{const e=this.state.page*this.props.channelsPerPage,s=e+this.props.channelsPerPage,i=this.props.channels.slice(e,s);t=i.map(this.createChannelRow),i.length>=this.props.channelsPerPage&&s<this.props.channels.length&&(a=y.a.createElement("button",{className:"btn btn-link filter-control filter-control__next",onClick:this.nextPage,disabled:this.state.nextDisabled},y.a.createElement(W.c,{id:"more_channels.next",defaultMessage:"Next"}))),this.state.page>0&&(n=y.a.createElement("button",{className:"btn btn-link filter-control filter-control__prev",onClick:this.previousPage},y.a.createElement(W.c,{id:"more_channels.prev",defaultMessage:"Previous"})))}let s=y.a.createElement("div",{className:"filter-row filter-row--full"},y.a.createElement("div",{className:"col-sm-12"},y.a.createElement(zm.a,{id:"searchChannelsTextbox",ref:"filter",className:"form-control filter-textbox",placeholder:{id:Object(le.b)("filtered_channels_list.search"),defaultMessage:"Search channels"},inputComponent:re.a,onInput:this.doSearch})));return this.props.createChannelButton&&(s=y.a.createElement("div",{className:"channel_search"},y.a.createElement("div",{className:"search_input"},y.a.createElement(zm.a,{id:"searchChannelsTextbox",ref:"filter",className:"form-control filter-textbox",placeholder:{id:Object(le.b)("filtered_channels_list.search"),defaultMessage:"Search channels"},inputComponent:re.a,onInput:this.doSearch})),y.a.createElement("div",{className:"create_button"},this.props.createChannelButton))),y.a.createElement("div",{className:"filtered-user-list"},s,y.a.createElement("div",{role:"application",ref:"channelList",className:"more-modal__list"},y.a.createElement("div",{ref:"channelListScroll"},t)),y.a.createElement("div",{className:"filter-controls"},n,a))}}function ap(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}tp.defaultProps={channels:[],isSearch:!1},tp.propTypes={channels:_.a.arrayOf(_.a.object),channelsPerPage:_.a.number,nextPage:_.a.func.isRequired,isSearch:_.a.bool,search:_.a.func.isRequired,handleJoin:_.a.func.isRequired,noResultsText:_.a.object,loading:_.a.bool,createChannelButton:_.a.element};const np=50,sp=50,ip=100;class op extends y.a.Component{constructor(e){super(e),ap(this,"handleHide",()=>{this.setState({show:!1}),this.props.bodyOnly&&this.handleExit()}),ap(this,"handleExit",()=>{this.props.onModalDismissed&&this.props.onModalDismissed()}),ap(this,"onChange",e=>{this.state.search&&!e||this.setState({searchedChannels:[],serverError:null})}),ap(this,"nextPage",e=>{this.props.actions.getChannels(this.props.teamId,e+1,sp)}),ap(this,"handleJoin",(e,t)=>{const{actions:a,currentUserId:n,teamId:s,teamName:i}=this.props;a.joinChannel(n,s,e.id).then(a=>{a.error?this.setState({serverError:a.error.message}):(z.a.push(Object(Mn.b)(i,e.name)),this.handleHide()),t&&t()})}),ap(this,"search",e=>{if(clearTimeout(this.searchTimeoutId),""===e)return this.onChange(!0),this.setState({search:!1,searchedChannels:[],searching:!1}),void(this.searchTimeoutId="");this.setState({search:!0,searching:!0});const t=setTimeout(()=>{this.props.actions.searchMoreChannels(e).then(e=>{t===this.searchTimeoutId&&(e.data?this.setSearchResults(e.data):this.setState({searchedChannels:[],searching:!1}))}).catch(()=>{this.setState({searchedChannels:[],searching:!1})})},ip);this.searchTimeoutId=t}),ap(this,"setSearchResults",e=>{this.setState({searchedChannels:e.filter(e=>0===e.delete_at),searching:!1})}),this.searchTimeoutId=0,this.state={show:!0,search:!1,searchedChannels:[],serverError:null,searching:!1}}componentDidMount(){this.props.actions.getChannels(this.props.teamId,0,2*np)}render(){const{channels:e,teamId:t,channelsRequestStarted:a,bodyOnly:n}=this.props,{search:s,searchedChannels:i,serverError:o,show:r,searching:l}=this.state;let c;o&&(c=y.a.createElement("div",{className:"form-group has-error"},y.a.createElement("label",{className:"control-label"},o)));const d=y.a.createElement(Yd.a,{teamId:t,permissions:[$i.a.CREATE_PUBLIC_CHANNEL]},y.a.createElement("button",{id:"createNewChannel",type:"button",className:"btn btn-primary channel-create-btn",onClick:this.props.handleNewChannel},y.a.createElement(W.c,{id:"more_channels.create",defaultMessage:"Create New Channel"}))),m=y.a.createElement(Yd.a,{teamId:t,permissions:[$i.a.CREATE_PUBLIC_CHANNEL,$i.a.CREATE_PRIVATE_CHANNEL]},y.a.createElement("p",{className:"secondary-message"},y.a.createElement(W.c,{id:"more_channels.createClick",defaultMessage:"Click 'Create New Channel' to make a new one"}))),u=y.a.createElement(y.a.Fragment,null,y.a.createElement(tp,{channels:s?i:e,channelsPerPage:sp,nextPage:this.nextPage,isSearch:s,search:this.search,handleJoin:this.handleJoin,noResultsText:m,loading:s?l:a,createChannelButton:n&&d}),c);return n?u:y.a.createElement(V.a,{dialogClassName:"a11y__modal more-modal more-modal--action",show:r,onHide:this.handleHide,onExited:this.handleExit,role:"dialog","aria-labelledby":"moreChannelsModalLabel"},y.a.createElement(V.a.Header,{closeButton:!0},y.a.createElement(V.a.Title,{componentClass:"h1",id:"moreChannelsModalLabel"},y.a.createElement(W.c,{id:"more_channels.title",defaultMessage:"More Channels"})),d),y.a.createElement(V.a.Body,null,u))}}ap(op,"propTypes",{channels:_.a.array.isRequired,currentUserId:_.a.string.isRequired,teamId:_.a.string.isRequired,teamName:_.a.string.isRequired,onModalDismissed:_.a.func,handleNewChannel:_.a.func,channelsRequestStarted:_.a.bool,bodyOnly:_.a.bool,actions:_.a.shape({getChannels:_.a.func.isRequired,joinChannel:_.a.func.isRequired,searchMoreChannels:_.a.func.isRequired}).isRequired});const rp=Object(Ps.createSelector)(p.getOtherChannels,e=>e&&e.filter(e=>0===e.delete_at));var lp=Object(n.connect)(function(e){const t=Object(u.getCurrentTeam)(e)||{};return{channels:rp(e)||[],currentUserId:Object(m.getCurrentUserId)(e),teamId:t.id,teamName:t.name,channelsRequestStarted:e.requests.channels.getChannels.status===x.RequestStatus.STARTED}},function(e){return{actions:Object(s.bindActionCreators)({getChannels:r.getChannels,joinChannel:r.joinChannel,searchMoreChannels:an.g},e)}})(op),cp=a(995),dp=a(1010);function mp(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class up extends y.a.Component{constructor(...e){super(...e),mp(this,"addValue",()=>{this.props.onAdd(this.props.channel.profiles)})}getStyle(){let e="mentions__name";return this.props.isSelected&&(e+=" suggestion--selected"),e}displayName(){return this.props.channel.profiles.map(e=>"@"+e.username).join(", ")}render(){return y.a.createElement("div",{key:this.props.channel.id,className:"more-modal__row clickable "+this.getStyle(),onClick:this.addValue},y.a.createElement("div",{className:"more-modal__gm-icon bg-text-200"},this.props.channel.profiles.length),y.a.createElement("div",{className:"more-modal__details"},y.a.createElement("div",{className:"more-modal__name"},this.displayName())),y.a.createElement("div",{className:"more-modal__actions"},y.a.createElement("div",{className:"more-modal__actions--round"},y.a.createElement(dp.a,null))))}}function pp(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}mp(up,"propTypes",{channel:_.a.object.isRequired,isSelected:_.a.bool.isRequired,onAdd:_.a.func.isRequired});const hp=50,gp=S.Q.MAX_USERS_IN_GM-1;class bp extends y.a.Component{constructor(e){super(e),pp(this,"loadProfilesMissingStatus",(e=[],t={})=>{const a=e.filter(e=>!t[e.id]).map(e=>e.id);a.length>0&&this.props.actions.getStatusesByIds(a)}),pp(this,"handleHide",()=>{this.props.actions.setModalSearchTerm(""),this.setState({show:!1}),this.props.bodyOnly&&this.handleExit()}),pp(this,"setUsersLoadingState",e=>{this.setState({loadingUsers:e})}),pp(this,"handleExit",()=>{this.exitToChannel&&z.a.push(this.exitToChannel),this.props.onModalDismissed&&this.props.onModalDismissed(),this.props.onHide&&this.props.onHide()}),pp(this,"handleSubmit",(e=this.state.values)=>{const{actions:t}=this.props;if(this.state.saving)return;const a=e.map(e=>e.id);if(0===a.length)return;this.setState({saving:!0});const n=e=>{const{data:t,error:a}=e;this.setState({saving:!1}),a||(this.exitToChannel="/"+this.props.currentTeamName+"/channels/"+t.name,this.handleHide())};1===a.length?t.openDirectChannelToUserId(a[0]).then(n):t.openGroupChannelToUserIds(a).then(n)}),pp(this,"addValue",e=>{if(Array.isArray(e))this.addUsers(e);else if("profiles"in e)this.addUsers(e.profiles);else{const t=Object.assign([],this.state.values);-1===t.indexOf(e)&&t.push(e),this.setState({values:t})}}),pp(this,"addUsers",e=>{const t=Object.assign([],this.state.values),a=t.map(e=>e.id);for(const n of e)-1===a.indexOf(n.id)&&t.push(n);this.setState({values:t})}),pp(this,"getUserProfiles",e=>{const t=e?e+1:0;"any"===this.props.restrictDirectMessage?this.props.actions.getProfiles(t,2*hp).then(()=>{this.setUsersLoadingState(!1)}):this.props.actions.getProfilesInTeam(this.props.currentTeamId,t,2*hp).then(()=>{this.setUsersLoadingState(!1)})}),pp(this,"handlePageChange",(e,t)=>{e>t&&(this.setUsersLoadingState(!0),this.getUserProfiles(e))}),pp(this,"resetPaging",()=>{this.refs.multiselect&&this.refs.multiselect.resetPaging()}),pp(this,"search",e=>{this.props.actions.setModalSearchTerm(e)}),pp(this,"handleDelete",e=>{this.setState({values:e})}),pp(this,"renderAriaLabel",e=>e?e.username:null),pp(this,"renderOption",(e,t,a)=>{if(e.type&&"G"===e.type)return y.a.createElement(up,{key:e.id,channel:e,isSelected:t,onAdd:a});const n=Object(M.m)(e);let s=n;e.id===this.props.currentUserId?s=y.a.createElement(W.c,{id:"more_direct_channels.directchannel.you",defaultMessage:"{displayname} (you)",values:{displayname:n}}):e.delete_at&&(s=y.a.createElement(W.c,{id:"more_direct_channels.directchannel.deactivated",defaultMessage:"{displayname} - Deactivated",values:{displayname:n}}));var i="";t&&(i="more-modal__row--selected");const o=e.delete_at||e.is_bot?null:this.props.statuses[e.id],r=e.is_bot?null:e.email;return y.a.createElement("div",{key:e.id,ref:t?"selected":e.id,className:"more-modal__row clickable "+i,onClick:()=>a(e)},y.a.createElement(Go.a,{src:rn.Client4.getProfilePictureUrl(e.id,e.last_picture_update),status:o,size:"md"}),y.a.createElement("div",{className:"more-modal__details"},y.a.createElement("div",{className:"more-modal__name"},s,y.a.createElement(Wa.a,{show:Boolean(e.is_bot),className:"badge-popoverlist"}),y.a.createElement(za.a,{show:Object(M.W)(e),className:"badge-popoverlist"})),y.a.createElement("div",{className:"more-modal__description"},r)),y.a.createElement("div",{className:"more-modal__actions"},y.a.createElement("div",{className:"more-modal__actions--round"},y.a.createElement(dp.a,null))))}),pp(this,"handleSubmitImmediatelyOn",e=>e.id===this.props.currentUserId||Boolean(e.delete_at)),this.searchTimeoutId=0;const t=[];if(e.currentChannelMembers)for(let a=0;a<e.currentChannelMembers.length;a++){const n=Object.assign({},e.currentChannelMembers[a]);n.id!==e.currentUserId&&t.push(n)}this.state={values:t,show:!0,search:!1,saving:!1,loadingUsers:!0}}componentDidMount(){this.getUserProfiles(),this.props.actions.getTotalUsersStats(),this.loadProfilesMissingStatus(this.props.users,this.props.statuses)}UNSAFE_componentWillReceiveProps(e){if(this.props.searchTerm!==e.searchTerm){clearTimeout(this.searchTimeoutId);const t=e.searchTerm;if(""===t)this.resetPaging();else{const a="any"===e.restrictDirectMessage?"":e.currentTeamId;this.searchTimeoutId=setTimeout(async()=>{this.setUsersLoadingState(!0);const[{data:e},{data:n}]=await Promise.all([this.props.actions.searchProfiles(t,{team_id:a}),this.props.actions.searchGroupChannels(t)]);e&&this.props.actions.loadStatusesForProfilesList(e),n&&this.props.actions.loadProfilesForGroupChannels(n),this.resetPaging(),this.setUsersLoadingState(!1)},S.Q.SEARCH_TIMEOUT_MILLISECONDS)}}this.props.users.length===e.users.length&&Object.keys(this.props.statuses).length===Object.keys(e.statuses).length||this.loadProfilesMissingStatus(e.users,e.statuses)}renderValue(e){return e.data.username}render(){let e;this.props.currentChannelMembers&&(this.state.values&&this.state.values.length>=gp?e=y.a.createElement(W.c,{id:"more_direct_channels.new_convo_note.full",defaultMessage:"You've reached the maximum number of people for this conversation. Consider creating a private channel instead."}):this.props.isExistingChannel&&(e=y.a.createElement(W.c,{id:"more_direct_channels.new_convo_note",defaultMessage:"This will start a new conversation. If you're adding a lot of people, consider creating a private channel instead."})));const t=Object(M.fb)("multiselect.go","Go"),a=Object(M.fb)("multiselect.loading","Loading.."),n=y.a.createElement(W.c,{id:"multiselect.numPeopleRemaining",defaultMessage:"Use ↑↓ to browse, ↵ to select. You can add {num, number} more {num, plural, one {person} other {people}}. ",values:{num:gp-this.state.values.length}});let s=this.props.users||[];if(this.state.values.length)s=s.filter(e=>0===e.delete_at&&e.id!==this.props.currentUserId);else{const e=[],t=[];for(const a of s)(a.delete_at?t:e).push(a);s=e.concat(t)}const i=this.props.groupChannels||[],o=[...s,...i],r=y.a.createElement(cp.a,{key:"moreDirectChannelsList",ref:"multiselect",options:o,optionRenderer:this.renderOption,values:this.state.values,valueRenderer:this.renderValue,ariaLabelRenderer:this.renderAriaLabel,perPage:hp,handlePageChange:this.handlePageChange,handleInput:this.search,handleDelete:this.handleDelete,handleAdd:this.addValue,handleSubmit:this.handleSubmit,noteText:e,maxValues:gp,numRemainingText:n,buttonSubmitText:t,buttonSubmitLoadingText:a,submitImmediatelyOn:this.handleSubmitImmediatelyOn,saving:this.state.saving,loading:this.state.loadingUsers,users:this.props.users,totalCount:this.props.totalCount,placeholderText:Object(M.fb)("multiselect.placeholder","Search and add members")});return this.props.bodyOnly?r:y.a.createElement(V.a,{dialogClassName:"a11y__modal more-modal more-direct-channels",show:this.state.show,onHide:this.handleHide,onExited:this.handleExit,role:"dialog","aria-labelledby":"moreDmModalLabel"},y.a.createElement(V.a.Header,{closeButton:!0},y.a.createElement(V.a.Title,{componentClass:"h1",id:"moreDmModalLabel"},y.a.createElement(W.c,{id:"more_direct_channels.title",defaultMessage:"Direct Messages"}))),y.a.createElement(V.a.Body,{role:"application"},r),y.a.createElement(V.a.Footer,{className:"modal-footer--invisible"},y.a.createElement("button",{id:"closeModalButton",type:"button",className:"btn btn-link"},y.a.createElement(W.c,{id:"general_button.close",defaultMessage:"Close"}))))}}pp(bp,"propTypes",{currentUserId:_.a.string.isRequired,currentTeamId:_.a.string.isRequired,currentTeamName:_.a.string.isRequired,searchTerm:_.a.string.isRequired,users:_.a.arrayOf(_.a.object).isRequired,groupChannels:_.a.arrayOf(_.a.object).isRequired,statuses:_.a.object.isRequired,totalCount:_.a.number,currentChannelMembers:_.a.arrayOf(_.a.object),isExistingChannel:_.a.bool.isRequired,restrictDirectMessage:_.a.string,onModalDismissed:_.a.func,onHide:_.a.func,bodyOnly:_.a.bool,actions:_.a.shape({getProfiles:_.a.func.isRequired,getProfilesInTeam:_.a.func.isRequired,getStatusesByIds:_.a.func.isRequired,getTotalUsersStats:_.a.func.isRequired,loadStatusesForProfilesList:_.a.func.isRequired,loadProfilesForGroupChannels:_.a.func.isRequired,openDirectChannelToUserId:_.a.func.isRequired,openGroupChannelToUserIds:_.a.func.isRequired,searchProfiles:_.a.func.isRequired,searchGroupChannels:_.a.func.isRequired,setModalSearchTerm:_.a.func.isRequired}).isRequired});const fp=Object(ud.memoizeResult)((e,t)=>e.filter(e=>{return Object(Ga.filterProfilesMatchingTerm)(e.profiles,t).length>0}));var Ep=Object(n.connect)(function(e,t){const a=Object(m.getCurrentUserId)(e);let n=[];t.isExistingChannel&&(n=Object(m.getProfilesInCurrentChannel)(e));const s=Object(d.getConfig)(e).RestrictDirectMessage,i=e.views.search.modalSearch;let o;o=i?"any"===s?Object(m.searchProfiles)(e,i,!1):Object(m.searchProfilesInCurrentTeam)(e,i,!1):"any"===s?Object(m.getProfiles)(e):Object(m.getProfilesInCurrentTeam)(e);const r=fp(Object(p.getChannelsWithUserProfiles)(e),i),l=Object(u.getCurrentTeam)(e),c=Object(m.getTotalUsersStats)(e)||{total_users_count:0};return{currentTeamId:l.id,currentTeamName:l.name,searchTerm:i,users:o,groupChannels:r,statuses:e.entities.users.statuses,currentChannelMembers:n,currentUserId:a,restrictDirectMessage:s,totalCount:c.total_users_count}},function(e){return{actions:Object(s.bindActionCreators)({getProfiles:o.getProfiles,getProfilesInTeam:o.getProfilesInTeam,getStatusesByIds:o.getStatusesByIds,getTotalUsersStats:o.getTotalUsersStats,loadStatusesForProfilesList:h.b,loadProfilesForGroupChannels:$n.i,openDirectChannelToUserId:an.e,openGroupChannelToUserIds:an.f,searchProfiles:o.searchProfiles,searchGroupChannels:r.searchGroupChannels,setModalSearchTerm:tm.a},e)}})(bp);class _p extends y.a.PureComponent{render(){return y.a.createElement("span",Object.assign({},this.props,{id:"draftIcon"}),y.a.createElement(W.c,{id:"generic_icons.channel.draft",defaultMessage:"Channel Draft Icon"},e=>y.a.createElement("svg",{width:"14px",height:"14px",viewBox:"0 0 50 51",role:"icon","aria-label":e},y.a.createElement("g",{stroke:"none",strokeWidth:"1",fillRule:"evenodd"},y.a.createElement("path",{d:"M11.980198,46.7136356 L14.9834983,43.7103353 L7.22772277,35.9545597 L4.22442244,38.95786 L4.22442244,42.4892132 L8.44884488,42.4892132 L8.44884488,46.7136356 L11.980198,46.7136356 Z M29.2409241,16.0865729 C29.2409241,15.6025221 28.9989023,15.3605003 28.5148515,15.3605003 C28.2948284,15.3605003 28.1078116,15.4375072 27.9537954,15.5915234 L10.0660066,33.4793122 C9.91199043,33.6333283 9.8349835,33.8203452 9.8349835,34.0403683 C9.8349835,34.5244191 10.0770053,34.7664409 10.5610561,34.7664409 C10.7810792,34.7664409 10.968096,34.6894339 11.1221122,34.5354178 L29.009901,16.647629 C29.1639172,16.4936128 29.2409241,16.306596 29.2409241,16.0865729 Z M27.4587459,9.74993922 L41.1881188,23.4793122 L13.7293729,50.938058 L0,50.938058 L0,37.2086851 L27.4587459,9.74993922 Z M50,12.9182561 C50,14.0843785 49.5929634,15.0744676 48.7788779,15.8885531 L43.30033,21.3671009 L29.5709571,7.637728 L35.049505,2.19218345 C35.8415881,1.35609566 36.8316772,0.938058036 38.019802,0.938058036 C39.1859244,0.938058036 40.1870145,1.35609566 41.0231023,2.19218345 L48.7788779,9.91495573 C49.5929634,10.7730458 50,11.7741359 50,12.9182561 Z"})))))}}function vp(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function yp(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Cp=nn.a.getState;const wp=Object(n.connect)(function(e,t){const a=t.item&&t.item.channel?t.item.channel.id:"",n=!!a&&Object(ms.i)(e,S.H.DRAFT,a);return{channelMember:Object(p.getMyChannelMemberships)(e)[a],hasDraft:n&&Boolean(n.message.trim()||n.fileInfos.length||n.uploadsInProgress.length)}})(class extends Ka.a{static get propTypes(){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?vp(a,!0).forEach(function(t){yp(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):vp(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},super.propTypes,{channelMember:_.a.object,hasDraft:_.a.bool})}render(){const{item:e,isSelection:t}=this.props,a=e.channel,n=a.delete_at&&0!==a.delete_at,s=this.props.channelMember;let i=null;s&&s.notify_props&&s.mention_count>0&&(i=y.a.createElement("span",{className:"badge"},s.mention_count));let o="mentions__name";t&&(o+=" suggestion--selected");const r=a.display_name;let l=null;l=n?y.a.createElement(Cc.a,{className:"icon icon__archive"}):this.props.hasDraft?y.a.createElement(_p,{className:"icon icon__draft icon--body"}):a.type===S.i.OPEN_CHANNEL?y.a.createElement(Md.a,{className:"icon icon__globe icon--body"}):a.type===S.i.PRIVATE_CHANNEL?y.a.createElement(Nd.a,{className:"icon icon__lock icon--body"}):a.type===S.i.GM_CHANNEL?y.a.createElement("div",{className:"status status--group"},"G"):y.a.createElement("div",{className:"pull-left"},y.a.createElement(Ya.a,{size:"xs",url:M.N(a.userId)}));let c=null;if(a.type===S.i.DM_CHANNEL){var d=M.u(a.id);M.S(d)&&(d=Object(m.getUser)(Cp(),a.userId)),c=y.a.createElement(y.a.Fragment,null,y.a.createElement(Wa.a,{show:Boolean(d&&d.is_bot),className:"badge-autocomplete"}),y.a.createElement(za.a,{show:Boolean(d&&M.W(d)),className:"badge-autocomplete"}))}return y.a.createElement("div",Object.assign({onClick:this.handleClick,className:o,id:"switchChannel_".concat(a.name),"data-testid":a.name},Ka.a.baseProps),l,y.a.createElement("span",null,r),c,i)}});let Tp="";function Op(e,t){const a=!!e.channel.delete_at&&0!==e.channel.delete_at,n=!!t.channel.delete_at&&0!==t.channel.delete_at;if(a&&!n)return 1;if(!a&&n)return-1;if(e.type===S.i.MENTION_CHANNELS&&t.type===S.i.MENTION_MORE_CHANNELS)return-1;if(t.type===S.i.MENTION_CHANNELS&&e.type===S.i.MENTION_MORE_CHANNELS)return 1;if(e.deactivated&&!t.deactivated)return 1;if(t.deactivated&&!e.deactivated)return-1;const s=e.channel,i=t.channel;let o=s.display_name.toLowerCase(),r=i.display_name.toLowerCase();s.type===S.i.DM_CHANNEL&&(o=o.substring(1)),i.type===S.i.DM_CHANNEL&&(r=r.substring(1));const l=o.startsWith(Tp),c=r.startsWith(Tp);return l&&c||!l&&!c?Object(en.sortChannelsByTypeAndDisplayName)("en",s,i):l?-1:1}class Sp extends Va.a{handlePretextChanged(e,t){if(e){Tp=e,this.startNewRequest(e);const a=Object(p.getChannelsInCurrentTeam)(Cp()).concat(Object(p.getDirectAndGroupChannels)(Cp())),n=Object.assign([],Object(m.searchProfiles)(Cp(),e,!1));this.formatChannelsAndDispatch(e,t,a,n,!0),this.fetchUsersAndChannels(e,t)}else this.formatUnreadChannelsAndDispatch(t);return!0}async fetchUsersAndChannels(e,t){const a=Cp(),n=Object(u.getCurrentTeamId)(a);if(!n)return;let s;s="team"===Object(d.getConfig)(a).RestrictDirectMessage?rn.Client4.autocompleteUsers(e,n,""):rn.Client4.autocompleteUsers(e,"","");const i=r.searchChannels(n,e)(nn.a.dispatch,nn.a.getState);let o=[],l=[];try{o=await s;const{data:e}=await i;l=e}catch(e){nn.a.dispatch(Object(H.logError)(e))}if(this.shouldCancelDispatch(e))return;const c=Object.assign([],Object(m.searchProfiles)(a,e,!1)).concat(o.users),h=Object(m.getCurrentUserId)(a);nn.a.dispatch({type:tn.UserTypes.RECEIVED_PROFILES_LIST,data:c.filter(e=>e.id!==h)});const g=Object(p.getChannelsInCurrentTeam)(a).concat(Object(p.getDirectAndGroupChannels)(a)).concat(l);this.formatChannelsAndDispatch(e,t,g,c)}userWrappedChannel(e,t){let a="@".concat(e.username);return(e.first_name||e.last_name)&&e.nickname?a+=" - ".concat(M.A(e)," (").concat(e.nickname,")"):e.nickname?a+=" - (".concat(e.nickname,")"):(e.first_name||e.last_name)&&(a+=" - ".concat(M.A(e))),e.delete_at&&(a+=" - "+M.fb("channel_switch_modal.deactivated","Deactivated")),{channel:{display_name:a,name:e.username,id:t?t.id:e.id,userId:e.id,update_at:e.update_at,type:S.i.DM_CHANNEL,last_picture_update:e.last_picture_update||0},name:e.username,deactivated:e.delete_at}}formatChannelsAndDispatch(e,t,a,n,s=!1){const i=[],o=Object(p.getMyChannelMemberships)(Cp());if(this.shouldCancelDispatch(e))return;const r={},l=function(e){const t=e.toLowerCase(),a=Cp(),n=Object(m.getUserIdsInChannels)(a),s={};return e=>{let i=e.display_name;if(e.type===S.i.GM_CHANNEL||e.type===S.i.DM_CHANNEL){const t=n[e.id]||new Set([]);if(!t.size&&e.type===S.i.DM_CHANNEL){const n=M.I(e.name);Object(m.getUser)(a,n)&&t.add(n)}for(const e of t){let t=s[e];if(!t){const n=Object(m.getUser)(a,e);if(!n)continue;const{nickname:i,username:o}=n;t="".concat(i).concat(o).concat(M.A(n)),s[e]=t}i+=t}}return i.toLowerCase().includes(t)}}(e),u=Cp(),h=Object(d.getConfig)(u),g="true"===h.ExperimentalViewArchivedChannels;for(const t of Object.keys(a)){const d=a[t];if(!r[d.id]&&l(d)){const t=Object.assign({},d),a=0!==d.delete_at;let l={channel:t,name:t.name,deactivated:!1};if(!g&&a)continue;if(a&&o[d.id])l.type=S.i.ARCHIVED_CHANNEL;else{if(a&&!o[d.id])continue;if(t.type===S.i.GM_CHANNEL){if(t.name=t.display_name,l.name=t.name,Object(en.isGroupChannelVisible)(h,Object(c.getMyPreferences)(u),d,Object(Na.getLastPostPerChannel)(u)[d.id],Object(en.isUnreadChannel)(Object(p.getMyChannelMemberships)(u),d)))l.type=S.i.MENTION_CHANNELS;else if(l.type=S.i.MENTION_MORE_CHANNELS,s)continue}else if(t.type===S.i.DM_CHANNEL){const e=M.I(t.name),a=n.find(t=>t.id===e);if(!a)continue;if(r[a.id]=!0,l=this.userWrappedChannel(a,t),Object(en.isDirectChannelVisible)(a.id,h,Object(c.getMyPreferences)(u),d,Object(Na.getLastPostPerChannel)(u)[d.id],Object(en.isUnreadChannel)(Object(p.getMyChannelMemberships)(u),d)))l.type=S.i.MENTION_CHANNELS;else if(l.type=S.i.MENTION_MORE_CHANNELS,s)continue}else if(o[d.id])l.type=S.i.MENTION_CHANNELS;else if(l.type=S.i.MENTION_MORE_CHANNELS,s||!t.display_name.toLowerCase().startsWith(e))continue}r[d.id]=!0,i.push(l)}}for(let e=0;e<n.length;e++){const t=n[e];if(r[t.id])continue;const a=Object(c.getBool)(Cp(),x.Preferences.CATEGORY_DIRECT_CHANNEL_SHOW,t.id,!1),o=this.userWrappedChannel(t);if(a)o.type=S.i.MENTION_CHANNELS;else if(o.type=S.i.MENTION_MORE_CHANNELS,s)continue;r[t.id]=!0,i.push(o)}const b=i.sort(Op).map(e=>e.channel.name);s&&i.push({type:S.i.MENTION_MORE_CHANNELS,loading:!0}),t({matchedPretext:e,terms:b,items:i,component:wp})}formatUnreadChannelsAndDispatch(e){const t=Object(p.makeGetChannel)(),a=Object(p.getSortedUnreadChannelIds)(Cp(),!1),n=[];for(let e=0;e<a.length;e++){const s=t(Cp(),{id:a[e]})||{};let i={channel:s,name:s.name,deactivated:!1};if(s.type===S.i.GM_CHANNEL)i.name=s.display_name;else if(s.type===S.i.DM_CHANNEL){const e=Object(m.getUser)(Cp(),M.I(s.name));if(!e)continue;i=this.userWrappedChannel(e,s)}i.type=S.i.MENTION_UNREAD_CHANNELS,n.push(i)}e({matchedPretext:"",terms:n.map(e=>e.channel.name),items:n,component:wp})}}const Pp=nn.a.getState;class Mp extends Ka.a{render(){const{item:e,isSelection:t}=this.props;let a="mentions__name";return t&&(a+=" suggestion--selected"),y.a.createElement("div",Object.assign({onClick:this.handleClick,className:a},Ka.a.baseProps),y.a.createElement("div",{className:"status"},y.a.createElement(W.c,{id:"general_tab.teamIcon",defaultMessage:"Team Icon"},e=>y.a.createElement("i",{className:"fa fa-group",title:e}))),e.display_name)}}let Np="";function Ip(e,t){const a=e.display_name.toLowerCase(),n=t.display_name.toLowerCase(),s=a.startsWith(Np),i=n.startsWith(Np);if(s&&i){const s=Object(Ss.a)(Pp());return a!==n?a.localeCompare(n,s,{numeric:!0}):e.name.localeCompare(t.name,s,{numeric:!0})}return s?-1:1}class Ap extends Va.a{handlePretextChanged(e,t){if(e){Np=e,this.startNewRequest(e);const a=u.getMyTeams(Pp()).filter(t=>-1!==t.display_name.toLowerCase().indexOf(e)||-1!==t.name.indexOf(e)),n=a.sort(Ip).map(e=>e.name);return t({matchedPretext:e,terms:n,items:a,component:Mp}),!0}return!1}}function jp(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Rp="channel",kp="team";class Lp extends y.a.PureComponent{constructor(e){super(e),jp(this,"focusTextbox",()=>{if(null==this.switchBox)return;const e=this.switchBox.getTextbox();document.activeElement!==e&&(e.focus(),M.jb(e))}),jp(this,"setSwitchBoxRef",e=>{this.switchBox=e,this.focusTextbox()}),jp(this,"onShow",()=>{this.setState({text:""})}),jp(this,"onHide",()=>{this.focusPostTextbox(),this.setState({text:""}),this.props.onHide()}),jp(this,"focusPostTextbox",()=>{P.m()||setTimeout(()=>{const e=document.querySelector("#post_textbox");e&&e.focus()})}),jp(this,"onChange",e=>{this.setState({text:e.target.value})}),jp(this,"handleKeyDown",e=>{M.X(e,S.Q.KeyCodes.TAB)&&(e.preventDefault(),this.switchMode())}),jp(this,"handleSubmit",async e=>{if(e)if(this.state.mode===Rp){const{joinChannelById:t,switchToChannel:a}=this.props.actions,n=e.channel;e.type===S.Q.MENTION_MORE_CHANNELS&&n.type===S.Q.OPEN_CHANNEL&&await t(n.id),a(n).then(e=>{e.data&&this.onHide()})}else z.a.push("/"+e.name),this.onHide()}),jp(this,"enableChannelProvider",()=>{this.channelProviders[0].disableDispatches=!1,this.teamProviders[0].disableDispatches=!0}),jp(this,"enableTeamProvider",()=>{this.teamProviders[0].disableDispatches=!1,this.channelProviders[0].disableDispatches=!0}),jp(this,"switchMode",()=>{this.state.mode===Rp&&this.props.showTeamSwitcher?(this.enableTeamProvider(),this.setState({mode:kp})):this.state.mode===kp&&(this.enableChannelProvider(),this.setState({mode:Rp}))}),jp(this,"handleOnClick",e=>{e.preventDefault();const t=e.currentTarget.getAttribute("data-mode");this.enableChannelProvider(),this.setState({mode:t}),this.focusTextbox()}),this.channelProviders=[new Sp],this.teamProviders=[new Ap],this.switchBox=null,this.state={text:"",mode:Rp}}render(){let e,t=this.channelProviders,a=!0,n=Object(le.b)("quick_switch_modal.channelsShortcut.windows"),s="CTRL+K";M.Y()&&(n=Object(le.b)("quick_switch_modal.channelsShortcut.mac"),s="CMD+K");let i,o=Object(le.b)("quick_switch_modal.teamsShortcut.windows"),r="CTRL+ALT+K";if(M.Y()&&(o=Object(le.b)("quick_switch_modal.teamsShortcut.mac"),r="CMD+ALT+K"),this.props.showTeamSwitcher){let i="",l="";this.state.mode===kp?(t=this.teamProviders,a=!1,l="active"):i="active",e=y.a.createElement("div",{className:"nav nav-tabs"},y.a.createElement("li",{className:i},y.a.createElement("a",{"data-mode":"channel",href:"#",onClick:this.handleOnClick},y.a.createElement(W.c,{id:"quick_switch_modal.channels",defaultMessage:"Channels"}),y.a.createElement("span",{className:"small"},y.a.createElement(W.c,{id:n,defaultMessage:s})))),y.a.createElement("li",{className:l},y.a.createElement("a",{"data-mode":"team",href:"#",onClick:this.handleOnClick},y.a.createElement(W.c,{id:"quick_switch_modal.teams",defaultMessage:"Teams"}),y.a.createElement("span",{className:"small"},y.a.createElement(W.c,{id:o,defaultMessage:r})))))}return i=M.Z()?y.a.createElement(W.c,{id:"quick_switch_modal.help_mobile",defaultMessage:"Type to find a channel."}):this.props.showTeamSwitcher?y.a.createElement(W.c,{id:"quick_switch_modal.help",defaultMessage:"Start typing then use TAB to toggle channels/teams, ↑↓ to browse, ↵ to select, and ESC to dismiss."}):y.a.createElement(W.c,{id:"quick_switch_modal.help_no_team",defaultMessage:"Type to find a channel. Use ↑↓ to browse, ↵ to select, ESC to dismiss."}),y.a.createElement(V.a,{dialogClassName:"a11y__modal channel-switch__modal",ref:"modal",show:!0,onHide:this.onHide,enforceFocus:!1,restoreFocus:!1,role:"dialog","aria-labelledby":"quickSwitchModalLabel",animation:!1},y.a.createElement(V.a.Header,{id:"quickSwitchModalLabel",closeButton:!0}),y.a.createElement(V.a.Body,null,e,y.a.createElement("div",{id:"quickSwitchHint",className:"modal__hint"},i),y.a.createElement("div",{className:"channel-switch__suggestion-box"},y.a.createElement(gn.a,{id:"quickSwitchInput",ref:this.setSwitchBoxRef,className:"form-control focused",onChange:this.onChange,value:this.state.text,onKeyDown:this.handleKeyDown,onItemSelected:this.handleSubmit,listComponent:bn.a,maxLength:"64",providers:t,listStyle:"bottom",completeOnTab:!1,spellCheck:"false",renderDividers:a,delayInputUpdate:!0,openWhenEmpty:!0}))))}}jp(Lp,"propTypes",{onHide:_.a.func.isRequired,showTeamSwitcher:_.a.bool,actions:_.a.shape({joinChannelById:_.a.func.isRequired,switchToChannel:_.a.func.isRequired}).isRequired});var xp=Object(n.connect)(function(){return{showTeamSwitcher:!1}},function(e){return{actions:Object(s.bindActionCreators)({joinChannelById:da.d,switchToChannel:da.l},e)}})(Lp);function Dp(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Up extends y.a.PureComponent{constructor(e){super(e),Dp(this,"onEnterKeyDown",e=>{const t=M.X(e,S.Q.KeyCodes.ENTER),{ctrlSend:a}=this.props;a&&t&&!e.ctrlKey?e.preventDefault():(a&&t&&e.ctrlKey||!a&&t&&!e.shiftKey&&!e.altKey)&&this.handleSubmit(e)}),Dp(this,"handleSubmit",e=>{e.preventDefault(),bi.a.findDOMNode(this.refs.display_name).value.trim().length<S.Q.MIN_CHANNELNAME_LENGTH?this.setState({displayNameError:!0}):this.props.onSubmitChannel()}),Dp(this,"handleChange",()=>{const e={displayName:this.refs.display_name.value,header:this.refs.channel_header.value,purpose:this.refs.channel_purpose.value};this.props.onDataChanged(e)}),Dp(this,"handleOnURLChange",e=>{e.preventDefault(),this.props.onChangeURLPressed&&this.props.onChangeURLPressed()}),Dp(this,"handlePublicTypeSelect",()=>{this.props.onTypeSwitched("O")}),Dp(this,"handlePrivateTypeSelect",()=>{this.props.onTypeSwitched("P")}),this.state={displayNameError:""}}UNSAFE_componentWillReceiveProps(e){!0===e.show&&!1===this.props.show&&this.setState({displayNameError:""})}componentDidMount(){(P.f()||P.d())&&ys()("body").addClass("browser--ie")}render(){const{canCreatePublicChannel:e,canCreatePrivateChannel:t}=this.props,a=e&&t;var n=null,s=null,i="form-group";this.state.displayNameError&&(n=y.a.createElement("p",{className:"input__help error"},y.a.createElement(W.c,{id:"channel_modal.displayNameError",defaultMessage:"Channel name must be 2 or more characters"}),this.state.displayNameError),i+=" has-error"),this.props.serverError&&(s=y.a.createElement("div",{className:"form-group has-error"},y.a.createElement("div",{className:"col-sm-12"},y.a.createElement("p",{id:"createChannelError",className:"input__help error"},this.props.serverError))));const o=y.a.createElement("div",{className:"flex-parent"},y.a.createElement(Md.a,{className:"icon icon__globe icon--body type-icon"}),y.a.createElement(W.c,{id:"channel_modal.publicName",defaultMessage:"Public"}),y.a.createElement(W.c,{id:"channel_modal.publicHint",defaultMessage:" - Anyone can join this channel."})),r=y.a.createElement("div",{className:"flex-parent"},y.a.createElement(Nd.a,{className:"icon icon__lock icon--body type-icon"}),y.a.createElement(W.c,{id:"channel_modal.privateName",defaultMessage:"Private"}),y.a.createElement(W.c,{id:"channel_modal.privateHint",defaultMessage:" - Only invited members can join this channel."}));let l=null;l=a?y.a.createElement("fieldset",{key:"channelType",className:"multi-select__radio"},y.a.createElement("div",{className:"radio"},y.a.createElement("label",null,y.a.createElement("input",{id:"public",type:"radio",name:"channelType",checked:"O"===this.props.channelType,onChange:this.handlePublicTypeSelect}),o)),y.a.createElement("div",{className:"radio"},y.a.createElement("label",null,y.a.createElement("input",{id:"private",type:"radio",name:"channelType",checked:"P"===this.props.channelType,onChange:this.handlePrivateTypeSelect}),r))):y.a.createElement("div",{className:"type-container multi-select__radio"},y.a.createElement("div",{className:"radio"},e?o:null,t?r:null));const c=Object(Mn.d)();return y.a.createElement("span",null,y.a.createElement(V.a,{dialogClassName:"a11y__modal new-channel__modal new-channel",show:this.props.show,bsSize:"large",onHide:this.props.onModalDismissed,onExited:this.props.onModalExited,autoFocus:!0,restoreFocus:!0,role:"dialog","aria-labelledby":"newChannelModalLabel"},y.a.createElement(V.a.Header,null,y.a.createElement("button",{type:"button",className:"close",onClick:this.props.onModalDismissed},y.a.createElement("span",{"aria-hidden":"true"},"×"),y.a.createElement("span",{className:"sr-only"},"Close")),y.a.createElement(V.a.Title,{componentClass:"h1",id:"newChannelModalLabel"},y.a.createElement(W.c,{id:"channel_modal.modalTitle",defaultMessage:"New Channel"}))),y.a.createElement("form",{role:"form",className:"form-horizontal"},y.a.createElement(V.a.Body,null,y.a.createElement("div",{className:"form-group"},y.a.createElement("label",{className:"col-sm-3 form__label control-label"},y.a.createElement(W.c,{id:"channel_modal.type",defaultMessage:"Type"})),y.a.createElement("div",{className:"col-sm-9"},l)),y.a.createElement("div",{className:i},y.a.createElement("label",{className:"col-sm-3 form__label control-label"},y.a.createElement(W.c,{id:"channel_modal.name",defaultMessage:"Name"})),y.a.createElement("div",{className:"col-sm-9"},y.a.createElement(re.a,{id:"newChannelName",onChange:this.handleChange,type:"text",ref:"display_name",className:"form-control",placeholder:{id:Object(le.b)("channel_modal.nameEx"),defaultMessage:'E.g.: "Bugs", "Marketing", "客户支持"'},maxLength:S.Q.MAX_CHANNELNAME_LENGTH,value:this.props.channelData.displayName,autoFocus:!0,onKeyDown:this.onEnterKeyDown}),n,y.a.createElement("p",{className:"input__help dark"},"URL: "+c+this.props.channelData.name+" (",y.a.createElement("button",{className:"color--link style--none",onClick:this.handleOnURLChange},y.a.createElement(W.c,{id:"channel_modal.edit",defaultMessage:"Edit"})),")"))),y.a.createElement("div",{className:"form-group"},y.a.createElement("div",{className:"col-sm-3"},y.a.createElement("label",{className:"form__label control-label"},y.a.createElement(W.c,{id:"channel_modal.purpose",defaultMessage:"Purpose"})),y.a.createElement("label",{className:"form__label light"},y.a.createElement(W.c,{id:"channel_modal.optional",defaultMessage:"(optional)"}))),y.a.createElement("div",{className:"col-sm-9"},y.a.createElement("textarea",{id:"newChannelPurpose",className:"form-control no-resize",ref:"channel_purpose",rows:"4",placeholder:M.fb("channel_modal.purposeEx",'E.g.: "A channel to file bugs and improvements"'),maxLength:"250",value:this.props.channelData.purpose,onChange:this.handleChange}),y.a.createElement("p",{className:"input__help"},y.a.createElement(W.c,{id:"channel_modal.descriptionHelp",defaultMessage:"Describe how this channel should be used."})))),y.a.createElement("div",{className:"form-group less"},y.a.createElement("div",{className:"col-sm-3"},y.a.createElement("label",{className:"form__label control-label"},y.a.createElement(W.c,{id:"channel_modal.header",defaultMessage:"Header"})),y.a.createElement("label",{className:"form__label light"},y.a.createElement(W.c,{id:"channel_modal.optional",defaultMessage:"(optional)"}))),y.a.createElement("div",{className:"col-sm-9"},y.a.createElement("textarea",{id:"newChannelHeader",className:"form-control no-resize",ref:"channel_header",rows:"4",placeholder:M.fb("channel_modal.headerEx",'E.g.: "[Link Title](http://example.com)"'),maxLength:"1024",value:this.props.channelData.header,onChange:this.handleChange}),y.a.createElement("p",{className:"input__help"},y.a.createElement(W.c,{id:"channel_modal.headerHelp",defaultMessage:"Set text that will appear in the header of the channel beside the channel name. For example, include frequently used links by typing [Link Title](http://example.com)."})),s))),y.a.createElement(V.a.Footer,null,y.a.createElement("button",{id:"cancelNewChannel",type:"button",className:"btn btn-link",onClick:this.props.onModalDismissed,onBlur:()=>document.getElementById("newChannelName").focus()},y.a.createElement(W.c,{id:"channel_modal.cancel",defaultMessage:"Cancel"})),y.a.createElement("button",{id:"submitNewChannel",onClick:this.handleSubmit,type:"submit",className:"btn btn-primary"},y.a.createElement(W.c,{id:"channel_modal.createNew",defaultMessage:"Create New Channel"}))))))}}Dp(Up,"propTypes",{show:_.a.bool.isRequired,currentTeamId:_.a.string.isRequired,channelType:_.a.string.isRequired,channelData:_.a.object.isRequired,ctrlSend:_.a.bool,serverError:_.a.node,onSubmitChannel:_.a.func.isRequired,onModalDismissed:_.a.func.isRequired,onModalExited:_.a.func,onTypeSwitched:_.a.func.isRequired,onChangeURLPressed:_.a.func.isRequired,onDataChanged:_.a.func.isRequired,canCreatePublicChannel:_.a.bool.isRequired,canCreatePrivateChannel:_.a.bool.isRequired});var qp=Object(n.connect)(function(e){return{ctrlSend:Object(c.getBool)(e,x.Preferences.CATEGORY_ADVANCED_SETTINGS,"send_on_ctrl_enter"),currentTeamId:Object(u.getCurrentTeamId)(e)}})(Up);function Hp(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Fp extends y.a.PureComponent{constructor(e){super(e),Hp(this,"onURLChanged",e=>{const t=e.target.value.trim();this.setState({currentURL:t.replace(/[^A-Za-z0-9-_]/g,"").toLowerCase(),userEdit:!0})}),Hp(this,"formattedError",(e,t,a)=>y.a.createElement("span",{key:e},y.a.createElement(W.c,{id:t,defaultMessage:a}),y.a.createElement("br",null))),Hp(this,"getURLError",e=>{let t=[];return e.length<2&&t.push(this.formattedError("error1",Object(le.b)("change_url.longer"),"URL must be two or more characters.")),"-"!==e.charAt(0)&&"_"!==e.charAt(0)||t.push(this.formattedError("error2",Object(le.b)("change_url.startWithLetter"),"URL must start with a letter or number.")),e.length>1&&("-"===e.charAt(e.length-1)||"_"===e.charAt(e.length-1))&&t.push(this.formattedError("error3",Object(le.b)("change_url.endWithLetter"),"URL must end with a letter or number.")),e.indexOf("__")>-1&&t.push(this.formattedError("error4",Object(le.b)("change_url.noUnderscore"),"URL can not contain two underscores in a row.")),0===t.length&&t.push(this.formattedError("errorlast",Object(le.b)("change_url.invalidUrl"),"Invalid URL")),t}),Hp(this,"onSubmit",e=>{e.preventDefault();const t=this.refs.urlinput.value;Object(Mn.a)(t)!==t||t.length<2||t.indexOf("__")>-1?this.setState({urlError:this.getURLError(t)}):(this.setState({urlError:"",userEdit:!1}),this.props.onModalSubmit(t))}),Hp(this,"onCancel",()=>{this.setState({urlError:"",userEdit:!1}),this.props.onModalDismissed()}),this.state={currentURL:e.currentURL,urlError:"",userEdit:!1}}UNSAFE_componentWillReceiveProps(e){this.state.userEdit||this.setState({currentURL:e.currentURL})}render(){let e="input-group input-group--limit",t=null;this.state.urlError&&(e+=" has-error"),(this.props.serverError||this.state.urlError)&&(t=y.a.createElement("div",{className:"has-error"},y.a.createElement("p",{className:"input__help error"},this.state.urlError||this.props.serverError)));const a=this.props.currentTeamURL+"/channels",n=Object(Mn.d)(a),s=y.a.createElement(Zs.a,{id:"urlTooltip"},a);return y.a.createElement(V.a,{dialogClassName:"a11y__modal",show:this.props.show,onHide:this.onCancel,onExited:this.props.onModalExited,role:"dialog","aria-labelledby":"changeUrlModalLabel"},y.a.createElement(V.a.Header,{closeButton:!0},y.a.createElement(V.a.Title,{componentClass:"h1",id:"changeUrlModalLabel"},this.props.title)),y.a.createElement("form",{role:"form",className:"form-horizontal"},y.a.createElement(V.a.Body,null,y.a.createElement("div",{className:"modal-intro"},y.a.createElement(W.c,{id:"channel_flow.changeUrlDescription",defaultMessage:"Some characters are now allowed in URLs and may be removed."})),y.a.createElement("div",{className:"form-group"},y.a.createElement("label",{className:"col-sm-3 form__label control-label"},y.a.createElement(W.c,{id:"change_url.urlLabel",defaultMessage:"Channel URL"})),y.a.createElement("div",{className:"col-sm-9"},y.a.createElement("div",{className:e},y.a.createElement(Qs.a,{delayShow:S.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:s},y.a.createElement("span",{className:"input-group-addon"},n)),y.a.createElement("input",{type:"text",ref:"urlinput",className:"form-control",maxLength:S.Q.MAX_CHANNELNAME_LENGTH,onChange:this.onURLChanged,value:this.state.currentURL,autoFocus:!0,tabIndex:"1"})),t))),y.a.createElement(V.a.Footer,null,y.a.createElement("button",{type:"button",className:"btn btn-link",onClick:this.onCancel},y.a.createElement(W.c,{id:"change_url.close",defaultMessage:"Close"})),y.a.createElement("button",{onClick:this.onSubmit,type:"submit",className:"btn btn-primary",tabIndex:"2"},this.props.submitButtonText))))}}Hp(Fp,"propTypes",{show:_.a.bool.isRequired,title:_.a.node,submitButtonText:_.a.node,currentURL:_.a.string,currentTeamURL:_.a.string.isRequired,serverError:_.a.node,onModalSubmit:_.a.func.isRequired,onModalExited:_.a.func,onModalDismissed:_.a.func.isRequired}),Hp(Fp,"defaultProps",{show:!1,title:"Change URL",submitButtonText:"Save",currentURL:"",serverError:null});var Bp=Object(n.connect)(function(e){const t=Object(u.getCurrentTeam)(e);return{currentTeamURL:"".concat(Object(Mn.e)(),"/").concat(t.name)}})(Fp);function Gp(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Vp=1,Wp=2,zp=3;function Yp(e){let t=e.channelType||S.Q.OPEN_CHANNEL;return e.canCreatePublicChannel||t!==S.Q.OPEN_CHANNEL||(t=S.Q.PRIVATE_CHANNEL),e.canCreatePrivateChannel||t!==S.Q.PRIVATE_CHANNEL||(t=S.Q.OPEN_CHANNEL),t}class Kp extends y.a.Component{constructor(e){super(e),Gp(this,"onSubmit",()=>{if(!this.state.channelDisplayName)return void this.setState({serverError:M.fb("channel_flow.invalidName","Invalid Channel Name")});if(this.state.channelName.length<2)return void this.setState({flowState:zp});const{actions:e,currentTeamId:t}=this.props,a={team_id:t,name:this.state.channelName,display_name:this.state.channelDisplayName,purpose:this.state.channelPurpose,header:this.state.channelHeader,type:this.state.channelType};e.createChannel(a).then(t=>{t.error?this.onCreateChannelError(t.error):(this.props.onModalDismissed(),e.switchToChannel(t.data))})}),Gp(this,"onCreateChannelError",e=>{"model.channel.is_valid.2_or_more.app_error"===e.id?this.setState({flowState:zp,serverError:y.a.createElement(W.c,{id:"channel_flow.handleTooShort",defaultMessage:"Channel URL must be 2 or more lowercase alphanumeric characters"})}):"store.sql_channel.update.exists.app_error"===e.id?this.setState({serverError:M.fb("channel_flow.alreadyExist","A channel with that URL already exists")}):this.setState({serverError:e.message})}),Gp(this,"typeSwitched",e=>{this.setState({channelType:e,serverError:""})}),Gp(this,"urlChangeRequested",e=>{e&&e.preventDefault(),this.setState({flowState:Wp})}),Gp(this,"urlChangeSubmitted",e=>{this.state.flowState===zp?this.setState({channelName:e,nameModified:!0},this.onSubmit):this.setState({flowState:Vp,serverError:null,channelName:e,nameModified:!0})}),Gp(this,"urlChangeDismissed",()=>{this.setState({flowState:Vp})}),Gp(this,"channelDataChanged",e=>{this.setState({channelDisplayName:e.displayName,channelPurpose:e.purpose,channelHeader:e.header}),this.state.nameModified||this.setState({channelName:Object(Mn.a)(e.displayName.trim())})}),this.state={serverError:"",channelType:Yp(e),flowState:Vp,channelDisplayName:"",channelName:"",channelPurpose:"",channelHeader:"",nameModified:!1}}UNSAFE_componentWillReceiveProps(e){!0===e.show&&!1===this.props.show&&this.setState({serverError:"",channelType:Yp(e),flowState:Vp,channelDisplayName:"",channelName:"",channelPurpose:"",channelHeader:"",nameModified:!1})}render(){const e={name:this.state.channelName,displayName:this.state.channelDisplayName,purpose:this.state.channelPurpose,header:this.state.channelHeader};let t=!1,a=!1,n="",s="";if(this.props.show)switch(this.state.flowState){case Vp:t=!0;break;case Wp:a=!0,s=n=y.a.createElement(W.c,{id:"channel_flow.changeUrlTitle",defaultMessage:"Change Channel URL"});break;case zp:a=!0,n=y.a.createElement(W.c,{id:"channel_flow.set_url_title",defaultMessage:"Set Channel URL"}),s=y.a.createElement(W.c,{id:"channel_flow.create",defaultMessage:"Create Channel"})}return y.a.createElement("span",null,y.a.createElement(qp,{show:t,channelType:this.state.channelType,canCreatePublicChannel:this.props.canCreatePublicChannel,canCreatePrivateChannel:this.props.canCreatePrivateChannel,channelData:e,serverError:this.state.serverError,onSubmitChannel:this.onSubmit,onModalDismissed:this.props.onModalDismissed,onTypeSwitched:this.typeSwitched,onChangeURLPressed:this.urlChangeRequested,onDataChanged:this.channelDataChanged}),y.a.createElement(Bp,{show:a,title:n,submitButtonText:s,currentURL:this.state.channelName,serverError:this.state.serverError,onModalSubmit:this.urlChangeSubmitted,onModalDismissed:this.urlChangeDismissed}))}}Gp(Kp,"propTypes",{show:_.a.bool.isRequired,channelType:_.a.string.isRequired,onModalDismissed:_.a.func.isRequired,currentTeamId:_.a.string.isRequired,canCreatePublicChannel:_.a.bool.isRequired,canCreatePrivateChannel:_.a.bool.isRequired,actions:_.a.shape({createChannel:_.a.func.isRequired,switchToChannel:_.a.func.isRequired})}),Gp(Kp,"defaultProps",{show:!1,channelType:S.Q.OPEN_CHANNEL});var Qp=Object(n.connect)(function(e){return{currentTeamId:Object(u.getCurrentTeamId)(e)}},function(e){return{actions:Object(s.bindActionCreators)({createChannel:r.createChannel,switchToChannel:da.l},e)}})(Kp);class Zp extends y.a.PureComponent{render(){return y.a.createElement("span",this.props,y.a.createElement(W.c,{id:"generic_icons.arrow.down",defaultMessage:"Down Arrow Icon"},e=>y.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",role:"icon","aria-label":e},y.a.createElement("g",{transform:"rotate(180 12 12)"},y.a.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}),y.a.createElement("path",{d:"M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"})))))}}function Jp(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Xp extends y.a.PureComponent{render(){let e="nav-pills__unread-indicator ";return this.props.show&&(e+="nav-pills__unread-indicator--visible "),y.a.createElement("div",{id:"unreadIndicator"+this.props.name,className:e+this.props.extraClass,onClick:this.props.onClick},this.props.content,y.a.createElement(Zp,{className:"icon icon__unread"}))}}Jp(Xp,"propTypes",{onClick:_.a.func.isRequired,show:_.a.bool,extraClass:_.a.string,content:_.a.node,name:_.a.string}),Jp(Xp,"defaultProps",{show:!1,extraClass:"",content:""});var $p=a(1024);function eh(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class th extends y.a.Component{constructor(...e){super(...e),eh(this,"isUserOutOfOffice",()=>this.props.status===S.O.OUT_OF_OFFICE),eh(this,"setStatus",e=>{this.props.actions.setStatus({user_id:this.props.userId,status:e})}),eh(this,"setOnline",e=>{e.preventDefault(),this.setStatus(S.O.ONLINE)}),eh(this,"setOffline",e=>{e.preventDefault(),this.setStatus(S.O.OFFLINE)}),eh(this,"setAway",e=>{e.preventDefault(),this.setStatus(S.O.AWAY)}),eh(this,"setDnd",e=>{e.preventDefault(),this.setStatus(S.O.DND)}),eh(this,"showStatusChangeConfirmation",e=>{const t={ModalId:S.s.RESET_STATUS,dialogType:ss,dialogProps:{newStatus:e}};this.props.actions.openModal(t)}),eh(this,"renderProfilePicture",()=>this.props.profilePicture?y.a.createElement(Ya.a,{size:"lg",url:this.props.profilePicture}):null),eh(this,"renderDropdownIcon",()=>y.a.createElement(W.c,{id:"generic_icons.dropdown",defaultMessage:"Dropdown Icon"},e=>y.a.createElement("i",{className:"fa fa-caret-down",title:e})))}render(){const e=this.isUserOutOfOffice()&&""===this.props.autoResetPref,t=this.renderProfilePicture(),a=this.renderDropdownIcon(),n=e?()=>this.showStatusChangeConfirmation("online"):this.setOnline,s=e?()=>this.showStatusChangeConfirmation("dnd"):this.setDnd,i=e?()=>this.showStatusChangeConfirmation("away"):this.setAway,o=e?()=>this.showStatusChangeConfirmation("offline"):this.setOffline;return y.a.createElement(fi.a,{onToggle:this.onToggle,style:this.props.style},y.a.createElement("div",{className:"status-wrapper status-selector"},t,y.a.createElement("button",{className:"status style--none","aria-label":Object(M.fb)("status_dropdown.menuAriaLabel","set status")},y.a.createElement($p.a,{status:this.props.status,button:!0})),y.a.createElement("span",{className:"status status-edit edit"},a)),y.a.createElement(Ei.a,{ariaLabel:Object(M.fb)("status_dropdown.menuAriaLabel","set status")},y.a.createElement(Ei.a.Group,null,y.a.createElement(Ei.a.ItemAction,{show:this.isUserOutOfOffice(),onClick:()=>null,ariaLabel:Object(M.fb)("status_dropdown.set_ooo","Out of office").toLowerCase(),text:Object(M.fb)("status_dropdown.set_ooo","Out of office"),extraText:Object(M.fb)("status_dropdown.set_ooo.extra","Automatic Replies are enabled")})),y.a.createElement(Ei.a.Group,null,y.a.createElement(Ei.a.ItemAction,{onClick:n,ariaLabel:Object(M.fb)("status_dropdown.set_online","Online").toLowerCase(),text:Object(M.fb)("status_dropdown.set_online","Online")}),y.a.createElement(Ei.a.ItemAction,{onClick:i,ariaLabel:Object(M.fb)("status_dropdown.set_away","Away").toLowerCase(),text:Object(M.fb)("status_dropdown.set_away","Away")}),y.a.createElement(Ei.a.ItemAction,{onClick:s,ariaLabel:"".concat(Object(M.fb)("status_dropdown.set_dnd","Do not disturb").toLowerCase(),". ").concat(Object(M.fb)("status_dropdown.set_dnd.extra","Disables Desktop and Push Notifications").toLowerCase()),text:Object(M.fb)("status_dropdown.set_dnd","Do not disturb"),extraText:Object(M.fb)("status_dropdown.set_dnd.extra","Disables Desktop and Push Notifications")}),y.a.createElement(Ei.a.ItemAction,{onClick:o,ariaLabel:Object(M.fb)("status_dropdown.set_offline","Offline").toLowerCase(),text:Object(M.fb)("status_dropdown.set_offline","Offline")}))))}}eh(th,"propTypes",{style:_.a.object,status:_.a.string,userId:_.a.string.isRequired,profilePicture:_.a.string,autoResetPref:_.a.string,actions:_.a.shape({openModal:_.a.func.isRequired,setStatus:_.a.func.isRequired}).isRequired}),eh(th,"defaultProps",{userId:"",profilePicture:"",status:S.O.OFFLINE});var ah=Object(n.connect)(function(e){const t=Object(m.getCurrentUser)(e);if(!t)return{};const a=t.id;return{userId:a,profilePicture:rn.Client4.getProfilePictureUrl(a,t.last_picture_update),autoResetPref:Object(c.get)(e,x.Preferences.CATEGORY_AUTO_RESET_MANUAL_STATUS,a,""),status:Object(m.getStatusForUserId)(e,a)}},function(e){return{actions:Object(s.bindActionCreators)({openModal:U.b,setStatus:o.setStatus},e)}})(th),nh=a(1052);class sh extends y.a.PureComponent{render(){const e=y.a.createElement(Zs.a,{id:"main-menu__tooltip"},y.a.createElement(W.c,{id:"sidebar.mainMenu",defaultMessage:"Main menu"}));let t=null;this.props.showTutorialTip&&(t=y.a.createElement(ed,{onBottom:!1}));let a=y.a.createElement("h1",{id:"headerTeamName",className:"team__name","data-teamid":this.props.teamId},this.props.teamDisplayName);return this.props.teamDescription&&(a=y.a.createElement(Qs.a,{delayShow:S.Q.OVERLAY_TIME_DELAY,placement:"bottom",overlay:y.a.createElement(Zs.a,{id:"team-name__tooltip"},this.props.teamDescription),ref:"descriptionOverlay"},a)),y.a.createElement("div",{className:"SidebarHeaderDropdownButton",id:"sidebarHeaderDropdownButton"},t,y.a.createElement(Qs.a,{delayShow:S.Q.OVERLAY_TIME_DELAY,placement:"right",overlay:e},y.a.createElement("div",{id:"headerInfo",className:"header__info"},a,y.a.createElement("div",{id:"headerUsername",className:"user__name"},"@"+this.props.currentUser.username),y.a.createElement("button",{className:"style--none sidebar-header-dropdown__icon","aria-label":Object(M.fb)("navbar_dropdown.menuAriaLabel","main menu")},y.a.createElement(nh.a,null)))))}}function ih(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(sh,"propTypes",{showTutorialTip:_.a.bool.isRequired,teamDescription:_.a.string.isRequired,teamId:_.a.string.isRequired,currentUser:_.a.object.isRequired,teamDisplayName:_.a.string.isRequired});class oh extends y.a.PureComponent{constructor(...e){super(...e),ih(this,"toggleShortcutsModal",e=>{e.preventDefault(),O.m()}),ih(this,"handleKeyDown",e=>{Object(M.e)(e)&&e.shiftKey&&Object(M.X)(e,S.i.KeyCodes.A)&&this.props.actions.openModal({ModalId:S.s.USER_SETTINGS,dialogType:Is.a})}),ih(this,"handleEmitUserLoggedOutEvent",()=>{O.e()})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}render(){return this.props.currentUser?y.a.createElement(fi.a,null,y.a.createElement(sh,{showTutorialTip:this.props.showTutorialTip,teamDescription:this.props.teamDescription,currentUser:this.props.currentUser,teamDisplayName:this.props.teamDisplayName,teamId:this.props.teamId}),y.a.createElement(bu,{id:"sidebarDropdownMenu"})):null}}ih(oh,"propTypes",{teamDescription:_.a.string.isRequired,teamDisplayName:_.a.string.isRequired,teamId:_.a.string.isRequired,currentUser:_.a.object,showTutorialTip:_.a.bool.isRequired,actions:_.a.shape({openModal:_.a.func.isRequred}).isRequired}),ih(oh,"defaultProps",{teamType:"",pluginMenuItems:[]});var rh=Object(n.connect)(function(e){const t=Object(u.getCurrentTeam)(e),a=Object(m.getCurrentUser)(e),n=Object(c.getInt)(e,S.A.TUTORIAL_STEP,a.id)===S.J.MENU_POPOVER&&!M.Z();return{currentUser:a,teamDescription:t.description,teamDisplayName:t.display_name,teamId:t.id,showTutorialTip:n}},function(e){return{actions:Object(s.bindActionCreators)({openModal:U.b},e)}})(oh);var lh=Object(n.connect)(function(e){const t=Object(d.getConfig)(e),a=Object(m.getCurrentUser)(e);return{enableTutorial:"true"===t.EnableTutorial,showTutorialTip:Object(c.getInt)(e,S.A.TUTORIAL_STEP,a.id)===S.J.MENU_POPOVER&&!M.Z()}})(class extends y.a.PureComponent{constructor(e){super(e),function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(this,"handleResize",()=>{const e=M.Z();this.setState({isMobile:e})}),this.state={isMobile:M.Z()}}componentDidMount(){window.addEventListener("resize",this.handleResize)}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}render(){const e=M.fb("accessibility.sections.lhsHeader","team menu region");return y.a.createElement("div",{id:"lhsHeader","aria-label":e,tabIndex:"-1",role:"application",className:"SidebarHeader team__header theme a11y__region","data-a11y-sort-order":"5"},y.a.createElement("div",{className:"d-flex"},!this.state.isMobile&&y.a.createElement(ah,null),y.a.createElement(rh,null)))}}),ch=a(110);class dh extends y.a.PureComponent{render(){return y.a.createElement("span",this.props,y.a.createElement(W.c,{id:"generic_icons.bot",defaultMessage:"Bot Icon"},e=>y.a.createElement("svg",{width:"16",height:"13",viewBox:"0 0 36 30",role:"icon","aria-label":e},y.a.createElement("path",{d:"M0,15.7391304 L0,23.0434783 C0,24.0535326 0.786888587,24.8695652 1.76086957,24.8695652 L3.52173913,24.8695652 L3.52173913,13.9130435 L1.76086957,13.9130435 C0.786888587,13.9130435 0,14.7290761 0,15.7391304 Z M26.0496894,6.50271739 L19.7888199,6.50271739 L19.7888199,2.83423913 C19.7888199,1.81967561 18.989441,1 18,1 C17.010559,1 16.2111801,1.81967561 16.2111801,2.83423913 L16.2111801,6.50271739 L9.95031056,6.50271739 C7.47950311,6.50271739 5.47826087,8.55477242 5.47826087,11.0883152 L5.47826087,26.6793478 C5.47826087,28.7027429 7.0826087,30.3478261 9.05590062,30.3478261 L26.9440994,30.3478261 C28.9173913,30.3478261 30.5217391,28.7027429 30.5217391,26.6793478 L30.5217391,11.0883152 C30.5217391,8.55477242 28.5204969,6.50271739 26.0496894,6.50271739 Z M14.4782609,24.8695652 L10.9565217,24.8695652 L10.9565217,22.9130435 L14.4782609,22.9130435 L14.4782609,24.8695652 Z M12.5217391,17.826087 C11.2245652,17.826087 10.173913,16.7754348 10.173913,15.4782609 C10.173913,14.181087 11.2245652,13.1304348 12.5217391,13.1304348 C13.818913,13.1304348 14.8695652,14.181087 14.8695652,15.4782609 C14.8695652,16.7754348 13.818913,17.826087 12.5217391,17.826087 Z M19.9565217,24.8695652 L16.4347826,24.8695652 L16.4347826,22.9130435 L19.9565217,22.9130435 L19.9565217,24.8695652 Z M25.0434783,24.8695652 L21.5217391,24.8695652 L21.5217391,22.9130435 L25.0434783,22.9130435 L25.0434783,24.8695652 Z M23.2826087,17.826087 C22.0935326,17.826087 21.1304348,16.7754348 21.1304348,15.4782609 C21.1304348,14.181087 22.0935326,13.1304348 23.2826087,13.1304348 C24.4716848,13.1304348 25.4347826,14.181087 25.4347826,15.4782609 C25.4347826,16.7754348 24.4716848,17.826087 23.2826087,17.826087 Z M34.2391304,13.9130435 L32.4782609,13.9130435 L32.4782609,24.8695652 L34.2391304,24.8695652 C35.2131114,24.8695652 36,24.0535326 36,23.0434783 L36,15.7391304 C36,14.7290761 35.2131114,13.9130435 34.2391304,13.9130435 Z"}))))}}class mh extends y.a.PureComponent{render(){let e=null;return this.props.channelIsArchived?e=y.a.createElement(Cc.a,{className:"icon icon__archive"}):this.props.hasDraft?e=y.a.createElement(_p,{className:"icon icon__draft"}):this.props.channelType===S.i.OPEN_CHANNEL?e=y.a.createElement(Md.a,{className:"icon icon__globe"}):this.props.channelType===S.i.PRIVATE_CHANNEL?e=y.a.createElement(Nd.a,{className:"icon icon__lock"}):this.props.channelType===S.i.GM_CHANNEL?e=y.a.createElement("div",{className:"status status--group"},this.props.membersCount):this.props.channelType===S.i.DM_CHANNEL&&(e=this.props.teammateId&&this.props.teammateDeletedAt?y.a.createElement(Cc.a,{className:"icon icon__archive"}):this.props.teammateId&&this.props.teammateIsBot?y.a.createElement(dh,{className:"icon icon__bot"}):y.a.createElement($p.a,{type:"avatar",status:this.props.channelStatus})),e}}function uh(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(mh,"propTypes",{channelIsArchived:_.a.bool.isRequired,channelType:_.a.string.isRequired,channelStatus:_.a.string,hasDraft:_.a.bool.isRequired,membersCount:_.a.number,teammateId:_.a.string,teammateDeletedAt:_.a.number,teammateIsBot:_.a.bool});class ph extends y.a.PureComponent{constructor(...e){super(...e),uh(this,"handleClose",e=>{e.stopPropagation(),e.preventDefault(),this.props.handleClose()})}render(){let e=null;if(this.props.handleClose&&!this.props.badge){let t=y.a.createElement(Zs.a,{id:"remove-dm-tooltip"},y.a.createElement(W.c,{id:"sidebar.removeList",defaultMessage:"Remove from list"}));this.props.channelType!==S.i.OPEN_CHANNEL&&this.props.channelType!==S.i.PRIVATE_CHANNEL||(t=y.a.createElement(Zs.a,{id:"remove-dm-tooltip"},y.a.createElement(W.c,{id:"sidebar.leave",defaultMessage:"Leave channel"}))),e=y.a.createElement(Qs.a,{delayShow:1e3,placement:"top",overlay:t},y.a.createElement("span",{onClick:this.handleClose,className:"btn-close"},"×"))}return e}}function hh(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}uh(ph,"propTypes",{handleClose:_.a.func,channelId:_.a.string.isRequired,channelType:_.a.string.isRequired,teammateId:_.a.string,badge:_.a.bool});class gh extends y.a.PureComponent{constructor(e){super(e),hh(this,"trackChannelSelectedEvent",()=>{Object(Pe.b)("SidebarChannelLink#click"),Object(Pe.d)("ui","ui_channel_selected")}),hh(this,"handleClick",()=>{this.trackChannelSelectedEvent(),z.a.push(this.props.link)}),hh(this,"removeTooltipLink",()=>{this.gmItemRef.current.removeAttribute("aria-describedby")}),hh(this,"render",()=>{let e=null;this.props.badge&&(e=y.a.createElement("span",{id:"unreadMentions",className:"badge"},this.props.unreadMentions));const t=y.a.createElement(y.a.Fragment,null,y.a.createElement(mh,{channelStatus:this.props.channelStatus,channelType:this.props.channelType,channelIsArchived:this.props.channelIsArchived,hasDraft:this.props.hasDraft,membersCount:this.props.membersCount,teammateId:this.props.teammateId,teammateDeletedAt:this.props.teammateDeletedAt,teammateIsBot:this.props.teammateIsBot}),y.a.createElement("span",{className:"sidebar-item__name"},y.a.createElement("span",null,this.props.displayName)),e,y.a.createElement(ph,{handleClose:this.props.handleClose,channelId:this.props.channelId,channelType:this.props.channelType,teammateId:this.props.teammateId,badge:this.props.badge}));let a,n=this.props.displayName;if(this.props.channelType===S.Q.OPEN_CHANNEL?n+=" ".concat(Object(M.fb)("accessibility.sidebar.types.public","public channel")):this.props.channelType===S.Q.PRIVATE_CHANNEL&&(n+=" ".concat(Object(M.fb)("accessibility.sidebar.types.private","private channel"))),1===this.props.unreadMentions?n+=" ".concat(this.props.unreadMentions," ").concat(Object(M.fb)("accessibility.sidebar.types.mention","mention")):this.props.unreadMentions>1&&(n+=" ".concat(this.props.unreadMentions," ").concat(Object(M.fb)("accessibility.sidebar.types.mentions","mentions"))),this.props.unreadMsgs>0&&this.props.showUnreadForMsgs&&0===this.props.unreadMentions&&(n+=" ".concat(Object(M.fb)("accessibility.sidebar.types.unread","unread"))),n=n.toLowerCase(),a=Object(P.c)()?y.a.createElement("div",null,y.a.createElement(Iu,{link:this.props.link,menuId:this.props.channelId},y.a.createElement("button",{className:"btn btn-link "+this.props.rowClass,"aria-label":n,onClick:this.handleClick},t))):y.a.createElement(vn.a,{id:"sidebarItem_".concat(this.props.channelName),"aria-label":n,to:this.props.link,className:this.props.rowClass,onClick:this.trackChannelSelectedEvent},t),this.props.channelType===S.Q.GM_CHANNEL){const e=y.a.createElement(Zs.a,{id:"channel-displayname__tooltip",style:bh.channelTooltip},this.props.displayName);a=y.a.createElement(Qs.a,{delayShow:S.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:e,onEntering:this.removeTooltipLink},y.a.createElement("div",{ref:this.gmItemRef},a))}return a}),this.gmItemRef=y.a.createRef()}}hh(gh,"propTypes",{link:_.a.string.isRequired,rowClass:_.a.string.isRequired,channelType:_.a.string.isRequired,channelId:_.a.string.isRequired,channelName:_.a.string.isRequired,displayName:_.a.string.isRequired,channelStatus:_.a.string,handleClose:_.a.func,hasDraft:_.a.bool.isRequired,badge:_.a.bool,membersCount:_.a.number.isRequired,showUnreadForMsgs:_.a.bool.isRequired,unreadMsgs:_.a.number.isRequired,unreadMentions:_.a.number.isRequired,teammateId:_.a.string,teammateDeletedAt:_.a.number,teammateIsBot:_.a.bool,channelIsArchived:_.a.bool.isRequired});const bh={channelTooltip:{paddingLeft:"8px",maxWidth:"228px"}};function fh(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Eh extends y.a.PureComponent{constructor(...e){super(...e),fh(this,"render",()=>{const e=[];let t=S.i.DEFAULT_CHANNEL_UI_NAME;this.props.townSquareDisplayName&&(t=this.props.townSquareDisplayName);let a=S.i.OFFTOPIC_CHANNEL_UI_NAME;return this.props.offTopicDisplayName&&(a=this.props.offTopicDisplayName),e.push(y.a.createElement("div",null,y.a.createElement("h4",null,y.a.createElement(W.c,{id:"sidebar.tutorialScreen1.title",defaultMessage:"Channels"})),y.a.createElement("p",null,y.a.createElement(ji.b,{id:"sidebar.tutorialScreen1.body",defaultMessage:"**Channels** organize conversations across different topics. They're open to everyone on your team. To send private communications use **Direct Messages** for a single person or **Private Channels** for multiple people."})))),e.push(y.a.createElement("div",null,y.a.createElement("h4",null,y.a.createElement(W.c,{id:"sidebar.tutorialScreen2.title",defaultMessage:'"{townsquare}" and "{offtopic}" channels',values:{townsquare:t,offtopic:a}})),y.a.createElement("p",null,y.a.createElement(W.c,{id:"sidebar.tutorialScreen2.body1",defaultMessage:"Here are two public channels to start:"})),y.a.createElement("p",null,y.a.createElement(ji.b,{id:"sidebar.tutorialScreen2.body2",defaultMessage:"**{townsquare}** is a place for team-wide communication. Everyone in your team is a member of this channel.",values:{townsquare:t}})),y.a.createElement("p",null,y.a.createElement(ji.b,{id:"sidebar.tutorialScreen2.body3",defaultMessage:"**{offtopic}** is a place for fun and humor outside of work-related channels. You and your team can decide what other channels to create.",values:{offtopic:a}})))),e.push(y.a.createElement("div",null,y.a.createElement("h4",null,y.a.createElement(W.c,{id:"sidebar.tutorialScreen3.title",defaultMessage:"Creating and Joining Channels"})),y.a.createElement("p",null,y.a.createElement(ji.b,{id:"sidebar.tutorialScreen3.body1",defaultMessage:'Click **"More..."** to create a new channel or join an existing one.'})),y.a.createElement("p",null,y.a.createElement(ji.b,{id:"sidebar.tutorialScreen3.body2",defaultMessage:'You can also create a new channel by clicking the **"+" symbol** next to the public or private channel header.'})))),y.a.createElement(Xc,{placement:"right",screens:e,overlayClass:"tip-overlay--sidebar",diagnosticsTag:"tutorial_tip_2_channels"})})}}function _h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}fh(Eh,"propTypes",{townSquareDisplayName:_.a.string,offTopicDisplayName:_.a.string});class vh extends y.a.PureComponent{constructor(...e){super(...e),_h(this,"isLeaving",!1),_h(this,"handleLeavePublicChannel",()=>{this.props.actions.leaveChannel(this.props.channelId),Object(Pe.d)("ui","ui_public_channel_x_button_clicked")}),_h(this,"handleLeavePrivateChannel",()=>{O.l({id:this.props.channelId,display_name:this.props.channelDisplayName}),Object(Pe.d)("ui","ui_private_channel_x_button_clicked")}),_h(this,"handleLeaveDirectChannel",()=>{if(!this.isLeaving){let e,t;this.isLeaving=!0,this.props.channelType===S.i.DM_CHANNEL?(e=this.props.channelTeammateId,t=S.i.Preferences.CATEGORY_DIRECT_CHANNEL_SHOW):(e=this.props.channelId,t=S.i.Preferences.CATEGORY_GROUP_CHANNEL_SHOW);const a=this.props.currentUserId;this.props.actions.savePreferences(a,[{user_id:a,category:t,name:e,value:"false"}]).then(()=>{this.isLeaving=!1}),Object(Pe.d)("ui","ui_direct_channel_x_button_clicked")}this.props.active&&z.a.push("/".concat(this.props.currentTeamName,"/channels/").concat(this.props.redirectChannel))}),_h(this,"showChannelAsUnread",()=>this.props.unreadMentions>0||this.props.unreadMsgs>0&&this.props.showUnreadForMsgs),_h(this,"render",()=>{if(this.props.channelIsArchived&&!this.props.active)return null;if(!this.props.channelDisplayName||!this.props.channelType)return y.a.createElement("div",null);let e=null;if(!this.showChannelAsUnread()){if(this.props.shouldHideChannel)return"";this.props.channelType===S.i.DM_CHANNEL||this.props.channelType===S.i.GM_CHANNEL?e=this.handleLeaveDirectChannel:"true"===this.props.config.EnableXToLeaveChannelsFromLHS&&(this.props.channelType===S.i.OPEN_CHANNEL&&this.props.channelName!==S.i.DEFAULT_CHANNEL?e=this.handleLeavePublicChannel:this.props.channelType===S.i.PRIVATE_CHANNEL&&(e=this.handleLeavePrivateChannel))}let t="";this.props.active&&(t="active");let a="sidebar-item",n=!1;this.showChannelAsUnread()&&(a+=" unread-title"),this.props.unreadMentions>0&&(a+=" has-badge",n=!0),this.props.channelMuted&&(a+=" muted"),e&&!n&&(a+=" has-close");let s=null;this.props.showTutorialTip&&this.props.channelName===S.i.DEFAULT_CHANNEL&&(s=y.a.createElement(Eh,{townSquareDisplayName:this.props.townSquareDisplayName,offTopicDisplayName:this.props.offTopicDisplayName}),this.props.actions.openLhs());let i="";i=this.props.channelFake?"/".concat(this.props.currentTeamName,"/channels/").concat(this.props.channelName,"?fakechannel=").concat(encodeURIComponent(this.props.channelStringified)):this.props.channelType===S.i.DM_CHANNEL?"/".concat(this.props.currentTeamName,"/messages/@").concat(this.props.channelTeammateUsername):this.props.channelType===S.i.GM_CHANNEL?"/".concat(this.props.currentTeamName,"/messages/").concat(this.props.channelName):"/".concat(this.props.currentTeamName,"/channels/").concat(this.props.channelName);let o="";return o=this.props.currentUserId===this.props.channelTeammateId?this.context.intl.formatMessage({id:"sidebar.directchannel.you",defaultMessage:"{displayname} (you)"},{displayname:this.props.channelDisplayName}):this.props.channelDisplayName,y.a.createElement("li",{key:this.props.channelName,ref:"channel",className:t},y.a.createElement(gh,{link:i,rowClass:a,channelId:this.props.channelId,channelName:this.props.channelName,channelStatus:this.props.channelStatus,channelType:this.props.channelType,displayName:o,handleClose:e,hasDraft:this.props.hasDraft,badge:n,showUnreadForMsgs:this.props.showUnreadForMsgs,unreadMentions:this.props.unreadMentions,unreadMsgs:this.props.unreadMsgs,membersCount:this.props.membersCount,teammateId:this.props.channelTeammateId,teammateDeletedAt:this.props.channelTeammateDeletedAt,teammateIsBot:this.props.channelTeammateIsBot,channelIsArchived:this.props.channelIsArchived}),s)})}}_h(vh,"propTypes",{config:_.a.object.isRequired,channelId:_.a.string.isRequired,channelName:_.a.string.isRequired,channelDisplayName:_.a.string.isRequired,channelMuted:_.a.bool,channelType:_.a.string.isRequired,channelStatus:_.a.string,channelFake:_.a.bool,channelStringified:_.a.string,channelTeammateId:_.a.string,channelTeammateUsername:_.a.string,channelTeammateDeletedAt:_.a.number,channelTeammateIsBot:_.a.bool,hasDraft:_.a.bool.isRequired,showUnreadForMsgs:_.a.bool.isRequired,unreadMsgs:_.a.number.isRequired,unreadMentions:_.a.number.isRequired,active:_.a.bool.isRequired,currentTeamName:_.a.string.isRequired,currentUserId:_.a.string.isRequired,showTutorialTip:_.a.bool.isRequired,townSquareDisplayName:_.a.string,offTopicDisplayName:_.a.string,membersCount:_.a.number.isRequired,shouldHideChannel:_.a.bool.isRequired,channelIsArchived:_.a.bool.isRequired,redirectChannel:_.a.string.isRequired,actions:_.a.shape({savePreferences:_.a.func.isRequired,leaveChannel:_.a.func.isRequired,openLhs:_.a.func.isRequired}).isRequired}),_h(vh,"contextTypes",{intl:W.i.isRequired});var yh=Object(n.connect)(function(){const e=Object(p.makeGetChannel)();return(t,a)=>{const n=a.channelId,s=Object(d.getConfig)(t),i=Object(p.getCurrentChannelId)(t),o=e(t,{id:n})||{},r=!!o.id&&Object(ms.i)(t,S.H.DRAFT,o.id),l="true"===s.EnableTutorial,h=Object(c.getInt)(t,S.i.Preferences.TUTORIAL_STEP,a.currentUserId,S.i.TutorialSteps.FINISHED),g=Object(p.getChannelsNameMapInCurrentTeam)(t),b=Object(m.getUserIdsInChannels)(t);let f=0;b&&b[o.id]&&(f=b[o.id].size,b[o.id].has(a.currentUserId)&&f--);const E=Object(ch.getMyChannelMemberships)(t)[n];let _=0,v=0,y=!0;E&&(_=E.mention_count,o&&(v=Math.max(o.total_msg_count-E.msg_count,0)),E.notify_props&&(y=E.notify_props.mark_unread!==S.t.MENTION));const C=Object(c.getTeammateNameDisplaySetting)(t);let w=null,T="",O=0,P="",M=!1,N=o.display_name;o.type===S.i.DM_CHANNEL&&((w=Object(m.getUser)(t,o.teammate_id))&&(T=w.id,O=w.delete_at,P=w.username,M=w.is_bot),N=Object(Ga.displayUsername)(w,C,!1));let I=!1;return o.name!==S.i.DEFAULT_CHANNEL||a.active||!Object(p.shouldHideDefaultChannel)(t,o)||Object(en.isFavoriteChannel)(t.entities.preferences.myPreferences,o.id)||(I=!0),{config:s,channelId:n,channelName:o.name,channelDisplayName:N,channelType:o.type,channelStatus:o.status,channelFake:o.fake,channelMuted:Object(en.isChannelMuted)(E),channelStringified:o.fake&&JSON.stringify(o),channelTeammateId:T,channelTeammateUsername:P,channelTeammateDeletedAt:O,channelTeammateIsBot:M,hasDraft:r&&Boolean(r.message.trim()||r.fileInfos.length||r.uploadsInProgress.length)&&i!==o.id,showTutorialTip:l&&h===S.i.TutorialSteps.CHANNEL_POPOVER,townSquareDisplayName:g[S.i.DEFAULT_CHANNEL]&&g[S.i.DEFAULT_CHANNEL].display_name,offTopicDisplayName:g[S.i.OFFTOPIC_CHANNEL]&&g[S.i.OFFTOPIC_CHANNEL].display_name,showUnreadForMsgs:y,unreadMsgs:v,unreadMentions:_,membersCount:f,shouldHideChannel:I,channelIsArchived:0!==o.delete_at,redirectChannel:Object(p.getRedirectChannelNameForTeam)(t,Object(u.getCurrentTeamId)(t))}}},function(e){return{actions:Object(s.bindActionCreators)({savePreferences:Xn.savePreferences,leaveChannel:da.e,openLhs:qu.b},e)}},null,{withRef:!0})(vh);function Ch(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class wh extends y.a.PureComponent{constructor(...e){super(...e),Ch(this,"renderPublic",()=>{if(!this.props.canCreatePublicChannel)return null;const e="".concat(M.fb("sidebar.createChannel","Create new public channel").toLowerCase()),t=y.a.createElement(Zs.a,{id:"new-channel-tooltip"},y.a.createElement(W.c,{id:"sidebar.createChannel",defaultMessage:"Create new public channel"}));return y.a.createElement("button",{id:"createPublicChannel","aria-label":e,type:"button",className:"add-channel-btn cursor--pointer style--none",onClick:this.props.createPublicChannel},y.a.createElement(Qs.a,{delayShow:500,placement:"top",overlay:t},y.a.createElement("span",null,"+")))}),Ch(this,"renderPrivate",()=>{if(!this.props.canCreatePrivateChannel)return null;const e="".concat(M.fb("sidebar.createGroup","Create new private channel").toLowerCase()),t=y.a.createElement(Zs.a,{id:"new-group-tooltip"},y.a.createElement(W.c,{id:"sidebar.createGroup",defaultMessage:"Create new private channel"}));return y.a.createElement("button",{id:"createPrivateChannel","aria-label":e,type:"button",className:"add-channel-btn cursor--pointer style--none",onClick:this.props.createPrivateChannel},y.a.createElement(Qs.a,{delayShow:500,placement:"top",overlay:t},y.a.createElement("span",null,"+")))}),Ch(this,"renderDirect",()=>{const e=M.fb("sidebar.createDirectMessage","Create new direct message").toLowerCase(),t=y.a.createElement(Zs.a,{id:"new-group-tooltip",className:"hidden-xs"},y.a.createElement(W.c,{id:"sidebar.createDirectMessage",defaultMessage:"Create new direct message"}));return y.a.createElement("button",{id:"addDirectChannel","aria-label":e,className:"add-channel-btn cursor--pointer style--none",onClick:this.props.createDirectMessage},y.a.createElement(Qs.a,{className:"hidden-xs",delayShow:500,placement:"top",overlay:t},y.a.createElement("span",null,"+")))}),Ch(this,"renderCombined",()=>{const{canCreatePublicChannel:e,canCreatePrivateChannel:t}=this.props;if(e&&!t)return this.renderPublic();if(t&&!e)return this.renderPrivate();if(!e&&!t)return null;const a=y.a.createElement(Zs.a,{id:"new-group-tooltip",className:"hidden-xs"},y.a.createElement(W.c,{id:"sidebar.createPublicPrivateChannel",defaultMessage:"Create new public or private channel"}));return y.a.createElement("button",{type:"button",className:"add-channel-btn cursor--pointer style--none",onClick:this.props.createPublicDirectChannel},y.a.createElement(Qs.a,{className:"hidden-xs",delayShow:500,placement:"top",overlay:a},y.a.createElement("span",null,"+")))})}render(){const{sectionType:e}=this.props;switch(e){case"public":return this.renderPublic();case"private":return this.renderPrivate();case"direct":return this.renderDirect();case"recent":case"alpha":return this.renderCombined()}return null}}function Th(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Ch(wh,"propTypes",{sectionType:E.PropTypes.string.isRequired,createPublicChannel:E.PropTypes.func.isRequired,createPrivateChannel:E.PropTypes.func.isRequired,createDirectMessage:E.PropTypes.func.isRequired,createPublicDirectChannel:E.PropTypes.func.isRequired,canCreatePublicChannel:E.PropTypes.bool.isRequired,canCreatePrivateChannel:E.PropTypes.bool.isRequired});class Oh extends y.a.PureComponent{render(){const{sectionType:e,moreChannels:t,moreDirectMessages:a,browsePublicDirectChannels:n}=this.props,{formatMessage:s}=this.context.intl;switch(e){case"public":return y.a.createElement(Yd.a,{teamId:this.props.currentTeamId,permissions:[x.Permissions.JOIN_PUBLIC_CHANNELS]},y.a.createElement("li",{key:"public-channel-more",id:"morePublicButton"},y.a.createElement("button",{id:"sidebarChannelsMore","aria-label":s({id:"sidebar.morePublicAria",defaultMessage:"more public channels"}),className:"nav-more cursor--pointer style--none btn--block",onClick:t},y.a.createElement(W.c,{id:"sidebar.moreElips",defaultMessage:"More..."}))));case"direct":return y.a.createElement("li",{key:"dm-more",id:"moreDMButton"},y.a.createElement("button",{id:"moreDirectMessage","aria-label":s({id:"sidebar.moreDmAria",defaultMessage:"more direct messages"}),className:"nav-more cursor--pointer style--none btn--block",onClick:a},y.a.createElement(W.c,{id:"sidebar.moreElips",defaultMessage:"More..."})));case"recent":case"alpha":return y.a.createElement("li",{key:"public-dm-more",id:"moreRecentAlphaButton"},y.a.createElement("button",{id:"morePublicDirectChannels","aria-label":s({id:"sidebar.morePublicDmAria",defaultMessage:"more public channels direct messages"}),className:"nav-more cursor--pointer style--none btn--block",onClick:n},y.a.createElement(W.c,{id:"sidebar.moreElips",defaultMessage:"More..."})))}return null}}function Sh(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Th(Oh,"propTypes",{currentTeamId:E.PropTypes.string.isRequired,sectionType:E.PropTypes.string.isRequired,moreChannels:E.PropTypes.func.isRequired,moreDirectMessages:E.PropTypes.func.isRequired,browsePublicDirectChannels:E.PropTypes.func.isRequired}),Th(Oh,"contextTypes",{intl:W.i});const Ph=["recent","alpha"];class Mh extends y.a.PureComponent{constructor(...e){super(...e),Sh(this,"sectionTypeFormatMessageId",e=>{switch(e){case"public":return Object(le.b)("sidebar.types.public");case"private":return Object(le.b)("sidebar.types.private");case"direct":return Object(le.b)("sidebar.types.direct");case"favorite":return Object(le.b)("sidebar.types.favorite");case"unreads":return Object(le.b)("sidebar.types.unreads");case"recent":return Object(le.b)("sidebar.types.recent");default:return Object(le.b)("sidebar.types.alpha")}})}render(){const{sectionType:e,channelName:t,browsePublicDirectChannels:a}=this.props;let n=["hover","focus"];M.Z()&&(n=[]);const s=this.sectionTypeFormatMessageId(e);let i=y.a.createElement(W.c,{id:s,defaultMessage:t});if(-1!==Ph.indexOf(e)){const e=y.a.createElement(Zs.a,{id:"new-group-tooltip",className:"hidden-xs"},y.a.createElement(W.c,{id:"sidebar.browseChannelDirectChannel",defaultMessage:"Browse Channels and Direct Messages"}));i=y.a.createElement(Qs.a,{trigger:n,delayShow:500,placement:"top",overlay:e},y.a.createElement("div",{role:"presentation",className:"public_direct_name",onClick:a},i))}return i}}function Nh(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Sh(Mh,"propTypes",{sectionType:E.PropTypes.string.isRequired,channelName:E.PropTypes.string.isRequired,browsePublicDirectChannels:E.PropTypes.func.isRequired});class Ih extends y.a.PureComponent{constructor(...e){super(...e),Nh(this,"state",{show:!0,key:"channels"}),Nh(this,"handleHide",()=>{this.setState({show:!1})}),Nh(this,"handleExit",()=>{this.props.onModalDismissed&&this.props.onModalDismissed()}),Nh(this,"handleSelect",e=>{this.setState({key:e})})}render(){return y.a.createElement(V.a,{dialogClassName:"a11y__modal more-modal more-direct-channels more-public-direct-channels",show:this.state.show,onHide:this.handleHide,onExited:this.handleExit,role:"dialog","aria-labelledby":"morePublicModalLabel"},y.a.createElement(V.a.Header,{closeButton:!0},y.a.createElement(V.a.Title,{componentClass:"h1",id:"morePublicModalLabel"},y.a.createElement(W.c,{id:"more_public_direct_channels.title",defaultMessage:"Channels and Direct Messages"}))),y.a.createElement(V.a.Body,null,y.a.createElement(X.a,{id:"morePublicDirectChannelTabs",className:"modal-tabs",defaultActiveKey:"channels",activeKey:this.state.key,onSelect:this.handleSelect,unmountOnExit:!0},y.a.createElement($.a,{eventKey:"channels",title:Object(M.fb)("more_public_direct_channels.channels","Channels")},y.a.createElement(lp,{handleNewChannel:this.props.handleNewChannel,onModalDismissed:this.handleHide,bodyOnly:!0})),y.a.createElement($.a,{eventKey:"dm",title:Object(M.fb)("more_public_direct_channels.direct_messages","Direct Messages")},y.a.createElement(Ep,{onModalDismissed:this.handleHide,isExistingChannel:!1,bodyOnly:!0})))))}}function Ah(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function jh(e){return y.a.createElement("div",Object.assign({},e,{className:"scrollbar--view"}))}function Rh(e){return y.a.createElement("div",Object.assign({},e,{className:"scrollbar--horizontal"}))}function kh(e){return y.a.createElement("div",Object.assign({},e,{className:"scrollbar--vertical"}))}Nh(Ih,"propTypes",{handleNewChannel:_.a.func,onModalDismissed:_.a.func});class Lh extends y.a.PureComponent{constructor(e){super(e),Ah(this,"handleOpenMoreDirectChannelsModal",e=>{e.preventDefault(),this.state.showDirectChannelsModal?this.hideMoreDirectChannelsModal():this.showMoreDirectChannelsModal()}),Ah(this,"updateTitle",()=>{const{config:e,currentChannel:t,currentTeam:a,currentTeammate:n,unreads:s}=this.props;if(t&&a){let a="";null!=e.SiteName&&(a=e.SiteName);let i=t.display_name;t.type===S.i.DM_CHANNEL&&null!=n&&(i=n.display_name);const o=s.mentionCount>0?"("+s.mentionCount+") ":"",r=s.messageCount>0?"* ":"";document.title=o+r+i+" - "+this.props.currentTeam.display_name+" "+a}}),Ah(this,"updateFavicon",e=>{const t=document.querySelector('link[rel="icon"][sizes="16x16"]'),a=document.querySelector('link[rel="icon"][sizes="32x32"]'),n=document.querySelector('link[rel="icon"][sizes="96x96"]');e?(t.href="string"==typeof Ku.a?Ku.a:"",a.href="string"==typeof Zu.a?Zu.a:"",n.href="string"==typeof Xu.a?Xu.a:""):(t.href="string"==typeof Bu.a?Bu.a:"",a.href="string"==typeof Vu.a?Vu.a:"",n.href="string"==typeof zu.a?zu.a:"")}),Ah(this,"onScroll",()=>{this.updateUnreadIndicators()}),Ah(this,"handleScrollAnimationUpdate",e=>{const{scrollbar:t}=this.refs,a=e.getCurrentValue();t.scrollTop(a)}),Ah(this,"scrollToFirstUnreadChannel",()=>{if(this.firstUnreadChannel){const e=this.getDisplayedChannels(this.state.orderedChannelIds);let t;if(this.unreadScrollAnimate.setCurrentValue(this.refs.scrollbar.getScrollTop()).setAtRest(),e.length>0&&e[0]===this.firstUnreadChannel)t=Hu.MathUtil.mapValueInRange(0,0,1,0,1);else{const e=15,a=ys()(bi.a.findDOMNode(this.refs[this.firstUnreadChannel])).position().top-e;t=Hu.MathUtil.mapValueInRange(a,0,1,0,1)}this.unreadScrollAnimate.setEndValue(t)}}),Ah(this,"scrollToLastUnreadChannel",()=>{if(this.lastUnreadChannel){const{scrollbar:e}=this.refs,t=15,a=ys()(bi.a.findDOMNode(this.refs[this.lastUnreadChannel])),n=a.position().top+a.height()-e.getClientHeight()+t,s=Hu.MathUtil.mapValueInRange(n,0,1,0,1);this.unreadScrollAnimate.setCurrentValue(e.getScrollTop()).setAtRest(),this.unreadScrollAnimate.setEndValue(s)}}),Ah(this,"updateUnreadIndicators",()=>{let e=!1,t=!1;if(this.firstUnreadChannel){const t=ys()(bi.a.findDOMNode(this.refs[this.firstUnreadChannel])),a=t?t.position():null;a&&a.top+t.height()-15<this.refs.scrollbar.getScrollTop()&&(e=!0)}if(this.lastUnreadChannel){const e=ys()(bi.a.findDOMNode(this.refs[this.lastUnreadChannel])),a=e?e.position():null;a&&a.top+15>this.refs.scrollbar.getScrollTop()+this.refs.scrollbar.getClientHeight()&&(t=!0)}e===this.state.showTopUnread&&t===this.state.showBottomUnread||this.setState({showTopUnread:e,showBottomUnread:t})}),Ah(this,"updateScrollbarOnChannelChange",e=>{const t=this.refs[e].getWrappedInstance().refs.channel.getBoundingClientRect();(t.top-S.i.CHANNEL_SCROLL_ADJUSTMENT<0||t.top+t.height>this.refs.scrollbar.view.getBoundingClientRect().height)&&this.refs.scrollbar.scrollTop(this.refs.scrollbar.view.scrollTop+(t.top-S.i.CHANNEL_SCROLL_ADJUSTMENT))}),Ah(this,"navigateChannelShortcut",e=>{if(e.altKey&&!e.shiftKey&&(M.X(e,S.i.KeyCodes.UP)||M.X(e,S.i.KeyCodes.DOWN))){if(e.preventDefault(),this.isSwitchingChannel)return;this.isSwitchingChannel=!0;const t=this.getDisplayedChannels(this.state.orderedChannelIds),a=this.props.currentChannel.id;let n=-1;for(let e=0;e<t.length;e++)t[e]===a&&(n=e);let s=n;s=M.X(e,S.i.KeyCodes.DOWN)?n+1:n-1;const i=t[M.gb(s,t.length)];this.props.actions.switchToChannelById(i),this.updateScrollbarOnChannelChange(i),this.isSwitchingChannel=!1}else M.e(e)&&e.shiftKey&&M.X(e,S.i.KeyCodes.K)&&this.handleOpenMoreDirectChannelsModal(e)}),Ah(this,"navigateUnreadChannelShortcut",e=>{if(e.altKey&&e.shiftKey&&(M.X(e,S.i.KeyCodes.UP)||M.X(e,S.i.KeyCodes.DOWN))){if(e.preventDefault(),this.isSwitchingChannel)return;this.isSwitchingChannel=!0;const t=this.getDisplayedChannels(this.state.orderedChannelIds);let a=0;a=M.X(e,S.i.KeyCodes.UP)?-1:1;const n=pa.b(this.props.currentChannel.id,t,this.props.unreadChannelIds,a);if(-1!==n){const e=t[n];this.props.actions.switchToChannelById(e),this.updateScrollbarOnChannelChange(e)}this.isSwitchingChannel=!1}}),Ah(this,"getDisplayedChannels",(e=[])=>e.reduce((e,t)=>(e.push(...t.items),e),[])),Ah(this,"channelIdIsDisplayedForProps",(e=[],t)=>{const a=this.getDisplayedChannels(e);for(let e=0;e<a.length;e++)if(a[e]===t)return!0;return!1}),Ah(this,"showMorePublicDirectChannelsModal",()=>{this.setState({showMorePublicChannelsModal:!0}),Object(Pe.d)("ui","ui_channels_more_public_direct")}),Ah(this,"hideMorePublicDirectChannelsModal",()=>{this.setState({showMorePublicChannelsModal:!1})}),Ah(this,"onHandleNewChannel",()=>{this.hideMorePublicDirectChannelsModal(),this.showNewChannelModal(S.i.OPEN_CHANNEL)}),Ah(this,"showMoreChannelsModal",()=>{this.setState({showMoreChannelsModal:!0}),Object(Pe.d)("ui","ui_channels_more_public")}),Ah(this,"hideMoreChannelsModal",()=>{this.setState({showMoreChannelsModal:!1})}),Ah(this,"showNewPublicChannelModal",()=>{this.showNewChannelModal(S.i.OPEN_CHANNEL)}),Ah(this,"showNewPrivateChannelModal",()=>{this.showNewChannelModal(S.i.PRIVATE_CHANNEL)}),Ah(this,"showNewChannelModal",e=>{this.setState({newChannelModalType:e})}),Ah(this,"hideNewChannelModal",()=>{this.setState({newChannelModalType:""})}),Ah(this,"showMoreDirectChannelsModal",()=>{Object(Pe.d)("ui","ui_channels_more_direct"),this.setState({showDirectChannelsModal:!0})}),Ah(this,"hideMoreDirectChannelsModal",()=>{this.setState({showDirectChannelsModal:!1})}),Ah(this,"openQuickSwitcher",e=>{e.preventDefault(),this.props.actions.openModal({modalId:S.s.QUICK_SWITCH,dialogType:xp})}),Ah(this,"createSidebarChannel",e=>y.a.createElement(yh,{key:e,ref:e,channelId:e,active:e===this.props.currentChannel.id,currentTeamName:this.props.currentTeam.name,currentUserId:this.props.currentUser.id})),Ah(this,"renderOrderedChannels",()=>{const{orderedChannelIds:e}=this.state,t=[S.E.UNREADS,S.E.FAVORITE];return y.a.createElement(ws.a,{ref:"scrollbar",autoHide:!0,autoHideTimeout:500,autoHideDuration:500,renderThumbHorizontal:Rh,renderThumbVertical:kh,renderView:jh,onScroll:this.onScroll,style:{position:"absolute"}},y.a.createElement("div",{id:"sidebarChannelContainer",className:"nav-pills__container"},e.map(e=>{const a={type:e.type,name:e.name,items:e.items.map(this.createSidebarChannel)};if(-1!==t.indexOf(a.type)&&0===a.items.length)return null;const n="".concat(a.type,"Channel"),s=a.name.toLowerCase();return y.a.createElement("ul",{key:a.type,"aria-label":s,role:"presentation",className:"nav nav-pills nav-stacked a11y__section",id:n+"List",tabIndex:"-1"},y.a.createElement("li",{className:"sidebar-section__header"},y.a.createElement("h4",{role:"presentation",id:n},y.a.createElement(Mh,{sectionType:a.type,channelName:a.name,browsePublicDirectChannels:this.showMorePublicDirectChannelsModal})),y.a.createElement(wh,{sectionType:a.type,canCreatePublicChannel:this.props.canCreatePublicChannel,canCreatePrivateChannel:this.props.canCreatePrivateChannel,createPublicChannel:this.showNewPublicChannelModal,createPrivateChannel:this.showNewPrivateChannelModal,createDirectMessage:this.handleOpenMoreDirectChannelsModal,createPublicDirectChannel:this.showNewPublicChannelModal})),a.items,y.a.createElement(Oh,{currentTeamId:this.props.currentTeam.id,sectionType:a.type,moreChannels:this.showMoreChannelsModal,moreDirectMessages:this.handleOpenMoreDirectChannelsModal,browsePublicDirectChannels:this.showMorePublicDirectChannelsModal}))})))}),this.badgesActive=!1,this.firstUnreadChannel=null,this.lastUnreadChannel=null,this.isLeaving=new Map,this.isSwitchingChannel=!1,this.closedDirectChannel=!1,this.state={newChannelModalType:"",orderedChannelIds:e.orderedChannelIds,showDirectChannelsModal:!1,showMoreChannelsModal:!1,showMorePublicChannelsModal:!1},this.animate=new Hu.SpringSystem,this.unreadScrollAnimate=this.animate.createSpring(),this.unreadScrollAnimate.setOvershootClampingEnabled(!0),this.unreadScrollAnimate.addListener({onSpringUpdate:this.handleScrollAnimationUpdate})}static getDerivedStateFromProps(e,t){return e.orderedChannelIds[0].type===S.E.UNREADS&&t.orderedChannelIds[0].type===S.E.UNREADS&&t.orderedChannelIds[0].items.length===e.orderedChannelIds[0].items.length&&t.orderedChannelIds[0].items.includes(e.currentChannel.id)?null:e.orderedChannelIds!==t.orderedChannelIds?{orderedChannelIds:e.orderedChannelIds}:null}componentDidMount(){this.updateUnreadIndicators(),document.addEventListener("keydown",this.navigateChannelShortcut),document.addEventListener("keydown",this.navigateUnreadChannelShortcut)}componentDidUpdate(e){if(this.props.currentTeam===e.currentTeam&&this.props.currentChannel.id===e.currentChannel.id&&!this.channelIdIsDisplayedForProps(this.props.orderedChannelIds,this.props.currentChannel.id)&&this.channelIdIsDisplayedForProps(e.orderedChannelIds,this.props.currentChannel.id))return this.closedDirectChannel=!0,void Object(O.f)();this.props.currentTeam!==e.currentTeam&&this.refs.scrollbar.scrollToTop(),this.props.currentChannel.id!==e.currentChannel.id&&(this.closedDirectChannel?this.closedDirectChannel=!1:this.props.actions.close()),this.updateTitle(),this.setBadgesActiveAndFavicon(),this.setFirstAndLastUnreadChannels(),this.updateUnreadIndicators()}componentWillUnmount(){document.removeEventListener("keydown",this.navigateChannelShortcut),document.removeEventListener("keydown",this.navigateUnreadChannelShortcut),this.animate.deregisterSpring(this.unreadScrollAnimate),this.animate.removeAllListeners(),this.unreadScrollAnimate.destroy()}setBadgesActiveAndFavicon(){document.querySelector('link[rel="icon"]')&&(this.lastBadgesActive=this.badgesActive,this.badgesActive=this.props.unreads.mentionCount>0,this.lastBadgesActive!==this.badgesActive&&this.updateFavicon(this.badgesActive))}setFirstAndLastUnreadChannels(){const{currentChannel:e,unreadChannelIds:t}=this.props,{orderedChannelIds:a}=this.state;this.getDisplayedChannels(a).map(a=>(a!==e.id&&t.includes(a)&&(this.firstUnreadChannel||(this.firstUnreadChannel=a),this.lastUnreadChannel=a),null))}render(){const{channelSwitcherOption:e}=this.props,t=M.fb("accessibility.sections.lhsList","channel sidebar region");if(null==this.props.currentTeam||null==this.props.currentUser)return y.a.createElement("div",null);this.firstUnreadChannel=null,this.lastUnreadChannel=null;let a=!1;""!==this.state.newChannelModalType&&(a=!0);const n=y.a.createElement(W.c,{id:"sidebar.unreads",defaultMessage:"More unreads"}),s=y.a.createElement(W.c,{id:"sidebar.unreads",defaultMessage:"More unreads"});let i,o;this.state.showDirectChannelsModal&&(i=y.a.createElement(Ep,{onModalDismissed:this.hideMoreDirectChannelsModal,isExistingChannel:!1})),this.state.showMoreChannelsModal&&(o=y.a.createElement(lp,{onModalDismissed:this.hideMoreChannelsModal,handleNewChannel:()=>{this.hideMoreChannelsModal(),this.showNewChannelModal(S.i.OPEN_CHANNEL)}}));let r,l=null;if(e){let e=Object(le.b)("quick_switch_modal.channelsShortcut.windows"),t="- CTRL+K";M.Y()&&(e=Object(le.b)("quick_switch_modal.channelsShortcut.mac"),t="- ⌘K");const a=y.a.createElement("span",{className:"switch__shortcut hidden-xs"},y.a.createElement(W.c,{id:e,defaultMessage:t}));l=y.a.createElement("div",{className:"sidebar__switcher"},y.a.createElement("button",{id:"sidebarSwitcherButton",className:"btn btn-link",onClick:this.openQuickSwitcher},y.a.createElement(W.c,{id:"channel_switch_modal.title",defaultMessage:"Switch Channels"}),a))}return this.state.showMorePublicChannelsModal&&(r=y.a.createElement(Ih,{onModalDismissed:this.hideMorePublicDirectChannelsModal,handleNewChannel:this.onHandleNewChannel,isExistingChannel:!1})),y.a.createElement("div",{className:ps()("sidebar--left",{"move--right":this.props.isOpen&&M.Z()}),id:"sidebar-left",key:"sidebar-left"},y.a.createElement(Qp,{show:a,canCreatePublicChannel:this.props.canCreatePublicChannel,canCreatePrivateChannel:this.props.canCreatePrivateChannel,channelType:this.state.newChannelModalType,onModalDismissed:this.hideNewChannelModal}),r,i,o,y.a.createElement(lh,null),y.a.createElement("div",{className:"sidebar--left__icons"},y.a.createElement(R.a,{pluggableName:"LeftSidebarHeader"})),y.a.createElement("div",{id:"lhsList",role:"application","aria-label":t,tabIndex:"-1",className:"sidebar--left__list a11y__region","data-a11y-sort-order":"6"},y.a.createElement(Xp,{name:"Top",show:this.state.showTopUnread,onClick:this.scrollToFirstUnreadChannel,extraClass:"nav-pills__unread-indicator-top",content:n}),y.a.createElement(Xp,{name:"Bottom",show:this.state.showBottomUnread,onClick:this.scrollToLastUnreadChannel,extraClass:"nav-pills__unread-indicator-bottom",content:s}),this.renderOrderedChannels()),l)}}Ah(Lh,"propTypes",{config:E.PropTypes.object.isRequired,isOpen:E.PropTypes.bool.isRequired,unreadChannelIds:E.PropTypes.array,orderedChannelIds:E.PropTypes.arrayOf(E.PropTypes.shape({type:E.PropTypes.string.isRequired,name:E.PropTypes.string.isRequired,items:E.PropTypes.array.isRequired})),currentChannel:E.PropTypes.object,currentTeammate:E.PropTypes.object,currentTeam:E.PropTypes.object,currentUser:E.PropTypes.object,unreads:E.PropTypes.object.isRequired,canCreatePublicChannel:E.PropTypes.bool.isRequired,canCreatePrivateChannel:E.PropTypes.bool.isRequired,channelSwitcherOption:E.PropTypes.bool.isRequired,actions:E.PropTypes.shape({close:E.PropTypes.func.isRequired,switchToChannelById:E.PropTypes.func.isRequired,openModal:E.PropTypes.func.isRequired}).isRequired}),Ah(Lh,"defaultProps",{currentChannel:{}});var xh=Object(n.connect)(function(e){const t=Object(d.getConfig)(e),a=Object(p.getCurrentChannel)(e),n=a&&a.teammate_id&&Object(p.getCurrentChannel)(e,a.teammate_id),s=Object(u.getCurrentTeam)(e),i=Object(D.haveITeamPermission)(e,{team:s.id,permission:$i.a.CREATE_PUBLIC_CHANNEL}),o=Object(D.haveITeamPermission)(e,{team:s.id,permission:$i.a.CREATE_PRIVATE_CHANNEL}),r=Object(c.getSidebarPreferences)(e),l=e.views.channel.keepChannelIdAsUnread;return{config:t,unreadChannelIds:Object(p.getSortedUnreadChannelIds)(e,l),orderedChannelIds:Object(p.getOrderedChannelIds)(e,l,r.grouping,r.sorting,"true"===r.unreads_at_top,"true"===r.favorite_at_top),channelSwitcherOption:Object(c.getBool)(e,x.Preferences.CATEGORY_SIDEBAR_SETTINGS,"channel_switcher_section","true"),currentChannel:a,currentTeammate:n,currentTeam:s,currentUser:Object(m.getCurrentUser)(e),canCreatePublicChannel:i,canCreatePrivateChannel:o,isOpen:Ou(e),unreads:Object(p.getUnreads)(e)}},function(e){return{actions:Object(s.bindActionCreators)({close:qu.a,switchToChannelById:da.m,openModal:U.b},e)}})(Lh),Dh=a(1075);function Uh(e,t=""){return async(a,n)=>{const{data:s}=await a(Object(L.getPostThread)(e));if(!s)return void z.a.replace("/error?type=".concat(S.k.PERMALINK_NOT_FOUND,"&returnTo=").concat(t));const i=n(),o=s.posts[s.order[0]].channel_id;let l=i.entities.channels.channels[o];const c=Object(u.getCurrentTeamId)(i);if(!l){const{data:e}=await a(Object(r.getChannel)(o));if(!e)return void z.a.replace("/error?type=".concat(S.k.PERMALINK_NOT_FOUND,"&returnTo=").concat(t));l=e}if(!i.entities.channels.myMembers[o]){if(l.type===S.i.DM_CHANNEL||l.type===S.i.GM_CHANNEL)return void z.a.replace("/error?type=".concat(S.k.PERMALINK_NOT_FOUND,"&returnTo=").concat(t));await a(Object(r.joinChannel)(Object(m.getCurrentUserId)(n()),null,o))}l.team_id&&l.team_id!==c?z.a.replace("/error?type=".concat(S.k.PERMALINK_NOT_FOUND,"&returnTo=").concat(t)):(l&&l.type===S.i.DM_CHANNEL?Object($n.d)(l.id):l&&l.type===S.i.GM_CHANNEL&&Object($n.e)(l.id),a(Object(r.selectChannel)(o)),a({type:S.e.RECEIVED_FOCUSED_POST,data:e,channelId:o}),a(Object(an.d)()),a(Object(r.getChannelStats)(o)))}}a(1222);function qh(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Hh=S.Q.KeyCodes,Fh=Object(W.g)({error:{id:Object(le.b)("edit_channel_header_modal.error"),defaultMessage:"This channel header is too long, please enter a shorter one"}});class Bh extends y.a.PureComponent{constructor(e){super(e),qh(this,"updatePreview",e=>{this.setState({preview:e})}),qh(this,"handleChange",e=>{this.setState({header:e.target.value})}),qh(this,"handleSave",()=>{const{channel:e,actions:{patchChannel:t}}=this.props,{header:a}=this.state;t(e.id,{header:a})}),qh(this,"onHide",()=>{this.setState({show:!1})}),qh(this,"focusTextbox",()=>{this.refs.editChannelHeaderTextbox&&this.refs.editChannelHeaderTextbox.getWrappedInstance().focus()}),qh(this,"blurTextbox",()=>{this.refs.editChannelHeaderTextbox&&this.refs.editChannelHeaderTextbox.getWrappedInstance().blur()}),qh(this,"handleEntering",()=>{this.focusTextbox()}),qh(this,"handleKeyDown",e=>{const{ctrlSend:t}=this.props;t&&Object(M.X)(e,Hh.ENTER)&&!0===e.ctrlKey&&this.handleKeyPress(e)}),qh(this,"handleKeyPress",e=>{const{ctrlSend:t}=this.props;!Object(P.m)()&&(t&&e.ctrlKey||!t)&&(!Object(M.X)(e,Hh.ENTER)||e.shiftKey||e.altKey||(e.preventDefault(),this.blurTextbox(),this.handleSave(e)))}),this.state={preview:!1,header:e.channel.header,show:!0,showError:!1}}UNSAFE_componentWillReceiveProps(e){const{requestStatus:t}=e,{requestStatus:a}=this.props;a!==t&&t===x.RequestStatus.FAILURE?this.setState({showError:!0}):a!==t&&t===x.RequestStatus.SUCCESS?this.onHide():this.setState({showError:!1})}render(){let e=null;if(this.props.serverError&&this.state.showError){let t;t="model.channel.is_valid.header.app_error"===this.props.serverError.server_error_id?this.props.intl.formatMessage(Fh.error):this.props.serverError.message,e=y.a.createElement("div",{className:"form-group has-error"},y.a.createElement("br",null),y.a.createElement("label",{className:"control-label"},t))}let t=null;return t=this.props.channel.type===S.Q.DM_CHANNEL?y.a.createElement(W.c,{id:"edit_channel_header_modal.title_dm",defaultMessage:"Edit Header"}):y.a.createElement(W.c,{id:"edit_channel_header_modal.title",defaultMessage:"Edit Header for {channel}",values:{channel:this.props.channel.display_name}}),y.a.createElement(V.a,{dialogClassName:"a11y__modal",show:this.state.show,onHide:this.onHide,onEntering:this.handleEntering,onExited:this.props.onHide,role:"dialog","aria-labelledby":"editChannelHeaderModalLabel"},y.a.createElement(V.a.Header,{closeButton:!0},y.a.createElement(V.a.Title,{componentClass:"h1",id:"editChannelHeaderModalLabel"},t)),y.a.createElement(V.a.Body,{bsClass:"modal-body edit-modal-body"},y.a.createElement("div",null,y.a.createElement("p",null,y.a.createElement(W.c,{id:"edit_channel_header_modal.description",defaultMessage:"Edit the text appearing next to the channel name in the channel header."})),y.a.createElement("div",{className:"textarea-wrapper"},y.a.createElement(_n,{value:this.state.header,onChange:this.handleChange,onKeyPress:this.handleKeyPress,onKeyDown:this.handleKeyDown,supportsCommands:!1,suggestionListStyle:"bottom",createMessage:Object(M.fb)("edit_channel_header.editHeader","Edit the Channel Header..."),previewMessageLink:Object(M.fb)("edit_channel_header.previewHeader","Edit Header"),handlePostError:this.handlePostError,id:"edit_textbox",ref:"editChannelHeaderTextbox",characterLimit:1024,preview:this.state.preview})),y.a.createElement("div",{className:"post-create-footer"},y.a.createElement(wn,{characterLimit:1024,showPreview:this.state.preview,ref:this.setTextboxLinksRef,updatePreview:this.updatePreview,message:this.state.header})),y.a.createElement("br",null),e)),y.a.createElement(V.a.Footer,null,y.a.createElement("button",{type:"button",className:"btn btn-link cancel-button",onClick:this.onHide},y.a.createElement(W.c,{id:"edit_channel_header_modal.cancel",defaultMessage:"Cancel"})),y.a.createElement("button",{disabled:this.props.requestStatus===x.RequestStatus.STARTED,type:"button",className:"btn btn-primary save-button",onClick:this.handleSave},y.a.createElement(W.c,{id:"edit_channel_header_modal.save",defaultMessage:"Save"}))))}}qh(Bh,"propTypes",{intl:W.i.isRequired,onHide:_.a.func.isRequired,channel:_.a.object.isRequired,ctrlSend:_.a.bool.isRequired,serverError:_.a.object,requestStatus:_.a.string.isRequired,actions:_.a.shape({patchChannel:_.a.func.isRequired}).isRequired});var Gh=Object(W.h)(Bh);function Vh(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Wh(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const zh=Object(Ps.createSelector)(e=>Object(c.getBool)(e,S.Q.Preferences.CATEGORY_ADVANCED_SETTINGS,"send_on_ctrl_enter"),({requests:e})=>{const{channels:{updateChannel:t}}=e;return{serverError:t.error,requestStatus:t.status}},(e,t)=>(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Vh(a,!0).forEach(function(t){Wh(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Vh(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e})({ctrlSend:e},t));var Yh=Object(n.connect)(zh,function(e){return{actions:{patchChannel:Object(s.bindActionCreators)(r.patchChannel,e)}}})(Gh);function Kh(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Qh=50,Zh=20;class Jh extends y.a.Component{constructor(e){super(e),Kh(this,"addValue",e=>{const t=Object.assign([],this.state.values);-1===t.indexOf(e)&&t.push(e),this.setState({values:t})}),Kh(this,"onHide",()=>{this.setState({show:!1})}),Kh(this,"handleInviteError",e=>{e&&this.setState({saving:!1,inviteError:e.message})}),Kh(this,"handleDelete",e=>{this.setState({values:e})}),Kh(this,"setUsersLoadingState",e=>{this.setState({loadingUsers:e})}),Kh(this,"handlePageChange",(e,t)=>{e>t&&(this.setUsersLoadingState(!0),this.props.actions.getProfilesNotInChannel(this.props.channel.team_id,this.props.channel.id,this.props.channel.group_constrained,e+1,Qh).then(()=>{this.setUsersLoadingState(!1)}))}),Kh(this,"handleSubmit",e=>{const{actions:t,channel:a}=this.props;e&&e.preventDefault();const n=this.state.values.map(e=>e.id);0!==n.length&&(this.setState({saving:!0}),t.addUsersToChannel(a.id,n).then(e=>{e.error?this.handleInviteError(e.error):(this.setState({saving:!1,inviteError:null}),this.onHide())}))}),Kh(this,"search",e=>{const t=e.trim();clearTimeout(this.searchTimeoutId),this.setState({term:t}),this.searchTimeoutId=setTimeout(async()=>{this.setUsersLoadingState(!0);const e={team_id:this.props.channel.team_id,not_in_channel_id:this.props.channel.id,group_constrained:this.props.channel.group_constrained};await this.props.actions.searchProfiles(t,e),this.setUsersLoadingState(!1)},S.Q.SEARCH_TIMEOUT_MILLISECONDS)}),Kh(this,"renderAriaLabel",e=>e?e.username:null),Kh(this,"renderOption",(e,t,a)=>{var n="";return t&&(n="more-modal__row--selected"),y.a.createElement("div",{key:e.id,ref:t?"selected":e.id,className:"more-modal__row clickable "+n,onClick:()=>a(e)},y.a.createElement(Go.a,{src:rn.Client4.getProfilePictureUrl(e.id,e.last_picture_update),size:"md"}),y.a.createElement("div",{className:"more-modal__details"},y.a.createElement("div",{className:"more-modal__name"},Object(M.m)(e),y.a.createElement(Wa.a,{show:Boolean(e.is_bot),className:"badge-popoverlist"}),y.a.createElement(za.a,{show:Object(M.W)(e),className:"popoverlist"}))),y.a.createElement("div",{className:"more-modal__actions"},y.a.createElement("div",{className:"more-modal__actions--round"},y.a.createElement(dp.a,null))))}),this.searchTimeoutId=0,this.state={values:[],term:"",show:!0,saving:!1,loadingUsers:!0}}componentDidMount(){this.props.actions.getProfilesNotInChannel(this.props.channel.team_id,this.props.channel.id,this.props.channel.group_constrained,0).then(()=>{this.setUsersLoadingState(!1)}),this.props.actions.getTeamStats(this.props.channel.team_id)}renderValue(e){return e.data.username}render(){let e=null;this.state.inviteError&&(e=y.a.createElement("label",{className:"has-error control-label"},this.state.inviteError));const t=y.a.createElement(W.c,{id:"multiselect.numPeopleRemaining",defaultMessage:"Use ↑↓ to browse, ↵ to select. You can add {num, number} more {num, plural, one {person} other {people}}. ",values:{num:Zh-this.state.values.length}}),a=Object(M.fb)("multiselect.add","Add"),n=Object(M.fb)("multiselect.adding","Adding...");let s=Object(Ga.filterProfilesMatchingTerm)(this.props.profilesNotInCurrentChannel,this.state.term);s=s.filter(e=>0===e.delete_at);const i=y.a.createElement(cp.a,{key:"addUsersToChannelKey",options:s,optionRenderer:this.renderOption,values:this.state.values,valueRenderer:this.renderValue,ariaLabelRenderer:this.renderAriaLabel,perPage:Qh,handlePageChange:this.handlePageChange,handleInput:this.search,handleDelete:this.handleDelete,handleAdd:this.addValue,handleSubmit:this.handleSubmit,maxValues:Zh,numRemainingText:t,buttonSubmitText:a,buttonSubmitLoadingText:n,saving:this.state.saving,loading:this.state.loadingUsers,placeholderText:Object(M.fb)("multiselect.placeholder","Search and add members")});return y.a.createElement(V.a,{id:"addUsersToChannelModal",dialogClassName:"a11y__modal more-modal",show:this.state.show,onHide:this.onHide,onExited:this.props.onHide,role:"dialog","aria-labelledby":"channelInviteModalLabel"},y.a.createElement(V.a.Header,{closeButton:!0},y.a.createElement(V.a.Title,{componentClass:"h1",id:"channelInviteModalLabel"},y.a.createElement(W.c,{id:"channel_invite.addNewMembers",defaultMessage:"Add New Members to "}),y.a.createElement("span",{className:"name"},this.props.channel.display_name))),y.a.createElement(V.a.Body,{role:"application"},e,i))}}Kh(Jh,"propTypes",{profilesNotInCurrentChannel:_.a.array.isRequired,onHide:_.a.func.isRequired,channel:_.a.object.isRequired,actions:_.a.shape({addUsersToChannel:_.a.func.isRequired,getProfilesNotInChannel:_.a.func.isRequired,getTeamStats:_.a.func.isRequired,searchProfiles:_.a.func.isRequired}).isRequired});var Xh=Object(n.connect)(function(e){return{profilesNotInCurrentChannel:Object(m.getProfilesNotInCurrentChannel)(e)}},function(e){return{actions:Object(s.bindActionCreators)({addUsersToChannel:an.a,getProfilesNotInChannel:o.getProfilesNotInChannel,getTeamStats:l.getTeamStats,searchProfiles:o.searchProfiles},e)}})(Jh);function $h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const eg=3;class tg extends y.a.Component{constructor(e){super(e),$h(this,"handleRemoveFromChannel",()=>{if(this.state.removing)return;const{actions:e,channel:t,user:a}=this.props;this.setState({removing:!0}),e.removeChannelMember(t.id,a.id).then(a=>{a.error?this.setState({serverError:a.error.message,removing:!1}):(this.setState({removing:!1}),e.getChannelStats(t.id))})}),$h(this,"handleMakeChannelMember",async()=>{const{error:e}=await this.props.actions.updateChannelMemberSchemeRoles(this.props.channel.id,this.props.user.id,!0,!1);e?this.setState({serverError:e.message}):this.props.actions.getChannelStats(this.props.channel.id)}),$h(this,"handleMakeChannelAdmin",async()=>{const{error:e}=await this.props.actions.updateChannelMemberSchemeRoles(this.props.channel.id,this.props.user.id,!0,!0);e?this.setState({serverError:e.message}):this.props.actions.getChannelStats(this.props.channel.id)}),this.state={serverError:null,removing:!1}}renderRole(e,t){return e?y.a.createElement(W.c,{id:"channel_members_dropdown.channel_admin",defaultMessage:"Channel Admin"}):t?y.a.createElement(W.c,{id:"channel_members_dropdown.channel_guest",defaultMessage:"Channel Guest"}):y.a.createElement(W.c,{id:"channel_members_dropdown.channel_member",defaultMessage:"Channel Member"})}render(){const e=this.props.isLicensed,t=e&&(M.Q(this.props.isLicensed,this.props.channelMember.roles)||this.props.channelMember.scheme_admin),a=M.W(this.props.user);let n=null;if(this.state.serverError&&(n=y.a.createElement("div",{className:"has-error"},y.a.createElement("label",{className:"has-error control-label"},this.state.serverError))),this.props.user.id===this.props.currentUserId)return null;if(this.props.canChangeMemberRoles){const s=this.renderRole(t,a),i=this.props.canRemoveMember&&(this.props.channel.name!==S.i.DEFAULT_CHANNEL||a)&&!this.props.channel.group_constrained,o=t&&!a,r=e&&!t&&!a;if(o||r||i){const{index:e,totalUsers:t}=this.props;let a=!1;return t>eg&&t-e<=eg&&(a=!0),y.a.createElement(fi.a,null,y.a.createElement("button",{className:"dropdown-toggle theme color--link style--none",type:"button"},y.a.createElement("span",{className:"sr-only"},this.props.user.username),y.a.createElement("span",null,s," "),y.a.createElement(im,null)),y.a.createElement(Ei.a,{openLeft:!0,openUp:a,ariaLabel:M.fb("channel_members_dropdown.menuAriaLabel","Channel member role change")},y.a.createElement(Ei.a.ItemAction,{show:o,onClick:this.handleMakeChannelMember,text:M.fb("channel_members_dropdown.make_channel_member","Make Channel Member")}),y.a.createElement(Ei.a.ItemAction,{show:r,onClick:this.handleMakeChannelAdmin,text:M.fb("channel_members_dropdown.make_channel_admin","Make Channel Admin")}),y.a.createElement(Ei.a.ItemAction,{show:i,onClick:this.handleRemoveFromChannel,text:M.fb("channel_members_dropdown.remove_from_channel","Remove From Channel")}),n))}}return this.props.channel.name===S.i.DEFAULT_CHANNEL?y.a.createElement("div",null):y.a.createElement("div",null,this.renderRole(t))}}$h(tg,"propTypes",{channel:_.a.object.isRequired,user:_.a.object.isRequired,currentUserId:_.a.string.isRequired,channelMember:_.a.object.isRequired,isLicensed:_.a.bool.isRequired,canChangeMemberRoles:_.a.bool.isRequired,canRemoveMember:_.a.bool.isRequired,index:_.a.number.isRequired,totalUsers:_.a.number.isRequired,actions:_.a.shape({getChannelStats:_.a.func.isRequired,updateChannelMemberSchemeRoles:_.a.func.isRequired,removeChannelMember:_.a.func.isRequired}).isRequired});var ag=Object(n.connect)(function(e,t){const{channel:a}=t,n=Object(D.haveIChannelPermission)(e,{channel:a.id,team:a.team_id,permission:x.Permissions.MANAGE_CHANNEL_ROLES}),s="true"===Object(d.getLicense)(e).IsLicensed,i=Object(pa.a)(a);return{currentUserId:Object(m.getCurrentUserId)(e),isLicensed:s,canChangeMemberRoles:n,canRemoveMember:i}},function(e){return{actions:Object(s.bindActionCreators)({getChannelStats:r.getChannelStats,updateChannelMemberSchemeRoles:r.updateChannelMemberSchemeRoles,removeChannelMember:r.removeChannelMember},e)}})(tg);function ng(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const sg=50;class ig extends y.a.PureComponent{constructor(e){super(e),ng(this,"loadComplete",()=>{this.setState({loading:!1})}),ng(this,"nextPage",e=>{this.props.actions.loadProfilesAndTeamMembersAndChannelMembers(e+1,sg)}),ng(this,"handleSearch",e=>{this.props.actions.setModalSearchTerm(e)}),this.searchTimeoutId=0,this.state={loading:!0}}componentDidMount(){const{actions:e,currentChannelId:t,currentTeamId:a}=this.props;e.loadProfilesAndTeamMembersAndChannelMembers(0,S.Q.PROFILE_CHUNK_SIZE,a,t).then(({data:e})=>{e&&this.loadComplete()}),e.getChannelStats(t)}componentWillUnmount(){this.props.actions.setModalSearchTerm("")}UNSAFE_componentWillReceiveProps(e){if(this.props.searchTerm!==e.searchTerm){clearTimeout(this.searchTimeoutId);const t=e.searchTerm;if(""===t)return this.loadComplete(),void(this.searchTimeoutId="");const a=setTimeout(async()=>{const{data:n}=await this.props.actions.searchProfiles(t,{team_id:e.currentTeamId,in_channel_id:e.currentChannelId});a===this.searchTimeoutId&&(this.setState({loading:!0}),e.actions.loadStatusesForProfilesList(n),e.actions.loadTeamMembersAndChannelMembersForProfilesList(n,e.currentTeamId,e.currentChannelId).then(({data:e})=>{e&&this.loadComplete()}))},S.Q.SEARCH_TIMEOUT_MILLISECONDS);this.searchTimeoutId=a}}render(){const e=0!==this.props.channel.delete_at;return y.a.createElement(sm,{users:this.props.usersToDisplay,usersPerPage:sg,total:this.props.totalChannelMembers,nextPage:this.nextPage,search:this.handleSearch,actions:e?[]:[ag],actionUserProps:this.props.actionUserProps,focusOnMount:!P.m()})}}function og(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function rg(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}ng(ig,"propTypes",{currentTeamId:_.a.string.isRequired,currentChannelId:_.a.string.isRequired,searchTerm:_.a.string.isRequired,usersToDisplay:_.a.arrayOf(_.a.object).isRequired,actionUserProps:_.a.object.isRequired,totalChannelMembers:_.a.number.isRequired,channel:_.a.object.isRequired,actions:_.a.shape({searchProfiles:_.a.func.isRequired,getChannelStats:_.a.func.isRequired,setModalSearchTerm:_.a.func.isRequired,loadProfilesAndTeamMembersAndChannelMembers:_.a.func.isRequired,loadStatusesForProfilesList:_.a.func.isRequired,loadTeamMembersAndChannelMembersForProfilesList:_.a.func.isRequired}).isRequired});const lg=Object(Ps.createSelector)((e,t)=>t,u.getMembersInCurrentTeam,p.getMembersInCurrentChannel,p.getCurrentChannel,(e=[],t={},a={},n={})=>{const s={},i=[];for(let o=0;o<e.length;o++){const r=e[o];t[r.id]&&a[r.id]&&0===r.delete_at&&(i.push(r),s[r.id]={channel:n,teamMember:t[r.id],channelMember:a[r.id]})}return{usersToDisplay:i.sort(Ga.sortByUsername),actionUserProps:s}});var cg=Object(n.connect)(function(e){const t=e.views.search.modalSearch;let a;a=t?Object(m.searchProfilesInCurrentChannel)(e,t):Object(m.getProfilesInCurrentChannel)(e);const n=Object(p.getCurrentChannelStats)(e)||{member_count:0};return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?og(a,!0).forEach(function(t){rg(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):og(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},lg(e,a),{currentTeamId:e.entities.teams.currentTeamId,currentChannelId:e.entities.channels.currentChannelId,searchTerm:t,totalChannelMembers:n.member_count})},function(e){return{actions:Object(s.bindActionCreators)({searchProfiles:o.searchProfiles,getChannelStats:r.getChannelStats,setModalSearchTerm:tm.a,loadProfilesAndTeamMembersAndChannelMembers:$n.h,loadStatusesForProfilesList:h.b,loadTeamMembersAndChannelMembersForProfilesList:$n.l},e)}})(ig);function dg(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class mg extends y.a.PureComponent{constructor(e){super(e),dg(this,"handleHide",()=>{this.setState({show:!1})}),dg(this,"handleExit",()=>{this.props.onHide()}),dg(this,"onAddNewMembersButton",()=>{const{channel:e,actions:t}=this.props;t.openModal({modalId:S.s.CHANNEL_INVITE,dialogType:Xh,dialogProps:{channel:e}}),this.handleExit()}),this.state={show:!0}}render(){const e=0!==this.props.channel.delete_at;return y.a.createElement("div",null,y.a.createElement(V.a,{dialogClassName:"a11y__modal more-modal more-modal--action",show:this.state.show,onHide:this.handleHide,onExited:this.handleExit,role:"dialog","aria-labelledby":"channelMembersModalLabel"},y.a.createElement(V.a.Header,{closeButton:!0},y.a.createElement(V.a.Title,{componentClass:"h1",id:"channelMembersModalLabel"},y.a.createElement("span",{className:"name"},this.props.channel.display_name),y.a.createElement(W.c,{id:"channel_members_modal.members",defaultMessage:" Members"})),this.props.canManageChannelMembers&&!e&&y.a.createElement("a",{id:"showInviteModal",className:"btn btn-md btn-primary",href:"#",onClick:this.onAddNewMembersButton},y.a.createElement(W.c,{id:"channel_members_modal.addNew",defaultMessage:" Add New Members"}))),y.a.createElement(V.a.Body,null,y.a.createElement(cg,{channel:this.props.channel}))))}}dg(mg,"propTypes",{canManageChannelMembers:_.a.bool.isRequired,channel:_.a.object.isRequired,onHide:_.a.func.isRequired,actions:_.a.shape({openModal:_.a.func.isRequired}).isRequired});var ug=Object(n.connect)(e=>({canManageChannelMembers:Object(p.canManageChannelMembers)(e)}),e=>({actions:Object(s.bindActionCreators)({openModal:U.b},e)}))(mg);class pg extends y.a.PureComponent{render(){return y.a.createElement("span",this.props,y.a.createElement(W.c,{id:"generic_icons.member",defaultMessage:"Member Icon"},e=>y.a.createElement("svg",{width:"14px",height:"14px",viewBox:"0 0 16 16",role:"icon","aria-label":e},y.a.createElement("g",{id:"Symbols",stroke:"none",strokeWidth:"1",fill:"inherit",fillRule:"evenodd"},y.a.createElement("g",{id:"Channel-Header/Web-HD",transform:"translate(-725.000000, -32.000000)",fillRule:"nonzero",fill:"inherit"},y.a.createElement("g",{id:"Channel-Header"},y.a.createElement("g",{id:"user-count",transform:"translate(676.000000, 22.000000)"},y.a.createElement("path",{d:"M64.9481342,24 C64.6981342,20.955 63.2551342,19.076 60.6731342,18.354 C61.4831342,17.466 61.9881342,16.296 61.9881342,15 C61.9881342,12.238 59.7501342,10 56.9881342,10 C54.2261342,10 51.9881342,12.238 51.9881342,15 C51.9881342,16.297 52.4941342,17.467 53.3031342,18.354 C50.7221342,19.076 49.2771342,20.955 49.0271342,24 C49.0161342,24.146 49.0061342,24.577 49.0001342,25.001 C48.9911342,25.553 49.4361342,26 49.9881342,26 L63.9881342,26 C64.5411342,26 64.9851342,25.553 64.9761342,25.001 C64.9701342,24.577 64.9601342,24.146 64.9481342,24 Z M56.9881342,12 C58.6421342,12 59.9881342,13.346 59.9881342,15 C59.9881342,16.654 58.6421342,18 56.9881342,18 C55.3341342,18 53.9881342,16.654 53.9881342,15 C53.9881342,13.346 55.3341342,12 56.9881342,12 Z M51.0321342,24 C51.2981342,21.174 52.7911342,20 55.9881342,20 L57.9881342,20 C61.1851342,20 62.6781342,21.174 62.9441342,24 L51.0321342,24 Z",id:"User_4_x2C__Profile_5-Copy-9"}))))))))}}class hg extends y.a.PureComponent{render(){return y.a.createElement("button",Object.assign({},this.props,{"aria-label":Object(M.fb)("members_popover.button.message","message"),className:"style--none icon icon__message"}),y.a.createElement(W.c,{id:"generic_icons.message",defaultMessage:"Message Icon"},e=>y.a.createElement("svg",{width:"18px",height:"16px",viewBox:"0 0 18 16",role:"icon","aria-label":e},y.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"inherit",fillRule:"evenodd"},y.a.createElement("g",{transform:"translate(-200.000000, -174.000000)",fill:"inherit"},y.a.createElement("g",{transform:"translate(200.000000, 174.000000)"},y.a.createElement("path",{d:"M7.2546625,1.42801356 C10.458475,1.42801356 12.999475,3.24528136 12.999475,5.52023729 C12.9895,8.04188475 10.6062625,9.89326102 7.40245,9.89326102 C7.40245,9.89326102 6.9134125,9.91229831 6.4115125,9.83747119 L5.82535,9.79622373 L5.15335,10.3586169 C4.997425,10.5397356 4.3199125,11.1095322 3.736375,11.4794373 C4.0915375,10.4598847 4.07605,10.1370441 4.07605,10.1370441 L4.1251375,9.49004068 L3.55315,9.19549153 C2.0986375,8.44616271 1.4444875,6.88616271 1.4444875,5.52023729 C1.4444875,3.24528136 4.05085,1.42801356 7.2546625,1.42801356 M7.2546625,0.370386441 C3.465475,0.370386441 0.3944875,2.65829831 0.3944875,5.52023729 C0.3944875,7.3028678 1.2623125,9.20342373 3.0751375,10.1370441 C3.0751375,10.1478847 3.07225,10.1560814 3.07225,10.1679797 C3.07225,10.9426915 2.43175,12.0048136 2.1794875,12.4429356 L2.1805375,12.4429356 C2.1605875,12.4902644 2.148775,12.5420881 2.148775,12.5973492 C2.148775,12.8141627 2.322025,12.9881424 2.5375375,12.9881424 C2.5693,12.9881424 2.6210125,12.9815322 2.6393875,12.9815322 C2.6446375,12.9815322 2.6467375,12.9815322 2.6462125,12.9831186 C3.986275,12.762339 5.9642125,11.2435864 6.2576875,10.8837288 C6.5585125,10.928678 6.761425,10.9358169 7.0136875,10.9358169 C7.120525,10.9358169 7.2347125,10.9342305 7.3696375,10.9342305 C11.1583,10.9342305 14.094625,8.75446102 14.049475,5.52023729 C14.049475,2.65829831 11.0435875,0.370386441 7.2546625,0.370386441"}),y.a.createElement("path",{d:"M17.2055125,9.79172881 C17.2055125,8.35811525 16.6498,7.26532203 15.2624875,6.4451322 C15.228625,6.82614237 15.120475,7.23517966 15.0031375,7.59477288 C15.8998375,8.21903729 16.1555125,8.85995932 16.1555125,9.79172881 C16.1555125,10.9323797 15.62815,11.7597085 14.40175,12.3919051 L13.879375,12.653139 C13.879375,12.653139 13.9337125,14.0082237 14.0140375,14.3511593 C12.9895,13.5946915 12.6374875,12.9630237 12.6374875,12.9630237 L12.08545,13.0486915 C11.86705,13.0809492 11.276425,13.0812136 11.276425,13.0812136 C9.85,13.0812136 8.7929125,12.7388068 7.8909625,12.0278169 C8.135875,12.0124814 6.42805,12.0132746 6.3899875,12.0468542 C7.4326375,13.3297559 9.1373125,14.1388407 11.276425,14.1388407 C11.3927125,14.1388407 11.49115,14.1398983 11.58355,14.1398983 C11.801425,14.1398983 11.9773,14.1338169 12.237175,14.095478 C12.491275,14.4058915 13.914025,15.7728746 15.0724375,15.9629831 C15.0719125,15.9619254 15.073225,15.9619254 15.078475,15.9619254 C15.0939625,15.9619254 15.13885,15.967478 15.16615,15.967478 C15.3522625,15.967478 15.5024125,15.8167661 15.5024125,15.6293017 C15.5024125,15.5817085 15.49165,15.5367593 15.47485,15.4960407 L15.4759,15.4960407 C15.258025,15.117939 14.9159875,14.0129831 14.9159875,13.3435051 C14.9159875,13.3331932 14.9128375,13.3260542 14.9128375,13.3168 C16.4797,12.5095661 17.2055125,11.3321627 17.2055125,9.79172881"})))))))}}function gg(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class bg extends y.a.PureComponent{constructor(...e){super(...e),gg(this,"handleClick",()=>{this.props.onItemClick(this.props.user)})}render(){if(!this.props.user)return null;const e=M.w(this.props.user);if(!e)return null;let t;this.props.showMessageIcon&&(t=y.a.createElement(hg,{"aria-hidden":"true"}));const a=this.props.user.is_bot?" more-modal__row--bot":"",n=this.props.user.is_bot?null:this.props.status;return y.a.createElement("div",{tabIndex:"0","aria-label":e.toLowerCase(),className:"more-modal__row"+a,onClick:this.handleClick},y.a.createElement(Go.a,{src:rn.Client4.getProfilePictureUrl(this.props.user.id,this.props.user.last_picture_update),status:n,size:"md"}),y.a.createElement("div",{className:"more-modal__details d-flex whitespace--nowrap"},y.a.createElement("div",{className:"more-modal__name"},e),y.a.createElement(Wa.a,{show:Boolean(this.props.user.is_bot),className:"badge-popoverlist"}),y.a.createElement(za.a,{show:M.W(this.props.user),className:"badge-popoverlist"})),y.a.createElement("div",{className:"more-modal__actions"},t))}}function fg(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}gg(bg,"propTypes",{showMessageIcon:_.a.bool.isRequired,onItemClick:_.a.func.isRequired,status:_.a.string.isRequired,user:_.a.object.isRequired}),gg(bg,"defaultProps",{status:S.O.OFFLINE});class Eg extends y.a.Component{constructor(e){super(e),fg(this,"sortUsers",(e,t)=>M.ob(e,t)),fg(this,"handleShowDirectChannel",e=>{const{actions:t}=this.props,a=e.id;a&&t.openDirectChannelToUserId(a).then(({data:e})=>{e&&z.a.push(this.props.teamUrl+"/channels/"+e.name),this.closePopover()})}),fg(this,"closePopover",()=>{this.setState({showPopover:!1})}),fg(this,"showMembersModal",e=>{e.preventDefault(),this.setState({showPopover:!1,showChannelMembersModal:!0})}),fg(this,"hideChannelMembersModal",()=>{this.setState({showChannelMembersModal:!1})}),fg(this,"showChannelInviteModal",()=>{this.setState({showChannelInviteModal:!0})}),fg(this,"hideChannelInviteModal",()=>{this.setState({showChannelInviteModal:!1})}),fg(this,"hideTeamMembersModal",()=>{this.setState({showTeamMembersModal:!1})}),fg(this,"handleGetProfilesInChannel",e=>{this.setState({popoverTarget:e.target,showPopover:!this.state.showPopover}),this.props.actions.loadProfilesAndStatusesInChannel(this.props.channel.id,0,void 0,"status")}),fg(this,"getTargetPopover",()=>(this.membersList.current.focus(),this.state.popoverTarget)),this.membersList=y.a.createRef(),this.state={showPopover:!1,showTeamMembersModal:!1,showChannelMembersModal:!1,showChannelInviteModal:!1,sortedUsers:this.sortUsers(e.users,e.statuses)}}componentDidUpdate(){ys()(".member-list__popover .popover-content .more-modal__body").perfectScrollbar()}UNSAFE_componentWillReceiveProps(e){if(this.props.users!==e.users||this.props.statuses!==e.statuses){const t=this.sortUsers(e.users,e.statuses);this.setState({sortedUsers:t})}}render(){const e=this.props.channel.type===S.i.DM_CHANNEL,t=this.state.sortedUsers.map(t=>y.a.createElement(bg,{key:t.id,onItemClick:this.handleShowDirectChannel,showMessageIcon:this.props.currentUserId!==t.id&&!e,status:this.props.statuses[t.id],user:t})),a=0!==this.props.channel.delete_at;let n;if(this.props.channel.type!==S.i.GM_CHANNEL&&!a){let e=y.a.createElement(W.c,{id:"members_popover.manageMembers",defaultMessage:"Manage Members"});const t=Object(pa.a)(this.props.channel);!(this.props.channel.name===S.i.DEFAULT_CHANNEL)&&t||(e=y.a.createElement(W.c,{id:"members_popover.viewMembers",defaultMessage:"View Members"})),n=y.a.createElement("div",{className:"more-modal__button",key:"popover-member-more"},y.a.createElement("button",{className:"btn btn-link",onClick:this.showMembersModal},e))}const s=this.props.memberCount;let i="-";s>0&&(i=s.toString());const o=y.a.createElement(W.c,{id:"members_popover.title",defaultMessage:"Channel Members"});let r,l,c;this.state.showChannelMembersModal&&(r=y.a.createElement(ug,{onHide:this.hideChannelMembersModal,showInviteModal:this.showChannelInviteModal,channel:this.props.channel})),this.state.showTeamMembersModal&&(l=y.a.createElement(bm,{onHide:this.hideTeamMembersModal})),this.state.showChannelInviteModal&&(c=y.a.createElement(Xh,{onHide:this.hideChannelInviteModal,channel:this.props.channel}));const d=y.a.createElement(Zs.a,{id:"channelMembersTooltip"},y.a.createElement(W.c,{id:"channel_header.channelMembers",defaultMessage:"Members"})),m="".concat(M.fb("channel_header.channelMembers","Members")).toLowerCase();return y.a.createElement("div",{id:"channelMember"},y.a.createElement("button",{id:"member_popover","aria-label":m,className:"style--none member-popover__trigger channel-header__icon wide "+(this.state.showPopover?"active":""),ref:"member_popover_target",onClick:this.handleGetProfilesInChannel},y.a.createElement(Qs.a,{delayShow:S.i.OVERLAY_TIME_DELAY,placement:"bottom",overlay:d},y.a.createElement("div",null,y.a.createElement("span",{id:"channelMemberCountText",className:"icon__text"},i),y.a.createElement(pg,{id:"channelMemberIcon",className:"icon icon__members","aria-hidden":"true"})))),y.a.createElement(Z.a,{rootClose:!0,onHide:this.closePopover,show:this.state.showPopover,target:this.getTargetPopover,placement:"bottom"},y.a.createElement(Vl.a,{className:"member-list__popover",id:"member-list-popover"},y.a.createElement("div",{className:"more-modal__header"},o,this.props.channel.group_constrained&&y.a.createElement("div",{className:"subhead"},y.a.createElement(W.c,{id:"channel_header.groupConstrained",defaultMessage:"Members managed by linked groups."}))),y.a.createElement("div",{className:"more-modal__body"},y.a.createElement("div",{tabIndex:"-1",role:"presentation",ref:this.membersList,className:"more-modal__list"},t)),n)),r,l,c)}}fg(Eg,"propTypes",{channel:_.a.object.isRequired,statuses:_.a.object.isRequired,users:_.a.array.isRequired,memberCount:_.a.number,currentUserId:_.a.string.isRequired,teamUrl:_.a.string,actions:_.a.shape({openModal:_.a.func.isRequired,loadProfilesAndStatusesInChannel:_.a.func.isRequired,openDirectChannelToUserId:_.a.func.isRequired}).isRequired});var _g=Object(n.connect)(function(){const e=Object(m.makeGetProfilesInChannel)();return function(t,a){const n=Object(p.getAllChannelStats)(t)[a.channel.id]||{},s=e(t,a.channel.id,!0);return{currentUserId:Object(m.getCurrentUserId)(t),memberCount:n.member_count,users:s,statuses:Object(m.getUserStatuses)(t),teamUrl:Object(u.getCurrentRelativeTeamUrl)(t)}}},function(e){return{actions:Object(s.bindActionCreators)({openModal:U.b,loadProfilesAndStatusesInChannel:$n.f,openDirectChannelToUserId:an.e},e)}})(Eg);class vg extends y.a.PureComponent{render(){return y.a.createElement("span",this.props,y.a.createElement(W.c,{id:"generic_icons.pin",defaultMessage:"Pin Icon"},e=>y.a.createElement("svg",{width:"14px",height:"14px",viewBox:"0 0 16 16",version:"1.1",role:"icon","aria-label":e},y.a.createElement("g",{id:"Symbols",stroke:"inherit",strokeWidth:"1",fill:"inherit",fillRule:"evenodd"},y.a.createElement("g",{transform:"translate(-775.000000, -32.000000)",fillRule:"nonzero",fill:"inherit"},y.a.createElement("g",null,y.a.createElement("g",{transform:"translate(764.000000, 22.000000)"},y.a.createElement("g",{transform:"translate(10.000000, 10.000000)"},y.a.createElement("path",{d:"M16.456,7.291 L9.483,0.25 C9.31,0.078 9.178,0 9.08,0 C8.896,0 8.831,0.276 8.831,0.732 L8.831,3.044 L5.831,5.96 L2.578,6.268 C1.887,6.405 1.668,6.917 2.167,7.41 L4.781,10.011 L3.83,10.961 L1.05,15.511 C0.93,15.761 1.03,15.862 1.28,15.74 L5.83,12.961 L6.786,12.005 L9.359,14.565 C9.556,14.76 9.754,14.854 9.929,14.854 C10.197,14.854 10.413,14.634 10.497,14.219 L10.83,10.961 L13.746,7.961 L16.082,7.961 C16.788,7.961 16.955,7.785 16.456,7.291 Z M12.312,6.567 L9.396,9.567 L8.911,10.065 L8.84,10.757 L8.797,11.184 L5.589,7.992 L6.018,7.952 L6.72,7.886 L7.225,7.396 L10.225,4.48 L10.547,4.167 L12.616,6.256 L12.312,6.567 Z"})))))))))}}function yg(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Cg extends y.a.PureComponent{constructor(...e){super(...e),yg(this,"createButton",e=>{const t=()=>this.fireAction(e);return this.props.isDropdown?y.a.createElement("li",{key:"mobileChannelHeaderItem"+e.id,role:"presentation",className:"MenuItem"},y.a.createElement("a",{role:"menuitem",href:"#",onClick:t},e.dropdownText)):y.a.createElement("li",{className:"flex-parent--center"},y.a.createElement("button",{className:"navbar-toggle navbar-right__icon",onClick:t},y.a.createElement("span",{className:"icon navbar-plugin-button"},e.icon)))})}createList(e){return e.map(this.createButton)}fireAction(e){return e.action(this.props.channel,this.props.channelMember)}render(){const e=this.props.components||[];return 0===e.length?null:1===e.length?this.createButton(e[0]):this.props.isDropdown?this.createList(e):null}}yg(Cg,"propTypes",{components:_.a.array,isDropdown:_.a.bool.isRequired,channel:_.a.object.isRequired,channelMember:_.a.object.isRequired,theme:_.a.object.isRequired});var wg=Object(n.connect)(function(e){return{channelMember:Object(p.getMyCurrentChannelMembership)(e),components:e.plugins.components.MobileChannelHeaderButton,theme:Object(c.getTheme)(e)}})(Cg);function Tg({section:e,isCollapsed:t,memberNotifyLevel:a,globalNotifyLevel:n,ignoreChannelMentions:s}){if(a===S.t.DEFAULT&&n){Object(le.b)("channel_notifications.levels.default"),Object(le.b)("channel_notifications.levels.all"),Object(le.b)("channel_notifications.levels.mention"),Object(le.b)("channel_notifications.levels.none");const e="channel_notifications.levels."+n;return y.a.createElement(y.a.Fragment,null,y.a.createElement(W.c,{id:"channel_notifications.globalDefault",defaultMessage:"Global default"}),y.a.createElement("span",null," ("),y.a.createElement(W.c,{id:e,defaultMessage:n}),y.a.createElement("span",null,")"))}return a===S.t.MENTION&&e===S.u.MARK_UNREAD?t?y.a.createElement(W.c,{id:"channel_notifications.muteChannel.on.title.collapse",defaultMessage:"Mute is enabled. Desktop, email and push notifications will not be sent for this channel."}):y.a.createElement(W.c,{id:"channel_notifications.muteChannel.on.title",defaultMessage:"On"}):e===S.u.IGNORE_CHANNEL_MENTIONS&&s===S.n.ON?y.a.createElement(W.c,{id:"channel_notifications.ignoreChannelMentions.on.title",defaultMessage:"On"}):e===S.u.IGNORE_CHANNEL_MENTIONS&&s===S.n.OFF?y.a.createElement(W.c,{id:"channel_notifications.ignoreChannelMentions.off.title",defaultMessage:"Off"}):a===S.t.MENTION?y.a.createElement(W.c,{id:"channel_notifications.onlyMentions",defaultMessage:"Only for mentions"}):e!==S.u.DESKTOP&&e!==S.u.PUSH||a!==S.t.ALL?e===S.u.MARK_UNREAD&&a===S.t.ALL?y.a.createElement(W.c,{id:"channel_notifications.muteChannel.off.title",defaultMessage:"Off"}):y.a.createElement(W.c,{id:"channel_notifications.never",defaultMessage:"Never"}):y.a.createElement(W.c,{id:"channel_notifications.allActivity",defaultMessage:"For all activity"})}function Og({section:e}){return e===S.u.DESKTOP?y.a.createElement(W.c,{id:"channel_notifications.sendDesktop",defaultMessage:"Send desktop notifications"}):e===S.u.PUSH?y.a.createElement(W.c,{id:"channel_notifications.push",defaultMessage:"Send mobile push notifications"}):e===S.u.MARK_UNREAD?y.a.createElement(W.c,{id:"channel_notifications.muteChannel.settings",defaultMessage:"Mute Channel"}):e===S.u.IGNORE_CHANNEL_MENTIONS?y.a.createElement(W.c,{id:"channel_notifications.ignoreChannelMentions",defaultMessage:"Ignore mentions for @channel, @here and @all"}):null}function Sg({onExpandSection:e,globalNotifyLevel:t,memberNotifyLevel:a,section:n,ignoreChannelMentions:s}){return y.a.createElement(vm.a,{title:y.a.createElement(Og,{section:n}),describe:y.a.createElement(Tg,{section:n,ignoreChannelMentions:s,memberNotifyLevel:a,globalNotifyLevel:t,isCollapsed:!0}),updateSection:e,section:n})}function Pg({section:e}){switch(e){case S.u.DESKTOP:return y.a.createElement("span",null,y.a.createElement(W.c,{id:"channel_notifications.override",defaultMessage:'Selecting an option other than "Default" will override the global notification settings. Desktop notifications are available on Firefox, Safari, and Chrome.'}));case S.u.PUSH:return y.a.createElement("span",null,y.a.createElement(W.c,{id:"channel_notifications.overridePush",defaultMessage:'Selecting an option other than "Global default" will override the global notification settings for mobile push notifications in account settings. Push notifications must be enabled by the System Admin.'}));case S.u.MARK_UNREAD:return y.a.createElement("span",null,y.a.createElement(W.c,{id:"channel_notifications.muteChannel.help",defaultMessage:"Muting turns off desktop, email and push notifications for this channel. The channel will not be marked as unread unless you are mentioned."}));case S.u.IGNORE_CHANNEL_MENTIONS:return y.a.createElement("span",null,y.a.createElement(W.c,{id:"channel_notifications.ignoreChannelMentions.help",defaultMessage:"When enabled, @channel, @here and @all will not trigger mentions or mention notifications in this channel."}));default:return null}}function Mg({section:e,memberNotifyLevel:t,globalNotifyLevel:a,onChange:n,onSubmit:s,serverError:i,onCollapseSection:o,ignoreChannelMentions:r}){const l=[y.a.createElement("div",{key:"channel-notification-level-radio"},(e===S.u.DESKTOP||e===S.u.PUSH)&&y.a.createElement("fieldset",null,y.a.createElement("div",{className:"radio"},y.a.createElement("label",{className:""},y.a.createElement("input",{id:"channelNotificationGlobalDefault",name:"channelDesktopNotifications",type:"radio",value:S.t.DEFAULT,checked:t===S.t.DEFAULT,onChange:n}),y.a.createElement(Tg,{section:e,memberNotifyLevel:S.t.DEFAULT,globalNotifyLevel:a}))),y.a.createElement("div",{className:"radio"},y.a.createElement("label",{className:""},y.a.createElement("input",{id:"channelNotificationAllActivity",name:"channelDesktopNotifications",type:"radio",value:S.t.ALL,checked:t===S.t.ALL,onChange:n}),y.a.createElement(Tg,{section:e,memberNotifyLevel:S.t.ALL}))),y.a.createElement("div",{className:"radio"},y.a.createElement("label",{className:""},y.a.createElement("input",{id:"channelNotificationMentions",name:"channelDesktopNotifications",type:"radio",value:S.t.MENTION,checked:t===S.t.MENTION,onChange:n}),y.a.createElement(Tg,{section:e,memberNotifyLevel:S.t.MENTION}))),y.a.createElement("div",{className:"radio"},y.a.createElement("label",null,y.a.createElement("input",{id:"channelNotificationNever",name:"channelDesktopNotifications",type:"radio",value:S.t.NONE,checked:t===S.t.NONE,onChange:n}),y.a.createElement(Tg,{section:e,memberNotifyLevel:S.t.NONE})))),e===S.u.IGNORE_CHANNEL_MENTIONS&&y.a.createElement("fieldset",null,y.a.createElement("div",{className:"radio"},y.a.createElement("label",null,y.a.createElement("input",{id:"ignoreChannelMentionsOn",name:"ignoreChannelMentions",type:"radio",value:S.n.ON,checked:r===S.n.ON,onChange:n}),y.a.createElement(Tg,{section:e,ignoreChannelMentions:S.n.ON,memberNotifyLevel:t,globalNotifyLevel:a}))),y.a.createElement("div",{className:"radio"},y.a.createElement("label",null,y.a.createElement("input",{id:"ignoreChannelMentionsOff",name:"ignoreChannelMentions",type:"radio",value:S.n.OFF,checked:r===S.n.OFF,onChange:n}),y.a.createElement(Tg,{section:e,ignoreChannelMentions:S.n.OFF,memberNotifyLevel:t,globalNotifyLevel:a})))),e===S.u.MARK_UNREAD&&y.a.createElement("fieldset",null,y.a.createElement("div",{className:"radio"},y.a.createElement("label",{className:""},y.a.createElement("input",{id:"channelNotificationUnmute",name:"channelNotificationMute",type:"radio",value:S.t.MENTION,checked:t===S.t.MENTION,onChange:n}),y.a.createElement(Tg,{section:e,memberNotifyLevel:S.t.MENTION}))),y.a.createElement("div",{className:"radio"},y.a.createElement("label",{className:""},y.a.createElement("input",{id:"channelNotificationMute",name:"channelNotificationMute",type:"radio",value:S.t.ALL,checked:t===S.t.ALL,onChange:n}),y.a.createElement(Tg,{section:e,memberNotifyLevel:S.t.ALL})))))];return y.a.createElement(_m.a,{title:y.a.createElement(Og,{section:e}),inputs:l,submit:s,server_error:i,updateSection:o,extraInfo:y.a.createElement(Pg,{section:e})})}function Ng(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Tg.propTypes={globalNotifyLevel:_.a.string,ignoreChannelMentions:_.a.string,memberNotifyLevel:_.a.string.isRequired,section:_.a.string.isRequired,isCollapsed:_.a.bool},Og.propTypes={section:_.a.string.isRequired},Sg.propTypes={ignoreChannelMentions:_.a.string,onExpandSection:_.a.func.isRequired,globalNotifyLevel:_.a.string,memberNotifyLevel:_.a.string.isRequired,section:_.a.string.isRequired},Pg.propTypes={section:_.a.string.isRequired},Mg.propTypes={ignoreChannelMentions:_.a.string,onChange:_.a.func.isRequired,onCollapseSection:_.a.func.isRequired,onSubmit:_.a.func.isRequired,globalNotifyLevel:_.a.string,memberNotifyLevel:_.a.string.isRequired,section:_.a.string.isRequired,serverError:_.a.string};class Ig extends y.a.PureComponent{constructor(...e){super(...e),Ng(this,"handleOnChange",e=>{this.props.onChange(e.target.value)}),Ng(this,"handleExpandSection",()=>{this.props.onUpdateSection(this.props.section)}),Ng(this,"handleCollapseSection",()=>{this.props.onUpdateSection(S.u.NONE)})}render(){const{expand:e,globalNotificationLevel:t,memberNotificationLevel:a,ignoreChannelMentions:n,onSubmit:s,section:i,serverError:o}=this.props;return e?y.a.createElement(Mg,{section:i,memberNotifyLevel:a,globalNotifyLevel:t,ignoreChannelMentions:n,onChange:this.handleOnChange,onSubmit:s,serverError:o,onCollapseSection:this.handleCollapseSection}):y.a.createElement(Sg,{section:i,onExpandSection:this.handleExpandSection,memberNotifyLevel:a,globalNotifyLevel:t,ignoreChannelMentions:n})}}function Ag(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function jg(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Ng(Ig,"propTypes",{section:_.a.string.isRequired,expand:_.a.bool.isRequired,memberNotificationLevel:_.a.string.isRequired,ignoreChannelMentions:_.a.string,globalNotificationLevel:_.a.string,onChange:_.a.func.isRequired,onSubmit:_.a.func.isRequired,onUpdateSection:_.a.func.isRequired,serverError:_.a.string});class Rg extends y.a.PureComponent{constructor(e){super(e),jg(this,"handleHide",()=>{this.setState({show:!1})}),jg(this,"handleExit",()=>{this.updateSection(S.u.NONE),this.props.onHide()}),jg(this,"updateSection",(e=S.u.NONE)=>{if(ys()(".section-max").length&&ys()(".settings-modal .modal-body").scrollTop(0).perfectScrollbar("update"),this.setState({activeSection:e}),e===S.u.NONE){const e=this.props.channelMember&&this.props.channelMember.notify_props;this.resetStateFromNotifyProps(e,this.props.currentUser.notify_props)}}),jg(this,"handleUpdateChannelNotifyProps",async e=>{const{actions:t,channel:a,currentUser:n}=this.props,{error:s}=await t.updateChannelNotifyProps(n.id,a.id,e);s?this.setState({serverError:s.message}):this.updateSection(S.u.NONE)}),jg(this,"handleSubmitDesktopNotifyLevel",()=>{const e=this.props.channelMember&&this.props.channelMember.notify_props,{desktopNotifyLevel:t}=this.state;if(e.desktop===t)return void this.updateSection(S.u.NONE);const a={desktop:t};this.handleUpdateChannelNotifyProps(a)}),jg(this,"handleUpdateDesktopNotifyLevel",e=>{this.setState({desktopNotifyLevel:e})}),jg(this,"handleSubmitMarkUnreadLevel",()=>{const e=this.props.channelMember&&this.props.channelMember.notify_props,{markUnreadNotifyLevel:t}=this.state;if(e.mark_unread===t)return void this.updateSection(S.u.NONE);const a={mark_unread:t};this.handleUpdateChannelNotifyProps(a)}),jg(this,"handleUpdateMarkUnreadLevel",e=>{this.setState({markUnreadNotifyLevel:e})}),jg(this,"handleSubmitPushNotificationLevel",()=>{const e=this.props.channelMember&&this.props.channelMember.notify_props,{pushNotifyLevel:t}=this.state;if(e.push===t)return void this.updateSection(S.u.NONE);const a={push:t};this.handleUpdateChannelNotifyProps(a)}),jg(this,"handleUpdatePushNotificationLevel",e=>{this.setState({pushNotifyLevel:e})}),jg(this,"handleUpdateIgnoreChannelMentions",e=>{this.setState({ignoreChannelMentions:e})}),jg(this,"handleSubmitIgnoreChannelMentions",()=>{const e=this.props.channelMember&&this.props.channelMember.notify_props,{ignoreChannelMentions:t}=this.state;if(e.ignore_channel_mentions===t)return void this.updateSection("");const a={ignore_channel_mentions:t};this.handleUpdateChannelNotifyProps(a)});const t=e.channelMember&&e.channelMember.notify_props;this.state=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ag(a,!0).forEach(function(t){jg(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ag(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({show:!0,activeSection:S.u.NONE,serverError:null},this.getStateFromNotifyProps(t,e.currentUser.notify_props))}componentDidUpdate(e){const t=e.channelMember&&e.channelMember.notify_props,a=this.props.channelMember&&this.props.channelMember.notify_props;M.c(a,t)||this.resetStateFromNotifyProps(a,this.props.currentUser.notify_props)}resetStateFromNotifyProps(e,t){this.setState(this.getStateFromNotifyProps(e,t))}getStateFromNotifyProps(e,t){let a=S.n.OFF;t.channel&&"false"===t.channel&&(a=S.n.ON);let n=e.ignore_channel_mentions;return n&&n!==S.n.DEFAULT||(n=a),{desktopNotifyLevel:e.desktop||S.t.DEFAULT,markUnreadNotifyLevel:e.mark_unread||S.t.ALL,pushNotifyLevel:e.push||S.t.DEFAULT,ignoreChannelMentions:n}}render(){const{activeSection:e,desktopNotifyLevel:t,markUnreadNotifyLevel:a,pushNotifyLevel:n,ignoreChannelMentions:s,serverError:i}=this.state,{channel:o,channelMember:r,currentUser:l,sendPushNotifications:c}=this.props;let d=null;return i&&(d=y.a.createElement("div",{className:"form-group has-error"},y.a.createElement("label",{className:"control-label"},i))),y.a.createElement(V.a,{dialogClassName:"a11y__modal settings-modal settings-modal--tabless",show:this.state.show,onHide:this.handleHide,onExited:this.handleExit,role:"dialog","aria-labelledby":"channelNotificationModalLabel"},y.a.createElement(V.a.Header,{closeButton:!0},y.a.createElement(V.a.Title,{componentClass:"h1",id:"channelNotificationModalLabel"},y.a.createElement(W.c,{id:"channel_notifications.preferences",defaultMessage:"Notification Preferences for "}),y.a.createElement("span",{className:"name"},o.display_name))),y.a.createElement(V.a.Body,null,y.a.createElement("div",{className:"settings-table"},y.a.createElement("div",{className:"settings-content"},y.a.createElement("div",{ref:"wrapper",className:"user-settings"},y.a.createElement("br",null),y.a.createElement("div",{className:"divider-dark first"}),y.a.createElement(Ig,{section:S.u.MARK_UNREAD,expand:e===S.u.MARK_UNREAD,memberNotificationLevel:a,onChange:this.handleUpdateMarkUnreadLevel,onSubmit:this.handleSubmitMarkUnreadLevel,onUpdateSection:this.updateSection,serverError:i}),y.a.createElement("div",{className:"divider-light"}),y.a.createElement(Ig,{section:S.u.IGNORE_CHANNEL_MENTIONS,expand:e===S.u.IGNORE_CHANNEL_MENTIONS,memberNotificationLevel:a,ignoreChannelMentions:s,onChange:this.handleUpdateIgnoreChannelMentions,onSubmit:this.handleSubmitIgnoreChannelMentions,onUpdateSection:this.updateSection,serverError:i}),!Object(en.isChannelMuted)(r)&&y.a.createElement("div",null,y.a.createElement("div",{className:"divider-light"}),y.a.createElement(Ig,{section:S.u.DESKTOP,expand:e===S.u.DESKTOP,memberNotificationLevel:t,globalNotificationLevel:l.notify_props?l.notify_props.desktop:S.t.ALL,onChange:this.handleUpdateDesktopNotifyLevel,onSubmit:this.handleSubmitDesktopNotifyLevel,onUpdateSection:this.updateSection,serverError:i}),y.a.createElement("div",{className:"divider-light"}),c&&y.a.createElement(Ig,{section:S.u.PUSH,expand:e===S.u.PUSH,memberNotificationLevel:n,globalNotificationLevel:l.notify_props?l.notify_props.push:S.t.ALL,onChange:this.handleUpdatePushNotificationLevel,onSubmit:this.handleSubmitPushNotificationLevel,onUpdateSection:this.updateSection,serverError:i})),y.a.createElement("div",{className:"divider-dark"})))),d))}}jg(Rg,"propTypes",{onHide:_.a.func.isRequired,channel:_.a.object.isRequired,channelMember:_.a.object.isRequired,currentUser:_.a.object.isRequired,sendPushNotifications:_.a.bool.isRequired,actions:_.a.shape({updateChannelNotifyProps:_.a.func.isRequired})});var kg=Object(n.connect)(e=>({channelMember:Object(p.getMyCurrentChannelMembership)(e),sendPushNotifications:"true"===Object(d.getConfig)(e).SendPushNotifications}),e=>({actions:Object(s.bindActionCreators)({updateChannelNotifyProps:r.updateChannelNotifyProps},e)}))(Rg);function Lg(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function xg(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Dg={singleline:!1,mentionHighlight:!1};class Ug extends y.a.PureComponent{constructor(e){super(e),xg(this,"onHide",()=>{this.setState({show:!1})}),this.state={show:!0},this.getHeaderMarkdownOptions=Object(ud.memoizeResult)(e=>(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Lg(a,!0).forEach(function(t){xg(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Lg(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e})({},Dg,{channelNamesMap:e}))}render(){let e=this.props.channel;const t=0!==e.delete_at;let a;if(!e){const t=M.fb("channel_info.notFound","No Channel Found");e={display_name:t,name:t,purpose:t,header:t,id:t}}const n=this.props.channel.props&&this.props.channel.props.channel_mentions;t?a=y.a.createElement(Cc.a,{className:"icon icon__archive"}):"O"===e.type?a=y.a.createElement(Md.a,{className:"icon icon__globe icon--body"}):"P"===e.type&&(a=y.a.createElement(Nd.a,{className:"icon icon__globe icon--body"}));const s=Object(Mn.e)()+"/"+this.props.currentTeam.name+"/channels/"+e.name;let i,o;e.purpose?i=e.purpose:e.name===S.Q.DEFAULT_CHANNEL&&(i=y.a.createElement(W.c,{id:"default_channel.purpose",defaultMessage:"Post messages here that you want everyone to see. Everyone automatically becomes a permanent member of this channel when they join the team."})),i&&(o=y.a.createElement("div",{className:"form-group"},y.a.createElement("div",{className:"info__label"},y.a.createElement(W.c,{id:"channel_info.purpose",defaultMessage:"Purpose:"})),y.a.createElement("div",{className:"info__value"},i)));let r=null;return e.header&&(r=y.a.createElement("div",{className:"form-group"},y.a.createElement("div",{className:"info__label"},y.a.createElement(W.c,{id:"channel_info.header",defaultMessage:"Header:"})),y.a.createElement("div",{className:"info__value"},y.a.createElement(ua.a,{message:e.header,options:this.getHeaderMarkdownOptions(n)})))),y.a.createElement(V.a,{dialogClassName:"a11y__modal about-modal",show:this.state.show,onHide:this.onHide,onExited:this.props.onHide,role:"dialog","aria-labelledby":"channelInfoModalLabel"},y.a.createElement(V.a.Header,{closeButton:!0},y.a.createElement(V.a.Title,{componentClass:"h1",id:"channelInfoModalLabel"},y.a.createElement(W.c,{id:"channel_info.about",defaultMessage:"About"}),y.a.createElement("strong",null,a,e.display_name))),y.a.createElement(V.a.Body,{ref:"modalBody"},o,r,y.a.createElement("div",{className:"form-group"},y.a.createElement("div",{className:"info__label"},y.a.createElement(W.c,{id:"channel_info.url",defaultMessage:"URL:"})),y.a.createElement("div",{className:"info__value"},s)),y.a.createElement("div",{className:"about-modal__hash form-group padding-top x2"},y.a.createElement("p",null,y.a.createElement(W.c,{id:"channel_info.id",defaultMessage:"ID: "}),e.id))))}}xg(Ug,"propTypes",{onHide:_.a.func.isRequired,channel:_.a.object.isRequired,currentTeam:_.a.object.isRequired});var qg=Object(n.connect)(function(e){return{currentTeam:Object(u.getCurrentTeam)(e)}})(Ug);function Hg(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Fg extends y.a.PureComponent{constructor(e){super(e),Hg(this,"setError",e=>{"api.context.invalid_param.app_error"===e.id?this.setState({serverError:M.fb("edit_channel_purpose_modal.error","This channel purpose is too long, please enter a shorter one")}):this.setState({serverError:e.message})}),Hg(this,"unsetError",()=>{this.setState({serverError:""})}),Hg(this,"handleEntering",()=>{M.jb(this.purpose)}),Hg(this,"onHide",()=>{this.setState({show:!1})}),Hg(this,"handleKeyDown",e=>{const{ctrlSend:t}=this.props;t&&M.X(e,S.Q.KeyCodes.ENTER)&&e.ctrlKey?(e.preventDefault(),this.handleSave(e)):t||!M.X(e,S.Q.KeyCodes.ENTER)||e.shiftKey||e.altKey||(e.preventDefault(),this.handleSave(e))}),Hg(this,"handleSave",()=>{const{channel:e,actions:{patchChannel:t}}=this.props,{purpose:a}=this.state;e&&t(e.id,{purpose:a})}),Hg(this,"handleChange",e=>{e.preventDefault(),this.setState({purpose:e.target.value})}),Hg(this,"getPurpose",e=>{this.purpose=e}),this.state={purpose:e.channel.purpose||"",serverError:"",show:!0,submitted:!1}}UNSAFE_componentWillReceiveProps(e){const{requestStatus:t,serverError:a}=e,{requestStatus:n}=this.props;n!==t&&t===x.RequestStatus.SUCCESS&&this.onHide(),n!==t&&t===x.RequestStatus.FAILURE?this.setError(a):this.unsetError()}render(){let e=null;this.state.serverError&&(e=y.a.createElement("div",{className:"form-group has-error"},y.a.createElement("br",null),y.a.createElement("label",{className:"control-label"},this.state.serverError)));let t=y.a.createElement("span",null,y.a.createElement(W.c,{id:"edit_channel_purpose_modal.title1",defaultMessage:"Edit Purpose"}));this.props.channel.display_name&&(t=y.a.createElement("span",null,y.a.createElement(W.c,{id:"edit_channel_purpose_modal.title2",defaultMessage:"Edit Purpose for "}),y.a.createElement("span",{className:"name"},this.props.channel.display_name)));let a=y.a.createElement(W.c,{id:"edit_channel_purpose_modal.body",defaultMessage:'Describe how this channel should be used. This text appears in the channel list in the "More..." menu and helps others decide whether to join.'});return"P"===this.props.channel.type&&(a=y.a.createElement(W.c,{id:"edit_channel_private_purpose_modal.body",defaultMessage:'This text appears in the \\"View Info\\" modal of the private channel.'})),y.a.createElement(V.a,{dialogClassName:"a11y__modal",show:this.state.show,onHide:this.onHide,onEntering:this.handleEntering,onExited:this.props.onHide,role:"dialog","aria-labelledby":"editChannelPurposeModalLabel"},y.a.createElement(V.a.Header,{closeButton:!0},y.a.createElement(V.a.Title,{componentClass:"h1",id:"editChannelPurposeModalLabel"},t)),y.a.createElement(V.a.Body,null,y.a.createElement("p",null,a),y.a.createElement("textarea",{ref:this.getPurpose,className:"form-control no-resize",rows:"6",maxLength:"250",value:this.state.purpose,onKeyDown:this.handleKeyDown,onChange:this.handleChange}),e),y.a.createElement(V.a.Footer,null,y.a.createElement("button",{type:"button",className:"btn btn-link cancel-button",onClick:this.onHide},y.a.createElement(W.c,{id:"edit_channel_purpose_modal.cancel",defaultMessage:"Cancel"})),y.a.createElement("button",{type:"button",className:"btn btn-primary save-button",disabled:this.props.requestStatus===x.RequestStatus.STARTED,onClick:this.handleSave},y.a.createElement(W.c,{id:"edit_channel_purpose_modal.save",defaultMessage:"Save"}))))}}function Bg(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Gg(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Hg(Fg,"propTypes",{onHide:_.a.func.isRequired,channel:_.a.object,ctrlSend:_.a.bool.isRequired,serverError:_.a.object,requestStatus:_.a.string.isRequired,actions:_.a.shape({patchChannel:_.a.func.isRequired}).isRequired});const Vg=Object(Ps.createSelector)(e=>Object(c.getBool)(e,S.Q.Preferences.CATEGORY_ADVANCED_SETTINGS,"send_on_ctrl_enter"),({requests:e})=>{const{channels:{updateChannel:t}}=e;return{serverError:t.error,requestStatus:t.status}},(e,t)=>(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Bg(a,!0).forEach(function(t){Gg(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Bg(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e})({ctrlSend:e},t));var Wg=Object(n.connect)(Vg,function(e){return{actions:{patchChannel:Object(s.bindActionCreators)(r.patchChannel,e)}}})(Fg);function zg(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Yg=Object(W.g)({required:{id:Object(le.b)("rename_channel.required"),defaultMessage:"This field is required"},maxLength:{id:Object(le.b)("rename_channel.maxLength"),defaultMessage:"This field must be less than {maxLength, number} characters"},lowercase:{id:Object(le.b)("rename_channel.lowercase"),defaultMessage:"Must be lowercase alphanumeric characters"},url:{id:Object(le.b)("rename_channel.url"),defaultMessage:"URL"},defaultError:{id:Object(le.b)("rename_channel.defaultError"),defaultMessage:" - Cannot be changed for the default channel"},displayNameHolder:{id:Object(le.b)("rename_channel.displayNameHolder"),defaultMessage:"Enter display name"},handleHolder:{id:Object(le.b)("rename_channel.handleHolder"),defaultMessage:"lowercase alphanumeric characters"}});class Kg extends y.a.PureComponent{constructor(e){super(e),zg(this,"setError",e=>{this.setState({serverError:e.message})}),zg(this,"unsetError",()=>{this.setState({serverError:""})}),zg(this,"handleEntering",()=>{M.jb(this.textbox)}),zg(this,"handleHide",e=>{e&&e.preventDefault(),this.setState({serverError:"",nameError:"",displayNameError:"",invalid:!1,show:!1})}),zg(this,"handleSubmit",async e=>{e&&e.preventDefault();const t=Object.assign({},this.props.channel),a=t.name,n=t.display_name,s={serverError:""},{formatMessage:i}=this.props.intl,{actions:{patchChannel:o}}=this.props;if(t.display_name=this.state.displayName.trim(),t.display_name?t.display_name.length>S.Q.MAX_CHANNELNAME_LENGTH?(s.displayNameError=i(Yg.maxLength,{maxLength:S.Q.MAX_CHANNELNAME_LENGTH}),s.invalid=!0):t.display_name.length<S.Q.MIN_CHANNELNAME_LENGTH?(s.displayNameError=y.a.createElement(W.c,{id:"rename_channel.minLength",defaultMessage:"Channel name must be {minLength, number} or more characters",values:{minLength:S.Q.MIN_CHANNELNAME_LENGTH}}),s.invalid=!0):s.displayNameError="":(s.displayNameError=i(Yg.required),s.invalid=!0),t.name=this.state.channelName.trim(),t.name)if(t.name.length>S.Q.MAX_CHANNELNAME_LENGTH)s.nameError=i(Yg.maxLength,{maxLength:S.Q.MAX_CHANNELNAME_LENGTH}),s.invalid=!0;else{Object(Mn.a)(t.name)===t.name?s.nameError="":(s.nameError=i(Yg.lowercase),s.invalid=!0)}else s.nameError=i(Yg.required),s.invalid=!0;if(this.setState(s),s.invalid)return;if(a===t.name&&n===t.display_name)return void this.onSaveSuccess();const{data:r,error:l}=await o(t.id,t);r?this.onSaveSuccess():l&&this.setError(l)}),zg(this,"onSaveSuccess",()=>{this.handleHide(),this.unsetError(),z.a.push("/"+this.props.team.name+"/channels/"+this.state.channelName)}),zg(this,"handleCancel",e=>{this.setState({displayName:this.props.channel.display_name,channelName:this.props.channel.name}),this.handleHide(e)}),zg(this,"onNameChange",e=>{this.setState({channelName:e.target.value})}),zg(this,"onDisplayNameChange",e=>{this.setState({displayName:e.target.value})}),zg(this,"getTextbox",e=>{this.textbox=e}),this.state={displayName:e.channel.display_name,channelName:e.channel.name,serverError:"",nameError:"",displayNameError:"",invalid:!1,show:!0}}UNSAFE_componentWillReceiveProps(e){M.c(e.channel,this.props.channel)||this.setState({displayName:e.channel.display_name,channelName:e.channel.name})}render(){let e=null,t="form-group";this.state.displayNameError&&(e=y.a.createElement("label",{className:"control-label"},this.state.displayNameError),t+=" has-error");let a=null,n="form-group";this.state.nameError&&(a=y.a.createElement("label",{className:"control-label"},this.state.nameError),n+=" has-error");let s=null;this.state.serverError&&(s=y.a.createElement("div",{className:"form-group has-error"},y.a.createElement("label",{className:"control-label"},this.state.serverError)));const{formatMessage:i}=this.props.intl;let o=i(Yg.url);let r=!1;this.props.channel.name===S.Q.DEFAULT_CHANNEL&&(o+=i(Yg.defaultError),r=!0);const l=this.props.currentTeamUrl+"/channels",c=Object(Mn.d)(l,35),d=y.a.createElement(Zs.a,{id:"urlTooltip"},l);return y.a.createElement(V.a,{dialogClassName:"a11y__modal",show:this.state.show,onHide:this.handleCancel,onEntering:this.handleEntering,onExited:this.props.onHide,role:"dialog","aria-labelledby":"renameChannelModalLabel"},y.a.createElement(V.a.Header,{closeButton:!0},y.a.createElement(V.a.Title,{componentClass:"h1",id:"renameChannelModalLabel"},y.a.createElement(W.c,{id:"rename_channel.title",defaultMessage:"Rename Channel"}))),y.a.createElement("form",{role:"form"},y.a.createElement(V.a.Body,null,y.a.createElement("div",{className:t},y.a.createElement("label",{className:"control-label"},y.a.createElement(W.c,{id:"rename_channel.displayName",defaultMessage:"Display Name"})),y.a.createElement(re.a,{onChange:this.onDisplayNameChange,type:"text",ref:this.getTextbox,id:"display_name",className:"form-control",placeholder:Yg.displayNameHolder,value:this.state.displayName,maxLength:S.Q.MAX_CHANNELNAME_LENGTH}),e),y.a.createElement("div",{className:n},y.a.createElement("label",{className:"control-label"},o),y.a.createElement("div",{className:"input-group input-group--limit"},y.a.createElement(Qs.a,{delayShow:S.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:d},y.a.createElement("span",{className:"input-group-addon"},c)),y.a.createElement(re.a,{onChange:this.onNameChange,type:"text",className:"form-control",id:"channel_name",placeholder:Yg.handleHolder,value:this.state.channelName,maxLength:S.Q.MAX_CHANNELNAME_LENGTH,readOnly:r})),a),s),y.a.createElement(V.a.Footer,null,y.a.createElement("button",{type:"button",className:"btn btn-link",onClick:this.handleCancel},y.a.createElement(W.c,{id:"rename_channel.cancel",defaultMessage:"Cancel"})),y.a.createElement("button",{onClick:this.handleSubmit,type:"submit",id:"save-button",className:"btn btn-primary"},y.a.createElement(W.c,{id:"rename_channel.save",defaultMessage:"Save"})))))}}zg(Kg,"propTypes",{intl:W.i.isRequired,onHide:_.a.func.isRequired,channel:_.a.object.isRequired,team:_.a.object.isRequired,currentTeamUrl:_.a.string.isRequired,actions:_.a.shape({patchChannel:_.a.func.isRequired}).isRequired});var Qg=Object(W.h)(Kg);function Zg(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Jg(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Xg=Object(Ps.createSelector)(e=>{const t=e.entities.teams.currentTeamId,a=Object(u.getTeam)(e,t);return{currentTeamUrl:"".concat(Object(Mn.e)(),"/").concat(a.name),team:a}},e=>(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Zg(a,!0).forEach(function(t){Jg(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Zg(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e})({},e));var $g=Object(n.connect)(Xg,function(e){return{actions:{patchChannel:Object(s.bindActionCreators)(r.patchChannel,e)}}})(Qg);function eb(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class tb extends y.a.PureComponent{constructor(e){super(e),eb(this,"handleConvert",()=>{const{actions:e,channelId:t}=this.props;t.length===S.Q.CHANNEL_ID_LENGTH&&(e.convertChannelToPrivate(t),Object(Pe.d)("actions","convert_to_private_channel",{channel_id:t}),this.onHide())}),eb(this,"onHide",()=>{this.setState({show:!1})}),this.state={show:!0}}render(){const{channelDisplayName:e,onHide:t}=this.props;return y.a.createElement(V.a,{dialogClassName:"a11y__modal",show:this.state.show,onHide:this.onHide,onExited:t,role:"dialog","aria-labelledby":"convertChannelModalLabel"},y.a.createElement(V.a.Header,{closeButton:!0},y.a.createElement(V.a.Title,{componentClass:"h1",id:"convertChannelModalLabel"},y.a.createElement(W.c,{id:"convert_channel.title",defaultMessage:"Convert {display_name} to a private channel?",values:{display_name:e}}))),y.a.createElement(V.a.Body,null,y.a.createElement("p",null,y.a.createElement(ji.b,{id:"convert_channel.question1",defaultMessage:"When you convert **{display_name}** to a private channel, history and membership are preserved. Publicly shared files remain accessible to anyone with the link. Membership in a private channel is by invitation only.",values:{display_name:e}})),y.a.createElement("p",null,y.a.createElement(W.b,{id:"convert_channel.question2",defaultMessage:"The change is permanent and cannot be undone."})),y.a.createElement("p",null,y.a.createElement(ji.b,{id:"convert_channel.question3",defaultMessage:"Are you sure you want to convert **{display_name}** to a private channel?",values:{display_name:e}}))),y.a.createElement(V.a.Footer,null,y.a.createElement("button",{type:"button",className:"btn btn-link",onClick:this.onHide,tabIndex:"2"},y.a.createElement(W.c,{id:"convert_channel.cancel",defaultMessage:"No, cancel"})),y.a.createElement("button",{type:"button",className:"btn btn-primary","data-dismiss":"modal",onClick:this.handleConvert,autoFocus:!0,tabIndex:"1"},y.a.createElement(W.c,{id:"convert_channel.confirm",defaultMessage:"Yes, convert to private channel"}))))}}eb(tb,"propTypes",{onHide:_.a.func.isRequired,channelId:_.a.string.isRequired,channelDisplayName:_.a.string.isRequired,actions:_.a.shape({convertChannelToPrivate:_.a.func.isRequired})});var ab=Object(n.connect)(function(e){return{currentTeamDetails:Object(u.getCurrentTeam)(e)}},function(e){return{actions:Object(s.bindActionCreators)({convertChannelToPrivate:r.convertChannelToPrivate},e)}})(tb);function nb(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class sb extends y.a.PureComponent{constructor(e){super(e),nb(this,"handleDelete",()=>{if(this.props.channel.id.length===S.Q.CHANNEL_ID_LENGTH){if(!this.props.canViewArchivedChannels){const{penultimateViewedChannelName:e}=this.props;z.a.push("/"+this.props.currentTeamDetails.name+"/channels/"+e)}this.props.actions.deleteChannel(this.props.channel.id),this.onHide()}}),nb(this,"onHide",()=>{this.setState({show:!1})}),this.state={show:!0}}render(){const{canViewArchivedChannels:e}=this.props;return y.a.createElement(V.a,{dialogClassName:"a11y__modal",show:this.state.show,onHide:this.onHide,onExited:this.props.onHide,role:"dialog","aria-labelledby":"deleteChannelModalLabel"},y.a.createElement(V.a.Header,{closeButton:!0},y.a.createElement(V.a.Title,{componentClass:"h1",id:"deleteChannelModalLabel"},y.a.createElement(W.c,{id:"delete_channel.confirm",defaultMessage:"Confirm ARCHIVE Channel"}))),y.a.createElement(V.a.Body,null,y.a.createElement("div",{className:"alert alert-danger"},!e&&y.a.createElement(ji.b,{id:"delete_channel.question",defaultMessage:"This will archive the channel from the team and make its contents inaccessible for all users. \\n \\nAre you sure you wish to archive the **{display_name}** channel?",values:{display_name:this.props.channel.display_name}}),e&&y.a.createElement(ji.b,{id:"delete_channel.viewArchived.question",defaultMessage:"This will archive the channel from the team. Channel contents will still be accessible by channel members.\n \nAre you sure you wish to archive the **{display_name}** channel?",values:{display_name:this.props.channel.display_name}}))),y.a.createElement(V.a.Footer,null,y.a.createElement("button",{type:"button",className:"btn btn-link",onClick:this.onHide},y.a.createElement(W.c,{id:"delete_channel.cancel",defaultMessage:"Cancel"})),y.a.createElement("button",{type:"button",className:"btn btn-danger","data-dismiss":"modal",onClick:this.handleDelete,autoFocus:!0},y.a.createElement(W.c,{id:"delete_channel.del",defaultMessage:"Archive"}))))}}nb(sb,"propTypes",{onHide:_.a.func.isRequired,channel:_.a.object.isRequired,currentTeamDetails:_.a.object.isRequired,canViewArchivedChannels:_.a.bool,penultimateViewedChannelName:_.a.string.isRequired,actions:_.a.shape({deleteChannel:_.a.func.isRequired})});var ib=Object(n.connect)(function(e){return{canViewArchivedChannels:"true"===Object(d.getConfig)(e).ExperimentalViewArchivedChannels,currentTeamDetails:Object(u.getCurrentTeam)(e)}},function(e){return{actions:Object(s.bindActionCreators)({deleteChannel:r.deleteChannel},e)}})(sb),ob=a(1072);function rb(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class lb extends y.a.PureComponent{constructor(...e){super(...e),rb(this,"loadItems",async(e,t)=>{const{data:a}=await this.props.actions.getGroupsAssociatedToChannel(this.props.channel.id,t,e,ru);return{items:a.groups,totalCount:a.totalGroupCount}}),rb(this,"onClickRemoveGroup",(e,t)=>this.props.actions.unlinkGroupSyncable(e.id,this.props.channel.id,x.Groups.SYNCABLE_TYPE_CHANNEL).then(async()=>{t.setState({loading:!0});const{items:e}=await t.props.loadItems(t.setState.page,t.state.searchTerm);t.setState({loading:!1,items:e})})),rb(this,"onHide",()=>{this.props.actions.closeModal(S.s.MANAGE_CHANNEL_GROUPS)}),rb(this,"titleButtonOnClick",()=>{this.onHide(),this.props.actions.openModal({modalId:S.s.ADD_GROUPS_TO_TEAM,dialogType:ob.a})}),rb(this,"renderRow",(e,t)=>y.a.createElement("div",{key:e.id,className:"more-modal__row"},y.a.createElement("img",{className:"more-modal__image",src:du.a,alt:"group picture",width:"32",height:"32"}),y.a.createElement("div",{className:"more-modal__details"},y.a.createElement("div",{className:"more-modal__name"},e.display_name," ","-"," ",y.a.createElement("span",null,y.a.createElement(W.c,{id:"numMembers",defaultMessage:"{num, number} {num, plural, one {member} other {members}}",values:{num:e.member_count}})))),y.a.createElement("div",{className:"more-modal__actions"},y.a.createElement("button",{id:"removeMember",type:"button",className:"btn btn-danger btn-message",onClick:()=>this.onClickRemoveGroup(e,t)},y.a.createElement(W.c,{id:"group_list_modal.removeGroupButton",defaultMessage:"Remove Group"})))))}render(){const{formatMessage:e}=this.context.intl;return y.a.createElement(lu,{titleText:e({id:"groups",defaultMessage:"{channel} Groups"},{channel:this.props.channel.display_name}),searchPlaceholderText:e({id:"manage_channel_groups_modal.search_placeholder",defaultMessage:"Search groups"}),renderRow:this.renderRow,loadItems:this.loadItems,onHide:this.onHide,titleBarButtonText:e({id:"group_list_modal.addGroupButton",defaultMessage:"Add Groups"}),titleBarButtonOnClick:this.titleButtonOnClick})}}rb(lb,"propTypes",{channel:_.a.object.isRequired,actions:_.a.shape({getGroupsAssociatedToChannel:_.a.func.isRequired,unlinkGroupSyncable:_.a.func.isRequired,closeModal:_.a.func.isRequired,openModal:_.a.func.isRequired}).isRequired}),rb(lb,"contextTypes",{intl:W.i});var cb=Object(n.connect)((e,t)=>({channel:e.entities.channels.channels[t.channelID]}),e=>({actions:Object(s.bindActionCreators)({getGroupsAssociatedToChannel:iu.getGroupsAssociatedToChannel,closeModal:U.a,openModal:U.b,unlinkGroupSyncable:iu.unlinkGroupSyncable},e)}))(lb);function db(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class mb extends y.a.PureComponent{constructor(...e){super(...e),db(this,"handleLeave",e=>{e.preventDefault();const{channel:t,actions:{leaveChannel:a}}=this.props;t.type===S.i.PRIVATE_CHANNEL?Object(O.l)(t):a(t.id)})}render(){const{channel:e,isDefault:t,isGuestUser:a,id:n}=this.props;return y.a.createElement(Ei.a.ItemAction,{id:n,show:(!t||a)&&e.type!==S.i.DM_CHANNEL&&e.type!==S.i.GM_CHANNEL,onClick:this.handleLeave,text:Object(M.fb)("channel_header.leave","Leave Channel")})}}db(mb,"propTypes",{channel:_.a.object.isRequired,isDefault:_.a.bool.isRequired,isGuestUser:_.a.bool.isRequired,id:_.a.string,actions:_.a.shape({leaveChannel:_.a.func.isRequired}).isRequired}),db(mb,"defaultProps",{isGuestUser:!1});var ub=Object(n.connect)(null,e=>({actions:Object(s.bindActionCreators)({leaveChannel:da.e},e)}))(mb);function pb(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class hb extends y.a.PureComponent{constructor(...e){super(...e),pb(this,"handleClose",()=>{this.props.actions.goToLastViewedChannel()})}render(){return y.a.createElement(Ei.a.ItemAction,{show:this.props.isArchived,onClick:this.handleClose,text:Object(M.fb)("center_panel.archived.closeChannel","Close Channel")})}}pb(hb,"propTypes",{isArchived:_.a.bool.isRequired,actions:_.a.shape({goToLastViewedChannel:_.a.func.isRequired}).isRequired});var gb=Object(n.connect)(null,e=>({actions:Object(s.bindActionCreators)({goToLastViewedChannel:da.c},e)}))(hb);function bb(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class fb extends y.a.PureComponent{constructor(...e){super(...e),bb(this,"handleClick",()=>{const{user:e,channel:t,isMuted:a,actions:{updateChannelNotifyProps:n}}=this.props;n(e.id,t.id,{mark_unread:a?S.t.ALL:S.t.MENTION})})}render(){const{channel:e,id:t,isMuted:a}=this.props;let n;return n=a?Object(M.fb)("channel_header.unmute","Unmute Channel"):Object(M.fb)("channel_header.mute","Mute Channel"),y.a.createElement(Ei.a.ItemAction,{id:t,show:e.type!==S.i.DM_CHANNEL,onClick:this.handleClick,text:n})}}bb(fb,"propTypes",{user:_.a.object.isRequired,channel:_.a.object.isRequired,isMuted:_.a.bool.isRequired,id:_.a.string,actions:_.a.shape({updateChannelNotifyProps:_.a.func.isRequired}).isRequired});var Eb=Object(n.connect)(null,e=>({actions:Object(s.bindActionCreators)({updateChannelNotifyProps:r.updateChannelNotifyProps},e)}))(fb);function _b(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class vb extends y.a.PureComponent{constructor(...e){super(...e),_b(this,"toggleFavoriteChannel",e=>{const{isFavorite:t,actions:{favoriteChannel:a,unfavoriteChannel:n}}=this.props;return t?n(e):a(e)}),_b(this,"handleClick",e=>{e.preventDefault(),this.toggleFavoriteChannel(this.props.channel.id)})}render(){let e;return e=this.props.isFavorite?Object(M.fb)("channelHeader.removeFromFavorites","Remove from Favorites"):Object(M.fb)("channelHeader.addToFavorites","Add to Favorites"),y.a.createElement(Ei.a.ItemAction,{show:this.props.show,onClick:this.handleClick,text:e})}}_b(vb,"propTypes",{show:_.a.bool.isRequired,channel:_.a.object.isRequired,isFavorite:_.a.bool.isRequired,actions:_.a.shape({favoriteChannel:_.a.func.isRequired,unfavoriteChannel:_.a.func.isRequired}).isRequired}),_b(vb,"defaultProps",{show:!0});var yb=Object(n.connect)(null,e=>({actions:Object(s.bindActionCreators)({favoriteChannel:r.favoriteChannel,unfavoriteChannel:r.unfavoriteChannel},e)}))(vb);function Cb(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class wb extends y.a.PureComponent{constructor(...e){super(...e),Cb(this,"handleClick",e=>{e.preventDefault();const{channel:t,hasPinnedPosts:a,actions:{closeRightHandSide:n,showPinnedPosts:s}}=this.props;a?n():s(t.id)})}render(){return y.a.createElement(Ei.a.ItemAction,{show:this.props.show,onClick:this.handleClick,text:Object(M.fb)("navbar.viewPinnedPosts","View Pinned Posts")})}}Cb(wb,"propTypes",{show:_.a.bool,channel:_.a.object.isRequired,hasPinnedPosts:_.a.bool.isRequired,actions:_.a.shape({closeRightHandSide:_.a.func.isRequired,showPinnedPosts:_.a.func.isRequired}).isRequired});var Tb=Object(n.connect)(e=>({hasPinnedPosts:Object(ms.k)(e)===S.B.PIN}),e=>({actions:Object(s.bindActionCreators)({closeRightHandSide:ds.b,showPinnedPosts:ds.m},e)}))(wb);class Ob extends y.a.PureComponent{render(){const{user:e,channel:t,isDefault:a,isFavorite:n,isMuted:s,isReadonly:i,isArchived:o,isMobile:r,penultimateViewedChannelName:l}=this.props,c=t.type===S.i.PRIVATE_CHANNEL,d=!0===t.group_constrained,m=c?x.Permissions.MANAGE_PRIVATE_CHANNEL_MEMBERS:x.Permissions.MANAGE_PUBLIC_CHANNEL_MEMBERS,u=c?x.Permissions.MANAGE_PRIVATE_CHANNEL_PROPERTIES:x.Permissions.MANAGE_PUBLIC_CHANNEL_PROPERTIES,p=c?x.Permissions.DELETE_PRIVATE_CHANNEL:x.Permissions.DELETE_PUBLIC_CHANNEL;let h;return r&&(h=y.a.createElement("li",{className:"MenuGroup mobile-menu-divider"},y.a.createElement("hr",null))),y.a.createElement(y.a.Fragment,null,y.a.createElement(Ei.a.Group,{divider:h},y.a.createElement(Ei.a.ItemToggleModalRedux,{id:"channelViewInfo",show:t.type!==S.i.DM_CHANNEL&&t.type!==S.i.GM_CHANNEL,modalId:S.s.CHANNEL_INFO,dialogType:qg,dialogProps:{channel:t},text:Object(M.fb)("navbar.viewInfo","View Info")}),y.a.createElement(yb,{id:"channelToggleFavorite",show:r,channel:t,isFavorite:n}),y.a.createElement(Tb,{id:"channelViewPinnedPosts",show:r,channel:t}),y.a.createElement(Ei.a.ItemToggleModalRedux,{id:"channelNotificationPreferences",show:t.type!==S.i.DM_CHANNEL&&!o,modalId:S.s.CHANNEL_NOTIFICATIONS,dialogType:kg,dialogProps:{channel:t,currentUser:e},text:Object(M.fb)("navbar.preferences","Notification Preferences")}),y.a.createElement(Eb,{id:"channelToggleMuteChannel",user:e,channel:t,isMuted:s,isArchived:o})),y.a.createElement(Ei.a.Group,{divider:h},y.a.createElement(ao,{channelId:t.id,teamId:t.team_id,permissions:[m]},y.a.createElement(Ei.a.ItemToggleModalRedux,{id:"channelAddMembers",show:t.type!==S.i.DM_CHANNEL&&t.type!==S.i.GM_CHANNEL&&!o&&!a&&!d,modalId:S.s.CHANNEL_INVITE,dialogType:Xh,dialogProps:{channel:t},text:Object(M.fb)("navbar.addMembers","Add Members")}),y.a.createElement(Ei.a.ItemToggleModalRedux,{id:"channelAddMembers",show:t.type===S.i.GM_CHANNEL&&!o&&!d,modalId:S.s.CREATE_DM_CHANNEL,dialogType:Ep,dialogProps:{isExistingChannel:!0},text:Object(M.fb)("navbar.addMembers","Add Members")})),y.a.createElement(Ei.a.ItemToggleModalRedux,{id:"channelViewMembers",show:t.type!==S.i.DM_CHANNEL&&t.type!==S.i.GM_CHANNEL&&(o||a),modalId:S.s.CHANNEL_MEMBERS,dialogType:ug,dialogProps:{channel:t},text:Object(M.fb)("channel_header.viewMembers","View Members")}),y.a.createElement(ao,{channelId:t.id,teamId:t.team_id,permissions:[m]},y.a.createElement(Ei.a.ItemToggleModalRedux,{id:"channelAddGroups",show:t.type!==S.i.DM_CHANNEL&&t.type!==S.i.GM_CHANNEL&&!o&&!a&&d,modalId:S.s.ADD_GROUPS_TO_CHANNEL,dialogType:ob.a,text:Object(M.fb)("navbar.addGroups","Add Groups")}),y.a.createElement(Ei.a.ItemToggleModalRedux,{id:"channelManageGroups",show:t.type!==S.i.DM_CHANNEL&&t.type!==S.i.GM_CHANNEL&&!o&&!a&&d,modalId:S.s.MANAGE_CHANNEL_GROUPS,dialogType:cb,dialogProps:{channelID:t.id},text:Object(M.fb)("navbar_dropdown.manageGroups","Manage Groups")}),y.a.createElement(Ei.a.ItemToggleModalRedux,{id:"channelManageMembers",show:t.type!==S.i.DM_CHANNEL&&t.type!==S.i.GM_CHANNEL&&!o&&!a,modalId:S.s.CHANNEL_MEMBERS,dialogType:ug,dialogProps:{channel:t},text:Object(M.fb)("channel_header.manageMembers","Manage Members")})),y.a.createElement(ao,{channelId:t.id,teamId:t.team_id,permissions:[m],invert:!0},y.a.createElement(Ei.a.ItemToggleModalRedux,{id:"channelViewMembers",show:t.type!==S.i.DM_CHANNEL&&t.type!==S.i.GM_CHANNEL&&!o&&!a,modalId:S.s.CHANNEL_MEMBERS,dialogType:ug,dialogProps:{channel:t},text:Object(M.fb)("channel_header.viewMembers","View Members")}))),y.a.createElement(Ei.a.Group,{divider:h},y.a.createElement(Ei.a.ItemToggleModalRedux,{id:"channelEditHeader",show:!(t.type!==S.i.DM_CHANNEL&&t.type!==S.i.GM_CHANNEL||o||i),modalId:S.s.EDIT_CHANNEL_HEADER,dialogType:Yh,dialogProps:{channel:t},text:Object(M.fb)("channel_header.setHeader","Edit Channel Header")}),y.a.createElement(ao,{channelId:t.id,teamId:t.team_id,permissions:[u]},y.a.createElement(Ei.a.ItemToggleModalRedux,{id:"channelEditHeader",show:t.type!==S.i.DM_CHANNEL&&t.type!==S.i.GM_CHANNEL&&!o&&!i,modalId:S.s.EDIT_CHANNEL_HEADER,dialogType:Yh,dialogProps:{channel:t},text:Object(M.fb)("channel_header.setHeader","Edit Channel Header")}),y.a.createElement(Ei.a.ItemToggleModalRedux,{id:"channelEditPurpose",show:!o&&!i&&t.type!==S.i.DM_CHANNEL&&t.type!==S.i.GM_CHANNEL,modalId:S.s.EDIT_CHANNEL_PURPOSE,dialogType:Wg,dialogProps:{channel:t},text:Object(M.fb)("channel_header.setPurpose","Edit Channel Purpose")}),y.a.createElement(Ei.a.ItemToggleModalRedux,{id:"channelRename",show:!o&&t.type!==S.i.DM_CHANNEL&&t.type!==S.i.GM_CHANNEL,modalId:S.s.RENAME_CHANNEL,dialogType:$g,dialogProps:{channel:t},text:Object(M.fb)("channel_header.rename","Rename Channel")})),y.a.createElement(Yd.a,{teamId:t.team_id,permissions:[x.Permissions.MANAGE_TEAM]},y.a.createElement(Ei.a.ItemToggleModalRedux,{id:"channelCovertToPrivate",show:!o&&!a&&t.type===S.i.OPEN_CHANNEL,modalId:S.s.CONVERT_CHANNEL,dialogType:ab,dialogProps:{channelId:t.id,channelDisplayName:t.display_name},text:Object(M.fb)("channel_header.convert","Convert to Private Channel")})),y.a.createElement(ao,{channelId:t.id,teamId:t.team_id,permissions:[p]},y.a.createElement(Ei.a.ItemToggleModalRedux,{id:"channelArchiveChannel",show:!o&&!a&&t.type!==S.i.DM_CHANNEL&&t.type!==S.i.GM_CHANNEL,modalId:S.s.DELETE_CHANNEL,dialogType:ib,dialogProps:{channel:t,penultimateViewedChannelName:l},text:Object(M.fb)("channel_header.delete","Archive Channel")}))),y.a.createElement(Ei.a.Group,{divider:h},r&&y.a.createElement(wg,{channel:t,isDropdown:!0}),y.a.createElement(ub,{id:"channelLeaveChannel",channel:t,isDefault:a,isGuestUser:e.is_guest}),y.a.createElement(gb,{id:"channelCloseChannel",isArchived:o})))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Ob,"propTypes",{user:_.a.object.isRequired,channel:_.a.object.isRequired,isDefault:_.a.bool.isRequired,isFavorite:_.a.bool.isRequired,isReadonly:_.a.bool.isRequired,isMuted:_.a.bool.isRequired,isArchived:_.a.bool.isRequired,isMobile:_.a.bool.isRequired,penultimateViewedChannelName:_.a.string.isRequired});const Sb=350;class Pb extends y.a.PureComponent{render(){return y.a.createElement(Gc.a,{in:this.props.show,classNames:"mobile-channel-header-dropdown",enter:!0,exit:!0,mountOnEnter:!0,unmountOnExit:!0,timeout:{enter:Sb,exit:Sb}},this.props.children)}}function Mb(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Pb,"propTypes",{children:_.a.node,show:_.a.bool.isRequired});class Nb extends y.a.PureComponent{constructor(...e){super(...e),Mb(this,"getChannelTitle",()=>{const{user:e,channel:t,teammateId:a}=this.props;if(t.type===S.i.DM_CHANNEL){const t=Object(M.x)(a);return e.id===a?y.a.createElement(W.c,{id:"channel_header.directchannel.you",defaultMessage:"{displayname} (you)",values:{displayname:t}}):t}return t.display_name})}render(){const{teammateIsBot:e,teammateStatus:t}=this.props;let a;return e||(a=y.a.createElement($p.a,{status:t})),y.a.createElement(fi.a,{animationComponent:Pb},y.a.createElement("a",null,y.a.createElement("span",{className:"heading"},a,this.getChannelTitle()),y.a.createElement(W.c,{id:"generic_icons.dropdown",defaultMessage:"Dropdown Icon"},e=>y.a.createElement("span",{className:"fa fa-angle-down header-dropdown__icon",title:e}))),y.a.createElement(W.c,{id:"channel_header.menuAriaLabel",defaultMessage:"Channel Menu"},e=>y.a.createElement(Ei.a,{ariaLabel:e},y.a.createElement(Rb,{isMobile:!0}),y.a.createElement("div",{className:"close visible-xs-block"},"×"))))}}Mb(Nb,"propTypes",{user:_.a.object.isRequired,channel:_.a.object.isRequired,teammateId:_.a.string,teammateIsBot:_.a.bool,teammateStatus:_.a.string});const Ib=Object(Ps.createSelector)(p.getCurrentChannel,e=>e.type!==S.i.DM_CHANNEL?null:M.J(e)),Ab=Object(Ps.createSelector)(m.getUserStatuses,Ib,(e,t)=>t?e[t]:null),jb=class extends y.a.PureComponent{render(){return y.a.createElement(Ei.a,{id:"channelHeaderDropdownMenu",ariaLabel:Object(M.fb)("channel_header.menuAriaLabel","Channel Menu").toLowerCase()},y.a.createElement(Rb,{isMobile:!1}))}},Rb=Object(n.connect)(e=>({user:Object(m.getCurrentUser)(e),channel:Object(p.getCurrentChannel)(e),isDefault:Object(p.isCurrentChannelDefault)(e),isFavorite:Object(p.isCurrentChannelFavorite)(e),isMuted:Object(p.isCurrentChannelMuted)(e),isReadonly:Object(p.isCurrentChannelReadOnly)(e),isArchived:Object(p.isCurrentChannelArchived)(e),penultimateViewedChannelName:Object(Dh.c)(e)||Object(p.getRedirectChannelNameForTeam)(e,Object(u.getCurrentTeamId)(e))}))(Ob),kb=Object(n.connect)(e=>{const t=Object(m.getCurrentUser)(e),a=Object(p.getCurrentChannel)(e),n=Ib(e);let s=!1;if(n){const t=Object(m.getUser)(e,n);s=t&&t.is_bot}return{user:t,channel:a,teammateId:n,teammateIsBot:s,teammateStatus:Ab(e)}})(Nb);var Lb=a(1025),xb=a(1834);function Db(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ub extends y.a.PureComponent{constructor(...e){super(...e),Db(this,"handleRootClose",()=>{this.props.onClose()})}render(){const{open:e,rootCloseEvent:t,children:a}=this.props;return y.a.createElement(xb.a,{disabled:!e,onRootClose:this.handleRootClose,event:t},y.a.createElement("ul",{role:"menu",className:"dropdown-menu channel-header_plugin-dropdown"},a))}}Db(Ub,"propTypes",{open:_.a.bool,children:_.a.node,onClose:_.a.func.isRequired,rootCloseEvent:_.a.oneOf(["click","mousedown"])});class qb extends y.a.PureComponent{constructor(...e){super(...e),Db(this,"handleClick",e=>{this.props.onClick(e)})}render(){const{children:e}=this.props;let t="";return this.props.dropdownOpen&&(t=" active"),y.a.createElement("button",{id:"pluginChannelHeaderButtonDropdown",className:"channel-header__icon style--none"+t,type:"button",onClick:this.handleClick},e)}}Db(qb,"propTypes",{children:_.a.element,dropdownOpen:_.a.bool,onClick:_.a.func});class Hb extends y.a.PureComponent{constructor(e){super(e),Db(this,"toggleDropdown",e=>{this.setState({dropdownOpen:e})}),Db(this,"onClose",()=>{this.toggleDropdown(!1)}),Db(this,"fireActionAndClose",e=>{e(this.props.channel,this.props.channelMember),this.onClose()}),Db(this,"createButton",e=>y.a.createElement(ic,{buttonClass:"channel-header__icon style--none",iconComponent:e.icon,onClick:()=>e.action(this.props.channel,this.props.channelMember),buttonId:e.id,tooltipKey:"plugin",tooltipText:e.tooltipText?e.tooltipText:e.dropdownText})),Db(this,"createDropdown",e=>{const t=e.map(e=>y.a.createElement("li",{key:"channelHeaderPlug"+e.id},y.a.createElement("a",{href:"#",className:"d-flex align-items-center",onClick:()=>this.fireActionAndClose(e.action)},y.a.createElement("span",{className:"d-flex align-items-center overflow--ellipsis"},e.icon),y.a.createElement("span",null,e.dropdownText))));return y.a.createElement("div",{className:"flex-child"},y.a.createElement(Lb.a,{ref:"dropdown",id:"channelHeaderPlugDropdown",onToggle:this.toggleDropdown,onSelect:this.onSelect,open:this.state.dropdownOpen},y.a.createElement(qb,{dropdownOpen:this.state.dropdownOpen,bsRole:"toggle"},y.a.createElement("span",{className:"fa fa-ellipsis-h icon__ellipsis"})),y.a.createElement(Ub,{bsRole:"menu",open:this.state.dropdownOpen,onClose:this.onClose},t)))}),this.state={dropdownOpen:!1}}render(){const e=this.props.components||[];return 0===e.length?null:1===e.length?this.createButton(e[0]):this.createDropdown(e)}}Db(Hb,"propTypes",{components:_.a.array,channel:_.a.object.isRequired,channelMember:_.a.object.isRequired,theme:_.a.object.isRequired});var Fb=Object(n.connect)(function(e){return{components:e.plugins.components.ChannelHeaderButton,theme:Object(c.getTheme)(e)}})(Hb);function Bb(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Gb(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Bb(a,!0).forEach(function(t){Vb(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Bb(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Vb(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Wb={singleline:!0,mentionHighlight:!1,atMentions:!0},zb={singleline:!1,mentionHighlight:!1,atMentions:!0},Yb=1140;class Kb extends y.a.PureComponent{constructor(e){super(e),Vb(this,"handleResize",()=>{const e=M.rb();this.setState({showSearchBar:e>Yb})}),Vb(this,"handleClose",()=>{this.props.actions.goToLastViewedChannel()}),Vb(this,"toggleFavorite",e=>{e.stopPropagation(),this.props.isFavorite?this.props.actions.unfavoriteChannel(this.props.channel.id):this.props.actions.favoriteChannel(this.props.channel.id)}),Vb(this,"unmute",()=>{const{actions:e,channel:t,channelMember:a,currentUser:n}=this.props;if(!a||!n||!t)return;const s={mark_unread:S.t.ALL};e.updateChannelNotifyProps(n.id,t.id,s)}),Vb(this,"mute",()=>{const{actions:e,channel:t,channelMember:a,currentUser:n}=this.props;if(!a||!n||!t)return;const s={mark_unread:S.t.MENTION};e.updateChannelNotifyProps(n.id,t.id,s)}),Vb(this,"searchMentions",e=>{e.preventDefault(),this.props.rhsState===S.B.MENTION?this.props.actions.closeRightHandSide():this.props.actions.showMentions()}),Vb(this,"showPinnedPosts",e=>{e.preventDefault(),this.props.rhsState===S.B.PIN?this.props.actions.closeRightHandSide():this.props.actions.showPinnedPosts()}),Vb(this,"getFlagged",e=>{e.preventDefault(),this.props.rhsState===S.B.FLAG?this.props.actions.closeRightHandSide():this.props.actions.showFlaggedPosts()}),Vb(this,"searchButtonClick",e=>{e.preventDefault(),this.props.actions.updateRhsState(S.B.SEARCH)}),Vb(this,"handleShortcut",e=>{M.e(e)&&e.shiftKey&&M.X(e,S.i.KeyCodes.M)&&(e.preventDefault(),this.searchMentions(e))}),Vb(this,"handleOnMouseOver",()=>{this.refs.headerOverlay&&this.refs.headerOverlay.show()}),Vb(this,"handleOnMouseOut",()=>{this.refs.headerOverlay&&this.refs.headerOverlay.hide()}),Vb(this,"handleQuickSwitchKeyPress",e=>{M.e(e)&&!e.shiftKey&&M.X(e,S.i.KeyCodes.K)&&(e.altKey||(e.preventDefault(),this.toggleQuickSwitchModal()))}),Vb(this,"toggleQuickSwitchModal",()=>{const{isQuickSwitcherOpen:e}=this.props;e?this.props.actions.closeModal(S.s.QUICK_SWITCH):this.props.actions.openModal({modalId:S.s.QUICK_SWITCH,dialogType:xp})}),Vb(this,"removeTooltipLink",()=>{this.toggleFavoriteRef.current.removeAttribute("aria-describedby")}),Vb(this,"showEditChannelHeaderModal",()=>{this.refs.headerOverlay&&this.refs.headerOverlay.hide();const{actions:e,channel:t}=this.props,a={modalId:S.s.EDIT_CHANNEL_HEADER,dialogType:Yh,dialogProps:{channel:t}};e.openModal(a)}),this.toggleFavoriteRef=y.a.createRef();const t=M.rb()>Yb;this.state={showSearchBar:t},this.getHeaderMarkdownOptions=Object(ud.memoizeResult)(e=>Gb({},Wb,{channelNamesMap:e})),this.getPopoverMarkdownOptions=Object(ud.memoizeResult)(e=>Gb({},zb,{channelNamesMap:e}))}componentDidMount(){this.props.actions.getCustomEmojisInText(this.props.channel?this.props.channel.header:""),document.addEventListener("keydown",this.handleShortcut),document.addEventListener("keydown",this.handleQuickSwitchKeyPress),window.addEventListener("resize",this.handleResize)}componentWillUnmount(){document.removeEventListener("keydown",this.handleShortcut),document.removeEventListener("keydown",this.handleQuickSwitchKeyPress),window.removeEventListener("resize",this.handleResize)}componentDidUpdate(e){const t=this.props.channel?this.props.channel.header:"";t!==(e.channel?e.channel.header:"")&&this.props.actions.getCustomEmojisInText(t)}render(){const{teamId:e,currentUser:t,channel:a,channelMember:n,isMuted:s,isReadOnly:i,isFavorite:o,dmUser:r,rhsState:l,hasGuests:c}=this.props,{formatMessage:d}=this.context.intl,m=M.fb("accessibility.sections.channelHeader","channel header region");let u="";c&&(u=y.a.createElement("span",{className:"has-guest-header"},y.a.createElement(W.c,{id:"channel_header.channelHasGuests",defaultMessage:"This channel has guests"})));const p=0!==a.delete_at;if(M.S(a)||M.S(n)||M.S(t)||!r&&a.type===S.i.DM_CHANNEL)return y.a.createElement("div",{className:"channel-header"});const h=a.props&&a.props.channel_mentions;let g=a.display_name,b=null;p&&(b=y.a.createElement(Cc.a,{className:"icon icon__archive icon channel-header-archived-icon svg-text-color"}));const f=a.type===S.i.DM_CHANNEL,E=a.type===S.i.GM_CHANNEL,_=a.type===S.i.PRIVATE_CHANNEL;if(f){const e=r.id;g=t.id===e?y.a.createElement(W.c,{id:"channel_header.directchannel.you",defaultMessage:"{displayname} (you) ",values:{displayname:M.x(e)}}):M.x(e)+" ",g=y.a.createElement(y.a.Fragment,null,g,y.a.createElement(za.a,{show:M.W(r)}))}if(E){const e=a.display_name.split(","),t=[];for(const a of e){const e=M.H(a.trim());t.push(y.a.createElement(y.a.Fragment,{key:a},0!==t.length&&", ",a,y.a.createElement(za.a,{show:M.W(e)})))}g=t,c&&(u=y.a.createElement("span",{className:"has-guest-header"},y.a.createElement(W.c,{id:"channel_header.groupMessageHasGuests",defaultMessage:"This group message has guests"})))}let v,C,w,T;f||(v=y.a.createElement(_g,{channel:a})),!f||r.delete_at||r.is_bot||(C=y.a.createElement($p.a,{type:"avatar",status:a.status}),w=y.a.createElement("span",{className:"header-status__text"},y.a.createElement(W.c,{id:"status_dropdown.set_".concat(a.status),defaultMessage:M.pb(a.status)})));const O=f&&r.is_bot?r.bot_description:a.header;if(O){const e=y.a.createElement(Vl.a,{id:"header-popover",bStyle:"info",bSize:"large",placement:"bottom",className:"channel-header__popover",onMouseOver:this.handleOnMouseOver,onMouseOut:this.handleOnMouseOut},y.a.createElement(ua.a,{message:O,options:this.getPopoverMarkdownOptions(h)}));T=y.a.createElement(Qs.a,{trigger:"click",placement:"bottom",rootClose:!0,overlay:e,ref:"headerOverlay"},y.a.createElement("div",{id:"channelHeaderDescription",className:"channel-header__description"},C,w,u,y.a.createElement("span",{className:"header-description__text",onClick:M.K},y.a.createElement(ua.a,{message:O,options:this.getHeaderMarkdownOptions(h)}))))}else{let t;i||p||(f||E?f&&r.is_bot||(t=y.a.createElement("button",{className:"style--none",onClick:this.showEditChannelHeaderModal},y.a.createElement(W.c,{id:"channel_header.addChannelHeader",defaultMessage:"Add a channel description"}))):t=y.a.createElement(ao,{channelId:a.id,teamId:e,permissions:[_?x.Permissions.MANAGE_PRIVATE_CHANNEL_PROPERTIES:x.Permissions.MANAGE_PUBLIC_CHANNEL_PROPERTIES]},y.a.createElement("button",{className:"style--none",onClick:this.showEditChannelHeaderModal},y.a.createElement(W.c,{id:"channel_header.addChannelHeader",defaultMessage:"Add a channel description"})))),T=y.a.createElement("div",{id:"channelHeaderDescription",className:"channel-header__description light"},C,w,u,t)}let P,N=null,I="";p||(o?(P=y.a.createElement(Zs.a,{id:"favoriteTooltip"},y.a.createElement(W.c,{id:"channelHeader.removeFromFavorites",defaultMessage:"Remove from Favorites"})),I=d({id:"channelHeader.removeFromFavorites",defaultMessage:"Remove from Favorites"}).toLowerCase()):(P=y.a.createElement(Zs.a,{id:"favoriteTooltip"},y.a.createElement(W.c,{id:"channelHeader.addToFavorites",defaultMessage:"Add to Favorites"})),I=d({id:"channelHeader.addToFavorites",defaultMessage:"Add to Favorites"}).toLowerCase()),N=y.a.createElement(Qs.a,{delayShow:S.i.OVERLAY_TIME_DELAY,placement:"bottom",overlay:P,onEntering:this.removeTooltipLink},y.a.createElement("button",{id:"toggleFavorite",ref:this.toggleFavoriteRef,onClick:this.toggleFavorite,className:"style--none color--link channel-header__favorites "+(this.props.isFavorite?"active":"inactive"),"aria-label":I},y.a.createElement("i",{className:"icon fa "+(this.props.isFavorite?"fa-star":"fa-star-o")}))));const A=y.a.createElement(Zs.a,{id:"channelMutedTooltip"},y.a.createElement(W.c,{id:"channelHeader.unmute",defaultMessage:"Unmute"}));let j;s&&(j=y.a.createElement(Qs.a,{delayShow:S.i.OVERLAY_TIME_DELAY,placement:"bottom",overlay:A},y.a.createElement("button",{id:"toggleMute",onClick:this.unmute,className:"style--none color--link channel-header__mute inactive","aria-label":d({id:"generic_icons.muted",defaultMessage:"Muted Icon"})},y.a.createElement("i",{className:"icon fa fa-bell-slash-o"}))));let R="channel-header__icon";l===S.B.PIN&&(R+=" active");let k=y.a.createElement(y.a.Fragment,null,N,y.a.createElement(fi.a,null,y.a.createElement("div",{id:"channelHeaderDropdownButton",className:"channel-header__top"},y.a.createElement("button",{className:"channel-header__trigger style--none","aria-label":d({id:"channel_header.menuAriaLabel",defaultMessage:"Channel Menu"}).toLowerCase()},y.a.createElement("strong",{role:"heading","aria-level":"2",id:"channelHeaderTitle",className:"heading"},y.a.createElement("span",null,b,g)),y.a.createElement("span",{id:"channelHeaderDropdownIcon",className:"fa fa-angle-down header-dropdown__icon","aria-label":d({id:"generic_icons.dropdown",defaultMessage:"Dropdown Icon"}).toLowerCase()}))),y.a.createElement(jb,null)));return f&&r.is_bot&&(k=y.a.createElement("div",{id:"channelHeaderDropdownButton",className:"channel-header__top"},N,y.a.createElement("strong",{role:"heading","aria-level":"2",id:"channelHeaderTitle",className:"heading"},y.a.createElement("span",null,b,g)),y.a.createElement(Wa.a,{className:"badge-popoverlist"}))),y.a.createElement("div",{id:"channel-header","aria-label":m,role:"application",tabIndex:"-1","data-channelid":"".concat(a.id),className:"channel-header alt a11y__region","data-a11y-sort-order":"7"},y.a.createElement("div",{className:"flex-parent"},y.a.createElement("div",{className:"flex-child"},y.a.createElement("div",{id:"channelHeaderInfo",className:"channel-header__info"},y.a.createElement("div",{className:"channel-header__title dropdown"},y.a.createElement("div",null,k),j),T)),y.a.createElement("div",{className:"flex-child"},v),y.a.createElement(Fb,{channel:a,channelMember:n}),y.a.createElement(ic,{iconComponent:y.a.createElement(vg,{className:"icon icon__pin","aria-hidden":"true"}),ariaLabel:!0,buttonClass:"style--none "+R,buttonId:"channelHeaderPinButton",onClick:this.showPinnedPosts,tooltipKey:"pinnedPosts"}),this.state.showSearchBar?y.a.createElement("div",{className:"flex-child search-bar__container"},y.a.createElement(pc,{showMentionFlagBtns:!1,isFocus:M.Z()})):y.a.createElement(ic,{iconComponent:y.a.createElement(lc.a,{className:"icon icon__search icon--stroke","aria-hidden":"true"}),buttonId:"channelHeaderSearchButton",onClick:this.searchButtonClick,tooltipKey:"search"}),y.a.createElement(ic,{iconComponent:y.a.createElement(rc,{className:"icon icon__mentions","aria-hidden":"true"}),ariaLabel:!0,buttonId:"channelHeaderMentionButton",onClick:this.searchMentions,tooltipKey:"recentMentions"}),y.a.createElement(ic,{iconComponent:y.a.createElement(Xo,{className:"icon icon__flag"}),ariaLabel:!0,buttonId:"channelHeaderFlagButton",onClick:this.getFlagged,tooltipKey:"flaggedPosts"})))}}Vb(Kb,"propTypes",{teamId:_.a.string.isRequired,currentUser:_.a.object.isRequired,channel:_.a.object,channelMember:_.a.object,dmUser:_.a.object,isFavorite:_.a.bool,isReadOnly:_.a.bool,isMuted:_.a.bool,hasGuests:_.a.bool,rhsState:_.a.oneOf(Object.values(S.B)),isQuickSwitcherOpen:_.a.bool,actions:_.a.shape({favoriteChannel:_.a.func.isRequired,unfavoriteChannel:_.a.func.isRequired,showFlaggedPosts:_.a.func.isRequired,showPinnedPosts:_.a.func.isRequired,showMentions:_.a.func.isRequired,closeRightHandSide:_.a.func.isRequired,updateRhsState:_.a.func.isRequired,getCustomEmojisInText:_.a.func.isRequired,updateChannelNotifyProps:_.a.func.isRequired,goToLastViewedChannel:_.a.func.isRequired,openModal:_.a.func.isRequired,closeModal:_.a.func.isRequired}).isRequired}),Vb(Kb,"contextTypes",{intl:W.i.isRequired});var Qb=Object(i.g)(Object(n.connect)(e=>{const t=Object(p.getCurrentChannel)(e)||{},a=Object(m.getCurrentUser)(e);let n;if(t&&t.type===x.General.DM_CHANNEL){const s=Object(en.getUserIdFromChannelName)(a.id,t.name);n=Object(m.getUser)(e,s)}const s=Object(p.getCurrentChannelStats)(e)||{member_count:0,guest_count:0};return{teamId:Object(u.getCurrentTeamId)(e),channel:t,channelMember:Object(p.getMyCurrentChannelMembership)(e),currentUser:a,dmUser:n,rhsState:Object(ms.k)(e),isFavorite:Object(p.isCurrentChannelFavorite)(e),isReadOnly:Object(p.isCurrentChannelReadOnly)(e),isMuted:Object(p.isCurrentChannelMuted)(e),isQuickSwitcherOpen:Object(td.a)(e,S.s.QUICK_SWITCH),hasGuests:s.guest_count>0}},e=>({actions:Object(s.bindActionCreators)({favoriteChannel:r.favoriteChannel,unfavoriteChannel:r.unfavoriteChannel,showFlaggedPosts:ds.k,showPinnedPosts:ds.m,showMentions:ds.l,closeRightHandSide:ds.b,updateRhsState:ds.s,getCustomEmojisInText:vt.getCustomEmojisInText,updateChannelNotifyProps:r.updateChannelNotifyProps,goToLastViewedChannel:da.c,openModal:U.b,closeModal:U.a},e)}))(Kb)),Zb=a(229),Jb=a.n(Zb);function Xb(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class $b extends y.a.PureComponent{constructor(e){super(e),Xb(this,"setRendered",()=>{this.setState({rendered:this.state.visible})}),this.state={visible:!1,rendered:!1}}UNSAFE_componentWillReceiveProps(e){e.newMessages>0&&!e.atBottom?this.setState({rendered:!0},()=>{this.setState({visible:!0})}):this.setState({visible:!1})}render(){let e="new-messages__button";return this.state.visible&&(e+=" visible"),this.state.rendered||(e+=" disabled"),y.a.createElement("div",{className:e,onTransitionEnd:this.setRendered,ref:"indicator"},y.a.createElement("div",{onClick:this.props.onClick},y.a.createElement(W.c,{id:"posts_view.newMsgBelow",defaultMessage:"New {count, plural, one {message} other {messages}}",values:{count:this.props.newMessages}}),y.a.createElement(Zp,{className:"icon icon__unread"})))}}Xb($b,"propTypes",{atBottom:_.a.bool,onClick:_.a.func.isRequired,newMessages:_.a.number}),Xb($b,"defaultProps",{newMessages:0});var ef=Object(n.connect)(function(){const e=Object(Ps.createSelector)(Na.getAllPosts,m.getCurrentUserId,(e,t)=>t,(e,t,a)=>a,(e,t,a,n)=>a?a.map(t=>e[t]).filter(e=>e&&e.user_id!==t&&e.state!==x.Posts.POST_DELETED&&e.create_at>n).length:0),t=Object(Qi.makePreparePostIdsForPostList)();return(a,n)=>{let s=Object(Na.getPostIdsInChannel)(a,n.channelId);return s&&(s=t(a,{postIds:s,lastViewedAt:n.lastViewedBottom})),{newMessages:e(a,s,n.lastViewedBottom)}}})($b);class tf extends y.a.PureComponent{render(){if(!this.props.fileInfos||0===this.props.fileInfos.length)return null;let e=null;return this.props.fileInfos.length>1&&(e=y.a.createElement(W.c,{id:"post_body.plusMore",defaultMessage:" plus {count, number} other {count, plural, one {file} other {files}}",values:{count:this.props.fileInfos.length-1}})),y.a.createElement("span",null,this.props.fileInfos[0].name,e)}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(tf,"propTypes",{parentPostId:_.a.string.isRequired,fileInfos:_.a.arrayOf(_.a.object)});var af=Object(n.connect)(function(){const e=Object(Gn.makeGetFilesForPost)();return function(t,a){let n;return a.parentPostId&&(n=e(t,a.parentPostId)),{fileInfos:n}}})(tf);function nf(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class sf extends v.PureComponent{constructor(...e){super(...e),nf(this,"handleOnClick",()=>{const{actions:e}=this.props,t=this.makeUsername();e.updateSearchTerms(t),e.showSearchResults()}),nf(this,"makeUsername",()=>{const e=this.props.post.props;let t=this.props.displayName;return this.props.enablePostUsernameOverride&&e&&"true"===e.from_webhook&&e.override_username&&(t=e.override_username),t}),nf(this,"makeCommentedOnMessage",()=>{const{post:e}=this.props;let t="";if(e.message)t=M.lb(e.message);else if(e.file_ids&&e.file_ids.length>0)t=y.a.createElement(af,{parentPostId:e.id});else if(e.props&&e.props.attachments&&e.props.attachments.length>0){const a=e.props.attachments[0],n=a.pretext||a.title||a.text||a.fallback||"";t=M.lb(n)}return t})}render(){const e=this.makeUsername(),t=this.makeCommentedOnMessage(),a=y.a.createElement("a",{className:"theme",onClick:this.handleOnClick},e);return y.a.createElement("div",{"data-testid":"post-link",className:"post__link"},y.a.createElement("span",null,y.a.createElement(W.c,{id:"post_body.commentedOn",defaultMessage:"Commented on {name}'s message: ",values:{name:a}}),y.a.createElement("a",{className:"theme",onClick:this.props.onCommentClick},Object(Qm.c)(t))))}}nf(sf,"propTypes",{displayName:_.a.string,enablePostUsernameOverride:_.a.bool,onCommentClick:_.a.func.isRequired,post:_.a.object.isRequired,actions:_.a.shape({showSearchResults:_.a.func.isRequired,updateSearchTerms:_.a.func.isRequired}).isRequired});var of=Object(n.connect)(function(e,t){let a="";if(t.post){const n=Object(m.getUser)(e,t.post.user_id);a=Object(M.w)(n)}return{displayName:a,enablePostUsernameOverride:"true"===Object(d.getConfig)(e).EnablePostUsernameOverride}},function(e){return{actions:Object(s.bindActionCreators)({showSearchResults:ds.o,updateSearchTerms:ds.t},e)}})(sf);function rf(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const lf=3e3;class cf extends y.a.PureComponent{constructor(e){super(e),this.sendingAction=new Ts(()=>{const e=this.props.post;e&&e.id===e.pending_post_id&&this.setState({sending:!0})}),this.state={sending:!1}}componentDidMount(){const e=this.props.post;e&&e.id===e.pending_post_id&&this.sendingAction.fireAfter(lf)}componentWillUnmount(){this.sendingAction.cancel()}UNSAFE_componentWillReceiveProps(e){const t=e.post;t&&t.id!==t.pending_post_id&&(this.sendingAction.cancel(),this.setState({sending:!1}))}render(){const e=this.props.post,t=this.props.parentPost;let a,n="";const s=M.ab(e);let i;this.props.isFirstReply&&t&&!s&&(a=y.a.createElement(of,{post:t,onCommentClick:this.props.handleCommentClick})),this.props.post.failed&&(n+=" post--fail",i=y.a.createElement(Jo,{post:this.props.post})),Me.j(this.props.post)&&(n+=" post--edited");let o=null;(e.file_ids&&e.file_ids.length>0||e.filenames&&e.filenames.length>0)&&this.props.post.state!==x.Posts.POST_DELETED&&(o=y.a.createElement(Bo,{post:e,compactDisplay:this.props.compactDisplay})),this.state.sending&&(n+=" post-waiting");const r=y.a.createElement(y.a.Fragment,null,i,this.state.sending&&y.a.createElement(_o.a,null),y.a.createElement(ml,{post:this.props.post,compactDisplay:this.props.compactDisplay,hasMention:!0})),l=e.type&&this.props.pluginPostTypes.hasOwnProperty(e.type)||e.props&&e.props.type&&this.props.pluginPostTypes.hasOwnProperty(e.props.type);let c;c=this.props.post.state===x.Posts.POST_DELETED||l?r:y.a.createElement(ll,{post:this.props.post,isEmbedVisible:this.props.isEmbedVisible},r);let d="";this.props.isCommentMention&&(d="mention-comment");let m="";return s&&(m="post--ephemeral"),y.a.createElement("div",null,a,y.a.createElement("div",{id:"".concat(e.id,"_message"),className:"post__body ".concat(d," ").concat(m," ").concat(n)},c,o,y.a.createElement(yr,{post:e,isReadOnly:this.props.isReadOnly})))}}rf(cf,"propTypes",{post:_.a.object.isRequired,parentPost:_.a.object,parentPostUser:_.a.object,handleCommentClick:_.a.func.isRequired,compactDisplay:_.a.bool,isCommentMention:_.a.bool,isFirstReply:_.a.bool,pluginPostTypes:_.a.object,isEmbedVisible:_.a.bool,enablePostUsernameOverride:_.a.bool.isRequired,isReadOnly:_.a.bool}),rf(cf,"defaultProps",{isReadOnly:!1});var df=Object(n.connect)(function(e,t){let a,n;t.post.root_id&&(n=(a=Object(Na.getPost)(e,t.post.root_id))?Object(m.getUser)(e,a.user_id):null);const s="true"===Object(d.getConfig)(e).EnablePostUsernameOverride,i=0!==Object(p.getCurrentChannel)(e).delete_at;return{parentPost:a,parentPostUser:n,pluginPostTypes:e.plugins.postTypes,enablePostUsernameOverride:s,isReadOnly:Object(p.isCurrentChannelReadOnly)(e)||i}})(cf);function mf(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class uf extends y.a.PureComponent{constructor(e){super(e),mf(this,"toggleEmojiPicker",()=>{const e=!this.state.showEmojiPicker;this.setState({showEmojiPicker:e}),this.props.handleDropdownOpened(e||this.state.showDotMenu)}),mf(this,"removePost",()=>{this.props.actions.removePost(this.props.post)}),mf(this,"createRemovePostButton",()=>y.a.createElement("button",{className:"post__remove theme color--link style--none",type:"button",onClick:this.removePost},"×")),mf(this,"handleDotMenuOpened",e=>{this.setState({showDotMenu:e}),this.props.handleDropdownOpened(e||this.state.showEmojiPicker)}),mf(this,"getDotMenu",()=>this.refs.dotMenu),mf(this,"buildOptions",(e,t,a)=>{if(!Me.q(e))return null;const{isMobile:n,isReadOnly:s}=this.props,i=this.props.hover||this.state.showEmojiPicker||this.state.showDotMenu,o=n?"":"pull-right";let r;let l;let c;return(a||!t&&(n||i||!e.root_id&&Boolean(this.props.replyCount)||this.props.isFirstReply))&&(r=y.a.createElement(yc,{handleCommentClick:this.props.handleCommentClick,commentCount:this.props.replyCount,postId:e.id,extraClass:o})),!t&&i&&!s&&this.props.enableEmojiPicker&&(l=y.a.createElement(dr,{channelId:e.channel_id,postId:e.id,teamId:this.props.teamId,getDotMenuRef:this.getDotMenu,showEmojiPicker:this.state.showEmojiPicker,toggleEmojiPicker:this.toggleEmojiPicker})),(n||i)&&(c=y.a.createElement(oo,{post:e,commentCount:this.props.replyCount,isFlagged:this.props.isFlagged,handleCommentClick:this.props.handleCommentClick,handleDropdownOpened:this.handleDotMenuOpened,handleAddReactionClick:this.toggleEmojiPicker,isReadOnly:s,enableEmojiPicker:this.props.enableEmojiPicker})),y.a.createElement("div",{ref:"dotMenu",className:"col col__reply"},c,l,r)}),this.state={showEmojiPicker:!1}}render(){const e=this.props.post,t=M.ab(e),a=Me.m(e),n=Me.e(e);let s,i,o,r,l;let c;if(!t&&!e.failed&&!a&&(this.props.hover||this.props.isFlagged)&&(s=y.a.createElement(ar,{postId:e.id,isFlagged:this.props.isFlagged,isEphemeral:t})),e.props&&e.props.card&&(i=y.a.createElement(Qs.a,{delayShow:S.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:y.a.createElement(Zs.a,null,y.a.createElement(W.c,{id:"post_info.info.view_additional_info",defaultMessage:"View additional info"}))},y.a.createElement("button",{className:"card-icon__container icon--show style--none "+(this.props.isCardOpen?"active":""),onClick:e=>{e.preventDefault(),this.props.handleCardClick(this.props.post)}},y.a.createElement(hl,{className:"icon icon__info","aria-hidden":"true"})))),t?o=y.a.createElement("div",{className:"col col__remove"},this.createRemovePostButton()):e.failed||(o=this.buildOptions(e,a,n)),t&&!this.props.compactDisplay&&e.state!==x.Posts.POST_DELETED&&(r=y.a.createElement("span",{className:"post__visibility"},y.a.createElement(W.c,{id:"post_info.message.visible",defaultMessage:"(Only visible to you)"}))),e.is_pinned&&(l=y.a.createElement("span",{className:"post__pinned-badge"},y.a.createElement(W.c,{id:"post_info.pinned",defaultMessage:"Pinned"}))),this.props.hover||this.props.showTimeWithoutHover){const a=!(t||x.Posts.POST_DELETED===e.state||Ns.isPostPendingOrFailed(e)||e.type===x.Posts.POST_TYPES.COMBINED_USER_ACTIVITY);c=y.a.createElement(or,{isPermalink:a,eventTime:e.create_at,postId:e.id})}return y.a.createElement("div",{className:"post__header--info"},y.a.createElement("div",{className:"col"},c,l,i,s,r),o)}}mf(uf,"propTypes",{post:_.a.object.isRequired,teamId:_.a.string,handleCommentClick:_.a.func.isRequired,handleCardClick:_.a.func.isRequired,handleDropdownOpened:_.a.func.isRequired,isFlagged:_.a.bool,isCardOpen:_.a.bool,replyCount:_.a.number,isFirstReply:_.a.bool,isMobile:_.a.bool,compactDisplay:_.a.bool,hover:_.a.bool.isRequired,showTimeWithoutHover:_.a.bool.isRequired,enableEmojiPicker:_.a.bool.isRequired,isReadOnly:_.a.bool,actions:_.a.shape({removePost:_.a.func.isRequired}).isRequired});var pf=Object(n.connect)(function(e,t){const a=Object(ms.p)(e),n=Object(d.getConfig)(e),s=e.entities.channels.channels[t.post.channel_id],i=s?0!==s.delete_at:null,o="true"===n.EnableEmojiPicker&&!i;return{teamId:Object(u.getCurrentTeamId)(e),isFlagged:null!=Object(c.get)(e,S.A.CATEGORY_FLAGGED_POST,t.post.id,null),isMobile:e.views.channel.mobileView,isCardOpen:a&&a.id===t.post.id,enableEmojiPicker:o,isReadOnly:Object(p.isCurrentChannelReadOnly)(e)||i}},function(e){return{actions:Object(s.bindActionCreators)({removePost:L.removePost},e)}})(uf);class hf extends y.a.PureComponent{render(){const{post:e}=this.props,t=Me.m(e),a=Me.e(e),n=e&&e.props&&"true"===e.props.from_webhook;let s,i,o=y.a.createElement(El,{userId:e.user_id,hasMention:!0});return n&&!this.props.isBot?(o=e.props.override_username&&this.props.enablePostUsernameOverride?y.a.createElement(El,{userId:e.user_id,hideStatus:!0,overwriteName:e.props.override_username}):y.a.createElement(El,{userId:e.user_id,hideStatus:!0}),s=y.a.createElement(Wa.a,null)):a?(o=y.a.createElement(El,{userId:e.user_id,hideStatus:!0,hasMention:!0}),s=y.a.createElement(pl.a,null,y.a.createElement(W.c,{id:"post_info.auto_responder",defaultMessage:"AUTOMATIC REPLY"}))):t&&this.props.isBot?o=y.a.createElement(El,{userId:e.user_id,hideStatus:!0}):t&&(o=y.a.createElement(El,{overwriteName:y.a.createElement(W.c,{id:"post_info.system",defaultMessage:"System"}),overwriteImage:S.Q.SYSTEM_MESSAGE_PROFILE_IMAGE,disablePopover:!0})),this.props.compactDisplay&&(i=y.a.createElement("strong",{className:"colon"},":")),y.a.createElement("div",{className:"post__header"},y.a.createElement("div",{className:"col col__name"},o,i,s),y.a.createElement("div",{className:"col"},y.a.createElement(pf,{post:e,handleCommentClick:this.props.handleCommentClick,handleCardClick:this.props.handleCardClick,handleDropdownOpened:this.props.handleDropdownOpened,compactDisplay:this.props.compactDisplay,replyCount:this.props.replyCount,isFirstReply:this.props.isFirstReply,showTimeWithoutHover:this.props.showTimeWithoutHover,hover:this.props.hover})))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(hf,"propTypes",{post:_.a.object.isRequired,handleCommentClick:_.a.func.isRequired,handleCardClick:_.a.func.isRequired,handleDropdownOpened:_.a.func.isRequired,compactDisplay:_.a.bool,replyCount:_.a.number,isFirstReply:_.a.bool,hover:_.a.bool.isRequired,showTimeWithoutHover:_.a.bool,enablePostUsernameOverride:_.a.bool.isRequired,isBot:_.a.bool.isRequired,isGuest:_.a.bool.isRequired});var gf=Object(n.connect)(function(e,t){const a="true"===Object(d.getConfig)(e).EnablePostUsernameOverride,n=Object(m.getUser)(e,t.post.user_id);return{enablePostUsernameOverride:a,isBot:Boolean(n&&n.is_bot),isGuest:Boolean(n&&Object(M.W)(n))}})(hf);function bf(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ff extends y.a.PureComponent{constructor(e){super(e),bf(this,"handleCommentClick",e=>{e.preventDefault();const t=this.props.post;t&&this.props.actions.selectPost(t)}),bf(this,"handleCardClick",e=>{e&&this.props.actions.selectPostCard(e)}),bf(this,"handleDropdownOpened",e=>{this.props.togglePostMenu&&this.props.togglePostMenu(e),this.setState({dropdownOpened:e})}),bf(this,"hasSameRoot",e=>{const t=e.post;return!e.isFirstReply&&(!(t.root_id||e.previousPostIsComment||!e.consecutivePostByUser)||!!t.root_id)}),bf(this,"getClassName",(e,t,a,n,s,i)=>{let o="post";(e.failed||e.state===x.Posts.POST_DELETED)&&(o+=" post--hide-controls"),this.props.shouldHighlight&&(o+=" post--highlight");let r="";r=this.state.sameRoot&&!i?"same--root":"other--root";let l="";this.props.currentUserId!==e.user_id||n||t||(l="current--user");let c="";this.props.consecutivePostByUser&&(c="same--user");let d="";return e.root_id&&e.root_id.length>0?d="post--comment":this.props.replyCount>0&&(d="post--root",c="",r=""),(t||a)&&(o+=" post--system",t&&(l="",d="",r="")),s&&(d="post--comment same--root"),this.props.compactDisplay&&(o+=" post--compact"),(this.state.dropdownOpened||this.state.a11yActive)&&(o+=" post--hovered"),e.is_pinned&&(o+=" post--pinned"),o+" "+c+" "+r+" "+d+" "+l}),bf(this,"setHover",()=>{this.setState({hover:!0})}),bf(this,"unsetHover",()=>{this.setState({hover:!1})}),bf(this,"handleA11yActivateEvent",()=>{this.setState({a11yActive:!0,ariaHidden:!1})}),bf(this,"handleA11yDeactivateEvent",()=>{this.setState({a11yActive:!1,ariaHidden:!0})}),bf(this,"handlePostFocus",()=>{this.setState({currentAriaLabel:this.props.createAriaLabel(this.context.intl)})}),this.postRef=y.a.createRef(),this.state={dropdownOpened:!1,hover:!1,a11yActive:!1,sameRoot:this.hasSameRoot(e),currentAriaLabel:"",ariaHidden:!0}}UNSAFE_componentWillReceiveProps(e){this.setState({sameRoot:this.hasSameRoot(e)})}componentDidMount(){this.postRef.current.addEventListener(S.c.ACTIVATE,this.handleA11yActivateEvent),this.postRef.current.addEventListener(S.c.DEACTIVATE,this.handleA11yDeactivateEvent)}componentWillUnmount(){this.postRef.current.removeEventListener(S.c.ACTIVATE,this.handleA11yActivateEvent),this.postRef.current.removeEventListener(S.c.DEACTIVATE,this.handleA11yDeactivateEvent)}componentDidUpdate(){this.state.a11yActive&&this.postRef.current.dispatchEvent(new Event(S.c.UPDATE))}render(){const{post:e}=this.props;if(!e.id)return null;const t=Me.m(e),a=Object(Ns.isMeMessage)(e),n=Me.e(e),s=e&&e.props&&"true"===e.props.from_webhook,i=e&&e.props&&"true"===e.props.from_bot;let o;const r=this.state.sameRoot&&this.props.consecutivePostByUser&&!e.root_id&&0===this.props.replyCount&&!i;r||(o=y.a.createElement(Yo,{compactDisplay:this.props.compactDisplay,post:e,userId:e.user_id}),n&&(o=y.a.createElement("span",{className:"auto-responder"},o)));let l="";return this.props.center&&(l="center"),y.a.createElement("div",{ref:this.postRef,id:"post_"+e.id,"data-testid":"postView",role:"listitem",className:"a11y__section ".concat(this.getClassName(e,t,a,s,n,i)),tabIndex:"0",onFocus:this.handlePostFocus,onBlur:this.removeFocus,onMouseOver:this.setHover,onMouseLeave:this.unsetHover,onTouchStart:this.setHover,"aria-label":this.state.currentAriaLabel,"aria-atomic":!0},y.a.createElement("div",{role:"application",id:"postContent","data-testid":"postContent",className:"post__content "+l,"aria-hidden":this.state.ariaHidden},y.a.createElement("div",{className:"post__img"},o),y.a.createElement("div",null,y.a.createElement(gf,{post:e,handleCommentClick:this.handleCommentClick,handleCardClick:this.handleCardClick,handleDropdownOpened:this.handleDropdownOpened,compactDisplay:this.props.compactDisplay,isFirstReply:this.props.isFirstReply,replyCount:this.props.replyCount,showTimeWithoutHover:!r,hover:this.state.hover||this.state.a11yActive}),y.a.createElement(df,{post:e,handleCommentClick:this.handleCommentClick,compactDisplay:this.props.compactDisplay,isCommentMention:this.props.isCommentMention,isFirstReply:this.props.isFirstReply}))))}}function Ef(e,t){return!!e.root_id&&(!t||e.root_id!==t.id&&e.root_id!==t.root_id)}bf(ff,"propTypes",{post:_.a.object.isRequired,createAriaLabel:_.a.func.isRequired,currentUserId:_.a.string.isRequired,center:_.a.bool,compactDisplay:_.a.bool,isFirstReply:_.a.bool,shouldHighlight:_.a.bool,consecutivePostByUser:_.a.bool,previousPostIsComment:_.a.bool,togglePostMenu:_.a.func,isCommentMention:_.a.bool,replyCount:_.a.number,actions:_.a.shape({selectPost:_.a.func.isRequired,selectPostCard:_.a.func.isRequired}).isRequired}),bf(ff,"contextTypes",{intl:W.i.isRequired}),bf(ff,"defaultProps",{post:{}});var _f=Object(n.connect)(function(){const e=Object(Na.makeIsPostCommentMention)(),t=Object(Me.n)();return(a,n)=>{const s=n.post||Object(Na.getPost)(a,n.postId);let i=s.reply_count;if(""!==s.root_id){const e=Object(Na.getPost)(a,s.root_id);i=e?e.reply_count:0}let o=null;n.previousPostId&&(o=Object(Na.getPost)(a,n.previousPostId));let r=!1,l=!1;return o&&(r=!(!(s.user_id===o.user_id&&s.create_at-o.create_at<=x.Posts.POST_COLLAPSE_TIMEOUT)||s.props&&s.props.from_webhook||o.props&&o.props.from_webhook||Object(Ns.isSystemMessage)(s)||Object(Ns.isSystemMessage)(o)),l=Boolean(o.root_id)),{post:s,createAriaLabel:t(a,s),currentUserId:Object(m.getCurrentUserId)(a),isFirstReply:Ef(s,o),consecutivePostByUser:r,previousPostIsComment:l,replyCount:i,isCommentMention:e(a,s.id),center:Object(c.get)(a,S.A.CATEGORY_DISPLAY_SETTINGS,S.A.CHANNEL_DISPLAY_MODE,S.A.CHANNEL_DISPLAY_MODE_DEFAULT)===S.A.CHANNEL_DISPLAY_MODE_CENTERED,compactDisplay:Object(c.get)(a,S.A.CATEGORY_DISPLAY_SETTINGS,S.A.MESSAGE_DISPLAY,S.A.MESSAGE_DISPLAY_DEFAULT)===S.A.MESSAGE_DISPLAY_COMPACT}}},function(e){return{actions:Object(s.bindActionCreators)({selectPost:ds.e,selectPostCard:ds.f},e)}})(ff);var vf=Object(n.connect)(function(){const e=Object(Qi.makeGenerateCombinedPost)();return(t,a)=>({post:e(t,a.combinedId),postId:a.combinedId})})(_f);class yf extends y.a.PureComponent{render(){return y.a.createElement("span",this.props,y.a.createElement(W.c,{id:"generic_icons.arrow.down",defaultMessage:"Down Arrow Icon"},e=>y.a.createElement("svg",{id:"Layer_1",x:"0px",y:"0px",viewBox:"-239 239 21 23",style:Cf,role:"icon","aria-label":e},y.a.createElement("path",{d:"M-239,241.4l2.4-2.4l8.1,8.2l8.1-8.2l2.4,2.4l-10.5,10.6L-239,241.4z M-228.5,257.2l8.1-8.2l2.4,2.4l-10.5,10.6l-10.5-10.6 l2.4-2.4L-228.5,257.2z"}))))}}const Cf={enableBackground:"new -239 239 21 23"};class wf extends y.a.PureComponent{render(){if(ys()(window).width()>768)return null;let e="post-list__arrows";return this.props.isScrolling&&!this.props.atBottom&&(e+=" scrolling"),y.a.createElement("div",{className:e,onClick:this.props.onClick},y.a.createElement(yf,null))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(wf,"propTypes",{isScrolling:_.a.bool.isRequired,atBottom:_.a.bool.isRequired,onClick:_.a.func.isRequired});var Tf=a(1069),Of=a(1012),Sf=a(1220);class Pf extends y.a.PureComponent{render(){const{currentUserId:e,channel:t,fullWidth:a,locale:n,enableUserCreation:s,isReadOnly:i,channelProfiles:o,teamIsGroupConstrained:r}=this.props;let l="";return a||(l="channel-intro--centered"),t.type===S.i.DM_CHANNEL?function(e,t){var a=M.u(e.id);if(a){var n=a.username;return a.nickname.length>0&&(n=a.nickname),y.a.createElement("div",{id:"channelIntro",className:"channel-intro "+t},y.a.createElement("div",{className:"post-profile-img__container channel-intro-img"},y.a.createElement(Go.a,{src:M.N(a),size:"xl",userId:a.id,username:a.username,hasMention:!0})),y.a.createElement("div",{className:"channel-intro-profile d-flex"},y.a.createElement(El,{userId:a.id,disablePopover:!1,hasMention:!0})),y.a.createElement("p",{className:"channel-intro-text"},y.a.createElement(ji.b,{id:"intro_messages.DM",defaultMessage:"This is the start of your direct message history with {teammate}.\\nDirect messages and files shared here are not shown to people outside this area.",values:{teammate:n}})),a.is_bot?null:Nf(e))}return y.a.createElement("div",{id:"channelIntro",className:"channel-intro "+t},y.a.createElement("p",{className:"channel-intro-text"},y.a.createElement(W.c,{id:"intro_messages.teammate",defaultMessage:"This is the start of your direct message history with this teammate. Direct messages and files shared here are not shown to people outside this area."})))}(t,l):t.type===S.i.GM_CHANNEL?function(e,t,a,n){if(a.length>0){const s=a.filter(e=>e.id!==n).map(e=>y.a.createElement(Go.a,{key:"introprofilepicture"+e.id,src:M.N(e),size:"xl",userId:e.id,username:e.username}));return y.a.createElement("div",{id:"channelIntro",className:"channel-intro "+t},y.a.createElement("div",{className:"post-profile-img__container channel-intro-img"},s),y.a.createElement("p",{className:"channel-intro-text"},y.a.createElement(ji.b,{id:"intro_messages.GM",defaultMessage:"This is the start of your group message history with {names}.\\nMessages and files shared here are not shown to people outside this area.",values:{names:e.display_name}})),Nf(e))}return y.a.createElement("div",{id:"channelIntro",className:"channel-intro "+t},y.a.createElement("p",{className:"channel-intro-text"},y.a.createElement(W.c,{id:"intro_messages.group_message",defaultMessage:"This is the start of your group message history with these teammates. Messages and files shared here are not shown to people outside this area."})))}(t,l,o,e):t.name===S.i.DEFAULT_CHANNEL?function(e,t,a,n,s){let i=null;!n&&a&&(i=y.a.createElement(Yd.a,{teamId:e.team_id,permissions:[x.Permissions.INVITE_USER]},y.a.createElement(Yd.a,{teamId:e.team_id,permissions:[x.Permissions.ADD_USER_TO_TEAM]},!s&&y.a.createElement(W.c,{id:"intro_messages.inviteOthers",defaultMessage:"Invite others to this team"},e=>y.a.createElement(Tf.a,{accessibilityLabel:e,id:"introTextInvite",className:"intro-links color--link cursor--pointer",modalId:S.s.INVITATION,dialogType:zd},y.a.createElement(W.c,{id:"generic_icons.add",defaultMessage:"Add Icon"},e=>y.a.createElement("i",{className:"fa fa-user-plus",title:e})),e)),s&&y.a.createElement(Of.a,{className:"intro-links color--link",dialogType:Gm.a,dialogProps:{channel:e}},y.a.createElement(W.c,{id:"generic_icons.add",defaultMessage:"Add Icon"},e=>y.a.createElement("i",{className:"fa fa-user-plus",title:e})),y.a.createElement(W.c,{id:"intro_messages.addGroupsToTeam",defaultMessage:"Add other groups to this team"})))));const o=e.type===S.i.PRIVATE_CHANNEL;let r=null;if(!n){const t=Nf(e);t&&(r=y.a.createElement(ao,{teamId:e.team_id,channelId:e.id,permissions:[o?x.Permissions.MANAGE_PRIVATE_CHANNEL_PROPERTIES:x.Permissions.MANAGE_PUBLIC_CHANNEL_PROPERTIES]},t))}return y.a.createElement("div",{id:"channelIntro",className:"channel-intro "+t},y.a.createElement("h4",{className:"channel-intro__title"},y.a.createElement(W.c,{id:"intro_messages.beginning",defaultMessage:"Beginning of {name}",values:{name:e.display_name}})),y.a.createElement("p",{className:"channel-intro__content"},!n&&y.a.createElement(ji.b,{id:"intro_messages.default",defaultMessage:"**Welcome to {display_name}!**\\n \\nPost messages here that you want everyone to see. Everyone automatically becomes a permanent member of this channel when they join the team.",values:{display_name:e.display_name}}),n&&y.a.createElement(ji.b,{id:"intro_messages.readonly.default",defaultMessage:"**Welcome to {display_name}!**\\n \\nMessages can only be posted by system admins. Everyone automatically becomes a permanent member of this channel when they join the team.",values:{display_name:e.display_name}})),i,r,y.a.createElement("br",null))}(t,l,s,i,r):t.name===S.i.OFFTOPIC_CHANNEL?function(e,t){const a=e.type===S.i.PRIVATE_CHANNEL,n=Nf(e);let s=null;n&&(s=y.a.createElement(ao,{teamId:e.team_id,channelId:e.id,permissions:[a?x.Permissions.MANAGE_PRIVATE_CHANNEL_PROPERTIES:x.Permissions.MANAGE_PUBLIC_CHANNEL_PROPERTIES]},n));const i=Mf(e);return y.a.createElement("div",{id:"channelIntro",className:"channel-intro "+t},y.a.createElement("h4",{className:"channel-intro__title"},y.a.createElement(W.c,{id:"intro_messages.beginning",defaultMessage:"Beginning of {name}",values:{name:e.display_name}})),y.a.createElement("p",{className:"channel-intro__content"},y.a.createElement(W.c,{id:"intro_messages.offTopic",defaultMessage:"This is the start of {display_name}, a channel for non-work-related conversations.",values:{display_name:e.display_name}})),i,s)}(t,l):t.type===S.i.OPEN_CHANNEL||t.type===S.i.PRIVATE_CHANNEL?function(e,t,a){var n,s=e.display_name,i=M.x(e.creator_id);n=0!==e.delete_at?"":e.type===S.i.PRIVATE_CHANNEL?y.a.createElement(W.c,{id:"intro_messages.onlyInvited",defaultMessage:" Only invited members can see this private channel."}):y.a.createElement(W.c,{id:"intro_messages.anyMember",defaultMessage:" Any member can join and read this channel."});const o=y.a.createElement(W.a,{value:e.create_at,month:Object(le.a)(a),day:"2-digit",year:"numeric"});var r;""===i?e.type===S.i.PRIVATE_CHANNEL?r=y.a.createElement(W.c,{id:"intro_messages.noCreatorPrivate",defaultMessage:"This is the start of the {name} private channel, created on {date}.",values:{name:s,date:o}}):e.type===S.i.OPEN_CHANNEL&&(r=y.a.createElement(W.c,{id:"intro_messages.noCreator",defaultMessage:"This is the start of the {name} channel, created on {date}.",values:{name:s,date:o}})):e.type===S.i.PRIVATE_CHANNEL?r=y.a.createElement("span",null,y.a.createElement(W.c,{id:"intro_messages.creatorPrivate",defaultMessage:"This is the start of the {name} private channel, created by {creator} on {date}.",values:{name:s,creator:i,date:o}})):e.type===S.i.OPEN_CHANNEL&&(r=y.a.createElement("span",null,y.a.createElement(W.c,{id:"intro_messages.creator",defaultMessage:"This is the start of the {name} channel, created by {creator} on {date}.",values:{name:s,creator:i,date:o}})));var l="";e.purpose&&""!==e.purpose&&(e.type===S.i.PRIVATE_CHANNEL?l=y.a.createElement("span",null,y.a.createElement(W.c,{id:"intro_messages.purposePrivate",defaultMessage:" This private channel's purpose is: {purpose}",values:{purpose:e.purpose}})):e.type===S.i.OPEN_CHANNEL&&(l=y.a.createElement("span",null,y.a.createElement(W.c,{id:"intro_messages.purpose",defaultMessage:" This channel's purpose is: {purpose}",values:{purpose:e.purpose}}))));const c=e.type===S.i.PRIVATE_CHANNEL;let d=null;const m=Nf(e);m&&(d=y.a.createElement(ao,{teamId:e.team_id,channelId:e.id,permissions:[c?x.Permissions.MANAGE_PRIVATE_CHANNEL_PROPERTIES:x.Permissions.MANAGE_PUBLIC_CHANNEL_PROPERTIES]},m));const u=Mf(e);return y.a.createElement("div",{id:"channelIntro",className:"channel-intro "+t},y.a.createElement("h4",{className:"channel-intro__title"},y.a.createElement(W.c,{id:"intro_messages.beginning",defaultMessage:"Beginning of {name}",values:{name:s}})),y.a.createElement("p",{className:"channel-intro__content"},r,n,l,y.a.createElement("br",null)),u,d)}(t,l,n):null}}function Mf(e){const t=e.group_constrained?ob.a:Xh;if(0!==e.delete_at)return null;const a=e.type===S.i.PRIVATE_CHANNEL;return y.a.createElement(ao,{channelId:e.id,teamId:e.team_id,permissions:[a?x.Permissions.MANAGE_PRIVATE_CHANNEL_MEMBERS:x.Permissions.MANAGE_PUBLIC_CHANNEL_MEMBERS]},y.a.createElement(Of.a,{className:"intro-links color--link",dialogType:t,dialogProps:{channel:e}},y.a.createElement(W.c,{id:"generic_icons.add",defaultMessage:"Add Icon"},e=>y.a.createElement("i",{className:"fa fa-user-plus",title:e})),a&&e.group_constrained&&y.a.createElement(W.c,{id:"intro_messages.addGroups",defaultMessage:"Add groups to this private channel"}),a&&!e.group_constrained&&y.a.createElement(W.c,{id:"intro_messages.invitePrivate",defaultMessage:"Invite others to this private channel"}),!a&&y.a.createElement(W.c,{id:"intro_messages.invite",defaultMessage:"Invite others to this channel"})))}function Nf(e){return 0!==e.delete_at?null:y.a.createElement(W.c,{id:"intro_messages.setHeader",defaultMessage:"Set a Header"},t=>y.a.createElement(Tf.a,{modalId:"editChannelHeaderModal",accessibilityLabel:t,className:"intro-links color--link",dialogType:Yh,dialogProps:{channel:e}},y.a.createElement(Sf.a,null),t))}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Pf,"propTypes",{currentUserId:_.a.string.isRequired,channel:_.a.object.isRequired,fullWidth:_.a.bool.isRequired,locale:_.a.string.isRequired,channelProfiles:_.a.array.isRequired,enableUserCreation:_.a.bool,isReadOnly:_.a.bool,teamIsGroupConstrained:_.a.bool});var If=Object(n.connect)(function(e){const t="true"===Object(d.getConfig)(e).EnableUserCreation,a=Object(p.isCurrentChannelReadOnly)(e),n=Object(u.getCurrentTeam)(e);return{currentUserId:Object(m.getCurrentUserId)(e),channel:Object(p.getCurrentChannel)(e),locale:Object(Ss.a)(e),channelProfiles:Object(m.getProfilesInCurrentChannel)(e),enableUserCreation:t,isReadOnly:a,fullWidth:Object(c.get)(e,S.A.CATEGORY_DISPLAY_SETTINGS,S.A.CHANNEL_DISPLAY_MODE,S.A.CHANNEL_DISPLAY_MODE_DEFAULT)===S.A.CHANNEL_DISPLAY_MODE_FULL_SCREEN,teamIsGroupConstrained:Boolean(n.group_constrained)}})(Pf);function Af(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const jf=10,Rf=S.Q.POST_CHUNK_SIZE/2,kf=10;class Lf extends y.a.PureComponent{constructor(e){super(e),Af(this,"loadPostsToFillScreenIfNecessary",()=>{this.props.focusedPostId||this.state.isDoingInitialLoad||!this.state.atEnd&&this.refs.postListContent&&this.refs.postlist&&(this.refs.postListContent.scrollHeight>=this.refs.postlist.clientHeight||this.extraPagesLoaded>kf||this.doLoadPostsToFillScreen())}),Af(this,"doLoadPostsToFillScreen",Object(di.debounce)(()=>{this.extraPagesLoaded+=1,this.loadMorePosts()},100)),Af(this,"initialScroll",()=>{if(this.hasScrolledToNewMessageSeparator)return!1;const e=this.refs.postlist,t=this.props.posts;if(!e||!t)return!1;const a=this.refs.newMessageSeparator;return a&&e.scrollHeight-a.offsetTop>e.clientHeight?(a.scrollIntoView(),this.setUnreadsBelow(t,this.props.currentUserId),!0):(e.scrollTop=e.scrollHeight,this.atBottom=!0,!0)}),Af(this,"setUnreadsBelow",(e,t)=>{const a=e.reduce((e,a)=>a.create_at>this.state.lastViewed&&a.user_id!==t&&a.state!==S.Q.POST_DELETED?e+1:e,0);this.mounted&&this.setState({unViewedCount:a})}),Af(this,"handleScrollStop",()=>{this.mounted&&this.setState({isScrolling:!1})}),Af(this,"checkBottom",()=>!this.refs.postlist||(this.refs.postlist.scrollHeight<=this.refs.postlist.clientHeight||this.refs.postlist.clientHeight+this.refs.postlist.scrollTop>=this.refs.postlist.scrollHeight-jf)),Af(this,"handleWindowResize",()=>{this.handleResize()}),Af(this,"handleResize",e=>{const t=this.refs.postlist,a=this.refs.newMessageSeparator,n=this.atBottom||e;if(t){if(n)t.scrollTop=t.scrollHeight;else if(!this.hasScrolled&&a){bi.a.findDOMNode(a).scrollIntoView()}this.previousScrollHeight=t.scrollHeight,this.previousScrollTop=t.scrollTop,this.previousClientHeight=t.clientHeight,this.atBottom=this.checkBottom()}this.props.actions.checkAndSetMobileView()}),Af(this,"loadPosts",async(e,t)=>{if(!e)return;let a;if(({atOldestmessage:a}=t?await this.props.actions.loadPostsAround(e,t):await this.props.actions.loadLatestPosts(e)),this.mounted&&this.setState({isDoingInitialLoad:!1,atEnd:a}),t)this.hasScrolledToFocusedPost=!0;else{if(!this.checkBottom()){const e=(void 0).order.map(e=>(void 0).posts[e]);this.setUnreadsBelow(e,this.props.currentUserId)}this.hasScrolledToNewMessageSeparator=!0}}),Af(this,"loadMorePosts",async e=>{e&&e.preventDefault();const{posts:t,channel:a}=this.props,n=t.length;if(!t)return;const{moreToLoad:s}=await this.props.actions.loadPosts({channelId:a.id,postId:t[n-1].id,type:S.y.BEFORE_ID});this.setState({atEnd:!s})}),Af(this,"handleScroll",()=>{this.hasScrolled=this.hasScrolledToNewMessageSeparator||this.hasScrolledToFocusedPost,this.refs.postlist&&(this.updateFloatingTimestamp(),this.previousScrollTop=this.refs.postlist.scrollTop,this.refs.postlist.scrollHeight===this.previousScrollHeight&&(this.atBottom=this.checkBottom()),this.state.isScrolling||this.setState({isScrolling:!0}),this.checkBottom()&&this.setState({lastViewed:(new Date).getTime(),unViewedCount:0,isScrolling:!1}),this.scrollStopAction.fireAfter(S.Q.SCROLL_DELAY))}),Af(this,"updateFloatingTimestamp",()=>{if(M.Z()&&this.props.posts)for(let e=0;e<this.props.posts.length;e++){const t=this.props.posts[e],a=this.refs[t.id],n=bi.a.findDOMNode(a);if(!a||!n||n.offsetTop+n.clientHeight<=this.refs.postlist.scrollTop){let a;a=e>0?this.props.posts[e-1]:t,this.state.topPost&&a.id===this.state.topPost.id||this.setState({topPost:a});break}}}),Af(this,"scrollToBottom",()=>{this.refs.postlist&&(this.refs.postlist.scrollTop=this.refs.postlist.scrollHeight)}),Af(this,"createPosts",e=>{const t=[];let a=new Date(0),n="";const s=this.props.currentUserId,i=this.props.lastViewedAt||0;let o=!1;for(let r=e.length-1;r>=0;r--){const l=e[r];let c;if(null==l||l.type===S.z.EPHEMERAL_ADD_TO_CHANNEL)continue;c=Object(Qi.isCombinedUserActivityPost)(l.id)?y.a.createElement(vf,{combinedId:l.id,previousPostId:n}):y.a.createElement(_f,{ref:l.id,key:"post "+(l.id||l.pending_post_id),post:l,shouldHighlight:this.props.focusedPostId===l.id,previousPostId:n});const d=M.s(l.create_at);if(d.toDateString()!==a.toDateString()&&t.push(y.a.createElement(Ki,{key:d,date:d})),(l.user_id!==s||Object(Me.l)(l))&&0!==i&&l.create_at>i&&!M.ab(l)&&!o){o=!0;let e="";P.f()||(e="new_message_"+l.id),t.push(y.a.createElement("div",{id:e,key:"unviewed",ref:"newMessageSeparator",className:"new-separator"},y.a.createElement("hr",{className:"separator__hr"}),y.a.createElement("div",{className:"separator__text"},y.a.createElement(W.c,{id:"posts_view.newMsg",defaultMessage:"New Messages"}))))}t.push(c),a=d,n=l.id}return t}),this.scrollStopAction=new Ts(this.handleScrollStop),this.previousScrollTop=Number.MAX_SAFE_INTEGER,this.previousScrollHeight=0,this.previousClientHeight=0,this.atBottom=!1,this.extraPagesLoaded=0,this.loadingPosts=!1,this.state={atEnd:!1,unViewedCount:0,isDoingInitialLoad:!0,isScrolling:!1,lastViewed:e.lastViewedAt}}componentDidMount(){this.mounted=!0,this.loadPosts(this.props.channel.id,this.props.focusedPostId),this.props.actions.checkAndSetMobileView(),Jb.a.addListener(S.l.POST_LIST_SCROLL_CHANGE,this.handleResize),window.addEventListener("resize",this.handleWindowResize),this.initialScroll()}componentWillUnmount(){this.mounted=!1,Jb.a.removeListener(S.l.POST_LIST_SCROLL_CHANGE,this.handleResize),window.removeEventListener("resize",this.handleWindowResize)}UNSAFE_componentWillReceiveProps(e){if(e.focusedPostId&&this.props.focusedPostId!==e.focusedPostId)return this.hasScrolledToFocusedPost=!1,this.hasScrolledToNewMessageSeparator=!1,this.setState({atEnd:!1,isDoingInitialLoad:!e.posts}),void this.loadPosts(e.channel.id,e.focusedPostId);const t=this.props.channel||{},a=e.channel||{};null==e.focusedPostId&&t.id!==a.id&&(this.hasScrolled=!1,this.hasScrolledToFocusedPost=!1,this.hasScrolledToNewMessageSeparator=!1,this.atBottom=!1,this.extraPagesLoaded=0,this.setState({atEnd:!1,lastViewed:e.lastViewedAt,isDoingInitialLoad:!e.posts,unViewedCount:0}),a.id&&this.loadPosts(a.id))}UNSAFE_componentWillUpdate(){this.refs.postlist&&(this.previousScrollTop=this.refs.postlist.scrollTop,this.previousScrollHeight=this.refs.postlist.scrollHeight,this.previousClientHeight=this.refs.postlist.clientHeight)}componentDidUpdate(e,t){if(this.props.focusedPostId&&this.props.focusedPostId!==e.focusedPostId?(this.hasScrolledToFocusedPost=!1,this.hasScrolledToNewMessageSeparator=!1,this.loadPosts(this.props.channel.id,this.props.focusedPostId)):!this.props.channel||e.channel&&this.props.channel.id===e.channel.id||(this.hasScrolled=!1,this.hasScrolledToFocusedPost=!1,this.hasScrolledToNewMessageSeparator=!1,this.extraPagesLoaded=0,this.setState({atEnd:!1,isDoingInitialLoad:!this.props.posts,unViewedCount:0}),this.loadPosts(this.props.channel.id)),this.loadPostsToFillScreenIfNecessary(),this.props.posts===e.posts&&this.props.postVisibility===e.postVisibility&&this.state.atEnd===t.atEnd)return;const a=e.posts||[],n=this.props.posts||[];if(null==this.props.focusedPostId){const e=0===a.length&&n.length>0||a.length>0&&n.length>0&&a[0].id!==n[0].id;!this.checkBottom()&&e&&this.setUnreadsBelow(n,this.props.currentUserId)}const s=this.refs.postlist;if(!s)return;const i=this.refs[this.props.focusedPostId];if(i&&this.props.posts){if(this.hasScrolledToFocusedPost)this.previousScrollHeight!==s.scrollHeight&&n[0].id===a[0].id&&(s.scrollTop=this.previousScrollTop+(s.scrollHeight-this.previousScrollHeight));else{const e=bi.a.findDOMNode(i).getBoundingClientRect(),t=s.clientHeight/2;s.scrollTop+=e.top-t,this.atBottom=this.checkBottom()}return}const o=this.initialScroll();if(n.length>=Rf&&(this.hasScrolledToNewMessageSeparator=!0),!o&&s&&a&&n&&n[0]&&a[0]){let e=!1;const t=n[0].id,i=a[0].id,o=n[0].pending_post_id;if(t!==i&&o!==i&&(this.atBottom&&(e=!0),M.ab(n[0])&&(e=!0)),e)return this.atBottom=!0,void(s.scrollTop=s.scrollHeight);this.previousScrollHeight!==s.scrollHeight&&n[0].id===a[0].id&&(s.scrollTop=this.previousScrollTop+(s.scrollHeight-this.previousScrollHeight))}}render(){const e=this.props.posts||[],t=this.props.channel;if(0===e.length&&this.state.isDoingInitialLoad||null==t)return y.a.createElement("div",{id:"post-list",className:"a11y__region","data-a11y-sort-order":"1","data-a11y-focus-child":!0,"data-a11y-order-reversed":!0,"data-a11y-loop-navigation":!1},y.a.createElement(Km.a,{position:"absolute",key:"loading"}));let a;a=this.state.atEnd?y.a.createElement(If,{channel:t}):this.props.postVisibility>=S.Q.MAX_POST_VISIBILITY?y.a.createElement("div",{className:"post-list__loading post-list__loading-search"},y.a.createElement(W.c,{id:"posts_view.maxLoaded",defaultMessage:"Looking for a specific message? Try searching for it"})):y.a.createElement("button",{ref:"loadmoretop",className:"more-messages-text theme style--none color--link",onClick:this.loadMorePosts},y.a.createElement(W.c,{id:"posts_view.loadMore",defaultMessage:"Load more messages"}));const n=this.state.topPost?this.state.topPost.create_at:0;let s=this.props.postVisibility;return this.props.focusedPostId&&(s+=S.Q.POST_CHUNK_SIZE/2),y.a.createElement("div",{id:"post-list",className:"a11y__region","data-a11y-sort-order":"1","data-a11y-focus-child":!0,"data-a11y-order-reversed":!0,"data-a11y-loop-navigation":!1},y.a.createElement(Ji,{isScrolling:this.state.isScrolling,isMobile:M.Z(),createAt:n}),y.a.createElement(wf,{isScrolling:this.state.isScrolling,atBottom:this.atBottom,onClick:this.scrollToBottom}),!this.props.focusedPostId&&y.a.createElement(ef,{atBottom:this.atBottom,lastViewedBottom:this.state.lastViewed,onClick:this.scrollToBottom,channelId:this.props.channel.id}),y.a.createElement("div",{ref:"postlist",className:"post-list-holder-by-time normal_post_list",key:"postlist-"+t.id,onScroll:this.handleScroll},y.a.createElement("div",{className:"post-list__table"},y.a.createElement("div",{id:"postListContent",ref:"postListContent",className:"post-list__content"},a,this.createPosts(e.slice(0,s))))))}}Af(Lf,"propTypes",{posts:_.a.array,postVisibility:_.a.number,channel:_.a.object.isRequired,lastViewedAt:_.a.number,currentUserId:_.a.string,focusedPostId:_.a.string,actions:_.a.shape({loadLatestPosts:_.a.func.isRequired,loadPosts:_.a.func.isRequired,checkAndSetMobileView:_.a.func.isRequired,loadPostsAround:_.a.func.isRequired}).isRequired});var xf=Object(n.connect)(function(){const e=Object(Na.makeGetPostsInChannel)(),t=Object(Na.makeGetPostsAroundPost)(),a=Object(G.c)();return function(n,s){let i;const o=n.views.channel.postVisibility[s.channelId];return i=s.focusedPostId?t(n,s.focusedPostId,s.channelId):e(n,s.channelId,o),{posts:a(i||[]),currentUserId:Object(m.getCurrentUserId)(n),lastViewedAt:n.views.channel.lastChannelViewTime[s.channelId],channel:Object(p.getCurrentChannel)(n),postVisibility:o}}})(Lf),Df=a(1559),Uf=a(1860);class qf extends y.a.PureComponent{render(){return y.a.createElement("div",{id:this.props.separatorId,className:"new-separator"},y.a.createElement("hr",{className:"separator__hr"}),y.a.createElement("div",{className:"separator__text"},y.a.createElement(W.c,{id:"posts_view.newMsg",defaultMessage:"New Messages"})))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(qf,"propTypes",{separatorId:_.a.string.isRequired});class Hf extends y.a.PureComponent{render(){const{listId:e,previousListId:t}=this.props;if(Qi.isDateLine(e)){const t=Qi.getDateForDateLine(e);return y.a.createElement(Ki,{key:t,date:t})}if(Qi.isStartOfNewMessages(e))return y.a.createElement(qf,{separatorId:e});if(e===S.x.CHANNEL_INTRO_MESSAGE)return y.a.createElement(If,null);if(e===S.x.LOAD_OLDER_MESSAGES_TRIGGER||e===S.x.LOAD_NEWER_MESSAGES_TRIGGER)return y.a.createElement("button",{className:"more-messages-text theme style--none color--link",onClick:e===S.x.LOAD_OLDER_MESSAGES_TRIGGER?this.props.loadOlderPosts:this.props.loadNewerPosts},y.a.createElement(W.c,{id:"posts_view.loadMore",defaultMessage:"Load more messages"}));if(e===S.x.OLDER_MESSAGES_LOADER||e===S.x.NEWER_MESSAGES_LOADER)return y.a.createElement("div",{className:"loading-screen"},y.a.createElement("div",{className:"loading__content"},y.a.createElement("div",{className:"round round-1"}),y.a.createElement("div",{className:"round round-2"}),y.a.createElement("div",{className:"round round-3"})));const a={previousPostId:t,shouldHighlight:this.props.shouldHighlight,togglePostMenu:this.props.togglePostMenu};return Qi.isCombinedUserActivityPost(e)?y.a.createElement(vf,Object.assign({combinedId:e},a)):y.a.createElement(_f,Object.assign({postId:e},a))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Hf,"propTypes",{listId:_.a.string.isRequired,previousListId:_.a.string,fullWidth:_.a.bool,shouldHighlight:_.a.bool,loadOlderPosts:_.a.func,loadNewerPosts:_.a.func,togglePostMenu:_.a.func});var Ff=Object(n.connect)(function(e,t){return{post:t.post,channel:t.channel}})(Hf);function Bf(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Gf(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Bf(a,!0).forEach(function(t){Vf(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Bf(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Vf(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Wf=window.OVERSCAN_COUNT_BACKWARD||80,zf=window.OVERSCAN_COUNT_FORWARD||80,Yf=window.HEIGHT_TRIGGER_FOR_MORE_POSTS||1e3,Kf=10,Qf={channel:50,permalink:100},Zf={padding:"14px 0px 7px"},Jf={position:"absolute",bottom:"0",maxHeight:"100%"};class Xf extends y.a.PureComponent{constructor(e){super(e),Vf(this,"getNewMessagesSeparatorIndex",e=>e.findIndex(e=>0===e.indexOf(S.x.START_OF_NEW_MESSAGES))),Vf(this,"scrollChange",e=>{e&&this.scrollToLatestMessages()}),Vf(this,"handleWindowResize",()=>{this.props.actions.checkAndSetMobileView();const e=M.Z();if(e!==this.state.isMobile){const t=this.state.dynamicListStyle;this.state.postMenuOpened&&(e||"unset"!==t.willChange?e&&"transform"===t.willChange&&(t.willChange="unset"):t.willChange="transform"),this.setState({isMobile:e,dynamicListStyle:t}),this.scrollStopAction=new Ts(this.handleScrollStop)}}),Vf(this,"togglePostMenu",e=>{const t=this.state.dynamicListStyle;this.state.isMobile&&(t.willChange=e?"unset":"transform"),this.setState({postMenuOpened:e,dynamicListStyle:t})}),Vf(this,"renderRow",({data:e,itemId:t,style:a})=>{const n=e.indexOf(t);let s="";const i=-1!==n&&n<e.length-1?e[n+1]:"",o=n>0&&n<e.length?e[n-1]:"";return(Object(Qi.isDateLine)(o)||Object(Qi.isStartOfNewMessages)(o))&&(s+="post-row__padding bottom"),(Object(Qi.isDateLine)(i)||Object(Qi.isStartOfNewMessages)(i))&&(s.includes("post-row__padding")?s+=" top":s+="post-row__padding top"),y.a.createElement("div",{style:a,className:s},y.a.createElement(Ff,{listId:t,previousListId:Object(Me.i)(e,n),shouldHighlight:t===this.props.focusedPostId,loadOlderPosts:this.props.actions.loadOlderPosts,loadNewerPosts:this.props.actions.loadNewerPosts,togglePostMenu:this.togglePostMenu}))}),Vf(this,"itemKey",e=>{const{postListIds:t}=this.state;return t[e]?t[e]:e}),Vf(this,"onScroll",({scrollDirection:e,scrollOffset:t,scrollUpdateWasRequested:a,clientHeight:n,scrollHeight:s})=>{const i="forward"===e&&!a,o=s-n-t<Yf;if("backward"===e&&!a&&t<Yf&&!this.props.atOldestPost?this.props.actions.loadOlderPosts():i&&o&&!this.props.atLatestPost&&this.props.actions.loadNewerPosts(),this.state.isMobile&&(this.state.isScrolling||this.setState({isScrolling:!0}),this.scrollStopAction&&this.scrollStopAction.fireAfter(S.Q.SCROLL_DELAY)),a){this.listRef.current._getRangeToRender()[3]<=1&&!this.props.atLatestPost&&this.props.actions.canLoadMorePosts(S.y.AFTER_ID)}this.checkBottom(t,s,n)}),Vf(this,"checkBottom",(e,t,a)=>{this.updateAtBottom(this.isAtBottom(e,t,a))}),Vf(this,"isAtBottom",(e,t,a)=>{return t-a-e<=Kf&&t>0}),Vf(this,"updateAtBottom",e=>{if(e!==this.state.atBottom){let t=Date.now();this.props.latestPostTimeStamp>t&&(t=this.props.latestPostTimeStamp),this.setState({atBottom:e,lastViewedBottom:t})}}),Vf(this,"handleScrollStop",()=>{this.mounted&&this.setState({isScrolling:!1})}),Vf(this,"updateFloatingTimestamp",e=>{this.state.isMobile&&this.props.postListIds&&this.setState({topPostId:Object(Me.g)(this.props.postListIds.slice(e))})}),Vf(this,"onItemsRendered",({visibleStartIndex:e})=>{this.updateFloatingTimestamp(e)}),Vf(this,"initScrollToIndex",()=>{if(this.props.focusedPostId){return{index:this.state.postListIds.findIndex(e=>e===this.props.focusedPostId),position:"center"}}const e=this.state.postListIds.findIndex(e=>0===e.indexOf(S.x.START_OF_NEW_MESSAGES));return e>0?Object(Qi.isDateLine)(this.state.postListIds[e+1])?{index:e+1,position:"start"}:{index:e,position:"start"}:(this.setState({atBottom:!0}),{index:0,position:"end"})}),Vf(this,"scrollToLatestMessages",()=>{this.props.atLatestPost?this.scrollToBottom():this.props.actions.changeUnreadChunkTimeStamp("")}),Vf(this,"scrollToBottom",()=>{this.listRef.current.scrollToItem(0,"end")});const t=S.x.CHANNEL_INTRO_MESSAGE,a=M.Z();this.state={isScrolling:!1,isMobile:a,atBottom:!1,lastViewedBottom:Date.now(),postListIds:[t],topPostId:"",postMenuOpened:!1,dynamicListStyle:{willChange:"transform"}},this.listRef=y.a.createRef(),this.postListRef=y.a.createRef(),a&&(this.scrollStopAction=new Ts(this.handleScrollStop)),this.initRangeToRender=this.props.focusedPostId?[0,Qf.permalink]:[0,Qf.channel];let n=0;n=e.focusedPostId?this.props.postListIds.findIndex(e=>e===this.props.focusedPostId):this.getNewMessagesSeparatorIndex(e.postListIds);const s=e.focusedPostId?Qf.permalink:Qf.channel;this.initRangeToRender=[Math.max(n-30,0),Math.max(n+30,Math.min(e.postListIds.length-1,s))]}componentDidMount(){this.mounted=!0,this.props.actions.checkAndSetMobileView(),window.addEventListener("resize",this.handleWindowResize),Jb.a.addListener(S.l.POST_LIST_SCROLL_CHANGE,this.scrollChange)}getSnapshotBeforeUpdate(e){if(this.postListRef&&this.postListRef.current){const t=this.props.postListIds&&this.props.postListIds.length!==e.postListIds.length&&this.props.postListIds[0]===e.postListIds[0],a=this.props.atOldestPost!==e.atOldestPost;if((t||a)&&!this.state.atBottom){const e=this.postListRef.current;return{previousScrollTop:e.parentElement.scrollTop,previousScrollHeight:e.scrollHeight}}}return null}componentDidUpdate(e,t,a){if(!this.postListRef.current||!a)return;const n=this.postListRef.current.scrollHeight,s=this.props.postListIds.length!==e.postListIds.length&&this.props.postListIds[0]===e.postListIds[0],i=this.props.atOldestPost!==e.atOldestPost;if((s||i)&&!this.state.atBottom){const e=a.previousScrollTop+(n-a.previousScrollHeight);0!==e&&e-a.previousScrollTop!=0&&this.listRef.current.scrollTo(e,e-a.previousScrollTop,!0)}}componentWillUnmount(){this.mounted=!1,window.removeEventListener("resize",this.handleWindowResize),Jb.a.removeListener(S.l.POST_LIST_SCROLL_CHANGE,this.scrollChange)}static getDerivedStateFromProps(e){const t=e.postListIds;let a;return a=e.atOldestPost?[...t,S.x.CHANNEL_INTRO_MESSAGE]:e.autoRetryEnable?[...t,S.x.OLDER_MESSAGES_LOADER]:[...t,S.x.LOAD_OLDER_MESSAGES_TRIGGER],e.atLatestPost||(a=e.autoRetryEnable?[S.x.NEWER_MESSAGES_LOADER,...a]:[S.x.LOAD_NEWER_MESSAGES_TRIGGER,...a]),{postListIds:a}}render(){const e=this.props.channelId;let t;this.props.latestAriaLabelFunc&&this.props.postListIds.indexOf(S.x.START_OF_NEW_MESSAGES)>=0&&(t=this.props.latestAriaLabelFunc(this.context.intl));const{dynamicListStyle:a}=this.state;let n=null;return this.props.focusedPostId||(n=y.a.createElement(ef,{atBottom:this.state.atBottom,lastViewedBottom:this.state.lastViewedBottom,postIds:this.state.postListIds,onClick:this.scrollToLatestMessages,channelId:e})),y.a.createElement("div",{id:"post-list",className:"a11y__region","data-a11y-sort-order":"1","data-a11y-focus-child":!0,"data-a11y-order-reversed":!0,"data-a11y-loop-navigation":!1,"aria-label":M.fb("accessibility.sections.centerContent","message list main region")},this.state.isMobile&&y.a.createElement(y.a.Fragment,null,y.a.createElement(Ji,{isScrolling:this.state.isScrolling,isMobile:!0,postId:this.state.topPostId}),y.a.createElement(wf,{isScrolling:this.state.isScrolling,atBottom:this.state.atBottom,onClick:this.scrollToBottom})),n,y.a.createElement("div",{role:"presentation",className:"post-list-holder-by-time",key:"postlist-"+e},y.a.createElement("div",{role:"presentation",className:"post-list__table"},y.a.createElement("div",{id:"postListContent",className:"post-list__content"},y.a.createElement("span",{className:"sr-only","aria-live":"polite"},t),y.a.createElement(Df.a,null,({height:e,width:t})=>y.a.createElement(Uf.a,{role:"listbox",ref:this.listRef,height:e,width:t,className:"post-list__dynamic",itemCount:this.state.postListIds.length,itemData:this.state.postListIds,itemKey:this.itemKey,overscanCountForward:zf,overscanCountBackward:Wf,onScroll:this.onScroll,onItemsRendered:this.onItemsRendered,initScrollToIndex:this.initScrollToIndex,canLoadMorePosts:this.props.actions.canLoadMorePosts,skipResizeClass:"col__reply",innerRef:this.postListRef,style:Gf({},Jf,{},a),innerListStyle:Zf,initRangeToRender:this.initRangeToRender,loaderId:S.x.OLDER_MESSAGES_LOADER,correctScrollToBottom:this.props.atLatestPost},this.renderRow))))))}}function $f(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Vf(Xf,"propTypes",{postListIds:_.a.array.isRequired,focusedPostId:_.a.string,channelId:_.a.string.isRequired,autoRetryEnable:_.a.bool,atOldestPost:_.a.bool,atLatestPost:_.a.bool,latestPostTimeStamp:_.a.number,latestAriaLabelFunc:_.a.func,actions:_.a.shape({loadOlderPosts:_.a.func.isRequired,loadNewerPosts:_.a.func.isRequired,canLoadMorePosts:_.a.func.isRequired,checkAndSetMobileView:_.a.func.isRequired,changeUnreadChunkTimeStamp:_.a.func.isRequired}).isRequired}),Vf(Xf,"contextTypes",{intl:W.i.isRequired});const eE=3,tE=10;class aE extends y.a.PureComponent{constructor(e){super(e),$f(this,"postsOnLoad",async e=>{this.props.focusedPostId?await this.props.actions.loadPostsAround(e,this.props.focusedPostId):this.props.isFirstLoad?await this.props.actions.loadUnreads(e):this.props.latestPostTimeStamp?await this.props.actions.syncPostsInChannel(e,this.props.latestPostTimeStamp):await this.props.actions.loadLatestPosts(e),this.setState({loadingOlderPosts:!1,loadingNewerPosts:!1})}),$f(this,"callLoadPosts",async(e,t,a)=>{const{error:n}=await this.props.actions.loadPosts({channelId:e,postId:t,type:a});return a===S.y.BEFORE_ID?this.setState({loadingOlderPosts:!1}):this.setState({loadingNewerPosts:!1}),n?this.autoRetriesCount<eE?(this.autoRetriesCount++,await this.callLoadPosts(e,t,a)):this.mounted&&this.setState({autoRetryEnable:!1}):(this.mounted&&this.setState({autoRetryEnable:!0}),this.state.autoRetryEnable||(this.autoRetriesCount=0)),{error:n}}),$f(this,"getOldestVisiblePostId",()=>Object(Me.h)(this.props.postListIds)),$f(this,"getLatestVisiblePostId",()=>Object(Me.g)(this.props.postListIds)),$f(this,"canLoadMorePosts",async(e=S.y.BEFORE_ID)=>{if(this.props.postListIds&&!this.state.loadingOlderPosts&&!this.state.loadingNewerPosts)if(this.extraPagesLoaded>tE)this.state.autoRetryEnable&&this.setState({autoRetryEnable:!1});else{if(this.props.atOldestPost||e!==S.y.BEFORE_ID){if(!this.props.atLatestPost){const e=this.getLatestVisiblePostId();await this.getPostsAfter(e)}}else{const e=this.getOldestVisiblePostId();await this.getPostsBefore(e)}this.extraPagesLoaded+=1}}),$f(this,"getPostsBefore",async()=>{if(this.state.loadingOlderPosts)return;const e=this.getOldestVisiblePostId();this.setState({loadingOlderPosts:!0}),await this.callLoadPosts(this.props.channelId,e,S.y.BEFORE_ID)}),$f(this,"getPostsAfter",async()=>{if(this.state.loadingNewerPosts)return;const e=this.getLatestVisiblePostId();this.setState({loadingNewerPosts:!0}),await this.callLoadPosts(this.props.channelId,e,S.y.AFTER_ID)}),this.state={loadingNewerPosts:!1,loadingOlderPosts:!1,autoRetryEnable:!0},this.autoRetriesCount=0,this.loadingMorePosts=null,this.actionsForPostList={loadOlderPosts:this.getPostsBefore,loadNewerPosts:this.getPostsAfter,checkAndSetMobileView:e.actions.checkAndSetMobileView,canLoadMorePosts:this.canLoadMorePosts,changeUnreadChunkTimeStamp:e.changeUnreadChunkTimeStamp}}componentDidMount(){this.mounted=!0,this.props.channelId&&this.postsOnLoad(this.props.channelId)}componentDidUpdate(e){this.props.channelId!==e.channelId&&this.postsOnLoad(this.props.channelId)}componentWillUnmount(){this.mounted=!1}render(){return this.props.postListIds?y.a.createElement("div",{id:"post-list"},y.a.createElement("div",{ref:"postlist",className:"post-list-holder-by-time",key:"postlist-"+this.props.channelId},y.a.createElement("div",{className:"post-list__table"},y.a.createElement("div",{id:"virtualizedPostListContent",ref:"postListContent",className:"post-list__content"},y.a.createElement(Xf,{loadingNewerPosts:this.state.loadingNewerPosts,loadingOlderPosts:this.state.loadingOlderPosts,atOldestPost:this.props.atOldestPost,atLatestPost:this.props.atLatestPost,focusedPostId:this.props.focusedPostId,channelId:this.props.channelId,autoRetryEnable:this.state.autoRetryEnable,actions:this.actionsForPostList,postListIds:this.props.formattedPostIds,latestPostTimeStamp:this.props.latestPostTimeStamp,latestAriaLabelFunc:this.props.latestAriaLabelFunc}))))):y.a.createElement("div",{id:"post-list"},y.a.createElement(Km.a,{position:"absolute",key:"loading"}))}}$f(aE,"propTypes",{formattedPostIds:_.a.array,postListIds:_.a.array,channelId:_.a.string,focusedPostId:_.a.string,atLatestPost:_.a.bool,atOldestPost:_.a.bool,isFirstLoad:_.a.bool,latestPostTimeStamp:_.a.number,latestAriaLabelFunc:_.a.func,changeUnreadChunkTimeStamp:_.a.func.isRequired,actions:_.a.shape({loadPostsAround:_.a.func.isRequired,loadUnreads:_.a.func.isRequired,loadPosts:_.a.func.isRequired,checkAndSetMobileView:_.a.func.isRequired,syncPostsInChannel:_.a.func.isRequired,loadLatestPosts:_.a.func.isRequired}).isRequired});let nE=aE;Object(M.k)()&&(nE=xf);const sE=(e,t)=>!e.entities.posts.postsInChannel[t],iE=Object(ud.memoizeResult)(e=>Object(Me.g)(e));var oE=Object(i.g)(Object(n.connect)(function(){const e=Object(Na.makeGetPostsChunkAroundPost)(),t=Object(Qi.makePreparePostIdsForPostList)(),a=Object(Me.n)();return function(n,s){let i,o,r,l,c=0,d=!1,m=!1;const u=n.views.channel.lastChannelViewTime[s.channelId];if((o=s.match.params.postid?e(n,s.match.params.postid,s.channelId):s.unreadChunkTimeStamp?Object(Na.getUnreadPostsChunk)(n,s.channelId,s.unreadChunkTimeStamp):Object(Na.getRecentPostsChunkInChannel)(n,s.channelId))&&(i=o.order,d=o.recent,m=o.oldest),i&&(r=t(n,{postIds:i,lastViewedAt:u,indicateNewMessages:!0}),i.length)){const e=iE(i),t=Object(Na.getPost)(n,e);c=t.create_at,l=a(n,t)}return{lastViewedAt:u,isFirstLoad:sE(n,s.channelId),formattedPostIds:r,atLatestPost:d,atOldestPost:m,focusedPostId:s.match.params.postid,latestPostTimeStamp:c,postListIds:i,latestAriaLabelFunc:l}}},function(e){return{actions:Object(s.bindActionCreators)({loadUnreads:da.i,loadPosts:da.g,loadLatestPosts:da.f,loadPostsAround:da.h,checkAndSetMobileView:da.b,syncPostsInChannel:da.n},e)}})(nE));function rE(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class lE extends y.a.PureComponent{constructor(e){super(e),rE(this,"changeUnreadChunkTimeStamp",e=>{this.setState({unreadChunkTimeStamp:e,loaderForChangeOfPostsChunk:!0},()=>{window.requestAnimationFrame(()=>{this.setState({loaderForChangeOfPostsChunk:!1})})})}),this.state={unreadChunkTimeStamp:e.lastViewedAt,loaderForChangeOfPostsChunk:!1,channelLoading:e.channelLoading}}static getDerivedStateFromProps(e,t){return null===t.unreadChunkTimeStamp&&e.lastViewedAt?{unreadChunkTimeStamp:e.lastViewedAt}:e.channelLoading!==t.channelLoading?{unreadChunkTimeStamp:e.lastViewedAt,channelLoading:e.channelLoading}:null}render(){return this.props.channelLoading||this.state.loaderForChangeOfPostsChunk?y.a.createElement("div",{id:"post-list"},y.a.createElement(Km.a,{position:"absolute",key:"loading"})):y.a.createElement(oE,{unreadChunkTimeStamp:this.state.unreadChunkTimeStamp,channelId:this.props.channelId,changeUnreadChunkTimeStamp:this.changeUnreadChunkTimeStamp,focusedPostId:this.props.focusedPostId})}}rE(lE,"propTypes",{lastViewedAt:_.a.number,channelLoading:_.a.bool,channelId:_.a.string,focusedPostId:_.a.string});const cE=(e,t,a,n,s)=>{if(e.postid)return!1;if(t&&a){if(t.type!==S.i.DM_CHANNEL&&t.name!==e.identifier)return!0;if(t.type===S.i.DM_CHANNEL&&n&&e.identifier!=="@".concat(n.username))return!0;const i=a.id;return!!(t.team_id&&t.team_id!==i||s&&!s[i])}return!0};var dE=Object(i.g)(Object(n.connect)(function(){return function(e,t){const a=Object(u.getTeamByName)(e,t.match.params.team);let n;const s=Object(p.getChannel)(e,t.channelId);let i=e.views.channel.lastChannelViewTime[t.channelId];s&&(s.type===S.i.DM_CHANNEL&&s.teammate_id&&(n=Object(m.getUser)(e,s.teammate_id)),i=s.last_post_at?i:s.last_post_at);const o=Object(u.getTeamMemberships)(e);return{lastViewedAt:i,channelLoading:cE(t.match.params,s,a,n,o),channel:s}}})(lE));function mE(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class uE extends y.a.PureComponent{constructor(e){super(e),mE(this,"doPermalinkEvent",async e=>{this.setState({valid:!1});const t=e.match.params.postid;await this.props.actions.focusPost(t,this.props.returnTo),this.setState({valid:!0})}),mE(this,"isStateValid",()=>this.state.valid&&this.props.channelId&&this.props.teamName),this.state={valid:!1}}componentDidMount(){this.doPermalinkEvent(this.props),document.body.classList.add("app__body")}componentWillUnmount(){document.body.classList.remove("app__body")}UNSAFE_componentWillReceiveProps(e){this.props.match.params.postid!==e.match.params.postid&&this.doPermalinkEvent(e)}render(){const{channelId:e,channelName:t,channelIsArchived:a,match:n,teamName:s}=this.props,{formatMessage:i}=this.context.intl;return this.isStateValid()?y.a.createElement("div",{id:"app-content",className:"app__content"},y.a.createElement(Qb,{channelId:e}),y.a.createElement(dE,{channelId:e,focusedPostId:n.params.postid}),y.a.createElement("div",{id:"archive-link-home"},y.a.createElement(vn.a,{to:"/"+s+"/channels/"+t},a&&y.a.createElement(ji.b,{id:"center_panel.permalink.archivedChannel",defaultMessage:"You are viewing an **archived channel**. "}),y.a.createElement(W.c,{id:"center_panel.recent",defaultMessage:"Click here to jump to recent messages. "}),y.a.createElement("i",{className:"fa fa-arrow-down",title:i({id:"center_panel.recent.icon",defaultMessage:"Jump to recent messages Icon"})})))):y.a.createElement("div",{id:"app-content",className:"app__content"})}}mE(uE,"propTypes",{channelId:_.a.string,channelName:_.a.string,channelIsArchived:_.a.bool,match:_.a.shape({params:_.a.shape({postid:_.a.string.isRequired}).isRequired}).isRequired,returnTo:_.a.string.isRequired,teamName:_.a.string,actions:_.a.shape({focusPost:_.a.func.isRequired}).isRequired}),mE(uE,"contextTypes",{intl:W.i.isRequired});var pE=Object(n.connect)(function(e){const t=Object(u.getCurrentTeam)(e),a=Object(p.getCurrentChannel)(e);let n,s="",i="";a&&(s=a.id,i=a.name,n=0!==a.delete_at);let o="";return t&&(o=t.name),{channelId:s,channelName:i,teamName:o,channelIsArchived:n}},function(e){return{actions:Object(s.bindActionCreators)({focusPost:Uh},e)}})(uE);class hE extends y.a.PureComponent{render(){return this.props.mentionCount?y.a.createElement("span",{className:"badge badge-notify"},this.props.mentionCount):this.props.messageCount?y.a.createElement("span",{className:"badge badge-notify"},"•"):null}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(hE,"propTypes",{mentionCount:_.a.number.isRequired,messageCount:_.a.number.isRequired});var gE=Object(n.connect)(function(e){const{mentionCount:t,messageCount:a}=Object(p.getUnreadsInCurrentTeam)(e);return{mentionCount:t,messageCount:a}})(hE);const bE=({actions:{toggleLhs:e}})=>y.a.createElement("button",{key:"navbar-toggle-sidebar",type:"button",className:"navbar-toggle","data-toggle":"collapse","data-target":"#sidebar-nav",onClick:e},y.a.createElement("span",{className:"sr-only"},y.a.createElement(W.c,{id:"navbar.toggle2",defaultMessage:"Toggle sidebar"})),y.a.createElement(nh.a,{className:"style--none icon icon__menu icon--sidebarHeaderTextColor"}),y.a.createElement(gE,null));bE.propTypes={actions:_.a.shape({toggleLhs:_.a.func.isRequired}).isRequired};var fE=bE;var EE=Object(n.connect)(null,e=>({actions:Object(s.bindActionCreators)({toggleLhs:qu.c},e)}))(fE);const _E=({actions:{toggleRhsMenu:e}})=>y.a.createElement("button",{key:"navbar-toggle-menu",type:"button",className:"navbar-toggle navbar-right__icon menu-toggle pull-right","data-toggle":"collapse","data-target":"#sidebar-nav",onClick:e},y.a.createElement(nh.a,null));_E.propTypes={actions:_.a.shape({toggleRhsMenu:_.a.func.isRequired}).isRequired};var vE=_E;var yE=Object(n.connect)(null,e=>({actions:Object(s.bindActionCreators)({toggleRhsMenu:ds.p},e)}))(vE);class CE extends y.a.PureComponent{render(){return y.a.createElement("span",this.props,y.a.createElement(W.c,{id:"generic_icons.info",defaultMessage:"Info Icon"},e=>y.a.createElement("svg",{width:"18px",height:"18px",viewBox:"0 0 22 22",role:"icon","aria-label":e},y.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"inherit",fillRule:"evenodd"},y.a.createElement("g",{transform:"translate(-388.000000, -18.000000)",fill:"inherit"},y.a.createElement("g",null,y.a.createElement("g",{transform:"translate(381.000000, 11.000000)"},y.a.createElement("g",{transform:"translate(7.000000, 7.000000)"},y.a.createElement("path",{d:"M11,22 C4.92486775,22 0,17.0751322 0,11 C0,4.92486775 4.92486775,0 11,0 C17.0751322,0 22,4.92486775 22,11 C22,17.0751322 17.0751322,22 11,22 Z M11,20.7924685 C16.408231,20.7924685 20.7924685,16.408231 20.7924685,11 C20.7924685,5.59176898 16.408231,1.20753149 11,1.20753149 C5.59176898,1.20753149 1.20753149,5.59176898 1.20753149,11 C1.20753149,16.408231 5.59176898,20.7924685 11,20.7924685 Z M10.1572266,16.0625 L10.1572266,8.69335938 L11.3466797,8.69335938 L11.3466797,16.0625 L10.1572266,16.0625 Z M10.7519531,7.50390625 C10.3417969,7.50390625 10,7.16210938 10,6.75195312 C10,6.33496094 10.3417969,6 10.7519531,6 C11.1689453,6 11.5039062,6.33496094 11.5039062,6.75195312 C11.5039062,7.16210938 11.1689453,7.50390625 10.7519531,7.50390625 Z"})))))))))}}function wE(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const TE={mentionHighlight:!1};class OE extends y.a.PureComponent{constructor(...e){super(...e),wE(this,"showEditChannelHeaderModal",()=>{this.refs.headerOverlay&&this.refs.headerOverlay.hide();const{actions:e,channel:t}=this.props,a={modalId:S.s.EDIT_CHANNEL_HEADER,dialogType:Yh,dialogProps:{channel:t}};e.openModal(a)}),wE(this,"hide",()=>{this.refs.headerOverlay&&this.refs.headerOverlay.hide()})}render(){const{channel:e,isReadOnly:t}=this.props;let a=null;if(e.header)a=y.a.createElement(ua.a,{message:e.header,options:TE});else{let e;if(!t){const t=y.a.createElement("a",{href:"#",onClick:this.showEditChannelHeaderModal},y.a.createElement(W.c,{id:"navbar.click",defaultMessage:"Click here"}));e=y.a.createElement(y.a.Fragment,null,y.a.createElement("br",null),y.a.createElement(W.c,{id:"navbar.clickToAddHeader",defaultMessage:"{clickHere} to add one.",values:{clickHere:t}}))}a=y.a.createElement("div",null,y.a.createElement(W.c,{id:"navbar.noHeader",defaultMessage:"No channel header yet."}),e)}const n=y.a.createElement(Vl.a,{bsStyle:"info",placement:"bottom",className:"navbar__popover",id:"header-popover"},a,y.a.createElement("div",{className:"close visible-xs-block",onClick:this.hide},"×"));return y.a.createElement(Qs.a,{ref:"headerOverlay",trigger:"click",placement:"bottom",overlay:n,className:"description",rootClose:!0},y.a.createElement("button",{className:"navbar-toggle navbar-right__icon navbar-info-button pull-right"},y.a.createElement(CE,{className:"icon icon__info","aria-hidden":"true"})))}}wE(OE,"propTypes",{channel:_.a.object.isRequired,isReadOnly:_.a.bool.isRequired,actions:_.a.shape({openModal:_.a.func.isRequired}).isRequired});var SE=Object(n.connect)(null,function(e){return{actions:Object(s.bindActionCreators)({openModal:U.b},e)}})(OE);function PE(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ME extends y.a.PureComponent{constructor(...e){super(...e),PE(this,"handleClick",()=>{this.props.actions.updateRhsState(S.B.SEARCH)})}render(){return y.a.createElement("button",{type:"button",className:"navbar-toggle navbar-right__icon navbar-search pull-right",onClick:this.handleClick},y.a.createElement(lc.a,{className:"icon icon__search","aria-hidden":"true"}))}}PE(ME,"propTypes",{actions:_.a.shape({updateRhsState:_.a.func.isRequired}).isRequired});var NE=Object(n.connect)(null,e=>({actions:Object(s.bindActionCreators)({updateRhsState:ds.s},e)}))(ME);function IE(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class AE extends y.a.PureComponent{constructor(...e){super(...e),IE(this,"handleClick",()=>{const{user:e,channel:t,actions:{updateChannelNotifyProps:a}}=this.props;a(e.id,t.id,{mark_unread:S.t.ALL})})}render(){return y.a.createElement("button",{type:"button",className:"navbar-toggle icon icon__mute",onClick:this.handleClick},y.a.createElement("span",{className:"fa fa-bell-slash-o icon"}))}}IE(AE,"propTypes",{user:_.a.shape({id:_.a.string.isRequired}).isRequired,channel:_.a.shape({id:_.a.string.isRequired}).isRequired,actions:_.a.shape({updateChannelNotifyProps:_.a.func.isRequired}).isRequired});var jE=Object(n.connect)(null,e=>({actions:Object(s.bindActionCreators)({updateChannelNotifyProps:r.updateChannelNotifyProps},e)}))(AE);function RE(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class kE extends y.a.PureComponent{constructor(...e){super(...e),RE(this,"hideSidebars",e=>{M.Z()&&(this.props.actions.closeRhs(),"navbar-toggle"!==e.target.className&&"icon-bar"!==e.target.className&&(this.props.actions.closeLhs(),this.props.actions.closeRhsMenu()))})}componentDidMount(){document.querySelector(".inner-wrap").addEventListener("click",this.hideSidebars)}componentWillUnmount(){document.querySelector(".inner-wrap").removeEventListener("click",this.hideSidebars)}render(){const{user:e,channel:t,isMuted:a}=this.props;return y.a.createElement("nav",{id:"navbar",className:"navbar navbar-default navbar-fixed-top",role:"navigation"},y.a.createElement("div",{className:"container-fluid theme"},y.a.createElement("div",{className:"navbar-header"},y.a.createElement(EE,null),t&&y.a.createElement(y.a.Fragment,null,y.a.createElement("div",{className:"navbar-brand"},y.a.createElement(kb,null),a&&y.a.createElement(jE,{user:e,channel:t})),y.a.createElement(SE,{ref:"headerOverlay",channel:t,isReadOnly:this.props.isReadOnly}),y.a.createElement(NE,null),y.a.createElement(wg,{channel:t,isDropdown:!1})),y.a.createElement(yE,null))))}}RE(kE,"propTypes",{user:_.a.object.isRequired,channel:_.a.object,isReadOnly:_.a.bool,isMuted:_.a.bool,actions:_.a.shape({closeLhs:_.a.func.isRequired,closeRhs:_.a.func.isRequired,closeRhsMenu:_.a.func.isRequired}).isRequired});const LE=Object(Ps.createSelector)(p.getMyCurrentChannelMembership,e=>Object(en.isChannelMuted)(e));var xE=Object(n.connect)(e=>({user:Object(m.getCurrentUser)(e),channel:Object(p.getCurrentChannel)(e),isMuted:LE(e),isReadOnly:Object(p.isCurrentChannelReadOnly)(e)}),e=>({actions:Object(s.bindActionCreators)({closeLhs:qu.a,closeRhs:ds.b,closeRhsMenu:ds.a},e)}))(kE);const DE=26,UE=40,qE=54;function HE({match:e,history:t}){return(a,n)=>{const s=n(),{path:i,identifier:l,team:c}=e.params;if(!l)return;const d=Object(u.getTeamByName)(s,c);if(d)if("channels"===i)if(l.length===DE){const n=Object(p.getChannelByName)(s,l),i=Object(p.getOtherChannels)(s).find(e=>e.name===l);a(n||i?FE(e,t):function(e,t){return async(a,n)=>{const s=n(),{team:i,identifier:o}=e.params,l=o.toLowerCase();let c=Object(p.getChannel)(s,l);const d=s.entities.channels.myMembers[l],h=Object(u.getTeamByName)(s,i);if(!c||!d){const{data:n,error:i}=await a(Object(r.joinChannel)(Object(m.getCurrentUserId)(s),h.id,l,null));if(i)return void YE(e,t,Object(p.getRedirectChannelNameForTeam)(s,h.id));c=n.channel}c.type===S.i.DM_CHANNEL?a(BE(e,t,M.I(c.name))):c.type===S.i.GM_CHANNEL?t.replace("/".concat(i,"/messages/").concat(c.name)):t.replace("/".concat(i,"/channels/").concat(c.name))}}(e,t))}else l.length===UE?a(VE(e,t)):l.length===qE?a(GE(e,t)):a(FE(e,t));else"messages"===i&&(0===l.indexOf("@")?a(function(e,t){return async(a,n)=>{const s=n(),{team:i,identifier:r}=e.params,l=r.slice(1,r.length).toLowerCase(),c=Object(u.getTeamByName)(s,i);let d=Object(m.getUserByUsername)(s,l);if(!d){const{data:n,error:i}=await a(Object(o.getUserByUsername)(l));if(i)return void zE(e,t,Object(p.getRedirectChannelNameForTeam)(s,c.id));d=n}const{error:h,data:g}=await a(Object(an.e)(d.id));h?zE(e,t,Object(p.getRedirectChannelNameForTeam)(s,c.id)):WE(g)}}(e,t)):l.indexOf("@")>0?a(function(e,t){return async(a,n)=>{const s=n(),{team:i,identifier:r}=e.params,l=r.toLowerCase(),c=Object(u.getTeamByName)(s,i);let d=Object(m.getUserByEmail)(s,l);if(!d){const{data:n,error:i}=await a(Object(o.getUserByEmail)(l));if(i)return void zE(e,t,Object(p.getRedirectChannelNameForTeam)(s,c.id));d=n}t.replace("/".concat(i,"/messages/@").concat(d.username))}}(e,t)):l.length===DE?a(BE(e,t,l)):l.length===UE?a(VE(e,t)):zE(e,t,Object(p.getRedirectChannelNameForTeam)(s,d.id)))}}function FE(e,t){return async(a,n)=>{const s=n(),{team:i,identifier:o}=e.params,l=o.toLowerCase(),c=Object(u.getTeamByName)(s,i);if(!c)return;let d,h=Object(p.getChannelsNameMapInTeam)(s,c.id)[l];if(h&&(d=s.entities.channels.myMembers[h.id]),!h||!d){const{data:n,error:o}=await a(Object(r.joinChannel)(Object(m.getCurrentUserId)(s),c.id,null,l));if(o){const{data:n,error:o}=await a(Object(r.getChannelByNameAndTeamName)(i,l,!0));if(o||0===n.delete_at)return void YE(e,t,Object(p.getRedirectChannelNameForTeam)(s,c.id));h=n}else h=n.channel}h.type===S.i.DM_CHANNEL?a(GE(e,t)):h.type===S.i.GM_CHANNEL?t.replace("/".concat(i,"/messages/").concat(h.name)):WE(h)}}function BE(e,t,a){return async(n,s)=>{const i=s(),{team:r}=e.params,l=Object(u.getTeamByName)(i,r);let c=Object(m.getUser)(i,a);if(!c){const{data:s,error:r}=await n(Object(o.getUser)(a));if(r)return void zE(e,t,Object(p.getRedirectChannelNameForTeam)(i,l.id));c=s}t.replace("/".concat(r,"/messages/@").concat(c.username))}}function GE(e,t){return async(a,n)=>{const s=n(),{team:i,identifier:r}=e.params,l=M.I(r.toLowerCase(),Object(m.getCurrentUserId)(n())),c=Object(u.getTeamByName)(s,i);let d=Object(m.getUser)(s,l);if(!d){const{data:n,error:i}=await a(Object(o.getUser)(l));if(i)return void zE(e,t,Object(p.getRedirectChannelNameForTeam)(s,c.id));d=n}t.replace("/".concat(i,"/messages/@").concat(d.username))}}function VE(e,t){return async(a,n)=>{const s=n(),{identifier:i,team:o}=e.params,l=i.toLowerCase();t.replace(e.url.replace("/channels/","/messages/"));let c=Object(p.getChannelByName)(s,l);const d=Object(u.getTeamByName)(s,o);if(!c){const{data:n,error:i}=await a(Object(r.joinChannel)(Object(m.getCurrentUserId)(s),d.id,null,l));if(i)return void zE(e,t,Object(p.getRedirectChannelNameForTeam)(s,d.id));c=n.channel}a(Object(r.markGroupChannelOpen)(c.id)),WE(c)}}function WE(e){O.b(e)}function zE(e,t,a){const{team:n}=e.params;t.push(n?"/".concat(n,"/channels/").concat(a):"/")}function YE(e,t,a){const{team:n}=e.params;t.push(n?"/error?type=channel_not_found&returnTo=/".concat(n,"/channels/").concat(a):"/")}var KE=a(106),QE=a.n(KE);a(1560);function ZE(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function JE(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ZE(a,!0).forEach(function(t){XE(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ZE(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function XE(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const $E=S.Q.KeyCodes;function e_(e){return String.prototype.trimRight?e.trimRight():e.replace(/\s*$/,"")}class t_ extends y.a.Component{constructor(e){super(e),XE(this,"updatePreview",e=>{this.setState({showPreview:e})}),XE(this,"setOrientationListeners",()=>{window.screen.orientation&&"onchange"in window.screen.orientation?window.screen.orientation.addEventListener("change",this.onOrientationChange):"onorientationchange"in window&&window.addEventListener("orientationchange",this.onOrientationChange)}),XE(this,"removeOrientationListeners",()=>{window.screen.orientation&&"onchange"in window.screen.orientation?window.screen.orientation.removeEventListener("change",this.onOrientationChange):"onorientationchange"in window&&window.removeEventListener("orientationchange",this.onOrientationChange)}),XE(this,"onOrientationChange",()=>{if(!P.k())return;const{orientation:e}=this.state;let t="portrait";window.orientation&&(t=90===Math.abs(window.orientation)?"landscape":"portrait"),window.screen.orientation&&(t=window.screen.orientation.type.split("-")[0]),this.setState({orientation:t}),e&&t!==e&&"post_textbox"===(document.activeElement||{}).id&&this.refs.textbox.getWrappedInstance().blur()}),XE(this,"handlePostError",e=>{this.setState({postError:e})}),XE(this,"toggleEmojiPicker",()=>{this.setState({showEmojiPicker:!this.state.showEmojiPicker})}),XE(this,"hideEmojiPicker",()=>{this.handleEmojiClose()}),XE(this,"doSubmit",async e=>{const t=this.props.currentChannel.id;if(e&&e.preventDefault(),this.props.draft.uploadsInProgress.length>0||this.state.submitting)return;let a=this.state.message,n=!1;const s=this.state.serverError;s&&Object(Me.k)(s)&&s.submittedMessage===a&&(a=s.submittedMessage,n=!0);const i={file_ids:[]};if(i.message=a,0===i.message.trim().length&&0===this.props.draft.fileInfos.length)return;if(this.state.postError)return this.setState({errorClass:"animation--highlight"}),void setTimeout(()=>{this.setState({errorClass:null})},S.Q.ANIMATION_TIMEOUT);this.props.actions.addMessageIntoHistory(this.state.message),this.setState({submitting:!0,serverError:null});const o=M.a.exec(i.message);if(0!==i.message.indexOf("/")||n)if(o&&this.props.emojiMap.has(o[2]))this.sendReaction(o),this.setState({message:""});else{const{error:e}=await this.sendMessage(i);e||this.setState({message:""})}else{this.setState({message:"",postError:null,enableSendButton:!1});let e={};e.channel_id=t,e.team_id=this.props.currentTeamId;const a=await this.props.actions.runSlashCommandWillBePostedHooks(i.message,e);if(a.error)this.setState({serverError:JE({},a.error,{submittedMessage:i.message}),message:i.message});else if(a.data.message||a.data.args){i.message=a.data.message,e=a.data.args;const{error:t}=await this.props.actions.executeCommand(i.message,e);t&&(t.sendMessage?await this.sendMessage(i):this.setState({serverError:JE({},t,{submittedMessage:i.message}),message:i.message}))}else;}this.setState({submitting:!1,postError:null,enableSendButton:!1}),this.props.actions.setDraft(S.H.DRAFT+t,null),this.draftsForChannel[t]=null;const r=Date.now()-this.lastBlurAt<150;this.focusTextbox(r)}),XE(this,"handleNotifyAllConfirmation",e=>{this.hideNotifyAllModal(),this.doSubmit(e)}),XE(this,"hideNotifyAllModal",()=>{this.setState({showConfirmModal:!1})}),XE(this,"showNotifyAllModal",()=>{this.setState({showConfirmModal:!0})}),XE(this,"getStatusFromSlashCommand",()=>{const{message:e}=this.state,t=e.split(" ");return t.length>0?t[0].substring(1):""}),XE(this,"isStatusSlashCommand",e=>"online"===e||"away"===e||"dnd"===e||"offline"===e),XE(this,"handleSubmit",async e=>{const{currentChannel:t,userIsOutOfOffice:a}=this.props,n=this.props.currentChannelMembersCount;if(this.props.enableConfirmNotificationsToChannel&&n>S.Q.NOTIFY_ALL_MEMBERS&&Object(Me.c)(this.state.message)){if(this.props.isTimezoneEnabled){const{data:e}=await this.props.actions.getChannelTimezones(this.props.currentChannel.id);e?this.setState({channelTimezoneCount:e.length}):this.setState({channelTimezoneCount:0})}return void this.showNotifyAllModal()}const s=this.getStatusFromSlashCommand();if(a&&this.isStatusSlashCommand(s)){const e={ModalId:S.s.RESET_STATUS,dialogType:ss,dialogProps:{newStatus:s}};return this.props.actions.openModal(e),void this.setState({message:""})}if("/header"===e_(this.state.message)){const e={modalId:S.s.EDIT_CHANNEL_HEADER,dialogType:Yh,dialogProps:{channel:t}};return this.props.actions.openModal(e),void this.setState({message:""})}const i=t.type===S.Q.DM_CHANNEL||t.type===S.Q.GM_CHANNEL;if(!i&&"/purpose"===e_(this.state.message)){const e={modalId:S.s.EDIT_CHANNEL_PURPOSE,dialogType:Wg,dialogProps:{channel:t}};return this.props.actions.openModal(e),void this.setState({message:""})}if(!i&&"/rename"===e_(this.state.message))return O.i(t),void this.setState({message:""});await this.doSubmit(e)}),XE(this,"sendMessage",async e=>{const{actions:t,currentChannel:a,currentUserId:n,draft:s}=this.props;let i=e;i.channel_id=a.id;const o=M.G(),r=n;i.pending_post_id="".concat(r,":").concat(o),i.user_id=r,i.create_at=o,i.parent_id=this.state.parentId,i.metadata={},i.props={};const l=await t.runMessageWillBePostedHooks(i);return l.error?(this.setState({serverError:l.error,submitting:!1}),l):(i=l.data,t.onSubmitPost(i,s.fileInfos),t.scrollPostListToBottom(),this.setState({submitting:!1}),{data:!0})}),XE(this,"focusTextbox",(e=!1)=>{!this.refs.textbox||!e&&P.m()||this.refs.textbox.getWrappedInstance().focus()}),XE(this,"postMsgKeyPress",e=>{const{ctrlSend:t,codeBlockOnCtrlEnter:a}=this.props,{allowSending:n,withClosedCodeBlock:s,ignoreKeyPress:i,message:o}=Object(Me.o)(e,this.state.message,t,a,Date.now(),this.lastChannelSwitchAt);if(i)return e.preventDefault(),void e.stopPropagation();n&&(e.persist(),this.refs.textbox&&this.refs.textbox.getWrappedInstance().blur(),s&&o?this.setState({message:o},()=>this.handleSubmit(e)):this.handleSubmit(e),this.updatePreview(!1)),this.emitTypingEvent()}),XE(this,"emitTypingEvent",()=>{const e=this.props.currentChannel.id;O.d(e,"")}),XE(this,"handleChange",e=>{const t=e.target.value,a=this.props.currentChannel.id,n=this.handleEnableSendButton(t,this.props.draft.fileInfos);let s=this.state.serverError;Object(Me.k)(s)&&(s=null),this.setState({message:t,enableSendButton:n,serverError:s});const i=JE({},this.props.draft,{message:t});this.props.actions.setDraft(S.H.DRAFT+a,i),this.draftsForChannel[a]=i}),XE(this,"pasteHandler",e=>{if(!e.clipboardData||!e.clipboardData.items||"post_textbox"!==e.target.id)return;const t=zs(e.clipboardData);if(!t)return;e.preventDefault();const a=Ks(t,this.state.message.trim());this.setState({message:a})}),XE(this,"handleFileUploadChange",()=>{this.focusTextbox()}),XE(this,"handleUploadStart",(e,t)=>{const a=[...this.props.draft.uploadsInProgress,...e],n=JE({},this.props.draft,{uploadsInProgress:a});this.props.actions.setDraft(S.H.DRAFT+t,n),this.draftsForChannel[t]=n,this.focusTextbox()}),XE(this,"handleUploadProgress",({clientId:e,name:t,percent:a,type:n})=>{const s=JE({},this.state.uploadsProgressPercent,{[e]:{percent:a,name:t,type:n}});this.setState({uploadsProgressPercent:s})}),XE(this,"handleFileUploadComplete",(e,t,a)=>{const n=JE({},this.draftsForChannel[a]);for(let e=0;e<t.length;e++)if(n.uploadsInProgress){const a=n.uploadsInProgress.indexOf(t[e]);-1!==a&&(n.uploadsInProgress=n.uploadsInProgress.filter((e,t)=>a!==t))}n.fileInfos&&(n.fileInfos=Object(Ws.sortFileInfos)(n.fileInfos.concat(e),this.props.locale)),this.draftsForChannel[a]=n,this.props.actions.setDraft(S.H.DRAFT+a,n);const s=this.handleEnableSendButton(this.state.message,n.fileInfos);this.setState({enableSendButton:s})}),XE(this,"handleUploadError",(e,t,a)=>{const n=JE({},this.draftsForChannel[a]);let s=e;if("string"==typeof e&&(s=new Error(e)),-1!==t&&n.uploadsInProgress){const e=n.uploadsInProgress.indexOf(t);if(-1!==e){const t=n.uploadsInProgress.filter((t,a)=>e!==a),s=JE({},n,{uploadsInProgress:t});this.props.actions.setDraft(S.H.DRAFT+a,s),this.draftsForChannel[a]=s}}this.setState({serverError:s})}),XE(this,"removePreview",e=>{let t={};const a=JE({},this.props.draft),n=this.props.currentChannel.id;this.setState({serverError:null});let s=a.fileInfos.findIndex(t=>t.id===e);if(-1===s){if(-1!==(s=a.uploadsInProgress.indexOf(e))){const n=a.uploadsInProgress.filter((e,t)=>s!==t);t=JE({},a,{uploadsInProgress:n}),this.refs.fileUpload&&this.refs.fileUpload.getWrappedInstance()&&this.refs.fileUpload.getWrappedInstance().cancelUpload(e)}}else{const e=a.fileInfos.filter((e,t)=>s!==t);t=JE({},a,{fileInfos:e})}this.props.actions.setDraft(S.H.DRAFT+n,t),this.draftsForChannel[n]=t;const i=this.handleEnableSendButton(this.state.message,t.fileInfos);this.setState({enableSendButton:i}),this.handleFileUploadChange()}),XE(this,"focusTextboxIfNecessary",e=>{this.props.rhsExpanded||document.getElementsByClassName("channel-switch-modal").length||Object(Me.p)(e,document.activeElement)&&this.focusTextbox()}),XE(this,"documentKeyHandler",e=>{if((e.ctrlKey||e.metaKey)&&M.X(e,$E.FORWARD_SLASH))return e.preventDefault(),void O.m();this.focusTextboxIfNecessary(e)}),XE(this,"getFileCount",()=>{const e=this.props.draft;return e.fileInfos.length+e.uploadsInProgress.length}),XE(this,"getFileUploadTarget",()=>this.refs.textbox?this.refs.textbox.getWrappedInstance():null),XE(this,"getCreatePostControls",()=>this.refs.createPostControls),XE(this,"handleKeyDown",e=>{const t=e.ctrlKey||e.metaKey,a=0===this.state.message.length,n=0===this.props.draft.message.length,s=(this.props.ctrlSend||this.props.codeBlockOnCtrlEnter)&&M.X(e,$E.ENTER)&&t,i=!t&&!e.altKey&&!e.shiftKey&&M.X(e,$E.UP),o=!t&&!e.altKey&&e.shiftKey&&M.X(e,$E.UP),r=t&&!e.altKey&&!e.shiftKey;s?this.postMsgKeyPress(e):i&&a?this.editLastPost(e):o&&a?this.replyToLastPost(e):r&&n&&M.X(e,$E.UP)?this.loadPrevMessage(e):r&&n&&M.X(e,$E.DOWN)&&this.loadNextMessage(e)}),XE(this,"editLastPost",e=>{e.preventDefault();const t=this.props.currentUsersLatestPost;if(!t)return;let a;a=t.root_id&&t.root_id.length>0?M.fb("create_post.comment",x.Posts.MESSAGE_TYPES.COMMENT):M.fb("create_post.post",x.Posts.MESSAGE_TYPES.POST),this.refs.textbox&&this.refs.textbox.getWrappedInstance().blur(),this.props.actions.setEditingPost(t.id,this.props.commentCountForPost,"post_textbox",a)}),XE(this,"replyToLastPost",e=>{e.preventDefault();const t=this.props.latestReplyablePostId,a=document.getElementById("reply_textbox");a&&a.focus(),t&&this.props.actions.selectPostFromRightHandSideSearchByPostId(t)}),XE(this,"loadPrevMessage",e=>{e.preventDefault(),this.props.actions.moveHistoryIndexBack(x.Posts.MESSAGE_TYPES.POST).then(()=>this.fillMessageFromHistory())}),XE(this,"loadNextMessage",e=>{e.preventDefault(),this.props.actions.moveHistoryIndexForward(x.Posts.MESSAGE_TYPES.POST).then(()=>this.fillMessageFromHistory())}),XE(this,"handleBlur",()=>{this.lastBlurAt=Date.now()}),XE(this,"showPostDeletedModal",()=>{this.setState({showPostDeletedModal:!0})}),XE(this,"hidePostDeletedModal",()=>{this.setState({showPostDeletedModal:!1})}),XE(this,"handleEmojiClose",()=>{this.setState({showEmojiPicker:!1})}),XE(this,"handleEmojiClick",e=>{const t=e.name||e.aliases[0];if(t){if(""===this.state.message)this.setState({message:":"+t+": "});else{const e=/\s+$/.test(this.state.message)?this.state.message+":"+t+": ":this.state.message+" :"+t+": ";this.setState({message:e})}this.handleEmojiClose()}}),XE(this,"handleGifClick",e=>{if(""===this.state.message)this.setState({message:e});else{const t=/\s+$/.test(this.state.message)?this.state.message+e:this.state.message+" "+e;this.setState({message:t})}this.handleEmojiClose()}),XE(this,"handleHeightChange",(e,t)=>{this.setState({renderScrollbar:e>t})}),this.state={message:this.props.draft.message,submitting:!1,showPostDeletedModal:!1,enableSendButton:!1,showEmojiPicker:!1,showConfirmModal:!1,channelTimezoneCount:0,showPreview:!1,uploadsProgressPercent:{},renderScrollbar:!1,orientation:null},this.lastBlurAt=0,this.lastChannelSwitchAt=0,this.draftsForChannel={}}UNSAFE_componentWillMount(){const e=this.handleEnableSendButton(this.state.message,this.props.draft.fileInfos);this.props.actions.clearDraftUploads(S.H.DRAFT,(e,t)=>t?JE({},t,{uploadsInProgress:[]}):t),this.onOrientationChange(),this.setState({enableSendButton:e})}componentDidMount(){this.focusTextbox(),document.addEventListener("paste",this.pasteHandler),document.addEventListener("keydown",this.documentKeyHandler),this.setOrientationListeners()}UNSAFE_componentWillReceiveProps(e){if(e.currentChannel.id!==this.props.currentChannel.id){const t=e.draft;this.setState({message:t.message,submitting:!1,serverError:null,showPreview:!1})}}componentDidUpdate(e,t){e.currentChannel.id!==this.props.currentChannel.id&&(this.lastChannelSwitchAt=Date.now(),this.focusTextbox()),t.showEmojiPicker&&!this.state.showEmojiPicker&&this.focusTextbox()}componentWillUnmount(){document.removeEventListener("paste",this.pasteHandler),document.removeEventListener("keydown",this.documentKeyHandler),this.removeOrientationListeners()}sendReaction(e){const t=this.props.currentChannel.id,a=e[1],n=e[2],s=this.props.latestReplyablePostId;s&&"+"===a?this.props.actions.addReaction(s,n):s&&"-"===a&&this.props.actions.removeReaction(s,n),this.props.actions.setDraft(S.H.DRAFT+t,null),this.draftsForChannel[t]=null}fillMessageFromHistory(){const e=this.props.messageInHistoryItem;e&&this.setState({message:e})}createTutorialTip(){const e=[];return e.push(y.a.createElement("div",null,y.a.createElement("h4",null,y.a.createElement(W.c,{id:"create_post.tutorialTip.title",defaultMessage:"Sending Messages"})),y.a.createElement("p",null,y.a.createElement(ji.b,{id:"create_post.tutorialTip1",defaultMessage:"Type here to write a message and press **Enter** to post it."})),y.a.createElement("p",null,y.a.createElement(ji.b,{id:"create_post.tutorialTip2",defaultMessage:"Click the **Attachment** button to upload an image or a file."})))),y.a.createElement(Xc,{id:"postTextboxTipMessage",placement:"top",screens:e,overlayClass:"tip-overlay--chat",diagnosticsTag:"tutorial_tip_1_sending_messages"})}handleEnableSendButton(e,t){return 0!==e.trim().length||0!==t.length}render(){const{currentChannel:e,currentChannelMembersCount:t,draft:a,fullWidthTextBox:n,showTutorialTip:s,readOnlyChannel:i}=this.props,{formatMessage:o}=this.context.intl,r=t-1,{renderScrollbar:l}=this.state,c=M.fb("accessibility.sections.centerFooter","message input complimentary region"),d=y.a.createElement(W.c,{id:"notify_all.title.confirm",defaultMessage:"Confirm sending notifications to entire channel"}),m=y.a.createElement(W.c,{id:"notify_all.confirm",defaultMessage:"Confirm"});let u="";u=this.state.channelTimezoneCount&&this.props.isTimezoneEnabled?y.a.createElement(ji.b,{id:"notify_all.question_timezone",defaultMessage:"By using @all or @channel you are about to send notifications to **{totalMembers} people** in **{timezones, number} {timezones, plural, one {timezone} other {timezones}}**. Are you sure you want to do this?",values:{totalMembers:r,timezones:this.state.channelTimezoneCount}}):y.a.createElement(W.c,{id:"notify_all.question",defaultMessage:"By using @all or @channel you are about to send notifications to {totalMembers} people. Are you sure you want to do this?",values:{totalMembers:r}});let p=null;this.state.serverError&&(p=y.a.createElement(Li,{id:"postServerError",error:this.state.serverError,submittedMessage:this.state.serverError.submittedMessage,handleSubmit:this.handleSubmit}));let h=null;if(this.state.postError){const e="post-error"+(this.state.errorClass?" "+this.state.errorClass:"");h=y.a.createElement("label",{className:e},this.state.postError)}let g=null;!i&&(a.fileInfos.length>0||a.uploadsInProgress.length>0)&&(g=y.a.createElement(oi,{fileInfos:a.fileInfos,onRemove:this.removePreview,uploadsInProgress:a.uploadsInProgress,uploadsProgressPercent:this.state.uploadsProgressPercent}));let b="post-create-footer";h&&(b+=" has-error");let f=null;s&&(f=this.createTutorialTip());let E="";n||(E="center");let _="send-button theme";this.state.enableSendButton||(_+=" disabled");let v,C="";this.props.canUploadFiles||(C=" post-create--attachment-disabled"),i||this.state.showPreview||(v=y.a.createElement(Si,{ref:"fileUpload",fileCount:this.getFileCount(),getTarget:this.getFileUploadTarget,onFileUploadChange:this.handleFileUploadChange,onUploadStart:this.handleUploadStart,onFileUpload:this.handleFileUploadComplete,onUploadError:this.handleUploadError,onUploadProgress:this.handleUploadProgress,postType:"post"}));let w=null;const T=o({id:"emoji_picker.emojiPicker",defaultMessage:"Emoji Picker"}).toLowerCase();let O;!this.props.enableEmojiPicker||i||this.state.showPreview||(w=y.a.createElement("div",null,y.a.createElement(ca,{show:this.state.showEmojiPicker,target:this.getCreatePostControls,onHide:this.hideEmojiPicker,onEmojiClose:this.handleEmojiClose,onEmojiClick:this.handleEmojiClick,onGifClick:this.handleGifClick,enableGifPicker:this.props.enableGifPicker,topOffset:-7}),y.a.createElement("button",{type:"button","aria-label":T,onClick:this.toggleEmojiPicker,className:"style--none emoji-picker__container post-action"},y.a.createElement(ft,{id:"emojiPickerButton",className:"icon icon--emoji "+(this.state.showEmojiPicker?"active":"")})))),O=i?M.fb("create_post.read_only","This channel is read-only. Only members with permission can post here."):o({id:"create_post.write",defaultMessage:"Write to {channelDisplayName}"},{channelDisplayName:e.display_name});let S="";return l&&(S=" scroll"),y.a.createElement("form",{id:"create_post",ref:"topDiv",className:E,onSubmit:this.handleSubmit},y.a.createElement("div",{className:"post-create"+C+S},y.a.createElement("div",{className:"post-create-body"},y.a.createElement("div",{role:"application",id:"centerChannelFooter","aria-label":c,tabIndex:"-1",className:"post-body__cell a11y__region","data-a11y-sort-order":"2"},y.a.createElement(_n,{onChange:this.handleChange,onKeyPress:this.postMsgKeyPress,onKeyDown:this.handleKeyDown,onComposition:this.emitTypingEvent,onHeightChange:this.handleHeightChange,handlePostError:this.handlePostError,value:i?"":this.state.message,onBlur:this.handleBlur,emojiEnabled:this.props.enableEmojiPicker,createMessage:O,channelId:e.id,id:"post_textbox",ref:"textbox",disabled:i,characterLimit:this.props.maxPostSize,preview:this.state.showPreview,badConnection:this.props.badConnection,listenForMentionKeyClick:!0}),y.a.createElement("span",{ref:"createPostControls",className:"post-body__actions"},v,w,y.a.createElement("a",{role:"button",tabIndex:"0","aria-label":o({id:"create_post.send_message",defaultMessage:"Send a message"}),className:_,onClick:this.handleSubmit},y.a.createElement("i",{className:"fa fa-paper-plane",title:o({id:"create_post.icon",defaultMessage:"Send Post Icon"})})))),f),y.a.createElement("div",{id:"postCreateFooter",className:b},y.a.createElement("div",{className:"d-flex justify-content-between"},y.a.createElement(Ii,{channelId:e.id,postId:""}),y.a.createElement(wn,{characterLimit:this.props.maxPostSize,showPreview:this.state.showPreview,updatePreview:this.updatePreview,message:i?"":this.state.message})),y.a.createElement("div",null,h,g,p))),y.a.createElement(Ai,{show:this.state.showPostDeletedModal,onHide:this.hidePostDeletedModal}),y.a.createElement(Yn.a,{title:d,message:u,confirmButtonText:m,show:this.state.showConfirmModal,onConfirm:this.handleNotifyAllConfirmation,onCancel:this.hideNotifyAllModal}))}}function a_(e,t){return a=>{a(Object(q.b)(e,t))}}XE(t_,"propTypes",{getChannelView:_.a.func,currentChannelMembersCount:_.a.number,currentChannel:_.a.object,currentTeamId:_.a.string,currentUserId:_.a.string,codeBlockOnCtrlEnter:_.a.bool,ctrlSend:_.a.bool,fullWidthTextBox:_.a.bool,showTutorialTip:_.a.bool.isRequired,messageInHistoryItem:_.a.string,draft:_.a.shape({message:_.a.string.isRequired,uploadsInProgress:_.a.array.isRequired,fileInfos:_.a.array.isRequired}).isRequired,commentCountForPost:_.a.number,latestReplyablePostId:_.a.string,locale:_.a.string.isRequired,currentUsersLatestPost:_.a.object,readOnlyChannel:_.a.bool,canUploadFiles:_.a.bool.isRequired,enableEmojiPicker:_.a.bool.isRequired,enableGifPicker:_.a.bool.isRequired,enableConfirmNotificationsToChannel:_.a.bool.isRequired,maxPostSize:_.a.number.isRequired,emojiMap:_.a.object.isRequired,badConnection:_.a.bool.isRequired,userIsOutOfOffice:_.a.bool.isRequired,rhsExpanded:_.a.bool.isRequired,isTimezoneEnabled:_.a.bool.isRequired,actions:_.a.shape({addMessageIntoHistory:_.a.func.isRequired,moveHistoryIndexBack:_.a.func.isRequired,moveHistoryIndexForward:_.a.func.isRequired,addReaction:_.a.func.isRequired,onSubmitPost:_.a.func.isRequired,removeReaction:_.a.func.isRequired,clearDraftUploads:_.a.func.isRequired,runMessageWillBePostedHooks:_.a.func.isRequired,runSlashCommandWillBePostedHooks:_.a.func.isRequired,setDraft:_.a.func.isRequired,setEditingPost:_.a.func.isRequired,selectPostFromRightHandSideSearchByPostId:_.a.func.isRequired,openModal:_.a.func.isRequired,executeCommand:_.a.func.isRequired,getChannelTimezones:_.a.func.isRequired,scrollPostListToBottom:_.a.func.isRequired}).isRequired}),XE(t_,"contextTypes",{intl:W.i.isRequired}),XE(t_,"defaultProps",{latestReplyablePostId:""});var n_=Object(n.connect)(function(){const e=Object(Na.makeGetCommentCountForPost)(),t=Object(Na.makeGetMessageInHistoryItem)(x.Posts.MESSAGE_TYPES.POST);return(a,n)=>{const s=Object(d.getConfig)(a),i=Object(p.getCurrentChannel)(a)||{},o=Object(ms.i)(a,S.H.DRAFT,i.id),r=Object(Na.getMostRecentPostIdInChannel)(a,i.id),l=Object(Na.getPost)(a,r),h=Object(Na.getLatestReplyablePostId)(a),g=Object(p.getCurrentChannelStats)(a)?Object(p.getCurrentChannelStats)(a).member_count:1,b="true"===s.EnableTutorial,f=Object(c.getInt)(a,S.A.TUTORIAL_STEP,Object(m.getCurrentUserId)(a),S.J.FINISHED),E="true"===s.EnableEmojiPicker,_="true"===s.EnableGifPicker,v="true"===s.EnableConfirmNotificationsToChannel,y=Object(m.getCurrentUserId)(a),C=Object(m.getStatusForUserId)(a,y)===S.O.OUT_OF_OFFICE,w=Os(a)>1,T="true"===s.ExperimentalTimezone;return{currentTeamId:Object(u.getCurrentTeamId)(a),currentChannel:i,currentChannelMembersCount:g,currentUserId:y,codeBlockOnCtrlEnter:Object(c.getBool)(a,x.Preferences.CATEGORY_ADVANCED_SETTINGS,"code_block_ctrl_enter",!0),ctrlSend:Object(c.getBool)(a,S.A.CATEGORY_ADVANCED_SETTINGS,"send_on_ctrl_enter"),fullWidthTextBox:Object(c.get)(a,S.A.CATEGORY_DISPLAY_SETTINGS,S.A.CHANNEL_DISPLAY_MODE,S.A.CHANNEL_DISPLAY_MODE_DEFAULT)===S.A.CHANNEL_DISPLAY_MODE_FULL_SCREEN,showTutorialTip:b&&f===S.J.POST_POPOVER,messageInHistoryItem:t(a),draft:o,commentCountForPost:e(a,{post:l}),latestReplyablePostId:h,locale:Object(Ss.a)(a),currentUsersLatestPost:Object(Na.getCurrentUsersLatestPost)(a),readOnlyChannel:n.readOnlyChannel||!Object(m.isCurrentUserSystemAdmin)(a)&&"true"===s.ExperimentalTownSquareIsReadOnly&&i.name===S.i.DEFAULT_CHANNEL,canUploadFiles:Object(Xs.b)(s),enableEmojiPicker:E,enableGifPicker:_,enableConfirmNotificationsToChannel:v,maxPostSize:parseInt(s.MaxPostSize,10)||S.i.DEFAULT_CHARACTER_LIMIT,userIsOutOfOffice:C,rhsExpanded:Object(ms.a)(a),emojiMap:Object(Ct.a)(a),badConnection:w,isTimezoneEnabled:T}}},function(e){return{actions:Object(s.bindActionCreators)({addMessageIntoHistory:L.addMessageIntoHistory,onSubmitPost:a_,moveHistoryIndexBack:L.moveHistoryIndexBack,moveHistoryIndexForward:L.moveHistoryIndexForward,addReaction:q.a,removeReaction:L.removeReaction,setDraft:ks.e,clearDraftUploads:ks.a,selectPostFromRightHandSideSearchByPostId:ds.i,setEditingPost:q.j,openModal:U.b,executeCommand:As,getChannelTimezones:r.getChannelTimezones,runMessageWillBePostedHooks:js,runSlashCommandWillBePostedHooks:Rs,scrollPostListToBottom:da.k},e)}})(t_),s_=a(1561),i_=a.n(s_);function o_(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const r_=3;class l_ extends y.a.Component{constructor(e){super(e),o_(this,"handleNext",()=>{switch(this.state.currentScreen){case 0:Object(Pe.d)("tutorial","tutorial_screen_1_welcome_to_mattermost_next");break;case 1:Object(Pe.d)("tutorial","tutorial_screen_2_how_mattermost_works_next");break;case 2:Object(Pe.d)("tutorial","tutorial_screen_3_youre_all_set_next")}if(this.state.currentScreen<2)return void this.setState({currentScreen:this.state.currentScreen+1});const{currentUserId:e}=this.props,t=[{user_id:e,category:S.A.TUTORIAL_STEP,name:e,value:(this.props.step+1).toString()}];this.props.actions.savePreferences(e,t)}),o_(this,"skipTutorial",e=>{switch(e.preventDefault(),this.state.currentScreen){case 0:Object(Pe.d)("tutorial","tutorial_screen_1_welcome_to_mattermost_skip");break;case 1:Object(Pe.d)("tutorial","tutorial_screen_2_how_mattermost_works_skip");break;case 2:Object(Pe.d)("tutorial","tutorial_screen_3_youre_all_set_skip")}const{currentUserId:t}=this.props,a=[{user_id:t,category:S.A.TUTORIAL_STEP,name:t,value:S.i.TutorialSteps.FINISHED.toString()}];this.props.actions.savePreferences(t,a)}),o_(this,"createScreen",()=>{switch(this.state.currentScreen){case 0:return this.createScreenOne();case 1:return this.createScreenTwo();case 2:return this.createScreenThree()}return null}),o_(this,"handleCircleClick",(e,t)=>{e.preventDefault(),this.setState({currentScreen:t})}),o_(this,"createCircles",()=>{const e=[];for(let t=0;t<r_;t++){let a="circle";t===this.state.currentScreen&&(a+=" active"),e.push(y.a.createElement("a",{id:"tutorialIntroCircle"+t,href:"#",key:"circle"+t,className:a,"data-screen":t,onClick:e=>this.handleCircleClick(e,t)}))}return y.a.createElement("div",{className:"tutorial__circles"},e)}),this.state={currentScreen:0}}createScreenOne(){const e=this.createCircles();return y.a.createElement("div",{id:"tutorialIntroOne"},y.a.createElement("h3",null,y.a.createElement(W.c,{id:"tutorial_intro.screenOne.title1",defaultMessage:"Welcome to:"})),y.a.createElement("h1",null,y.a.createElement(W.c,{id:"tutorial_intro.screenOne.title2",defaultMessage:"Vue"})),y.a.createElement("p",null,y.a.createElement(W.c,{id:"tutorial_intro.screenOne.body1",defaultMessage:"Your team communication all in one place, instantly searchable and available anywhere."})),y.a.createElement("p",null,y.a.createElement(W.c,{id:"tutorial_intro.screenOne.body2",defaultMessage:"Keep your team connected to help them achieve what matters most."})),e)}createScreenTwo(){const e=this.createCircles();let t=null,a=null;if(this.props.appDownloadLink){const e=Object(Mn.g)(this.props.appDownloadLink);t=y.a.createElement(W.c,{id:"tutorial_intro.mobileApps",defaultMessage:"Install the apps for {link} for easy access and notifications on the go.",values:{link:y.a.createElement("a",{id:"appDownloadLink",href:e,target:"_blank",rel:"noopener noreferrer"},y.a.createElement(W.c,{id:"tutorial_intro.mobileAppsLinkText",defaultMessage:"PC, Mac, iOS and Android"}))}}),a=y.a.createElement("a",{id:"appDownloadImage",href:e,target:"_blank",rel:"noopener noreferrer"},y.a.createElement("img",{alt:"tutorial icons",className:"tutorial__app-icons",src:i_.a}))}return y.a.createElement("div",{id:"tutorialIntroTwo"},y.a.createElement("h3",null,y.a.createElement(W.c,{id:"tutorial_intro.screenTwo.title",defaultMessage:"How Vue works:"})),y.a.createElement("p",null,y.a.createElement(W.c,{id:"tutorial_intro.screenTwo.body1",defaultMessage:"Communication happens in public discussion channels, private channels and direct messages."})),y.a.createElement("p",null,y.a.createElement(W.c,{id:"tutorial_intro.screenTwo.body2",defaultMessage:"Everything is archived and searchable from any web-enabled desktop, laptop or phone."})),t,a,e)}createScreenThree(){let e,t;this.props.isLicensed&&this.props.restrictTeamInvite||(e=y.a.createElement(Tf.a,{id:"tutorialIntroInvite",className:"intro-links color--link style--none",modalId:S.s.INVITATION,dialogType:zd},y.a.createElement(W.c,{id:"tutorial_intro.invite",defaultMessage:"Invite teammates"})),t=y.a.createElement("p",null,e,y.a.createElement(W.c,{id:"tutorial_intro.whenReady",defaultMessage:" when you're ready."})));const a=this.createCircles();let n=null;return this.props.supportEmail&&(n=y.a.createElement("p",{id:"supportInfo"},y.a.createElement(W.c,{id:"tutorial_intro.support",defaultMessage:"Need anything, just email us at "}),y.a.createElement("a",{href:"mailto:"+this.props.supportEmail,target:"_blank",rel:"noopener noreferrer"},this.props.supportEmail),".")),y.a.createElement("div",{id:"tutorialIntroThree"},y.a.createElement("h3",null,y.a.createElement(W.c,{id:"tutorial_intro.allSet",defaultMessage:"You're all set"})),t,n,y.a.createElement(W.c,{id:"tutorial_intro.end",defaultMessage:'Click "Next" to enter {channel}. This is the first channel teammates see when they sign up. Use it for posting updates everyone needs to know.',values:{channel:this.props.townSquareDisplayName}}),a)}render(){const e=this.createScreen();return y.a.createElement("div",{className:"tutorial-steps__container"},y.a.createElement("div",{id:"tutorialIntroContent",className:"tutorial__content"},y.a.createElement("div",{className:"tutorial__steps"},e,y.a.createElement("div",{className:"tutorial__footer"},y.a.createElement("button",{id:"tutorialNextButton",className:"btn btn-primary",tabIndex:"1",onClick:this.handleNext},y.a.createElement(W.c,{id:"tutorial_intro.next",defaultMessage:"Next"})),y.a.createElement("a",{id:"tutorialSkipLink",className:"tutorial-skip",href:"#",onClick:this.skipTutorial},y.a.createElement(W.c,{id:"tutorial_intro.skip",defaultMessage:"Skip tutorial"}))))))}}o_(l_,"propTypes",{currentUserId:_.a.string.isRequired,step:_.a.number,townSquareDisplayName:_.a.string.isRequired,appDownloadLink:_.a.string,isLicensed:_.a.bool.isRequired,restrictTeamInvite:_.a.bool.isRequired,supportEmail:_.a.string.isRequired,actions:_.a.shape({savePreferences:_.a.func.isRequired}).isRequired}),o_(l_,"contextTypes",{intl:W.i.isRequired});var c_=Object(n.connect)(function(e){const t=Object(m.getCurrentUserId)(e);return{currentUserId:t,step:Object(c.getInt)(e,S.A.TUTORIAL_STEP,t,0)}},function(e){return{actions:Object(s.bindActionCreators)({savePreferences:Xn.savePreferences},e)}})(l_);class d_ extends y.a.Component{componentDidMount(){this.props.isRoot&&ys()("body").addClass("app__body")}componentWillUnmount(){this.props.isRoot&&ys()("body").removeClass("app__body")}render(){return y.a.createElement("div",{id:"app-content",className:"app__content"},y.a.createElement(c_,{townSquareDisplayName:this.props.townSquareDisplayName,appDownloadLink:this.props.appDownloadLink,isLicensed:this.props.isLicensed,restrictTeamInvite:this.props.restrictTeamInvite,supportEmail:this.props.supportEmail}))}}d_.propTypes={isRoot:_.a.bool,townSquareDisplayName:_.a.string.isRequired,appDownloadLink:_.a.string,isLicensed:_.a.bool.isRequired,restrictTeamInvite:_.a.bool.isRequired,supportEmail:_.a.string.isRequired},d_.defaultProps={isRoot:!0};var m_=Object(n.connect)(function(e){const t=Object(d.getLicense)(e),a=Object(d.getConfig)(e),n=Object(u.getCurrentTeam)(e),s=Object(p.getChannelsNameMapInCurrentTeam)(e)[S.Q.DEFAULT_CHANNEL];return{townSquareDisplayName:s?s.display_name:S.Q.DEFAULT_CHANNEL_UI_NAME,appDownloadLink:a.AppDownloadLink,isLicensed:"true"===t.IsLicensed,restrictTeamInvite:!Object(D.haveITeamPermission)(e,{team:n.id,permission:x.Permissions.INVITE_USER}),supportEmail:a.SupportEmail}})(d_);function u_(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class p_ extends y.a.PureComponent{constructor(e){super(e),u_(this,"createDeferredPostView",()=>{this.deferredPostView=function(e,t=null){return QE()(class extends y.a.Component{constructor(e,t){super(e,t),this.state={shouldRender:!1}}componentDidMount(){window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>this.setState({shouldRender:!0}))})}render(){return this.state.shouldRender?y.a.createElement(e,this.props):t}},e)}(dE,y.a.createElement("div",{id:"post-list",className:"a11y__region","data-a11y-sort-order":"1","data-a11y-focus-child":!0,"data-a11y-order-reversed":!0}))}),u_(this,"getChannelView",()=>this.refs.channelView),u_(this,"onClickCloseChannel",()=>{this.props.actions.goToLastViewedChannel()}),this.createDeferredPostView()}componentDidMount(){const e=window.navigator.platform;ys()("body").addClass("app__body"),(P.f()||P.d())&&ys()("body").addClass("browser--ie"),"Win32"===e||"Win64"===e?ys()("body").addClass("os--windows"):"MacIntel"!==e&&"MacPPC"!==e||ys()("body").addClass("os--mac")}componentWillUnmount(){ys()("body").removeClass("app__body")}UNSAFE_componentWillReceiveProps(e){this.props.match.url!==e.match.url&&this.createDeferredPostView()}componentDidUpdate(e){if(e.channelId!==this.props.channelId||e.channelIsArchived!==this.props.channelIsArchived){Object(Pe.b)("ChannelView#componentDidUpdate");const[e]=Object(Pe.c)("SidebarChannelLink#click","ChannelView#componentDidUpdate"),[t]=Object(Pe.c)("TeamLink#click","ChannelView#componentDidUpdate");Object(Pe.a)(["SidebarChannelLink#click","ChannelView#componentDidUpdate","TeamLink#click"]),-1!==e&&Object(Pe.d)("performance","channel_switch",{duration:Math.round(e)}),-1!==t&&Object(Pe.d)("performance","team_switch",{duration:Math.round(t)}),this.props.channelIsArchived&&!this.props.viewArchivedChannels&&this.props.actions.goToLastViewedChannel()}}render(){const{channelIsArchived:e}=this.props;if(this.props.showTutorial)return y.a.createElement(m_,{isRoot:!1});let t;t=this.props.deactivatedChannel?y.a.createElement("div",{className:"post-create-message"},y.a.createElement(W.c,{id:"create_post.deactivated",defaultMessage:"You are viewing an archived channel with a deactivated user."})):y.a.createElement("div",{className:"post-create__container",id:"post-create"},!e&&y.a.createElement(n_,{getChannelView:this.getChannelView}),e&&y.a.createElement("div",{className:"channel-archived__message"},y.a.createElement(ji.b,{id:"archivedChannelMessage",defaultMessage:"You are viewing an **archived channel**. New messages cannot be posted."}),y.a.createElement("button",{className:"btn btn-primary channel-archived__close-btn",onClick:this.onClickCloseChannel},y.a.createElement(W.c,{id:"center_panel.archived.closeChannel",defaultMessage:"Close Channel"}))));const a=this.deferredPostView;return y.a.createElement("div",{ref:"channelView",id:"app-content",className:"app__content"},y.a.createElement(Es,{overlayType:"center"}),y.a.createElement(Qb,{channelId:this.props.channelId}),y.a.createElement(a,{channelId:this.props.channelId}),t)}}u_(p_,"propTypes",{channelId:_.a.string.isRequired,deactivatedChannel:_.a.bool.isRequired,match:_.a.shape({url:_.a.string.isRequired}).isRequired,showTutorial:_.a.bool.isRequired,channelIsArchived:_.a.bool.isRequired,viewArchivedChannels:_.a.bool.isRequired,actions:_.a.shape({goToLastViewedChannel:_.a.func.isRequired})});const h_=Object(Ps.createSelector)(e=>e.entities.users.profiles,(e,t)=>t,(e,t)=>{const a=Object(M.u)(t);return Boolean(a&&a.delete_at)});var g_=Object(i.g)(Object(n.connect)(function(e){const t=Object(p.getCurrentChannel)(e),a=Object(d.getConfig)(e),n="true"===a.EnableTutorial,s=Object(c.getInt)(e,S.A.TUTORIAL_STEP,Object(m.getCurrentUserId)(e),S.J.FINISHED),i="true"===a.ExperimentalViewArchivedChannels;return{channelId:t?t.id:"",deactivatedChannel:!!t&&h_(e,t.id),showTutorial:n&&s<=S.J.INTRO_SCREENS,channelIsArchived:!!t&&0!==t.delete_at,viewArchivedChannels:i}},function(e){return{actions:Object(s.bindActionCreators)({goToLastViewedChannel:da.c},e)}})(p_));class b_ extends y.a.PureComponent{constructor(e){super(e),this.props.actions.onChannelByIdentifierEnter(e)}UNSAFE_componentWillReceiveProps(e){this.props.match.params.team===e.match.params.team&&this.props.match.params.identifier===e.match.params.identifier||this.props.actions.onChannelByIdentifierEnter(e)}render(){return y.a.createElement(g_,null)}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(b_,"propTypes",{match:_.a.shape({params:_.a.shape({identifier:_.a.string.isRequired,team:_.a.string.isRequired}).isRequired}).isRequired,actions:_.a.shape({onChannelByIdentifierEnter:_.a.func.isRequired}).isRequired});var f_=Object(i.g)(Object(n.connect)(null,function(e){return{actions:Object(s.bindActionCreators)({onChannelByIdentifierEnter:HE},e)}})(b_));class E_ extends y.a.PureComponent{constructor(e){super(e),this.state={returnTo:""}}UNSAFE_componentWillReceiveProps(e){this.props.location.pathname!==e.location.pathname&&e.location.pathname.includes("/pl/")&&this.setState({returnTo:this.props.location.pathname})}render(){const{lastChannelPath:e}=this.props,t=this.props.match.url;return y.a.createElement("div",{key:"inner-wrap",className:ps()("inner-wrap","channel__wrap",{"move--right":this.props.lhsOpen,"move--left":this.props.rhsOpen,"move--left-small":this.props.rhsMenuOpen})},y.a.createElement("div",{className:"row header"},y.a.createElement("div",{id:"navbar"},y.a.createElement(xE,null))),y.a.createElement("div",{className:"row main"},y.a.createElement(i.d,null,y.a.createElement(i.b,{path:"".concat(t,"/pl/:postid"),render:e=>y.a.createElement(pE,Object.assign({},e,{returnTo:this.state.returnTo}))}),y.a.createElement(i.b,{path:"/:team/:path(channels|messages)/:identifier",component:f_}),y.a.createElement(i.a,{to:e}))))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(E_,"propTypes",{match:_.a.object.isRequired,location:_.a.object.isRequired,lastChannelPath:_.a.string.isRequired,lhsOpen:_.a.bool.isRequired,rhsOpen:_.a.bool.isRequired,rhsMenuOpen:_.a.bool.isRequired});var __=Object(n.connect)((e,t)=>{let a=Object(Dh.b)(e,t.match.params.team);if(!a){const n=Object(u.getTeamByName)(e,t.match.params.team);a=Object(p.getRedirectChannelNameForTeam)(e,n.id)}return{lastChannelPath:"".concat(t.match.url,"/channels/").concat(a),lhsOpen:Ou(e),rhsOpen:Object(ms.c)(e),rhsMenuOpen:Object(ms.b)(e)}})(E_);class v_ extends y.a.Component{shouldComponentUpdate(e){return this.props.teamType!==e.teamType||this.props.pathName!==e.pathName}render(){return y.a.createElement("div",{id:"channel_view",className:"channel-view"},y.a.createElement(j.a,null),y.a.createElement(k.a,null),y.a.createElement("div",{className:"container-fluid"},y.a.createElement(Bc,null),y.a.createElement(vu,{teamType:this.props.teamType}),y.a.createElement(i.b,{component:Uu}),y.a.createElement(i.b,{component:xh}),y.a.createElement(i.b,{component:__}),y.a.createElement(R.a,{pluggableName:"Root"}),y.a.createElement(Fn,null),y.a.createElement(zn,null),y.a.createElement(wu,null),y.a.createElement(Pn,null),y.a.createElement(ss,null),y.a.createElement(Jn,null),y.a.createElement(cs,{isMac:M.Y()}),y.a.createElement(Tu.a,null)))}}function y_(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(v_,"propTypes",{pathName:_.a.string.isRequired,teamType:_.a.string.isRequired});const C_=Object(N.b)(A.a);let w_,T_=Date.now();const O_=3e4,S_=6e4,P_=1e4;class M_ extends y.a.Component{constructor(e){if(super(e),y_(this,"handleBlur",()=>{window.isActive=!1,this.blurTime=(new Date).getTime(),this.props.currentUser&&this.props.actions.viewChannel("")}),y_(this,"handleFocus",()=>{this.props.actions.markChannelAsRead(this.props.currentChannelId),window.isActive=!0,Date.now()-this.blurTime>P_&&(this.props.actions.fetchMyChannelsAndMembers(this.props.currentTeamId),this.props.actions.loadProfilesForDirect())}),y_(this,"joinTeam",async e=>{const{data:t}=await this.props.actions.getTeamByName(e.match.params.team);if(t){const{error:a}=await e.actions.addUserToTeam(t.id,e.currentUser&&e.currentUser.id);a?e.history.push("/error?type=team_not_found"):(this.setState({team:t}),this.initTeam(t))}else e.history.push("/error?type=team_not_found")}),y_(this,"initTeam",e=>(this.props.actions.getMyTeamUnreads(),this.props.actions.selectTeam(e),this.props.actions.setPreviousTeamId(e.id),O.c(),this.props.actions.fetchMyChannelsAndMembers(e.id).then(()=>{this.setState({finishedFetchingChannels:!0})}),this.props.actions.loadStatusesForChannelAndSidebar(),this.props.actions.loadProfilesForDirect(),e)),y_(this,"updateCurrentTeam",e=>{const t=e.teamsList?e.teamsList.find(t=>t.name===e.match.params.team):null;return t?(this.initTeam(t),t):null}),y_(this,"onShortcutKeyDown",e=>{if(e.shiftKey&&M.e(e)&&M.X(e,S.Q.KeyCodes.L)){const e=document.getElementById("sidebar-right");if(e)if(e.className.match("sidebar--right sidebar--right--expanded move--left")){const e=document.getElementById("reply_textbox");e&&e.focus()}else{const e=document.getElementById("post_textbox");e&&e.focus()}}}),this.blurTime=(new Date).getTime(),this.props.mfaRequired)return void this.props.history.push("/mfa/setup");clearInterval(w_),w_=setInterval(()=>{const e=(new Date).getTime();e>T_+S_&&(console.log("computer woke up - fetching latest"),Object(T.c)(!1)),T_=e},O_);const t=this.updateCurrentTeam(this.props);this.state={team:t,finishedFetchingChannels:!1},t||this.joinTeam(this.props)}UNSAFE_componentWillReceiveProps(e){if(this.props.match.params.team!==e.match.params.team){const t=this.updateCurrentTeam(e);this.setState({team:t}),t||this.joinTeam(e)}}componentDidMount(){Object(h.d)(),Object(T.f)(),window.isActive=!0,M.b(this.props.theme),P.j()&&w.a.enable(),window.addEventListener("focus",this.handleFocus),window.addEventListener("blur",this.handleBlur),window.addEventListener("keydown",this.onShortcutKeyDown)}componentDidUpdate(e){const{theme:t}=this.props;M.c(e.theme,t)||M.b(t)}componentWillUnmount(){window.isActive=!1,Object(h.e)(),Object(T.g)(),P.j()&&w.a.disable(),clearInterval(w_),window.removeEventListener("focus",this.handleFocus),window.removeEventListener("blur",this.handleBlur),window.removeEventListener("keydown",this.onShortcutKeyDown)}render(){if(null===this.state.team||!1===this.state.finishedFetchingChannels)return y.a.createElement("div",null);const e=this.state.team?this.state.team.type:"";return y.a.createElement(i.d,null,y.a.createElement(i.b,{path:"/:team/integrations",component:C_}),y.a.createElement(i.b,{path:"/:team/emoji",component:C_}),y.a.createElement(i.b,{render:t=>y.a.createElement(v_,{pathName:t.location.pathname,teamType:e})}))}}y_(M_,"propTypes",{params:_.a.object,currentUser:_.a.object,currentChannelId:_.a.string,currentTeamId:_.a.string,actions:_.a.shape({fetchMyChannelsAndMembers:_.a.func.isRequired,getMyTeamUnreads:_.a.func.isRequired,viewChannel:_.a.func.isRequired,markChannelAsRead:_.a.func.isRequired,getTeamByName:_.a.func.isRequired,addUserToTeam:_.a.func.isRequired,selectTeam:_.a.func.isRequired,setPreviousTeamId:_.a.func.isRequired,loadStatusesForChannelAndSidebar:_.a.func.isRequired,loadProfilesForDirect:_.a.func.isRequired}).isRequired,theme:_.a.object.isRequired,mfaRequired:_.a.bool.isRequired,match:_.a.shape({params:_.a.shape({team:_.a.string.isRequired}).isRequired}).isRequired,history:_.a.object.isRequired});t.a=Object(i.g)(Object(n.connect)(function(e,t){const a=Object(d.getLicense)(e),n=Object(d.getConfig)(e),s=Object(m.getCurrentUser)(e);return{theme:Object(c.getTheme)(e),mfaRequired:Object(f.a)(s,a,n,t.match.url),currentUser:s,currentTeamId:Object(u.getCurrentTeamId)(e),teamsList:Object(u.getMyTeams)(e),currentChannelId:Object(p.getCurrentChannelId)(e)}},function(e){return{actions:Object(s.bindActionCreators)({fetchMyChannelsAndMembers:r.fetchMyChannelsAndMembers,getMyTeamUnreads:l.getMyTeamUnreads,viewChannel:r.viewChannel,markChannelAsRead:r.markChannelAsRead,getTeamByName:l.getTeamByName,addUserToTeam:b.a,setPreviousTeamId:g.a,selectTeam:l.selectTeam,loadStatusesForChannelAndSidebar:h.a,loadProfilesForDirect:o.loadProfilesForDirect},e)}})(M_))},1844:function(e,t,a){"use strict";a(95);var n=a(223),s=a(6),i=(a(47),a(11)),o=a(17),r=a(0),l=a(64),c=a(114);const d=e=>(t,a)=>{const n=e.replace("/_redirect/",""),s=a(),d=c.a.getPreviousTeamId(Object(i.getCurrentUserId)(s)),m=Object(o.getTeam)(s,d);m?l.a.push("/".concat(m.name,"/").concat(n)):l.a.replace("/error?type=".concat(r.k.TEAM_NOT_FOUND))};var m,u,p,h=a(5),g=a.n(h),b=a(16),f=a.n(b);class E extends g.a.PureComponent{componentDidMount(){this.props.actions.redirect(this.props.url,this.props.params)}render(){return null}}m=E,u="propTypes",p={params:f.a.object,url:f.a.string,actions:f.a.shape({redirect:f.a.func.isRequired}).isRequired},u in m?Object.defineProperty(m,u,{value:p,enumerable:!0,configurable:!0,writable:!0}):m[u]=p;t.a=Object(n.connect)((e,t)=>({params:t.match.params,url:t.match.url}),e=>({actions:Object(s.bindActionCreators)({redirect:d},e)}))(E)},1852:function(e,t,a){"use strict";var n=a(6),s=a(223),i=a(11),o=a(917),r=a(5),l=a.n(r),c=a(16),d=a.n(c),m=a(1152),u=a(28);function p(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class h extends l.a.PureComponent{constructor(e){super(e),p(this,"onHide",()=>{this.setState({show:!1})}),this.state={show:!0}}componentDidMount(){this.props.actions.goToLastViewedChannel()}render(){let e=l.a.createElement(u.c,{id:"removed_channel.channelName",defaultMessage:"the channel"});this.props.channelName&&(e=this.props.channelName);let t=l.a.createElement(u.c,{id:"removed_channel.someone",defaultMessage:"Someone"});return this.props.remover&&(t=this.props.remover),""===this.props.currentUserId?null:l.a.createElement(m.a,{dialogClassName:"a11y__modal",show:this.state.show,onHide:this.onHide,onExited:this.props.onHide,role:"dialog","aria-labelledby":"removeFromChannelModalLabel"},l.a.createElement(m.a.Header,{closeButton:!0},l.a.createElement(m.a.Title,{componentClass:"h1",id:"removeFromChannelModalLabel"},l.a.createElement(u.c,{id:"removed_channel.from",defaultMessage:"Removed from "}),l.a.createElement("span",{className:"name"},e))),l.a.createElement(m.a.Body,{ref:"modalBody"},l.a.createElement("p",null,l.a.createElement(u.c,{id:"removed_channel.remover",defaultMessage:"{remover} removed you from {channel}",values:{remover:t,channel:e}}))),l.a.createElement(m.a.Footer,null,l.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.onHide},l.a.createElement(u.c,{id:"removed_channel.okay",defaultMessage:"Okay"}))))}}p(h,"propTypes",{currentUserId:d.a.string.isRequired,onHide:d.a.func.isRequired,channelName:d.a.string,remover:d.a.string,actions:d.a.shape({goToLastViewedChannel:d.a.func.isRequired})});t.a=Object(s.connect)(function(e){return{currentUserId:Object(i.getCurrentUserId)(e)}},function(e){return{actions:Object(n.bindActionCreators)({goToLastViewedChannel:o.c},e)}})(h)},1856:function(e,t,a){"use strict";var n=a(223),s=a(6),i=a(1027),o=a(162),r=(a(8),a(16)),l=a.n(r),c=a(5),d=a.n(c),m=a(28),u=a(19),p=a(579),h=a(169),g=a(14);function b(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class f extends d.a.PureComponent{constructor(...e){super(...e),b(this,"handleLocaleChange",e=>{u.Client4.setAcceptLanguage(e),this.loadTranslationsIfNecessary(e)}),b(this,"loadTranslationsIfNecessary",e=>{if(this.props.translations)return;const t=h.c(e);t&&this.props.actions.loadTranslations(e,t.url)})}componentDidMount(){h.a(),Object(p.setLocalizeFunction)(g.fb),this.handleLocaleChange(this.props.locale)}componentDidUpdate(e){e.locale!==this.props.locale&&this.handleLocaleChange(this.props.locale)}render(){return this.props.translations?d.a.createElement(m.e,{key:this.props.locale,locale:this.props.locale,messages:this.props.translations},this.props.children):null}}b(f,"propTypes",{children:l.a.element.isRequired,locale:l.a.string.isRequired,translations:l.a.object,actions:l.a.shape({loadTranslations:l.a.func.isRequired}).isRequired});t.a=Object(n.connect)(function(e){const t=Object(o.a)(e);return{locale:t,translations:Object(o.b)(e,t)}},function(e){return{actions:Object(s.bindActionCreators)({loadTranslations:i.b},e)}})(f)},1859:function(e,t,a){"use strict";var n=a(1068),s=a(49),i=a(4),o=a(907),r=a(0),l=a(1292),c=a(10);let d="";c.a.subscribe(()=>{const e=c.a.getState(),t=e.entities.integrations.dialogTriggerId;t!==d&&(d=t,(e.entities.integrations.dialog||{}).trigger_id===t&&c.a.dispatch(Object(o.b)({modalId:r.s.INTERACTIVE_DIALOG,dialogType:l.a})))}),window.React=a(5),window.ReactDOM=a(224),window.Redux=a(6),window.ReactRedux=a(223),window.ReactBootstrap=a(891),window.PostUtils={formatText:s.e,messageHtmlToComponent:n.a},window.PropTypes=a(16),window.PDFJS=a(244),window.openInteractiveDialog=function(e){c.a.dispatch({type:i.IntegrationTypes.RECEIVED_DIALOG,data:e}),c.a.dispatch(Object(o.b)({modalId:r.s.INTERACTIVE_DIALOG,dialogType:l.a}))}},889:function(e,t,a){"use strict";a.r(t);var n=a(6),s=a(223),i=a(15),o=a(11),r=a(1027),l=a(1303);t.default=Object(s.connect)(function(e){const t=Object(i.getConfig)(e),a=Object(o.shouldShowTermsOfService)(e);return{diagnosticsEnabled:"true"===t.DiagnosticsEnabled,noAccounts:"true"===t.NoAccounts,diagnosticId:t.DiagnosticId,showTermsOfService:a}},function(e){return{actions:Object(n.bindActionCreators)({loadMeAndConfig:r.a},e)}})(l.a)},896:function(e,t,a){"use strict";a.d(t,"a",function(){return m});a(8);var n=a(5),s=a.n(n),i=a(28),o=a(16),r=a.n(o),l=a(70),c=a.n(l);const d="!";class m extends c.a.Renderer{link(e,t,a){return e[0]===d?'<a href="'.concat(e.substring(1,e.length),'" rel="noreferrer" target="_blank">').concat(a,"</a>"):'<a href="'.concat(e,'">').concat(a,"</a>")}paragraph(e){return e}}t.b=Object(i.h)(class extends s.a.PureComponent{static get propTypes(){return{intl:i.i.isRequired,id:r.a.string.isRequired,defaultMessage:r.a.string.isRequired,values:r.a.object}}render(){const e=this.props.intl.formatMessage({id:this.props.id,defaultMessage:this.props.defaultMessage},this.props.values),t=c()(e,{breaks:!0,sanitize:!0,renderer:new m});return s.a.createElement("span",{dangerouslySetInnerHTML:{__html:t}})}})},899:function(e,t,a){"use strict";a.d(t,"a",function(){return m});var n=a(16),s=a.n(n),i=a(5),o=a.n(i),r=a(28);function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(a,!0).forEach(function(t){d(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class m extends o.a.Component{constructor(e){super(e),this.state={}}render(){let e=o.a.createElement(r.c,{id:"loading_screen.loading",defaultMessage:"Loading"});return this.props.message&&(e=this.props.message),o.a.createElement("div",{className:"loading-screen",style:c({position:this.props.position},this.props.style)},o.a.createElement("div",{className:"loading__content"},o.a.createElement("h3",null,e),o.a.createElement("div",{className:"round round-1"}),o.a.createElement("div",{className:"round round-2"}),o.a.createElement("div",{className:"round round-3"})))}}d(m,"propTypes",{position:s.a.oneOf(["absolute","fixed","relative","static","inherit"]),style:s.a.object,message:s.a.node}),d(m,"defaultProps",{position:"relative",style:{}})},900:function(e,t,a){"use strict";a.d(t,"b",function(){return A}),a.d(t,"c",function(){return j}),a.d(t,"m",function(){return R}),a.d(t,"i",function(){return k}),a.d(t,"j",function(){return L}),a.d(t,"k",function(){return x}),a.d(t,"l",function(){return D}),a.d(t,"h",function(){return U}),a.d(t,"g",function(){return q}),a.d(t,"d",function(){return F}),a.d(t,"e",function(){return B}),a.d(t,"n",function(){return G}),a.d(t,"a",function(){return V}),a.d(t,"f",function(){return W});a(21);var n=a(37),s=a(46),i=a(22),o=a(15),r=a(17),l=a(11),c=a(13),d=a(4),m=a(64),u=a(227),p=a(113),h=a(163),g=a(161),b=a(442),f=a(996),E=a(997),_=a(1092),v=a(162),y=a(48),C=a(1034),w=a(10),T=a(114),O=a(1149),S=a(0),P=a(1035),M=a(14);const N=w.a.dispatch,I=w.a.getState;function A(e){function t(e){const t=I(),a=N(Object(s.getMyChannelMember)(e.id)),i=Object(c.getCurrentChannelId)(t),o=Object(l.getCurrentUserId)(t),m=e.team_id||Object(r.getCurrentTeamId)(t),u=Object(y.c)(t),p=Object(y.k)(t)===S.B.PIN,b=Object(c.getMyChannelMember)(t,e.id);if(a.then(()=>{N(Object(s.getChannelStats)(e.id)),N(Object(s.markChannelAsRead)(e.id,i)),N(Object(s.markChannelAsViewed)(e.id,i))}),0===e.delete_at){const t=T.a.getPreviousChannelName(o,m);t!==e.name&&(T.a.setPenultimateChannelName(o,m,t),T.a.setPreviousChannelName(o,m,e.name))}u&&p&&N(Object(g.s)(S.B.PIN,e.id)),Object(h.j)(),N(Object(n.batchActions)([{type:d.ChannelTypes.SELECT_CHANNEL,data:e.id},{type:S.e.SELECT_CHANNEL_WITH_MEMBER,data:e.id,channel:e,member:b||{}}]))}e.fake?async function(e,t,a){const n=I(),i=Object(l.getCurrentUserId)(n),o=M.J(e),{data:r}=await Object(s.createDirectChannel)(i,o)(N,I);r?t(r):a()}(e,e=>{t(e)},()=>{m.a.push("/"+this.state.currentTeam.name)}):t(e)}function j(){N(Object(g.b)())}function R(){_.a.handleViewAction({type:S.e.TOGGLE_SHORTCUTS_MODAL,value:!0})}function k(e){_.a.handleViewAction({type:S.e.TOGGLE_CHANNEL_NAME_UPDATE_MODAL,value:!0,channel:e})}function L(e){_.a.handleViewAction({type:S.e.TOGGLE_GET_POST_LINK_MODAL,value:!0,post:e})}function x(e){_.a.handleViewAction({type:S.e.TOGGLE_GET_PUBLIC_LINK_MODAL,value:!0,fileId:e})}function D(e){_.a.handleViewAction({type:S.e.TOGGLE_LEAVE_PRIVATE_CHANNEL_MODAL,value:e})}function U(e,t,a){const n=M.G(),s={id:M.r(),user_id:"0",channel_id:t||Object(c.getCurrentChannelId)(I()),message:e,type:S.z.EPHEMERAL,create_at:n,update_at:n,root_id:a,parent_id:a,props:{}};N(Object(u.e)(s))}function q(e,t,a,n,s="",i){const o={id:M.r(),user_id:e.id,channel_id:n||Object(c.getCurrentChannelId)(I()),message:"",type:S.z.EPHEMERAL_ADD_TO_CHANNEL,create_at:i,update_at:i,root_id:s,parent_id:s,props:{username:e.username,addedUsername:t,addedUserId:a}};N(Object(u.e)(o))}let H=0;function F(e,t){return N(async(a,n)=>{const s=n(),i=Object(o.getConfig)(s),r=Date.now(),l=Object(c.getCurrentChannelStats)(s),d=l?l.member_count:0;return r-H>i.TimeBetweenUserTypingUpdatesMilliseconds&&d<i.MaxNotificationsPerChannel&&"true"===i.EnableUserTypingMessages&&(O.a.userTyping(e,t),H=r),{data:!0}})}function B(e="/",t=!0,a=!0){a&&T.a.setWasLoggedIn(!1),N(Object(i.logout)()).then(()=>{t&&C.a.signalLogout(),C.a.clear(),Object(p.e)(),E.a(),Object(b.a)(),m.a.push(e)}).catch(()=>{m.a.push(e)})}function G(){return e=>{e(Object(g.b)()),e(Object(f.a)()),e(Object(g.a)())}}function V(e){N({type:S.e.BROWSER_CHANGE_FOCUS,focus:e})}async function W(){let e=I();M.S(Object(r.getTeamMemberships)(e))&&await N(Object(i.loadMe)()),e=I();const t=Object(l.getCurrentUser)(e),a=Object(v.a)(e),n=T.a.getPreviousTeamId(t.id);let o=Object(r.getTeam)(e,n);const d=Object(r.getMyTeamMember)(e,n);if(!o||!d||!d.team_id){o=null;let t=Object(r.getMyTeams)(e);t.length>0&&(t=Object(P.a)(t,a))&&t[0]&&(o=t[0])}if(t.id&&o){M.W(t)&&(await N(Object(s.fetchMyChannelsAndMembers)(o.id)),e=I());let a=T.a.getPreviousChannelName(t.id,o.id);const n=Object(c.getChannelByName)(e,a);if(n&&n.team_id===o.id)N(Object(s.selectChannel)(n.id)),a=n.name;else{const{data:e}=await N(Object(s.getChannelByNameAndTeamName)(o.name,a));e&&N(Object(s.selectChannel)(e.id))}m.a.push("/".concat(o.name,"/channels/").concat(a))}else t.id&&m.a.push("/select_team")}},901:function(e,t,a){"use strict";a.d(t,"D",function(){return f}),a.d(t,"z",function(){return E}),a.d(t,"b",function(){return _}),a.d(t,"o",function(){return v}),a.d(t,"v",function(){return y}),a.d(t,"t",function(){return C}),a.d(t,"x",function(){return w}),a.d(t,"c",function(){return T}),a.d(t,"a",function(){return O}),a.d(t,"p",function(){return S}),a.d(t,"d",function(){return P}),a.d(t,"k",function(){return M}),a.d(t,"l",function(){return N}),a.d(t,"w",function(){return I}),a.d(t,"I",function(){return A}),a.d(t,"h",function(){return j}),a.d(t,"L",function(){return R}),a.d(t,"K",function(){return k}),a.d(t,"J",function(){return L}),a.d(t,"C",function(){return x}),a.d(t,"B",function(){return D}),a.d(t,"A",function(){return U}),a.d(t,"r",function(){return q}),a.d(t,"m",function(){return H}),a.d(t,"n",function(){return F}),a.d(t,"q",function(){return B}),a.d(t,"s",function(){return G}),a.d(t,"j",function(){return V}),a.d(t,"F",function(){return W}),a.d(t,"i",function(){return z}),a.d(t,"E",function(){return Y}),a.d(t,"g",function(){return K}),a.d(t,"e",function(){return Q}),a.d(t,"f",function(){return Z}),a.d(t,"u",function(){return J}),a.d(t,"G",function(){return X}),a.d(t,"y",function(){return $}),a.d(t,"H",function(){return ee});a(21);var n=a(928),s=a(22),i=a(160),o=a(19),r=a(65),l=a(900),c=a(982),d=a(10),m=a(0);function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(a,!0).forEach(function(t){h(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const g=d.a.dispatch,b=d.a.getState;async function f(e,t,a){const{data:s,error:i}=await n.updateConfig(e)(g,b);s&&t?t(s):i&&a&&a(p({id:i.server_error_id},i))}async function E(e,t){const{data:a,error:s}=await g(n.reloadConfig());a&&e?(g(n.getConfig()),g(n.getEnvironmentConfig()),e(a)):s&&t&&t(p({id:s.server_error_id},s))}async function _(e,t,a){const{data:n,error:i}=await s.updateUserMfa(e,!1)(g,b);n&&t?t(n):i&&a&&a(p({id:i.server_error_id},i))}async function v(e,t){const{data:a,error:s}=await n.getClusterStatus()(g,b);a&&e?e(a):s&&t&&t(p({id:s.server_error_id},s))}async function y(e,t){const{data:a,error:s}=await n.testLdap()(g,b);a&&e?e(a):s&&t&&t(p({id:s.server_error_id},s))}async function C(e,t){const{data:a,error:s}=await n.invalidateCaches()(g,b);a&&e?e(a):s&&t&&t(p({id:s.server_error_id},s))}async function w(e,t){const{data:a,error:s}=await n.recycleDatabase()(g,b);a&&e?e(a):s&&t&&t(p({id:s.server_error_id},s))}async function T(e,t,a,n,i){const{data:o,error:r}=await s.updateUserPassword(e,t,a)(g,b);o&&n?n(o):r&&i&&i(p({id:r.server_error_id},r))}async function O(e,t,a){const{data:n,error:i}=await s.patchUser(e)(g,b);n&&t?t(n):i&&a&&a(p({id:i.server_error_id},i))}function S(e){return Object(r.bindClientFunc)({clientFunc:o.Client4.getOAuthAppInfo,params:[e]})}function P({responseType:e,clientId:t,redirectUri:a,state:n,scope:s}){return Object(r.bindClientFunc)({clientFunc:o.Client4.authorizeOAuthApp,params:[e,t,a,n,s]})}async function M(e,t,a,n,i,o,r){const{data:l,error:c}=await s.switchEmailToLdap(e,t,n,i,a)(g,b);l&&o?o(l):c&&r&&r(p({id:c.server_error_id},c))}async function N(e,t,a,n,i,o){const{data:r,error:l}=await s.switchEmailToOAuth(n,e,t,a)(g,b);r&&i?i(r):l&&o&&o(p({id:l.server_error_id},l))}async function I(e,t,a,n,i){const{data:o,error:r}=await s.switchOAuthToEmail(e,t,a)(g,b);o?(o.follow_link&&Object(l.e)(o.follow_link),n&&n(o)):r&&i&&i(p({id:r.server_error_id},r))}async function A(e,t,a){const{data:s,error:i}=await n.uploadBrandImage(e)(g,b);s&&t?t(s):i&&a&&a(p({id:i.server_error_id},i))}async function j(e,t){const{data:a,error:s}=await n.deleteBrandImage()(g,b);a&&e?e(a):s&&t&&t(p({id:s.server_error_id},s))}async function R(e,t,a){const{data:s,error:i}=await n.uploadPublicSamlCertificate(e)(g,b);s&&t?t("saml-public.crt"):i&&a&&a(p({id:i.server_error_id},i))}async function k(e,t,a){const{data:s,error:i}=await n.uploadPrivateSamlCertificate(e)(g,b);s&&t?t("saml-private.key"):i&&a&&a(p({id:i.server_error_id},i))}async function L(e,t,a){const{data:s,error:i}=await n.uploadIdpSamlCertificate(e)(g,b);s&&t?t("saml-idp.crt"):i&&a&&a(p({id:i.server_error_id},i))}async function x(e,t){const{data:a,error:s}=await n.removePublicSamlCertificate()(g,b);a&&e?e(a):s&&t&&t(p({id:s.server_error_id},s))}async function D(e,t){const{data:a,error:s}=await n.removePrivateSamlCertificate()(g,b);a&&e?e(a):s&&t&&t(p({id:s.server_error_id},s))}async function U(e,t){const{data:a,error:s}=await n.removeIdpSamlCertificate()(g,b);a&&e?e(a):s&&t&&t(p({id:s.server_error_id},s))}async function q(e){await n.getStandardAnalytics(e)(g,b)}async function H(e){await n.getAdvancedAnalytics(e)(g,b)}async function F(e){await n.getBotPostsPerDayAnalytics(e)(g,b)}async function B(e){await n.getPostsPerDayAnalytics(e)(g,b)}async function G(e){await n.getUsersPerDayAnalytics(e)(g,b)}async function V(e,t,a){const{data:s,error:i}=await n.testElasticsearch(e)(g,b);s&&t?t(s):i&&a&&a(p({id:i.server_error_id},i))}async function W(e,t){const{data:a,error:s}=await n.testS3Connection()(g,b);a&&e?e(a):s&&t&&t(p({id:s.server_error_id},s))}async function z(e,t){const{data:a,error:s}=await n.purgeElasticsearchIndexes()(g,b);a&&e?e(a):s&&t&&t(p({id:s.server_error_id},s))}function Y(e){return{type:m.e.SET_NAVIGATION_BLOCKED,blocked:e}}function K(e){return{type:m.e.DEFER_NAVIGATION,onNavigationConfirmed:e}}function Q(){return{type:m.e.CANCEL_NAVIGATION}}function Z(){return(e,t)=>{const a=Object(c.b)(t());a&&a(),e({type:m.e.CONFIRM_NAVIGATION})}}async function J(e,t){const{data:a,error:n}=await g(i.invalidateAllEmailInvites());a&&e?e(a):n&&t&&t(p({id:n.server_error_id},n))}async function X(e,t){const{data:a,error:s}=await g(n.testEmail());a&&e?e(a):s&&t&&t(p({id:s.server_error_id},s))}function $(e,t){return a=>{a({type:m.e.RECEIVED_ADMIN_CONSOLE_REDUCER,data:{pluginId:e,reducer:t}})}}function ee(e){return t=>{t({type:m.e.REMOVED_ADMIN_CONSOLE_REDUCER,data:{pluginId:e}})}}},903:function(e,t,a){"use strict";a.d(t,"a",function(){return d});a(8);var n=a(16),s=a.n(n),i=a(5),o=a.n(i),r=a(1152),l=a(28);function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class d extends o.a.Component{constructor(...e){super(...e),c(this,"handleKeypress",e=>{"Enter"===e.key&&this.props.show&&this.handleConfirm()}),c(this,"handleConfirm",()=>{const e=!!this.refs.checkbox&&this.refs.checkbox.checked;this.props.onConfirm(e)}),c(this,"handleCancel",()=>{const e=!!this.refs.checkbox&&this.refs.checkbox.checked;this.props.onCancel(e)})}componentDidMount(){this.props.show&&document.addEventListener("keydown",this.handleKeypress)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeypress)}shouldComponentUpdate(e){return e.show!==this.props.show}UNSAFE_componentWillReceiveProps(e){this.props.show&&!e.show?document.removeEventListener("keydown",this.handleKeypress):!this.props.show&&e.show&&document.addEventListener("keydown",this.handleKeypress)}render(){let e,t,a;return this.props.showCheckbox&&(e=o.a.createElement("div",{className:"checkbox text-right margin-bottom--none"},o.a.createElement("label",null,o.a.createElement("input",{ref:"checkbox",type:"checkbox"}),this.props.checkboxText))),t=this.props.cancelButtonText?this.props.cancelButtonText:o.a.createElement(l.c,{id:"confirm_modal.cancel",defaultMessage:"Cancel"}),this.props.hideCancel||(a=o.a.createElement("button",{type:"button",className:"btn btn-link btn-cancel",onClick:this.handleCancel,id:"cancelModalButton"},t)),o.a.createElement(r.a,{className:"modal-confirm "+this.props.modalClass,dialogClassName:"a11y__modal",show:this.props.show,onHide:this.props.onCancel,onExited:this.props.onExited,id:"confirmModal",role:"dialog","aria-labelledby":"confirmModalLabel"},o.a.createElement(r.a.Header,{closeButton:!1},o.a.createElement(r.a.Title,{componentClass:"h1",id:"confirmModalLabel"},this.props.title)),o.a.createElement(r.a.Body,null,this.props.message,e),o.a.createElement(r.a.Footer,null,a,o.a.createElement("button",{autoFocus:!0,type:"button",className:this.props.confirmButtonClass,onClick:this.handleConfirm,id:"confirmModalButton"},this.props.confirmButtonText)))}}c(d,"propTypes",{show:s.a.bool.isRequired,title:s.a.node,message:s.a.node,confirmButtonClass:s.a.string,modalClass:s.a.string,confirmButtonText:s.a.node,cancelButtonText:s.a.node,showCheckbox:s.a.bool,checkboxText:s.a.node,onConfirm:s.a.func.isRequired,onCancel:s.a.func.isRequired,onExited:s.a.func,hideCancel:s.a.bool}),c(d,"defaultProps",{title:"",message:"",confirmButtonClass:"btn btn-primary",confirmButtonText:"",modalClass:""})},905:function(e,t,a){"use strict";a.d(t,"a",function(){return d});var n=a(16),s=a.n(n),i=a(5),o=a.n(i),r=a(28);function l(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class d extends o.a.Component{constructor(e){super(e),c(this,"focus",()=>{this.input.current.focus()}),this.input=o.a.createRef()}get value(){return this.input.current.value}set value(e){this.input.current.value=e}shouldComponentUpdate(e){return e.value!==this.props.value||e.placeholder.id!==this.props.placeholder.id||e.placeholder.defaultMessage!==this.props.placeholder.defaultMessage}render(){const{formatMessage:e}=this.context.intl,t=this.props,{placeholder:a}=t,n=l(t,["placeholder"]),s=e(a);return o.a.createElement("input",Object.assign({ref:this.input},n,{placeholder:s}))}}c(d,"propTypes",{placeholder:s.a.shape({id:s.a.string.isRequired,defaultMessage:s.a.string.isRequired}).isRequired,value:s.a.string}),c(d,"contextTypes",{intl:r.i.isRequired})},907:function(e,t,a){"use strict";a.d(t,"b",function(){return s}),a.d(t,"a",function(){return i});var n=a(0);function s(e){return t=>{t({type:n.e.MODAL_OPEN,modalId:e.modalId,dialogProps:e.dialogProps,dialogType:e.dialogType})}}function i(e){return t=>{t({type:n.e.MODAL_CLOSE,modalId:e})}}},908:function(e,t,a){"use strict";a.d(t,"a",function(){return r});a(8);var n=a(16),s=a.n(n),i=a(5),o=a.n(i);class r extends o.a.Component{static get propTypes(){return{type:s.a.node,error:s.a.node,textClassName:s.a.string,iconClassName:s.a.string,margin:s.a.bool,errors:s.a.arrayOf(s.a.node)}}static get defaultProps(){return{error:null,errors:[]}}render(){if(!this.props.error&&0===this.props.errors.length)return null;let e=this.props.error;if(!e)for(const t of this.props.errors)t&&(e=t);return e?"modal"===this.props.type?o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{className:"col-sm-12 has-error"},e)):"backstage"===this.props.type?o.a.createElement("div",{className:"pull-left has-error"},o.a.createElement("label",{className:"control-label"},e)):this.props.margin?o.a.createElement("div",{className:"form-group has-error"},o.a.createElement("label",{className:"control-label"},e)):o.a.createElement("div",{className:"col-sm-12 ".concat(this.props.textClassName||"has-error")},o.a.createElement("label",{className:"control-label"},o.a.createElement("i",{className:"fa ".concat(this.props.iconClassName||"fa-exclamation-circle")})," ",e)):null}}},912:function(e,t,a){"use strict";a(8);var n,s,i,o=a(16),r=a.n(o),l=a(5),c=a.n(l),d=a(14);class m extends c.a.PureComponent{render(){const{children:e}=this.props,t=this.props.divider||c.a.createElement("li",{className:"MenuGroup menu-divider"});return c.a.createElement(c.a.Fragment,null,t,e)}}function u(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function p(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function h(e){class t extends c.a.PureComponent{render(){const t=this.props,{id:a,show:n,icon:s,text:i}=t,o=u(t,["id","show","icon","text"]);if(!n)return null;let r=i;return s&&(r=c.a.createElement(c.a.Fragment,null,c.a.createElement("span",{className:"icon"},s),i)),c.a.createElement("li",{className:"MenuItem",role:"menuitem",id:a},c.a.createElement(e,Object.assign({text:r},o)))}}return p(t,"propTypes",{show:r.a.bool,id:r.a.string,icon:r.a.node,text:r.a.string}),p(t,"defaultProps",{show:!0}),t}n=m,s="propTypes",i={divider:r.a.node,children:r.a.node},s in n?Object.defineProperty(n,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[s]=i;const g=({onClick:e,ariaLabel:t,text:a,extraText:n,id:s})=>c.a.createElement("button",{id:s,"aria-label":t,className:"style--none"+(n?" MenuItem__help":""),onClick:e},a,n&&c.a.createElement("span",{className:"extra-text"},n));g.propTypes={onClick:r.a.func.isRequired,ariaLabel:r.a.string,text:r.a.oneOfType([r.a.string,r.a.node]).isRequired,extraText:r.a.string,id:r.a.string};const b=h(g);b.displayName="MenuItemAction";var f=b,E=a(957);const _=({to:e,text:t})=>c.a.createElement(E.a,{to:e},t);_.propTypes={to:r.a.string.isRequired,text:r.a.oneOfType([r.a.string,r.a.node]).isRequired};const v=h(_);v.displayName="MenuItemBlockableLinkImpl";var y=v;const C=({url:e,text:t})=>c.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:e},t);C.propTypes={url:r.a.string.isRequired,text:r.a.oneOfType([r.a.string,r.a.node]).isRequired};const w=h(C);w.displayName="MenuItemExternalLink";var T=w,O=a(886);const S=({to:e,text:t})=>c.a.createElement(O.a,{to:e},t);S.propTypes={to:r.a.string.isRequired,text:r.a.oneOfType([r.a.string,r.a.node]).isRequired};const P=h(S);P.displayName="MenuItemLink";var M=P,N=a(1069);const I=({modalId:e,dialogType:t,dialogProps:a,text:n})=>c.a.createElement(N.a,{accessibilityLabel:n,modalId:e,dialogType:t,dialogProps:a},n);I.propTypes={modalId:r.a.string.isRequired,dialogType:r.a.func.isRequired,dialogProps:r.a.object,text:r.a.oneOfType([r.a.string,r.a.node]).isRequired};const A=h(I);A.displayName="MenuItemToggleModalRedux";var j=A;function R(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,"a",function(){return k});class k extends c.a.PureComponent{constructor(e){super(e),R(this,"hideUnneededDividers",()=>{if(null===this.node.current)return;this.observer.disconnect();const e=Object.values(this.node.current.children).slice(0,this.node.current.children.length);let t=!1,a=!0;for(const n of e)n.classList.contains("menu-divider")||n.classList.contains("mobile-menu-divider")?(n.style.display="block",(a||t)&&(n.style.display="none"),t=!0):(a=!1,t=!1);for(const t of e.reverse()){if(!t.classList.contains("menu-divider")&&!t.classList.contains("mobile-menu-divider"))break;t.style.display="none"}this.observer.observe(this.node.current,{attributes:!0,childList:!0,subtree:!0})}),this.node=c.a.createRef(),this.observer=new MutationObserver(this.hideUnneededDividers)}componentDidMount(){this.hideUnneededDividers()}componentDidUpdate(){this.hideUnneededDividers()}componentWillUnmount(){this.observer.disconnect()}rect(){return this.node&&this.node.current?this.node.current.getBoundingClientRect():null}render(){const{children:e,openUp:t,openLeft:a,id:n,ariaLabel:s,customStyles:i}=this.props;let o={};return i?o=i:(a&&!Object(d.Z)()&&(o.left="inherit",o.right=0),t&&!Object(d.Z)()&&(o.bottom="100%",o.top="auto")),c.a.createElement("ul",{id:n,className:"a11y__popup Menu dropdown-menu",ref:this.node,style:o,role:"menu","aria-label":s},e)}}R(k,"Group",m),R(k,"ItemAction",f),R(k,"ItemBlockableLink",y),R(k,"ItemExternalLink",T),R(k,"ItemLink",M),R(k,"ItemToggleModalRedux",j),R(k,"propTypes",{children:r.a.node,openLeft:r.a.bool,openUp:r.a.bool,id:r.a.string,ariaLabel:r.a.string.isRequired,customStyles:r.a.object})},913:function(e,t,a){"use strict";var n=a(16),s=a.n(n),i=a(5),o=a.n(i),r=a(28),l=a(1032);const c=e=>o.a.createElement(l.a,{className:"BotBadge "+e.className,show:e.show},o.a.createElement(r.c,{id:"post_info.bot",defaultMessage:"BOT"}));c.propTypes={className:s.a.string,show:s.a.bool},c.defaultProps={show:!0,className:""},t.a=c},914:function(e,t,a){"use strict";a.d(t,"a",function(){return u});var n=a(16),s=a.n(n),i=a(5),o=a.n(i),r=a(28),l=a(931),c=a(0),d=a(14);function m(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class u extends o.a.PureComponent{constructor(e){super(e),m(this,"onKeyDown",e=>{this.props.shiftEnter&&e.keyCode===c.Q.KeyCodes.ENTER&&e.shiftKey||Object(d.X)(e,c.Q.KeyCodes.ENTER)&&this.props.submit&&"SELECT"!==e.target.tagName&&e.target.parentElement&&"react-select__input"!==e.target.parentElement.className&&!e.target.classList.contains("btn-cancel")&&this.settingList.current&&this.settingList.current.contains(e.target)&&this.handleSubmit(e)}),m(this,"handleSubmit",e=>{e.preventDefault(),this.props.setting?this.props.submit(this.props.setting):this.props.submit()}),m(this,"handleUpdateSection",e=>{this.props.updateSection(this.props.section),e.preventDefault()}),this.settingList=o.a.createRef()}componentDidMount(){if(this.settingList.current){const e=this.settingList.current.querySelectorAll('.btn:not(.save-button):not(.btn-cancel), input.form-control, select, textarea, [tabindex]:not([tabindex="-1"])');e.length>0?e[0].focus():this.settingList.current.focus()}document.addEventListener("keydown",this.onKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.onKeyDown)}render(){let e=null;this.props.clientError&&(e=o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{id:"clientError",className:"col-sm-12 has-error"},this.props.clientError)));let t=null;this.props.serverError&&(t=o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{id:"serverError",className:"col-sm-12 has-error"},this.props.serverError)));let a=null,n="setting-list__hint";"top"===this.props.infoPosition&&(n="padding-bottom x2"),this.props.extraInfo&&(a=o.a.createElement("div",{className:n},this.props.extraInfo));let s="";this.props.submit&&(s=o.a.createElement(l.a,{defaultMessage:this.props.saveButtonText,saving:this.props.saving,disabled:this.props.saving,onClick:this.handleSubmit}));const i=this.props.inputs;let c,d;c="full"===this.props.width?"col-sm-12":"medium"===this.props.width?"col-sm-10 col-sm-offset-2":"col-sm-9 col-sm-offset-3",this.props.title&&(d=o.a.createElement("li",{id:"settingTitle",className:"col-sm-12 section-title"},this.props.title));let m,u=o.a.createElement("li",{className:"setting-list-item",role:"presentation"},i,a);return"top"===this.props.infoPosition&&(u=o.a.createElement("li",{role:"presentation"},a,i)),m=this.props.cancelButtonText?this.props.cancelButtonText:o.a.createElement(r.c,{id:"setting_item_max.cancel",defaultMessage:"Cancel"}),o.a.createElement("ul",{className:"section-max form-horizontal ".concat(this.props.containerStyle)},d,o.a.createElement("li",{className:c},o.a.createElement("ul",{tabIndex:"-1",ref:this.settingList,role:"presentation",className:"setting-list"},u,o.a.createElement("li",{className:"setting-list-item"},o.a.createElement("hr",null),this.props.submitExtra,t,e,s,o.a.createElement("button",{id:"cancelSetting",className:"btn btn-sm btn-cancel cursor--pointer style--none",onClick:this.handleUpdateSection},m)))))}}m(u,"defaultProps",{infoPosition:"bottom",saving:!1,section:"",containerStyle:""}),m(u,"propTypes",{inputs:s.a.node,containerStyle:s.a.string,clientError:s.a.oneOfType([s.a.string,s.a.object]),serverError:s.a.string,extraInfo:s.a.element,infoPosition:s.a.string,section:s.a.string,updateSection:s.a.func,setting:s.a.string,submit:s.a.func,submitExtra:s.a.node,saving:s.a.bool,title:s.a.node,width:s.a.string,cancelButtonText:s.a.node,shiftEnter:s.a.bool,saveButtonText:s.a.string})},917:function(e,t,a){"use strict";a(21);var n=a(37),s=a(46),i=a(38),o=a(4),r=a(22),l=a(160),c=a(12),d=a(13),m=a(17),u=a(11),p=a(18),h=a(97),g=a(229),b=a.n(g),f=a(933),E=a(1075);const _=(e,t)=>e.views.channel.lastGetPosts[t];var v=a(1151),y=a(64),C=a(0),w=a(14),T=a(114);function O(){return e=>{e({type:C.e.UPDATE_MOBILE_VIEW,data:Object(w.Z)()})}}function S(){return async(e,t)=>{const a=t(),n=Object(d.getCurrentChannel)(a),s=Object(d.getChannelsNameMapInCurrentTeam)(a);let i=Object(h.getChannelByName)(s,Object(E.a)(a));return n.id===i.id&&(i=Object(h.getChannelByName)(s,Object(d.getRedirectChannelNameForTeam)(a,Object(m.getCurrentTeamId)(a)))),e(M(i))}}function P(e){return async(t,a)=>{const n=a();return t(M(Object(d.getChannel)(n,e)))}}function M(e){return async(t,a)=>{const n=a(),s=Object(m.getCurrentRelativeTeamUrl)(n);if(e.fake||e.userId){const a=e.userId?e.name:e.display_name,i=Object(u.getUserByUsername)(n,a);if(!i)return{error:!0};if((await t(Object(f.e)(i.id))).error)return{error:!0};y.a.push("".concat(s,"/messages/@").concat(e.name))}else if(e.type===C.i.GM_CHANNEL){const t=Object(d.getChannel)(n,e.id);y.a.push("".concat(s,"/channels/").concat(t.name))}else y.a.push("".concat(s,"/channels/").concat(e.name));return{data:!0}}}function N(e){return async(t,a)=>{const n=a(),i=Object(u.getCurrentUserId)(n),o=Object(m.getCurrentTeamId)(n);return t(Object(s.joinChannel)(i,o,e))}}function I(e){return async(t,a)=>{const n=a(),i=Object(p.getMyPreferences)(n),r=Object(u.getCurrentUserId)(n),c=Object(m.getCurrentTeam)(n);Object(h.isFavoriteChannel)(i,e)&&t(Object(s.unfavoriteChannel)(e));const g=Object(m.getCurrentRelativeTeamUrl)(n);T.a.removePreviousChannelName(r,c.id);const{error:b}=await t(Object(s.leaveChannel)(e));if(b)return{error:b};const f=T.a.getPreviousChannelName(r,c.id),E=Object(d.getChannelsNameMapInCurrentTeam)(n),_=Object(h.getChannelByName)(E,f);return _&&Object(d.getMyChannelMemberships)(a())[_.id]||T.a.removePreviousChannelName(r,c.id),0===Object(d.getMyChannels)(a()).filter(e=>e.type===C.i.OPEN_CHANNEL||e.type===C.i.PRIVATE_CHANNEL).length?(T.a.removePreviousChannelName(r,c.id),t(Object(l.selectTeam)("")),t({type:o.TeamTypes.LEAVE_TEAM,data:c}),y.a.push("/")):y.a.push(g),{data:!0}}}function A(e,t){return async(a,n)=>{const s=n(),i=Object(m.getCurrentTeamId)(s);return a(Object(r.autocompleteUsers)(e,i,t))}}function j(e){return async t=>{const a=Date.now(),{data:n,error:s}=await t(i.getPostsUnread(e,!1));return s?{error:s,atLatestMessage:!1,atOldestmessage:!1}:(t({type:C.e.INCREASE_POST_VISIBILITY,data:e,amount:n.order.length}),""===n.next_post_id&&t({type:C.e.RECEIVED_POSTS_FOR_CHANNEL_AT_TIME,channelId:e,time:a}),{atLatestMessage:""===n.next_post_id,atOldestmessage:""===n.prev_post_id})}}function R(e,t){return async a=>{const{data:n,error:s}=await a(i.getPostsAround(e,t,c.Posts.POST_CHUNK_SIZE/2,!1));return s?{error:s,atLatestMessage:!1,atOldestmessage:!1}:(a({type:C.e.INCREASE_POST_VISIBILITY,data:e,amount:n.order.length}),{atLatestMessage:""===n.next_post_id,atOldestmessage:""===n.prev_post_id})}}function k(e){return async t=>{const a=Date.now(),{data:n,error:s}=await t(i.getPosts(e,0,c.Posts.POST_CHUNK_SIZE/2,!1));return s?{error:s,atLatestMessage:!1,atOldestmessage:!1}:(t({type:C.e.RECEIVED_POSTS_FOR_CHANNEL_AT_TIME,channelId:e,time:a}),{data:n,atLatestMessage:""===n.next_post_id,atOldestmessage:""===n.prev_post_id})}}function L({channelId:e,postId:t,type:a}){return async s=>{const o=C.i.POST_CHUNK_SIZE/2;s({type:C.e.LOADING_POSTS,data:!0,channelId:e});let r;r=a===C.y.BEFORE_ID?await s(i.getPostsBefore(e,t,0,o,!1)):await s(i.getPostsAfter(e,t,0,o,!1));const{data:l}=r,c=[{type:C.e.LOADING_POSTS,data:!1,channelId:e}];return r.error?{error:r.error,moreToLoad:!0}:(c.push({type:C.e.INCREASE_POST_VISIBILITY,data:e,amount:l.order.length}),s(Object(n.batchActions)(c)),{moreToLoad:a===C.y.BEFORE_ID?""!==l.prev_post_id:""!==l.next_post_id})}}function x(e,t){return async(a,n)=>{const s=Date.now(),o=n(),r=Object(v.a)(o);let l=t;const c=_(o,e);c&&c<r.lastDisconnectAt&&(l=c);const{data:d,error:m}=await a(i.getPostsSince(e,l,!1));return d&&a({type:C.e.RECEIVED_POSTS_FOR_CHANNEL_AT_TIME,channelId:e,time:s}),{data:d,error:m}}}function D(){return()=>{b.a.emit(C.l.POST_LIST_SCROLL_CHANGE,!0)}}function U(){return()=>{b.a.emit(C.l.POST_LIST_SCROLL_CHANGE,!1)}}a.d(t,"b",function(){return O}),a.d(t,"c",function(){return S}),a.d(t,"m",function(){return P}),a.d(t,"l",function(){return M}),a.d(t,"d",function(){return N}),a.d(t,"e",function(){return I}),a.d(t,"a",function(){return A}),a.d(t,"i",function(){return j}),a.d(t,"h",function(){return R}),a.d(t,"f",function(){return k}),a.d(t,"g",function(){return L}),a.d(t,"n",function(){return x}),a.d(t,"k",function(){return D}),a.d(t,"j",function(){return U})},919:function(e,t,a){"use strict";var n=a(16),s=a.n(n),i=a(5),o=a.n(i);a(1351);const r=({url:e,username:t,size:a})=>o.a.createElement("img",{className:"Avatar Avatar-"+a,alt:"".concat(t||"user"," profile image"),src:e});r.propTypes={url:s.a.string.isRequired,username:s.a.string,size:s.a.oneOf(["xs","sm","md","lg","xl","xxl"])},r.defaultProps={size:"md"},t.a=r},922:function(e,t,a){"use strict";a.d(t,"a",function(){return n});class n{constructor(){this.latestPrefix="",this.latestComplete=!0,this.disableDispatches=!1,this.requestStarted=!1}handlePretextChanged(e){}resetRequest(){this.requestStarted=!1}startNewRequest(e){this.latestPrefix=e,this.latestComplete=!1,this.requestStarted=!0}shouldCancelDispatch(e){if(this.disableDispatches)return!0;if(!this.requestStarted)return!0;if(e===this.latestPrefix)this.latestComplete=!0;else if(this.latestComplete)return!0;return!1}allowDividers(){return!0}presentationType(){return"text"}}},923:function(e,t,a){"use strict";a.d(t,"a",function(){return l});a(8);var n=a(16),s=a.n(n),i=a(5),o=a.n(i);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class l extends o.a.Component{constructor(...e){super(...e),r(this,"handleClick",e=>{e.preventDefault(),this.props.onClick(this.props.term,this.props.matchedPretext)})}static get propTypes(){return{item:s.a.oneOfType([s.a.object,s.a.string]).isRequired,term:s.a.string.isRequired,matchedPretext:s.a.string.isRequired,isSelection:s.a.bool,onClick:s.a.func}}}r(l,"baseProps",{role:"button",tabIndex:-1})},926:function(e,t,a){"use strict";var n=a(223),s=a(6);function i(e){return e.views.settings.previousActiveSection}var o=a(0);function r(e){return{type:o.e.UPDATE_ACTIVE_SECTION,data:e}}a(8);var l=a(16),c=a.n(l),d=a(5),m=a.n(d),u=a(28),p=a(14),h=a(1220);function g(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class b extends m.a.PureComponent{constructor(...e){super(...e),g(this,"getEdit",e=>{this.edit=e}),g(this,"handleUpdateSection",e=>{e.preventDefault(),this.props.actions.updateActiveSection(this.props.section),this.props.updateSection(this.props.section)})}componentDidMount(){this.props.previousActiveSection===this.props.section&&this.edit.focus()}render(){let e=null,t=null;return!this.props.disableOpen&&Object(p.Z)()?e=m.a.createElement("div",{className:"section-min__edit"},m.a.createElement("button",{id:this.props.section+"Edit",className:"color--link cursor--pointer style--none",onClick:this.handleUpdateSection,ref:this.getEdit,"aria-labelledby":this.props.section+"Title "+this.props.section+"Edit"},m.a.createElement(h.a,null),this.props.describe)):this.props.disableOpen||(e=m.a.createElement("div",{className:"section-min__edit"},m.a.createElement("button",{id:this.props.section+"Edit",className:"color--link cursor--pointer style--none text-left",onClick:this.handleUpdateSection,ref:this.getEdit,"aria-labelledby":this.props.section+"Title "+this.props.section+"Edit"},m.a.createElement(h.a,null),m.a.createElement(u.c,{id:"setting_item_min.edit",defaultMessage:"Edit"}))),t=m.a.createElement("div",{id:this.props.section+"Desc",className:"section-min__describe"},this.props.describe)),m.a.createElement("div",{className:"section-min",onClick:this.handleUpdateSection},m.a.createElement("div",{className:"d-flex"},m.a.createElement("div",{id:this.props.section+"Title",className:"section-min__title"},this.props.title),e),t)}}g(b,"defaultProps",{section:""}),g(b,"propTypes",{title:c.a.node,disableOpen:c.a.bool,section:c.a.string,updateSection:c.a.func,describe:c.a.node,previousActiveSection:c.a.string,actions:c.a.shape({updateActiveSection:c.a.func.isRequired}).isRequired});t.a=Object(n.connect)(function(e){return{previousActiveSection:i(e)}},function(e){return{actions:Object(s.bindActionCreators)({updateActiveSection:r},e)}})(b)},931:function(e,t,a){"use strict";a.d(t,"a",function(){return m});var n=a(16),s=a.n(n),i=a(5),o=a.n(i),r=a(28),l=a(940);function c(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class m extends o.a.PureComponent{render(){const{formatMessage:e}=this.context.intl,t=this.props,{saving:a,disabled:n,savingMessage:s,defaultMessage:i,btnClass:r,extraClasses:d}=t,m=c(t,["saving","disabled","savingMessage","defaultMessage","btnClass","extraClasses"]);let u="save-button btn";n&&!a||(u+=" "+r),d&&(u+=" "+d);const p=s||e({id:"save_button.saving",defaultMessage:"Saving"}),h=i||e({id:"save_button.save",defaultMessage:"Save"});return o.a.createElement("button",Object.assign({type:"submit",id:"saveSetting",className:u,disabled:n},m),o.a.createElement(l.a,{loading:a,text:p},o.a.createElement("span",null,h)))}}d(m,"propTypes",{saving:s.a.bool.isRequired,disabled:s.a.bool,savingMessage:s.a.node,defaultMessage:s.a.node,btnClass:s.a.string,extraClasses:s.a.string}),d(m,"defaultProps",{disabled:!1,btnClass:"btn-primary",extraClasses:""}),d(m,"contextTypes",{intl:r.i})},933:function(e,t,a){"use strict";a.d(t,"e",function(){return C}),a.d(t,"f",function(){return w}),a.d(t,"d",function(){return T}),a.d(t,"g",function(){return O}),a.d(t,"b",function(){return S}),a.d(t,"c",function(){return P}),a.d(t,"a",function(){return M});a(21),a(71),a(8);var n=a(37),s=a(4),i=a(46),o=a(72),r=a(110),l=a(13),c=a(17),d=a(11),m=a(225),u=a(163),p=a(10),h=a(64),g=a(0),b=a(14);function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(a,!0).forEach(function(t){_(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function _(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const v=p.a.dispatch,y=p.a.getState;function C(e){return async(t,a)=>{const r=a(),c=Object(d.getCurrentUserId)(r),u=Object(b.t)(c,e),p=Object(l.getChannelByName)(r,u);if(!p)return t(i.createDirectChannel(c,e));Object(m.d)("api","api_channels_join_direct");const h=Date.now(),f={category:g.A.CATEGORY_DIRECT_CHANNEL_SHOW,name:e,value:"true"},_={category:g.A.CATEGORY_CHANNEL_OPEN_TIME,name:p.id,value:h.toString()},v=[{type:s.PreferenceTypes.RECEIVED_PREFERENCES,data:[f]},{type:s.PreferenceTypes.RECEIVED_PREFERENCES,data:[_]}];return t(Object(n.batchActions)(v)),t(Object(o.savePreferences)(c,[E({user_id:c},f),E({user_id:c},_)])),{data:p}}}function w(e){return async(t,a)=>{const n=await t(i.createGroupChannel(e));return n.error&&h.a.push(Object(c.getCurrentTeamUrl)(a())),n}}function T(){return async(e,t)=>{const a=t(),n=Object(l.getUnreadChannelIds)(a);await e(i.fetchMyChannelsAndMembers(Object(c.getCurrentTeamId)(a)));for(const e of n){const t=Object(l.getChannel)(a,e);t&&t.type===g.i.DM_CHANNEL?Object(u.d)(t.id):t&&t.type===g.i.GM_CHANNEL&&Object(u.e)(t.id)}Object(u.j)()}}function O(e){return async(t,a)=>{const n=a(),s=Object(c.getCurrentTeamId)(n);if(!s)throw new Error("No team id");const{data:o,error:l}=await t(i.searchChannels(s,e));if(o){const e=Object(r.getMyChannelMemberships)(n);return{data:o.filter(t=>!e[t.id])}}return{error:l}}}async function S(e,t,a){const n=y(),s=Object(c.getCurrentTeamId)(n);if(!s)return;const{data:o,error:r}=await i.autocompleteChannels(s,e)(v,y);o&&t?t(o):r&&a&&a(E({id:r.server_error_id},r))}async function P(e,t,a){const n=y(),s=Object(c.getCurrentTeamId)(n);if(!s)return;const{data:o,error:r}=await i.autocompleteChannelsForSearch(s,e)(v,y);o&&t?t(o):r&&a&&a(E({id:r.server_error_id},r))}function M(e,t){return async a=>{try{const n=t.map(t=>a(i.addChannelMember(e,t)));return await Promise.all(n)}catch(e){return{error:e}}}}},935:function(e,t,a){"use strict";a.d(t,"a",function(){return c});var n=a(16),s=a.n(n),i=a(5),o=a.n(i),r=a(28);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class c extends o.a.PureComponent{render(){const{formatMessage:e}=this.context.intl;return o.a.createElement("span",{id:"loadingSpinner",className:"LoadingSpinner"+(this.props.text?" with-text":"")},o.a.createElement("span",{className:"fa fa-spinner fa-fw fa-pulse spinner",title:e({id:"generic_icons.loading",defaultMessage:"Loading Icon"})}),this.props.text)}}l(c,"propTypes",{text:s.a.node}),l(c,"defaultProps",{text:null}),l(c,"contextTypes",{intl:r.i.isRequired})},938:function(e,t,a){"use strict";var n=a(223),s=a(25),i=a(12),o=a(13),r=a(15),l=a(18),c=a(17),d=a(11),m=a(158),u=a(16),p=a.n(u),h=a(5),g=a.n(h),b=a(1068),f=a(49);function E(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class _ extends g.a.PureComponent{render(){if(!this.props.enableFormatting)return g.a.createElement("span",null,this.props.message);const e=Object.assign({autolinkedUrlSchemes:this.props.autolinkedUrlSchemes,siteURL:this.props.siteURL,mentionKeys:this.props.mentionKeys,atMentions:!0,channelNamesMap:this.props.channelNamesMap,proxyImages:this.props.hasImageProxy&&this.props.proxyImages,team:this.props.team,minimumHashtagLength:this.props.minimumHashtagLength},this.props.options),t=f.e(this.props.message,e);return Object(b.a)(t,this.props.isRHS,{imageProps:this.props.imageProps,imagesMetadata:this.props.imagesMetadata,hasPluginTooltips:this.props.hasPluginTooltips})}}E(_,"propTypes",{channelNamesMap:p.a.object.isRequired,autolinkedUrlSchemes:p.a.array,enableFormatting:p.a.bool.isRequired,isRHS:p.a.bool,mentionKeys:p.a.arrayOf(p.a.object).isRequired,message:p.a.string.isRequired,options:p.a.object,siteURL:p.a.string.isRequired,team:p.a.object.isRequired,hasImageProxy:p.a.bool.isRequired,minimumHashtagLength:p.a.number,proxyImages:p.a.bool,imageProps:p.a.object,imagesMetadata:p.a.object,hasPluginTooltips:p.a.bool}),E(_,"defaultProps",{options:{},isRHS:!1,proxyImages:!0,imagesMetadata:{}});t.a=Object(n.connect)(function(){const e=Object(s.createSelector)(o.getChannelsNameMapInCurrentTeam,(e,t)=>t&&t.channelNamesMap,(e,t)=>t?Object.assign({},t,e):e);return function(t,a){const n=Object(r.getConfig)(t);return{autolinkedUrlSchemes:Object(r.getAutolinkedUrlSchemes)(t),channelNamesMap:e(t,a),enableFormatting:Object(l.getBool)(t,i.Preferences.CATEGORY_ADVANCED_SETTINGS,"formatting",!0),mentionKeys:Object(d.getCurrentUserMentionKeys)(t),siteURL:Object(m.e)(),team:Object(c.getCurrentTeam)(t),hasImageProxy:"true"===n.HasImageProxy,minimumHashtagLength:parseInt(n.MinimumHashtagLength,10)}}})(_)},939:function(e,t,a){"use strict";var n=a(16),s=a.n(n),i=a(5),o=a.n(i),r=a(0),l=(a(8),a(1836)),c=a(1863),d=a(14);function m(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const u=80;class p extends o.a.PureComponent{constructor(...e){super(...e),m(this,"onEntering",e=>{const t=Object(l.c)(e);Object(l.b)(Object(l.a)(({update:e,complete:t})=>{e({display:"block"}),t()}),Object(l.d)({from:{opacity:0},to:{opacity:1},duration:u})).start(t.set)}),m(this,"onExiting",e=>{const t=Object(l.c)(e);Object(l.b)(Object(l.d)({from:{opacity:1},to:{opacity:0},duration:u}),Object(l.a)(({update:e,complete:t})=>{e({display:"none"}),t()})).start(t.set)})}render(){return o.a.createElement(c.a,{in:this.props.show,classNames:"MenuWrapperAnimation",enter:!0,exit:!0,mountOnEnter:!0,unmountOnExit:!0,onEntering:!Object(d.Z)()&&this.onEntering,onExiting:!Object(d.Z)()&&this.onExiting,timeout:{enter:u,exit:u}},this.props.children)}}function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}m(p,"propTypes",{children:s.a.node,show:s.a.bool.isRequired}),a.d(t,"a",function(){return g});class g extends o.a.PureComponent{constructor(e){if(super(e),h(this,"keyboardClose",e=>{e.key===r.Q.KeyCodes.ESCAPE[0]&&this.close(),e.key===r.Q.KeyCodes.TAB[0]&&this.closeOnBlur(e)}),h(this,"closeOnBlur",e=>{this.node.current&&this.node.current.contains(e.target)||this.close()}),h(this,"close",()=>{this.state.open&&(this.setState({open:!1}),this.props.onToggle&&this.props.onToggle(!1))}),h(this,"toggle",()=>{const e=!this.state.open;this.setState({open:e}),this.props.onToggle&&this.props.onToggle(e)}),!Array.isArray(e.children)||2!==e.children.length)throw new Error("MenuWrapper needs exactly 2 children");this.state={open:!1},this.node=o.a.createRef()}componentDidMount(){document.addEventListener("click",this.closeOnBlur,!0),document.addEventListener("keyup",this.keyboardClose,!0)}componentWillUnmount(){document.removeEventListener("click",this.closeOnBlur,!0),document.removeEventListener("keyup",this.keyboardClose,!0)}render(){const{children:e}=this.props,t=this.props.animationComponent;return o.a.createElement("div",{className:"MenuWrapper "+this.props.className,onClick:this.toggle,ref:this.node},e[0],o.a.createElement(t,{show:this.state.open},e[1]))}}h(g,"propTypes",{children:s.a.node,className:s.a.string,onToggle:s.a.func,animationComponent:s.a.any.isRequired}),h(g,"defaultProps",{className:"",animationComponent:p})},940:function(e,t,a){"use strict";a.d(t,"a",function(){return c});var n=a(16),s=a.n(n),i=a(5),o=a.n(i),r=a(935);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class c extends o.a.Component{render(){const{text:e,loading:t,children:a}=this.props;return t?o.a.createElement(r.a,{text:e}):a}}l(c,"propTypes",{loading:s.a.bool,text:s.a.node,children:s.a.node}),l(c,"defaultProps",{loading:!0,text:null,children:null})},941:function(e,t,a){"use strict";var n=a(16),s=a.n(n),i=a(5),o=a.n(i),r=a(28),l=a(1032);const c=e=>o.a.createElement(l.a,{className:"GuestBadge "+e.className,show:e.show},o.a.createElement(r.c,{id:"post_info.guest",defaultMessage:"GUEST"}));c.propTypes={className:s.a.string,show:s.a.bool},c.defaultProps={show:!0,className:""},t.a=c},948:function(e,t,a){"use strict";a.d(t,"b",function(){return o}),a.d(t,"a",function(){return r}),a.d(t,"f",function(){return l}),a.d(t,"d",function(){return c}),a.d(t,"c",function(){return d}),a.d(t,"e",function(){return m});a(1450),a(39),a(30);var n=a(1455),s=a(0),i=a(20);function o(e){const t="true"===e.EnableFileAttachments,a="true"===e.EnableMobileFileUpload;return!!t&&(!i.n()||a)}function r(e){return!i.n()||"true"===e.EnableMobileFileDownload}function l(e){let t=e;return e.length>s.Q.MAX_FILENAME_LENGTH&&(t=e.substring(0,Math.min(s.Q.MAX_FILENAME_LENGTH,e.length))+"..."),t}function c(e){const t=e.split("/"),a=t[0],n=t[1];if("video"===a)return"video";if("audio"===a)return"audio";if("image"===a)return"image";if(n){if("pdf"===n)return"pdf";if(n.includes("vnd.ms-excel")||n.includes("spreadsheetml")||n.includes("vnd.sun.xml.calc")||n.includes("opendocument.spreadsheet"))return"spreadsheet";if(n.includes("vnd.ms-powerpoint")||n.includes("presentationml")||n.includes("vnd.sun.xml.impress")||n.includes("opendocument.presentation"))return"presentation";if("msword"===n||n.includes("vnd.ms-word")||n.includes("officedocument.wordprocessingml")||n.includes("application/x-mswrite"))return"word"}return"other"}function d(e){var t=new DataView(e);if(65496!==t.getUint16(0,!1))return-2;for(var a=t.byteLength,n=2;n<a;){var s=t.getUint16(n,!1);if(n+=2,65505===s){if(1165519206!==t.getUint32(n+=2,!1))return-1;var i=18761===t.getUint16(n+=6,!1);n+=t.getUint32(n+4,i);var o=t.getUint16(n,i);n+=2;for(var r=0;r<o;r++)if(274===t.getUint16(n+12*r,i))return t.getUint16(n+12*r+8,i)}else{if(65280!=(65280&s))break;n+=t.getUint16(n,!1)}}return-1}function m(e){const{transform:t,"transform-origin":a}=Object(n.a)(e);return{transform:t,transformOrigin:a}}},949:function(e,t,a){"use strict";a.d(t,"a",function(){return c});var n=a(16),s=a.n(n),i=a(5),o=a.n(i),r=a(28);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class c extends o.a.PureComponent{render(){const e="fa fa-warning"+(this.props.additionalClassName?" "+this.props.additionalClassName:"");return o.a.createElement(r.c,{id:"generic_icons.warning",defaultMessage:"Warning Icon"},t=>o.a.createElement("i",{className:e,title:t}))}}l(c,"propTypes",{additionalClassName:s.a.string}),l(c,"defaultProps",{additionalClassName:null})},953:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a(5),s=a.n(n),i=a(28);class o extends s.a.PureComponent{render(){return s.a.createElement("span",this.props,s.a.createElement(i.c,{id:"generic_icons.channel.public",defaultMessage:"Public Channel Icon"},e=>s.a.createElement("svg",{width:"13px",height:"13px",viewBox:"0 0 14 14",role:"icon","aria-label":e},s.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"inherit",fillRule:"evenodd"},s.a.createElement("g",{transform:"translate(-115.000000, -147.000000)",fillRule:"nonzero",fill:"inherit"},s.a.createElement("g",{transform:"translate(95.000000, 0.000000)"},s.a.createElement("g",{transform:"translate(20.000000, 113.000000)"},s.a.createElement("g",{transform:"translate(0.000000, 34.000000)"},s.a.createElement("path",{d:"M10.409,0.893375 C9.40275,0.329875 8.24075,0.00875 7,0 C3.13075,0 0,3.140375 0,7 C0,10.521875 2.594375,13.42775 5.97625,13.93 C6.314875,13.974625 6.6535,14 7,14 C8.24075,14 9.40275,13.678875 10.409,13.1145 C12.551875,11.918375 14,9.6285 14,7 C13.99125,4.3715 12.551875,2.090375 10.409,0.893375 Z M11.554375,4.375 L9.431625,4.375 C9.302125,3.5 9.10875,2.736125 8.86725,2.085125 C10.003875,2.519125 10.9515,3.5 11.554375,4.375 Z M6.941375,1.73775 C6.960625,1.736875 6.979875,1.73425 7,1.73425 C7.020125,1.73425 7.039375,1.736875 7.058625,1.73775 C7.340375,2.172625 7.697375,3.5 7.92225,4.375 L6.07775,4.375 C6.302625,3.5 6.659625,2.172625 6.941375,1.73775 Z M1.81475,7.875 C1.7675,7.875 1.73425,7.29925 1.73425,7 C1.73425,6.70075 1.764875,6.125 1.813,6.125 L4.396875,6.125 C4.384625,6.125 4.375,6.7025 4.375,7 C4.375,7.2975 4.384625,7.875 4.396875,7.875 L1.81475,7.875 Z M4.354875,11.54475 C4.346125,11.54475 4.337375,11.54475 4.337375,11.536 C3.548125,11.07575 2.893625,10.5 2.436875,9.625 L4.568375,9.625 C4.697875,10.5 4.890375,11.262125 5.131875,11.91225 C4.8615,11.81075 4.599875,11.692625 4.354875,11.54475 Z M4.568375,4.375 L2.443875,4.375 C3.045875,3.5 3.994375,2.517375 5.131875,2.083375 C4.89125,2.734375 4.697875,3.5 4.568375,4.375 Z M7.0595,12.26225 C7.039375,12.26225 7.020125,12.26575 7,12.26575 C6.979875,12.26575 6.960625,12.26225 6.9405,12.26225 C6.65875,11.8265 6.302625,11.375 6.07775,9.625 L7.921375,9.625 C7.697375,11.375 7.34125,11.8265 7.0595,12.26225 Z M8.11125,7.875 L5.88875,7.875 C5.873875,7.875 5.8625,7.30625 5.8625,7 C5.8625,6.69375 5.873875,6.125 5.88875,6.125 L8.11125,6.125 C8.126125,6.125 8.1375,6.69375 8.1375,7 C8.1375,7.30625 8.126125,7.875 8.11125,7.875 Z M10.409,11.0075 C10.13075,11.242 9.828,11.45025 9.506875,11.631375 C9.30125,11.74075 9.086875,11.839625 8.8655,11.923625 C9.107,11.270875 9.30125,10.5 9.431625,9.625 L11.557875,9.625 C11.25425,10.5 10.8675,10.618125 10.409,11.0075 Z M9.603125,7.875 C9.615375,7.875 9.625,7.2975 9.625,7 C9.625,6.7025 9.615375,6.125 9.603125,6.125 L12.186125,6.125 C12.235125,6.125 12.26575,6.70075 12.26575,7 C12.26575,7.29925 12.233375,7.875 12.18525,7.875 L9.603125,7.875 Z"})))))))))}}},954:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a(5),s=a.n(n),i=a(28);class o extends s.a.PureComponent{render(){return s.a.createElement("span",this.props,s.a.createElement(i.c,{id:"generic_icons.channel.private",defaultMessage:"Private Channel Icon"},e=>s.a.createElement("svg",{width:"12px",height:"13px",viewBox:"0 0 13 15",role:"icon",title:e},s.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"inherit",fillRule:"evenodd"},s.a.createElement("g",{transform:"translate(-116.000000, -175.000000)",fillRule:"nonzero",fill:"inherit"},s.a.createElement("g",{transform:"translate(95.000000, 0.000000)"},s.a.createElement("g",{transform:"translate(20.000000, 113.000000)"},s.a.createElement("g",{transform:"translate(1.000000, 62.000000)"},s.a.createElement("path",{d:"M12.0714286,6.5 L11.1428571,6.5 L11.1428571,4.64285714 C11.1428571,2.07814286 9.06471429,0 6.5,0 C3.93528571,0 1.85714286,2.07814286 1.85714286,4.64285714 L1.85714286,6.5 L0.928571429,6.5 C0.415071429,6.5 0,7.00792857 0,7.52142857 L0,13.9285714 C0,14.4420714 0.415071429,14.8571429 0.928571429,14.8571429 L12.0714286,14.8571429 C12.5849286,14.8571429 13,14.4420714 13,13.9285714 L13,7.52142857 C13,7.00792857 12.5849286,6.5 12.0714286,6.5 Z M6.5,1.85714286 C8.03585714,1.85714286 9.28571429,3.107 9.28571429,4.64285714 L9.28571429,6.5 L8.35714286,6.5 L4.64285714,6.5 L3.71428571,6.5 L3.71428571,4.64285714 C3.71428571,3.107 4.96414286,1.85714286 6.5,1.85714286 Z"})))))))))}}},956:function(e,t,a){"use strict";var n=a(223),s=a(18),i=a(16),o=a.n(i),r=a(5),l=a.n(r);function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(a,!0).forEach(function(t){m(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function m(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class u extends l.a.PureComponent{render(){const e=this.props.pluggableName;let t;if(this.props.children)t=l.a.Children.only(this.props.children).type;else if(!e)return null;const a=this.props.components,n=t?this.props.children.props:{},s=e||t.getComponentName();let i=d({},this.props);if(Reflect.deleteProperty(i,"children"),Reflect.deleteProperty(i,"components"),Reflect.deleteProperty(i,"pluggableName"),i=d({},i,{},n),a.hasOwnProperty(s)){let e=a[s];this.props.pluggableId&&(e=e.filter(e=>e.id===this.props.pluggableId));const t=e.map(e=>{const t=e.component;return l.a.createElement(t,Object.assign({},i,{theme:this.props.theme,key:s+e.id}))});return l.a.createElement(l.a.Fragment,null,t)}return null==t?null:l.a.cloneElement(this.props.children,d({},i))}}m(u,"propTypes",{children:o.a.element,pluggableName:o.a.string,components:o.a.object.isRequired,theme:o.a.object.isRequired,pluggableId:o.a.string});t.a=Object(n.connect)(function(e){return{components:e.plugins.components,theme:Object(s.getTheme)(e)}})(u)},957:function(e,t,a){"use strict";var n=a(223),s=a(6),i=a(901),o=a(982),r=(a(8),a(5)),l=a.n(r),c=a(16),d=a.n(c),m=a(886),u=a(64);function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class g extends l.a.Component{constructor(...e){super(...e),h(this,"handleClick",e=>{this.props.blocked&&(e.preventDefault(),this.props.actions.deferNavigation(()=>{u.a.push(this.props.to)}))})}render(){const e=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(a,!0).forEach(function(t){h(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},this.props);return Reflect.deleteProperty(e,"blocked"),Reflect.deleteProperty(e,"actions"),l.a.createElement(m.b,Object.assign({},e,{onClick:this.handleClick}))}}h(g,"propTypes",{blocked:d.a.bool.isRequired,to:d.a.string.isRequired,actions:d.a.shape({deferNavigation:d.a.func.isRequired}).isRequired});t.a=Object(n.connect)(function(e){return{blocked:Object(o.a)(e)}},function(e){return{actions:Object(s.bindActionCreators)({deferNavigation:i.g},e)}})(g)},963:function(e,t,a){"use strict";a.d(t,"a",function(){return u});a(8);var n=a(16),s=a.n(n),i=a(5),o=a.n(i),r=a(1177),l=a(1147),c=a(1024),d=a(919);function m(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class u extends o.a.PureComponent{constructor(...e){super(...e),m(this,"hideProfilePopover",()=>{this.refs.overlay.hide()})}render(){const e="string"==typeof this.props.profileSrc&&""!==this.props.profileSrc?this.props.profileSrc:this.props.src,t="profile-icon ".concat(this.props.isEmoji?"emoji":"");return this.props.userId?o.a.createElement(r.a,{ref:"overlay",trigger:"click",placement:"right",rootClose:!0,overlay:o.a.createElement(l.a,{userId:this.props.userId,src:e,isBusy:this.props.isBusy,hide:this.hideProfilePopover,isRHS:this.props.isRHS,hasMention:this.props.hasMention})},o.a.createElement("button",{className:"status-wrapper style--none ".concat(this.props.wrapperClass),tabIndex:"-1"},o.a.createElement("span",{className:t},o.a.createElement(d.a,{username:this.props.username,size:this.props.size,url:this.props.src})),o.a.createElement(c.a,{status:this.props.status}))):o.a.createElement("span",{className:"status-wrapper"},o.a.createElement("span",{className:t},o.a.createElement(d.a,{size:this.props.size,url:this.props.src})),o.a.createElement(c.a,{status:this.props.status}))}}m(u,"defaultProps",{size:"md",isRHS:!1,isEmoji:!1,hasMention:!1,wrapperClass:""}),m(u,"propTypes",{src:s.a.string.isRequired,profileSrc:s.a.string,status:s.a.string,size:s.a.oneOf(["xs","sm","md","lg","xl","xxl"]),userId:s.a.string,username:s.a.string,isBusy:s.a.bool,isRHS:s.a.bool,hasMention:s.a.bool,isEmoji:s.a.bool,wrapperClass:s.a.string})},964:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});a(21);var n=a(0);function s(e){return async t=>(t({type:n.C.SET_MODAL_SEARCH,data:e}),{data:!0})}function i(e,t,a=""){return async s=>(s({type:n.C.SET_SYSTEM_USERS_SEARCH,data:{term:e,team:t,filter:a}}),{data:!0})}},967:function(e,t,a){"use strict";var n=a(223),s=a(6),i=a(11),o=a(51),r=a(12),l=a(15),c=a(1418),d=a(58),m=a(928),u=a(1105),p=(a(41),a(5)),h=a.n(p),g=a(16),b=a.n(g),f=a(0),E=(a(8),a(28)),_=a(10);const v=5184e6,y=1296e6;function C(){const e=Object(l.getLicense)(_.a.getState());return"true"===e.IsLicensed&&Date.now()-parseInt(e.ExpiresAt,10)>y}var w=a(29),T=a(896),O=a(1180),S=a(1177);function P(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class M extends h.a.PureComponent{constructor(...e){super(...e),P(this,"handleClose",e=>{e.preventDefault(),this.props.handleClose&&this.props.handleClose()})}componentDidMount(){let e=document.body.getAttribute("announcementBarCount")||0;e++,document.body.classList.add("announcement-bar--fixed"),document.body.setAttribute("announcementBarCount",e)}componentWillUnmount(){let e=document.body.getAttribute("announcementBarCount");e--,document.body.setAttribute("announcementBarCount",e),0===e&&document.body.classList.remove("announcement-bar--fixed")}render(){if(!this.props.message)return null;let e="announcement-bar";const t={},a={};let n;this.props.color&&this.props.textColor?(t.backgroundColor=this.props.color,t.color=this.props.textColor,a.color=this.props.textColor):this.props.type===f.h.DEVELOPER?e="announcement-bar announcement-bar-developer":this.props.type===f.h.CRITICAL?e="announcement-bar announcement-bar-critical":this.props.type===f.h.SUCCESS&&(e="announcement-bar announcement-bar-success"),this.props.showCloseButton&&(n=h.a.createElement("a",{href:"#",className:"announcement-bar__close",style:a,onClick:this.handleClose},"×"));let s=this.props.message;"string"==typeof s&&(s=h.a.createElement(T.b,{id:this.props.message}));const i=h.a.createElement(O.a,{id:"announcement-bar__tooltip"},s);return h.a.createElement("div",{className:e,style:t},h.a.createElement(S.a,{delayShow:f.i.OVERLAY_TIME_DELAY,placement:"bottom",overlay:i},h.a.createElement("span",null,s)),n)}}P(M,"propTypes",{showCloseButton:b.a.bool,color:b.a.string,textColor:b.a.string,type:b.a.string,message:b.a.node.isRequired,handleClose:b.a.func}),P(M,"defaultProps",{showCloseButton:!1,color:"",textColor:"",type:f.h.CRITICAL,handleClose:null});var N=a(49);function I(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function A(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const j="__announcement__";class R extends h.a.PureComponent{constructor(e){super(e),A(this,"handleDismiss",()=>{this.props.allowDismissal&&(localStorage.setItem(j+this.props.text,!0),this.setState({dismissed:!0}),this.props.onDismissal&&this.props.onDismissal())}),this.state={dismissed:!0}}static getDerivedStateFromProps(e){return{dismissed:localStorage.getItem(j+e.text)}}render(){if(this.state.dismissed)return null;const e=this.props,{allowDismissal:t,text:a}=e,n=I(e,["allowDismissal","text"]);return h.a.createElement(M,Object.assign({},n,{showCloseButton:t,handleClose:this.handleDismiss,message:h.a.createElement("span",{dangerouslySetInnerHTML:{__html:N.e(a,{singleline:!0,mentionHighlight:!1})}})}))}}function k(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}A(R,"propTypes",{allowDismissal:b.a.bool.isRequired,text:b.a.string.isRequired,onDismissal:b.a.func});const L="https://licensing.vueteams.com/renew";class x extends h.a.PureComponent{constructor(...e){super(...e),k(this,"dismissExpiringLicense",()=>{this.props.actions.dismissNotice(f.g.LICENSE_EXPIRING)})}render(){if(this.props.canViewSystemErrors){const e=L+"?id="+this.props.license.id+"&user_count="+this.props.totalUsers;if(C())return h.a.createElement(M,{type:f.h.CRITICAL,message:h.a.createElement(T.b,{id:f.g.LICENSE_EXPIRED,defaultMessage:"Enterprise license is expired and some features may be disabled. [Please renew](!{link}).",values:{link:e}})});if(function(){const e=Object(l.getLicense)(_.a.getState());return"true"===e.IsLicensed&&parseInt(e.ExpiresAt,10)-Date.now()<0}())return h.a.createElement(M,{type:f.h.CRITICAL,message:h.a.createElement(T.b,{id:f.g.LICENSE_EXPIRED,defaultMessage:"Enterprise license is expired and some features may be disabled. [Please renew](!{link}).",values:{link:e}})});if(function(){const e=Object(l.getLicense)(_.a.getState());return"true"===e.IsLicensed&&parseInt(e.ExpiresAt,10)-Date.now()<=v}()&&!this.props.dismissedExpiringLicense)return h.a.createElement(M,{showCloseButton:!0,handleClose:this.dismissExpiringLicense,type:f.h.ANNOUNCEMENT,message:h.a.createElement(T.b,{id:f.g.LICENSE_EXPIRING,defaultMessage:"Enterprise license expires on {date, date, long}. [Please renew](!{link}).",values:{date:new Date(parseInt(this.props.license.ExpiresAt,10)),link:e}})})}else if(C())return h.a.createElement(M,{type:f.h.CRITICAL,message:h.a.createElement(E.c,{id:f.g.LICENSE_PAST_GRACE,defaultMessage:"Enterprise license is expired and some features may be disabled. Please contact your System Administrator for details."})});const{formatMessage:e}=this.context.intl;if("true"!==this.props.config.SendEmailNotifications&&"true"===this.props.config.EnablePreviewModeBanner){const t=e({id:f.g.PREVIEW_MODE,defaultMessage:"Preview Mode: Email notifications have not been configured"});return h.a.createElement(R,{allowDismissal:!0,text:t,type:f.h.ANNOUNCEMENT})}if(this.props.canViewSystemErrors&&""===this.props.config.SiteURL){let t,a;"true"===this.props.config.EnableSignUpWithGitLab?(t=Object(w.b)("announcement_bar.error.site_url_gitlab.full"),a="Please configure your [Site URL](https://docs.vueteams.com/administration/config-settings.html#site-url) in the [System Console](/admin_console/environment/web_server) or in gitlab.rb if you're using GitLab Vue."):(t=Object(w.b)("announcement_bar.error.site_url.full"),a="Please configure your [Site URL](https://docs.vueteams.com/administration/config-settings.html#site-url) in the [System Console](/admin_console/environment/web_server).");const n=e({id:t,defaultMessage:a});return h.a.createElement(R,{allowDismissal:!0,text:n,type:f.h.ANNOUNCEMENT})}return null}}k(x,"propTypes",{config:b.a.object,license:b.a.object,user:b.a.object,canViewSystemErrors:b.a.bool.isRequired,totalUsers:b.a.number,dismissedExpiringLicense:b.a.bool,actions:b.a.shape({dismissNotice:b.a.func.isRequired}).isRequired}),k(x,"contextTypes",{intl:E.i});var D=Object(n.connect)(function(e){return{dismissedExpiringLicense:Boolean(e.views.notice.hasBeenDismissed[f.g.LICENSE_EXPIRING])}},function(e){return{actions:Object(s.bindActionCreators)({dismissNotice:u.a},e)}})(x),U=a(1192);function q(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class H extends h.a.PureComponent{constructor(e){super(e),q(this,"reloadPage",()=>{window.location.reload()}),this.state={serverVersionOnAppLoad:e.serverVersion}}static getDerivedStateFromProps(e,t){return!t.serverVersionOnAppLoad&&e.serverVersion?{serverVersionOnAppLoad:e.serverVersion}:null}render(){const{serverVersionOnAppLoad:e}=this.state,{serverVersion:t}=this.props;return e?Object(U.a)(e,t)?null:h.a.createElement(M,{type:f.h.ANNOUNCEMENT,message:h.a.createElement(h.a.Fragment,null,h.a.createElement(E.c,{id:"version_bar.new",defaultMessage:"A new version of Vue is available."})," ",h.a.createElement("a",{onClick:this.reloadPage},h.a.createElement(E.c,{id:"version_bar.refresh",defaultMessage:"Refresh the app now"})),".")}):null}}q(H,"propTypes",{serverVersion:b.a.string});var F,B,G,V=Object(n.connect)(function(e){return{serverVersion:e.entities.general.serverVersion}})(H);class W extends h.a.PureComponent{render(){let e=null;"true"===this.props.config.EnableBanner&&this.props.config.BannerText.trim()&&(e=h.a.createElement(R,{color:this.props.config.BannerColor,textColor:this.props.config.BannerTextColor,allowDismissal:"true"===this.props.config.AllowBannerDismissal,text:this.props.config.BannerText}));let t=null;return this.props.latestError&&(t=h.a.createElement(M,{type:this.props.latestError.error.type,message:this.props.latestError.error.message,showCloseButton:!0,handleClose:this.props.actions.dismissError})),h.a.createElement(h.a.Fragment,null,e,t,h.a.createElement(V,null),h.a.createElement(D,{config:this.props.config,license:this.props.license,canViewSystemErrors:this.props.canViewSystemErrors,totalUsers:this.props.totalUsers,user:this.props.user}))}}F=W,B="propTypes",G={license:b.a.object,config:b.a.object,user:b.a.shape({email:b.a.string.isRequired,email_verified:b.a.bool}),canViewSystemErrors:b.a.bool.isRequired,latestError:b.a.object,totalUsers:b.a.number,actions:b.a.shape({dismissError:b.a.func.isRequired}).isRequired},B in F?Object.defineProperty(F,B,{value:G,enumerable:!0,configurable:!0,writable:!0}):F[B]=G;t.a=Object(n.connect)(function(e){const t=Object(o.haveISystemPermission)(e,{permission:r.Permissions.MANAGE_SYSTEM}),a=Object(l.getLicense)(e),n=Object(l.getConfig)(e),s=Object(i.getCurrentUser)(e),d=Object(c.getDisplayableErrors)(e),m=e.entities.admin.analytics.TOTAL_USERS;let u=null;return d&&d.length>=1&&(u=d[0]),{license:a,config:n,user:s,canViewSystemErrors:t,latestError:u,totalUsers:m}},function(e){const t=d.dismissError.bind(null,0);return{actions:Object(s.bindActionCreators)({getStandardAnalytics:m.getStandardAnalytics,dismissError:t,dismissNotice:u.a},e)}})(W)},968:function(e,t,a){"use strict";a(8);var n=a(223),s=a(51),i=a(16),o=a.n(i),r=a(5),l=a.n(r);function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class d extends l.a.Component{render(){return this.props.hasPermission&&!this.props.invert?this.props.children:!this.props.hasPermission&&this.props.invert?this.props.children:null}}c(d,"defaultProps",{invert:!1}),c(d,"propTypes",{permissions:o.a.arrayOf(o.a.string).isRequired,hasPermission:o.a.bool.isRequired,invert:o.a.bool.isRequired,children:o.a.node.isRequired});t.a=Object(n.connect)(function(e,t){for(const a of t.permissions)if(Object(s.haveISystemPermission)(e,{permission:a}))return{hasPermission:!0};return{hasPermission:!1}})(d)},970:function(e,t,a){"use strict";a.d(t,"a",function(){return d});var n=a(16),s=a.n(n),i=a(5),o=a.n(i),r=a(940);function l(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class d extends i.PureComponent{render(){const e=this.props,{spinning:t,spinningText:a,children:n}=e,s=l(e,["spinning","spinningText","children"]);return o.a.createElement("button",Object.assign({className:"btn btn-primary",disabled:t},s),o.a.createElement(r.a,{loading:t,text:a},n))}}c(d,"defaultProps",{spinning:!1}),c(d,"propTypes",{children:s.a.node,spinning:s.a.bool.isRequired,spinningText:s.a.node.isRequired,onClick:s.a.func})},971:function(e,t,a){"use strict";a.d(t,"a",function(){return b});a(233),a(8);var n=a(16),s=a.n(n),i=a(5),o=a.n(i),r=a(229),l=a.n(r),c=a(1033),d=a(0),m=a(20),u=a(14);function p(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const g=d.Q.KeyCodes;class b extends o.a.Component{constructor(e){super(e),h(this,"handleMentionKeyClick",(e,t)=>{if(this.props.isRHS!==t)return;let a="@"+e;this.props.value&&/[^\s]$/.test(this.props.value)&&(a=" "+a),this.addTextAtCaret(a,"")}),h(this,"getTextbox",()=>{if(!this.refs.input)return null;const e=this.refs.input.getInput();return e.getDOMNode?e.getDOMNode():e}),h(this,"recalculateSize",()=>{const e=this.refs.input.getInput();e.recalculateSize&&e.recalculateSize()}),h(this,"handleEmitClearSuggestions",(e=0)=>{setTimeout(()=>{this.clear()},e)}),h(this,"preventSuggestionListClose",()=>{this.preventSuggestionListCloseFlag=!0}),h(this,"handleFocusOut",e=>{this.preventSuggestionListCloseFlag?this.preventSuggestionListCloseFlag=!1:this.container.contains(e.relatedTarget)||m.g()&&!e.relatedTarget||(this.handleEmitClearSuggestions(),this.setState({focused:!1}),this.props.onBlur&&this.props.onBlur())}),h(this,"handleFocusIn",e=>{this.container.contains(e.relatedTarget)||this.preventSuggestionListCloseFlag||(this.setState({focused:!0}),(this.props.openOnFocus||this.props.openWhenEmpty)&&setTimeout(()=>{const e=this.getTextbox();if(e){const t=e.value.substring(0,e.selectionEnd);(this.props.openWhenEmpty||t.length>=this.props.requiredCharacters)&&this.handlePretextChanged(t)}}),this.props.onFocus&&this.props.onFocus())}),h(this,"handleChange",e=>{const t=this.getTextbox(),a=t.value.substring(0,t.selectionEnd).toLowerCase();this.composing||this.pretext===a||this.handlePretextChanged(a),this.props.onChange&&this.props.onChange(e)}),h(this,"handleCompositionStart",()=>{this.composing=!0,this.props.onComposition&&this.props.onComposition()}),h(this,"handleCompositionUpdate",e=>{if(!e.data)return;const t=this.getTextbox(),a=t.value.substring(0,t.selectionStart)+e.data;this.handlePretextChanged(a),this.props.onComposition&&this.props.onComposition()}),h(this,"handleCompositionEnd",()=>{this.composing=!1,this.props.onComposition&&this.props.onComposition()}),h(this,"addTextAtCaret",(e,t)=>{const a=this.getTextbox(),n=a.selectionEnd,s=this.props.value,i=a.value.substring(0,a.selectionEnd);let o,r=!1;if(i.toLowerCase().endsWith(t.toLowerCase()))o=i.substring(0,i.length-t.length);else{const a=e.substring(t.length),n=b.findOverlap(i,a);r=0===n.length,o=i.substring(0,i.length-n.length-t.length)}const l=s.substring(n);let c;if(c=r?i:o+e+" "+l,a.value=c,this.props.onChange){const e={target:a};this.props.onChange(e)}window.requestAnimationFrame(()=>{a.value===c&&u.nb(a,o.length+e.length+1)})}),h(this,"replaceText",e=>{const t=this.getTextbox();if(t.value=e,this.props.onChange){const e={target:t};this.props.onChange(e)}}),h(this,"handleCompleteWord",(e,t)=>{if(this.props.replaceAllInputOnSelect?this.replaceText(e):this.addTextAtCaret(e,t),this.props.onItemSelected){const t=this.state.items,a=this.state.terms;for(let n=0;n<a.length;n++)if(a[n]===e){this.props.onItemSelected(t[n]);break}}this.clear(),this.refs.input.focus();for(const a of this.props.providers)a.handleCompleteWord&&a.handleCompleteWord(e,t)}),h(this,"selectNext",()=>{this.setSelectionByDelta(1)}),h(this,"selectPrevious",()=>{this.setSelectionByDelta(-1)}),h(this,"setSelectionByDelta",e=>{let t=this.state.terms.indexOf(this.state.selection);-1!==t?((t+=e)<0?t=0:t>this.state.terms.length-1&&(t=this.state.terms.length-1),this.setState({selection:this.state.terms[t]})):this.setState({selection:""})}),h(this,"clear",()=>{this.setState({cleared:!0,matchedPretext:[],terms:[],items:[],components:[]})}),h(this,"hasSuggestions",()=>this.state.items.some(e=>!e.loading)),h(this,"handleKeyDown",e=>{if((this.props.openWhenEmpty||this.props.value)&&this.hasSuggestions())if(u.X(e,g.UP))this.selectPrevious(),e.preventDefault();else if(u.X(e,g.DOWN))this.selectNext(),e.preventDefault();else if(u.X(e,g.ENTER)||this.props.completeOnTab&&u.X(e,g.TAB)){let t="";for(let e=0;e<this.state.terms.length;e++)this.state.terms[e]===this.state.selection&&(t=this.state.matchedPretext[e]);this.pretext.endsWith(t)?this.handleCompleteWord(this.state.selection,t):(clearTimeout(this.timeoutId),this.nonDebouncedPretextChanged(this.pretext,!0)),this.props.onKeyDown&&this.props.onKeyDown(e),e.preventDefault()}else u.X(e,g.ESCAPE)?(this.clear(),this.setState({presentationType:"text"}),e.preventDefault(),e.stopPropagation()):this.props.onKeyDown&&this.props.onKeyDown(e);else this.props.onKeyDown&&this.props.onKeyDown(e)}),h(this,"handleReceivedSuggestions",e=>{const t=[],a=[];for(let n=0;n<e.terms.length;n++)t.push(e.component),a.push(e.matchedPretext);const n=e.terms,s=e.items;let i=this.state.selection;return n.length>0?this.state.selection&&-1!==n.indexOf(this.state.selection)||(i=n[0]):this.state.selection&&(i=""),this.setState({cleared:!1,selection:i,terms:n,items:s,components:t,matchedPretext:a}),{selection:i,matchedPretext:e.matchedPretext}}),h(this,"handleReceivedSuggestionsAndComplete",e=>{const{selection:t,matchedPretext:a}=this.handleReceivedSuggestions(e);t&&this.handleCompleteWord(t,a)}),h(this,"nonDebouncedPretextChanged",(e,t=!1)=>{this.pretext=e;let a=!1,n=this.handleReceivedSuggestions;t&&(n=this.handleReceivedSuggestionsAndComplete);for(const t of this.props.providers)if(a=t.handlePretextChanged(e,n)||a){this.setState({presentationType:t.presentationType(),allowDividers:t.allowDividers()});break}a||this.clear()}),h(this,"debouncedPretextChanged",e=>{clearTimeout(this.timeoutId),this.timeoutId=setTimeout(()=>this.nonDebouncedPretextChanged(e),d.Q.SEARCH_TIMEOUT_MILLISECONDS)}),h(this,"handlePretextChanged",e=>{this.pretext=e,this.debouncedPretextChanged(e)}),h(this,"blur",()=>{this.refs.input.blur()}),h(this,"setContainerRef",e=>{this.container&&(this.container.removeEventListener("focusin",this.handleFocusIn),this.container.removeEventListener("focusout",this.handleFocusOut)),e&&(e.addEventListener("focusin",this.handleFocusIn),e.addEventListener("focusout",this.handleFocusOut)),this.container=e}),this.suggestionReadOut=o.a.createRef(),this.composing=!1,this.pretext="",this.timeoutId="",this.preventSuggestionListCloseFlag=!1,this.state={focused:!1,cleared:!0,matchedPretext:[],items:[],terms:[],components:[],selection:"",allowDividers:!0,presentationType:"text"}}componentDidMount(){this.props.listenForMentionKeyClick&&l.a.addListener("mention_key_click",this.handleMentionKeyClick)}componentWillUnmount(){l.a.removeListener("mention_key_click",this.handleMentionKeyClick)}componentDidUpdate(e){if(e.contextId!==this.props.contextId){const e=this.getTextbox(),t=e.value.substring(0,e.selectionEnd).toLowerCase();this.handlePretextChanged(t)}}render(){const e=this.props,{listComponent:t,dateComponent:a,listStyle:n,renderNoResults:s}=e,i=p(e,["listComponent","dateComponent","listStyle","renderNoResults"]),r=this.props.renderDividers&&this.state.allowDividers;Reflect.deleteProperty(i,"providers"),Reflect.deleteProperty(i,"onChange"),Reflect.deleteProperty(i,"onComposition"),Reflect.deleteProperty(i,"onItemSelected"),Reflect.deleteProperty(i,"completeOnTab"),Reflect.deleteProperty(i,"isRHS"),Reflect.deleteProperty(i,"requiredCharacters"),Reflect.deleteProperty(i,"openOnFocus"),Reflect.deleteProperty(i,"openWhenEmpty"),Reflect.deleteProperty(i,"onFocus"),Reflect.deleteProperty(i,"onBlur"),Reflect.deleteProperty(i,"containerClass"),Reflect.deleteProperty(i,"replaceAllInputOnSelect"),Reflect.deleteProperty(i,"renderDividers"),Reflect.deleteProperty(i,"contextId"),Reflect.deleteProperty(i,"listenForMentionKeyClick");const l=t,d=a;return o.a.createElement("div",{ref:this.setContainerRef,className:this.props.containerClass},o.a.createElement("div",{ref:this.suggestionReadOut,"aria-live":"polite",role:m.e()?"":"alert",className:"sr-only"}),o.a.createElement(c.a,Object.assign({ref:"input",autoComplete:"off"},i,{onInput:this.handleChange,onCompositionStart:this.handleCompositionStart,onCompositionUpdate:this.handleCompositionUpdate,onCompositionEnd:this.handleCompositionEnd,onKeyDown:this.handleKeyDown})),(this.props.openWhenEmpty||this.props.value.length>=this.props.requiredCharacters)&&"text"===this.state.presentationType&&o.a.createElement(l,{ref:"list",ariaLiveRef:this.suggestionReadOut,open:this.state.focused,pretext:this.pretext,location:n,renderDividers:r,renderNoResults:s,onCompleteWord:this.handleCompleteWord,preventClose:this.preventSuggestionListClose,cleared:this.state.cleared,matchedPretext:this.state.matchedPretext,items:this.state.items,terms:this.state.terms,selection:this.state.selection,components:this.state.components}),(this.props.openWhenEmpty||this.props.value.length>=this.props.requiredCharacters)&&"date"===this.state.presentationType&&o.a.createElement(d,{ref:"date",items:this.state.items,terms:this.state.terms,components:this.state.components,matchedPretext:this.state.matchedPretext,onCompleteWord:this.handleCompleteWord}))}static findOverlap(e,t){const a=e.toLowerCase(),n=t.toLowerCase();for(let e=n.length;e>0;e--){const t=n.substring(0,e);if(a.endsWith(t))return t}return""}}h(b,"propTypes",{listComponent:s.a.func.isRequired,dateComponent:s.a.func,value:s.a.string.isRequired,providers:s.a.arrayOf(s.a.object),listStyle:s.a.string,containerClass:s.a.string,renderDividers:s.a.bool,renderNoResults:s.a.bool,completeOnTab:s.a.bool,onFocus:s.a.func,onBlur:s.a.func,onChange:s.a.func,onKeyDown:s.a.func,onComposition:s.a.func,onItemSelected:s.a.func,isRHS:s.a.bool,requiredCharacters:s.a.number,openOnFocus:s.a.bool,disabled:s.a.bool,openWhenEmpty:s.a.bool,replaceAllInputOnSelect:s.a.bool,contextId:s.a.string,listenForMentionKeyClick:s.a.bool}),h(b,"defaultProps",{listStyle:"top",containerClass:"",renderDividers:!1,renderNoResults:!1,completeOnTab:!0,isRHS:!1,requiredCharacters:1,openOnFocus:!1,openWhenEmpty:!1,replaceAllInputOnSelect:!1,listenForMentionKeyClick:!1})},972:function(e,t,a){"use strict";a.d(t,"a",function(){return b});var n=a(94),s=a.n(n),i=a(16),o=a.n(i),r=a(5),l=a.n(r),c=a(224),d=a.n(c),m=a(28),u=a(14),p=a(896),h=a(935);function g(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class b extends l.a.PureComponent{constructor(e){super(e),g(this,"getContent",()=>s()(d.a.findDOMNode(this.refs.content))),g(this,"scrollToItem",e=>{const t=this.getContent();if(!t||0===t.length)return;const a=t[0].clientHeight;if(a<t[0].scrollHeight){const n=t.scrollTop(),i=parseInt(t.css("padding-top"),10),o=parseInt(t.css("padding-top"),10),r=s()(d.a.findDOMNode(this.refs[e]));if(0===r.length)return;const l=r[0].offsetTop-parseInt(r.css("margin-top"),10),c=parseInt(r.css("margin-bottom"),10)+parseInt(r.css("padding-bottom"),10),m=r[0].offsetTop+r.height()+c;l-i<n?t.scrollTop(l-i):m+i+o>n+a&&t.scrollTop(m-a+i+o)}}),this.suggestionReadOut=l.a.createRef(),this.currentLabel="",this.currentItem={}}componentDidUpdate(e){this.props.selection!==e.selection&&this.props.selection&&this.scrollToItem(this.props.selection),Object(u.S)(this.currentItem)||this.generateLabel(this.currentItem)}componentWillUnmount(){this.removeLabel()}announceLabel(){const e=this.props.ariaLiveRef.current;e&&(e.innerHTML=this.currentLabel)}removeLabel(){const e=this.props.ariaLiveRef.current;e&&(e.innerHTML="")}generateLabel(e){e.username?(this.currentLabel=e.username,(e.first_name||e.last_name)&&e.nickname?this.currentLabel+=" ".concat(e.first_name," ").concat(e.last_name," ").concat(e.nickname):e.nickname?this.currentLabel+=" ".concat(e.nickname):(e.first_name||e.last_name)&&(this.currentLabel+=" ".concat(e.first_name," ").concat(e.last_name))):"mention.channels"===e.type&&(this.currentLabel=e.channel.display_name),this.currentLabel&&(this.currentLabel=this.currentLabel.toLowerCase()),this.announceLabel()}renderDivider(e){return l.a.createElement("div",{key:e+"-divider",className:"suggestion-list__divider"},l.a.createElement("span",null,l.a.createElement(m.c,{id:"suggestion."+e})))}renderNoResults(){return l.a.createElement("div",{key:"list-no-results",className:"suggestion-list__no-results"},l.a.createElement(p.b,{id:"suggestion_list.no_matches",defaultMessage:"No items match __{value}__",values:{value:this.props.pretext||'""'}}))}render(){if(!this.props.open||this.props.cleared)return null;const e=[];if(0===this.props.items.length){if(!this.props.renderNoResults)return null;e.push(this.renderNoResults())}let t;for(let a=0;a<this.props.items.length;a++){const n=this.props.items[a],s=this.props.terms[a],i=s===this.props.selection,o=this.props.components[a];this.props.renderDividers&&n.type!==t&&(e.push(this.renderDivider(n.type)),t=n.type),n.loading?e.push(l.a.createElement(h.a,{key:n.type})):(i&&(this.currentItem=n),e.push(l.a.createElement(o,{key:s,ref:s,item:this.props.items[a],term:s,matchedPretext:this.props.matchedPretext[a],isSelection:i,onClick:this.props.onCompleteWord})))}const a="suggestion-list suggestion-list--"+this.props.location,n="suggestion-list__content suggestion-list__content--"+this.props.location;return l.a.createElement("div",{className:a},l.a.createElement("div",{id:"suggestionList",ref:"content",className:n,onMouseDown:this.props.preventClose},e))}}g(b,"propTypes",{ariaLiveRef:o.a.object,open:o.a.bool.isRequired,location:o.a.string,renderDividers:o.a.bool,renderNoResults:o.a.bool,onCompleteWord:o.a.func.isRequired,preventClose:o.a.func,pretext:o.a.string.isRequired,cleared:o.a.bool.isRequired,matchedPretext:o.a.array.isRequired,items:o.a.array.isRequired,terms:o.a.array.isRequired,selection:o.a.string.isRequired,components:o.a.array.isRequired}),g(b,"defaultProps",{renderDividers:!1,renderNoResults:!1})},975:function(e,t,a){"use strict";a.d(t,"d",function(){return u}),a.d(t,"b",function(){return p}),a.d(t,"a",function(){return h}),a.d(t,"c",function(){return g}),a.d(t,"e",function(){return b});a(21);var n=a(4),s=a(46),i=a(160),o=a(13),r=a(22),l=a(64);function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(a,!0).forEach(function(t){m(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function m(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function u(e,t){return async(a,n)=>{const l=await a(i.removeUserFromTeam(e,t));return a(Object(r.getUser)(t)),a(i.getTeamStats(e)),a(Object(s.getChannelStats)(Object(o.getCurrentChannelId)(n()))),l}}function p(e,t){return async a=>{const{data:s,error:o}=await a(i.addUserToTeamFromInvite(e,t));if(s){const{data:e}=await a(i.getTeam(s.team_id));return a({type:n.TeamTypes.RECEIVED_MY_TEAM_MEMBER,data:d({},s,{delete_at:0,msg_count:0,mention_count:0})}),{data:e}}return{error:o}}}function h(e,t){return async a=>{const{data:s,error:o}=await a(i.addUserToTeam(e,t));if(s){const{data:e}=await a(i.getTeam(s.team_id));return a({type:n.TeamTypes.RECEIVED_MY_TEAM_MEMBER,data:d({},s,{delete_at:0,msg_count:0,mention_count:0})}),{data:e}}return{error:o}}}function g(e,t){return async(a,n)=>{const{data:r,error:l}=await a(i.addUsersToTeam(e,t));return l?{error:l}:(a(Object(s.getChannelStats)(Object(o.getCurrentChannelId)(n()))),{data:r})}}function b(e){return(t,a)=>{t(Object(s.viewChannel)(Object(o.getCurrentChannelId)(a()))),l.a.push(e)}}},976:function(e,t,a){"use strict";function n(e,t){return e.views.modals.modalState[t]&&e.views.modals.modalState[t].open}a.d(t,"a",function(){return n})},981:function(e,t,a){"use strict";a(8);var n=a(223),s=a(51),i=a(16),o=a.n(i),r=a(5),l=a.n(r);function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class d extends l.a.Component{render(){return this.props.hasPermission&&!this.props.invert?this.props.children:!this.props.hasPermission&&this.props.invert?this.props.children:null}}c(d,"defaultProps",{invert:!1}),c(d,"propTypes",{teamId:o.a.string,permissions:o.a.arrayOf(o.a.string).isRequired,hasPermission:o.a.bool.isRequired,invert:o.a.bool.isRequired,children:o.a.node.isRequired});t.a=Object(n.connect)(function(e,t){if(!t.teamId)return{hasPermission:!1};for(const a of t.permissions)if(Object(s.haveITeamPermission)(e,{team:t.teamId,permission:a}))return{hasPermission:!0};return{hasPermission:!1}})(d)},982:function(e,t,a){"use strict";function n(e){return e.views.admin.navigationBlock.blocked}function s(e){return e.views.admin.navigationBlock.showNavigationPrompt}function i(e){return e.views.admin.navigationBlock.onNavigationConfirmed}a.d(t,"a",function(){return n}),a.d(t,"c",function(){return s}),a.d(t,"b",function(){return i})},986:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a(5),s=a.n(n),i=a(28);class o extends s.a.PureComponent{render(){return s.a.createElement("span",this.props,s.a.createElement(i.c,{id:"generic_icons.archive",defaultMessage:"Archive Icon"},e=>s.a.createElement("svg",{width:"14",height:"14",viewBox:"0 0 14 14",role:"icon","aria-label":e},s.a.createElement("path",{d:"M8.5 6.5q0-0.203-0.148-0.352t-0.352-0.148h-2q-0.203 0-0.352 0.148t-0.148 0.352 0.148 0.352 0.352 0.148h2q0.203 0 0.352-0.148t0.148-0.352zM13 5v7.5q0 0.203-0.148 0.352t-0.352 0.148h-11q-0.203 0-0.352-0.148t-0.148-0.352v-7.5q0-0.203 0.148-0.352t0.352-0.148h11q0.203 0 0.352 0.148t0.148 0.352zM13.5 1.5v2q0 0.203-0.148 0.352t-0.352 0.148h-12q-0.203 0-0.352-0.148t-0.148-0.352v-2q0-0.203 0.148-0.352t0.352-0.148h12q0.203 0 0.352 0.148t0.148 0.352z"}))))}}},995:function(e,t,a){"use strict";a(8);var n=a(16),s=a.n(n),i=a(5),o=a.n(i),r=a(28),l=a(1007),c=a(0),d=a(931),m=a(14),u=a(899);function p(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const h=c.Q.KeyCodes;class g extends o.a.Component{constructor(e){super(e),p(this,"setSelected",e=>{this.toSelect=e}),p(this,"handleArrowPress",e=>{if(Object(m.e)(e)&&e.shiftKey)return;const t=this.props.options;if(0===t.length)return;let a;switch(e.key){case h.DOWN[0]:if(-1===this.state.selected){a=0;break}a=Math.min(this.state.selected+1,t.length-1);break;case h.UP[0]:if(-1===this.state.selected){a=0;break}a=Math.max(this.state.selected-1,0);break;default:return}e.preventDefault(),this.setState({selected:a}),this.setSelected(a),this.props.onSelect(t[a])}),p(this,"defaultOptionRenderer",(e,t,a)=>{var n="";return t&&(n="more-modal__row--selected"),o.a.createElement("div",{ref:t?"selected":e.value,className:n,key:"multiselectoption"+e.value,onClick:()=>a(e)},e.label)}),this.toSelect=-1,this.state={selected:-1}}componentDidMount(){document.addEventListener("keydown",this.handleArrowPress)}componentWillUnmount(){document.removeEventListener("keydown",this.handleArrowPress)}UNSAFE_componentWillReceiveProps(e){this.setState({selected:this.toSelect});const t=e.options;t&&t.length>0&&this.toSelect>=0&&this.props.onSelect(t[this.toSelect])}componentDidUpdate(e,t){if(t.selected!==this.state.selected&&this.refs.list&&this.refs.selected){const e=this.refs.selected.getBoundingClientRect().top,t=this.refs.selected.getBoundingClientRect().bottom,a=this.refs.list.getBoundingClientRect().top;t>this.refs.list.getBoundingClientRect().bottom?this.refs.selected.scrollIntoView(!1):e<a&&this.refs.selected.scrollIntoView(!0)}}render(){const e=this.props.options;let t;if(this.props.loading)t=o.a.createElement("div",{"aria-hidden":!0},o.a.createElement(u.a,{position:"absolute",key:"loading"}));else if(null==e||0===e.length)t=o.a.createElement("div",{key:"no-users-found",className:"no-channel-message"},o.a.createElement("p",{className:"primary-message"},o.a.createElement(r.c,{id:"multiselect.list.notFound",defaultMessage:"No items found"})));else{let a;a=this.props.optionRenderer?this.props.optionRenderer:this.defaultOptionRenderer;const n=e.map((e,t)=>a(e,this.state.selected===t,this.props.onAdd)),s=e[this.state.selected],i=this.props.ariaLabelRenderer(s);t=o.a.createElement("div",{className:"more-modal__list"},o.a.createElement("div",{className:"sr-only","aria-live":"polite"},i),o.a.createElement("div",{ref:"list",id:"multiSelectList",role:"presentation","aria-hidden":!0},n))}return o.a.createElement("div",{className:"multi-select__wrapper","aria-live":"polite"},t)}}function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(a,!0).forEach(function(t){E(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function E(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}g.defaultProps={options:[],perPage:50,onAction:()=>null},g.propTypes={options:s.a.arrayOf(s.a.object),optionRenderer:s.a.func,ariaLabelRenderer:s.a.func,page:s.a.number,perPage:s.a.number,onPageChange:s.a.func,onAdd:s.a.func,onSelect:s.a.func,loading:s.a.bool},a.d(t,"a",function(){return v});const _=c.i.KeyCodes;class v extends o.a.Component{constructor(e){super(e),E(this,"handleA11yActivateEvent",()=>{this.setState({a11yActive:!0})}),E(this,"handleA11yDeactivateEvent",()=>{this.setState({a11yActive:!1})}),E(this,"nextPage",()=>{this.props.handlePageChange&&this.props.handlePageChange(this.state.page+1,this.state.page),this.refs.list&&this.refs.list.setSelected(0),this.setState({page:this.state.page+1})}),E(this,"prevPage",()=>{0!==this.state.page&&(this.props.handlePageChange&&this.props.handlePageChange(this.state.page-1,this.state.page),this.refs.list.setSelected(0),this.setState({page:this.state.page-1}))}),E(this,"resetPaging",()=>{this.setState({page:0})}),E(this,"onSelect",e=>{this.selected=e}),E(this,"onAdd",e=>{if(this.props.maxValues&&this.props.values.length>=this.props.maxValues)return;for(let t=0;t<this.props.values.length;t++)if(this.props.values[t].id===e.id)return;this.props.handleAdd(e),this.selected=null,this.refs.reactSelect.select.handleInputChange({currentTarget:{value:""}}),this.onInput(""),this.refs.reactSelect.focus();const t=this.props.submitImmediatelyOn;t&&t(e)&&this.props.handleSubmit([e])}),E(this,"onInput",(e,t={})=>{"input-blur"!==t.action&&"menu-close"!==t.action&&this.state.input!==e&&(this.setState({input:e}),""===e?this.refs.list.setSelected(-1):this.refs.list.setSelected(0),this.selected=null,this.props.handleInput(e,this))}),E(this,"onInputKeyDown",e=>{switch(e.key){case _.ENTER[0]:e.preventDefault()}}),E(this,"handleEnterPress",e=>{switch(e.key){case _.ENTER[0]:if(null==this.selected)return void this.props.handleSubmit();this.onAdd(this.selected)}}),E(this,"handleOnClick",e=>{e.preventDefault(),this.props.handleSubmit()}),E(this,"onChange",(e,t)=>{if("remove-value"!==t.action&&"pop-value"!==t.action)return;const a=[...this.props.values];for(let e=0;e<a.length;e++)if(a[e].id===t.removedValue.id){a.splice(e,1);break}this.props.handleDelete(a)}),this.selected=null,this.state={page:0,input:""}}componentDidMount(){document.addEventListener("keydown",this.handleEnterPress),this.refs.reactSelect&&(this.refs.reactSelect.select.inputRef.addEventListener(c.c.ACTIVATE,this.handleA11yActivateEvent),this.refs.reactSelect.select.inputRef.addEventListener(c.c.DEACTIVATE,this.handleA11yDeactivateEvent),this.refs.reactSelect.focus())}componentWillUnmount(){this.refs.reactSelect.select.inputRef.removeEventListener(c.c.ACTIVATE,this.handleA11yActivateEvent),this.refs.reactSelect.select.inputRef.removeEventListener(c.c.DEACTIVATE,this.handleA11yDeactivateEvent),document.removeEventListener("keydown",this.handleEnterPress)}render(){const e=Object.assign([],this.props.options),{totalCount:t,users:a,values:n}=this.props;let s,i;this.props.numRemainingText?s=this.props.numRemainingText:null!=this.props.maxValues&&(s=o.a.createElement(r.c,{id:"multiselect.numRemaining",defaultMessage:"You can add {num, number} more. ",values:{num:this.props.maxValues-this.props.values.length}})),this.props.buttonSubmitText?i=this.props.buttonSubmitText:null!=this.props.maxValues&&(i=o.a.createElement(r.c,{id:"multiselect.go",defaultMessage:"Go"}));let c,m,u,p=[];this.props.noteText&&(u=o.a.createElement("div",{className:"multi-select__note"},o.a.createElement("div",{className:"note__icon"},o.a.createElement(r.c,{id:"generic_icons.info",defaultMessage:"Info Icon"},e=>o.a.createElement("span",{className:"fa fa-info",title:e}))),o.a.createElement("div",null,this.props.noteText)));const h={};for(let e=0;e<n.length;e++)h[n[e].id]=!0;for(let t=e.length-1;t>=0;t--)h[e[t].id]&&e.splice(t,1);if(e&&e.length>this.props.perPage){const t=this.state.page*this.props.perPage,a=t+this.props.perPage;p=e.slice(t,a),this.props.loading||(e.length>a&&(c=o.a.createElement("button",{className:"btn btn-link filter-control filter-control__next",onClick:this.nextPage},o.a.createElement(r.c,{id:"filtered_user_list.next",defaultMessage:"Next"}))),this.state.page>0&&(m=o.a.createElement("button",{className:"btn btn-link filter-control filter-control__prev",onClick:this.prevPage},o.a.createElement(r.c,{id:"filtered_user_list.prev",defaultMessage:"Previous"}))))}else p=e;let b;return a&&a.length&&t&&(b=o.a.createElement(r.c,{id:"multiselect.numMembers",defaultMessage:"{memberOptions, number} of {totalCount, number} members",values:{memberOptions:p.length,totalCount:this.props.totalCount}})),o.a.createElement("div",{className:"filtered-user-list"},o.a.createElement("div",{className:"filter-row filter-row--full"},o.a.createElement("div",{className:"multi-select__container"},o.a.createElement(l.b,{id:"selectItems",ref:"reactSelect",isMulti:!0,options:this.props.options,styles:w,components:{Menu:y,IndicatorsContainer:y,MultiValueLabel:C(this.props.valueRenderer)},isClearable:!1,openMenuOnFocus:!1,menuIsOpen:!1,onInputChange:this.onInput,onKeyDown:this.onInputKeyDown,onChange:this.onChange,value:this.props.values,placeholder:this.props.placeholderText,inputValue:this.state.input,getOptionValue:e=>e.id,getOptionLabel:e=>this.props.ariaLabelRenderer(e),"aria-label":this.props.placeholderText,className:this.state.a11yActive?"multi-select__focused":""}),o.a.createElement(d.a,{id:"saveItems",saving:this.props.saving,disabled:this.props.saving,onClick:this.handleOnClick,defaultMessage:i,savingMessage:this.props.buttonSubmitLoadingText})),o.a.createElement("div",{className:"multi-select__help"},s,b),o.a.createElement("div",{className:"multi-select__help"},u)),o.a.createElement(g,{ref:"list",options:p,optionRenderer:this.props.optionRenderer,ariaLabelRenderer:this.props.ariaLabelRenderer,page:this.state.page,perPage:this.props.perPage,onPageChange:this.props.handlePageChange,onAdd:this.onAdd,onSelect:this.onSelect,loading:this.props.loading}),o.a.createElement("div",{className:"filter-controls"},m,c))}}E(v,"propTypes",{users:s.a.arrayOf(s.a.object),totalCount:s.a.number,options:s.a.arrayOf(s.a.object),optionRenderer:s.a.func,values:s.a.arrayOf(s.a.object),valueRenderer:s.a.func,ariaLabelRenderer:s.a.func.isRequired,handleInput:s.a.func,handleDelete:s.a.func,perPage:s.a.number,handlePageChange:s.a.func,handleAdd:s.a.func,handleSubmit:s.a.func,noteText:s.a.node,maxValues:s.a.number,numRemainingText:s.a.node,buttonSubmitText:s.a.node,buttonSubmitLoadingText:s.a.node,submitImmediatelyOn:s.a.func,saving:s.a.bool,loading:s.a.bool,placeholderText:s.a.string}),E(v,"defaultProps",{ariaLabelRenderer:function(e){if(!e)return null;return e.label}});const y=()=>null,C=e=>t=>o.a.createElement("div",{style:{paddingRight:"5px",paddingLeft:"5px",borderRight:"1px solid rgba(0, 126, 255, 0.24)"}},o.a.createElement(e,t)),w={container:()=>({display:"table-cell",paddingRight:"15px",verticalAlign:"top",width:"100%"}),control:e=>f({},e,{borderRadius:"1px",borderColor:"hsl(0,0%,80%)",minHeight:"36px","&:hover":{},boxShadow:"",backgroundColor:"hsl(0,0%,100%)"}),multiValue:e=>f({},e,{whiteSpace:"nowrap",border:"1px solid rgba(0, 126, 255, 0.24)",backgroundColor:"rgba(0, 126, 255, 0.08)",color:"#007eff"}),multiValueRemove:e=>f({},e,{":hover":{backgroundColor:"rgba(0, 126, 255, 0.15)"}})}},996:function(e,t,a){"use strict";a.d(t,"c",function(){return s}),a.d(t,"b",function(){return i}),a.d(t,"a",function(){return o});var n=a(0);const s=()=>e=>e({type:n.e.TOGGLE_LHS}),i=()=>e=>e({type:n.e.OPEN_LHS}),o=()=>e=>e({type:n.e.CLOSE_LHS})},997:function(e,t,a){"use strict";(function(e){a.d(t,"b",function(){return W}),a.d(t,"a",function(){return z}),a.d(t,"d",function(){return K}),a.d(t,"i",function(){return Q}),a.d(t,"c",function(){return Z}),a.d(t,"f",function(){return $}),a.d(t,"g",function(){return ee}),a.d(t,"e",function(){return te}),a.d(t,"j",function(){return ae}),a.d(t,"h",function(){return ne});a(21),a(71),a(39),a(47),a(42),a(8),a(568);var n=a(37),s=a(4),i=a(12),o=a(46),r=a(569),l=a(38),c=a(58),d=a(160),m=a(22),u=a(19),p=a(11),h=a(17),g=a(15),b=a(13),f=a(33),E=a(51),_=a(48),v=a(907),y=a(1321),C=a(161),w=a(917),T=a(64),O=a(933),S=a(900),P=a(227),M=a(113),N=a(163),I=a(10),A=a(1149),j=a(1298),R=a(0),k=a(226),L=a(158),x=a(1852),D=a(1292);function U(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?U(a,!0).forEach(function(t){H(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):U(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function H(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const F=I.a.dispatch,B=I.a.getState,G=7,V={};function W(){if(!window.WebSocket)return void console.log("Browser does not support websocket");const e=Object(g.getConfig)(B());let t="";e.WebsocketURL?t=e.WebsocketURL:("https:"===(t=new URL(Object(L.e)())).protocol?t.protocol="wss:":t.protocol="ws:",/:\d+$/.test(t.host)||("wss:"===t.protocol?t.host+=":"+e.WebsocketSecurePort:t.host+=":"+e.WebsocketPort),t=t.toString()),t.length>0&&"/"===t[t.length-1]&&(t=t.substring(0,t.length-1)),t+=u.Client4.getUrlVersion()+"/websocket",A.a.setEventCallback(oe),A.a.setFirstConnectCallback(se),A.a.setReconnectCallback(()=>Z(!1)),A.a.setMissedEventCallback(()=>Z(!1)),A.a.setCloseCallback(ie),A.a.initialize(t)}function z(){A.a.close()}const Y={};function K(e,t){Y[e]=t}function Q(e){Reflect.deleteProperty(Y,e)}function Z(e=!0){e&&(z(),W()),F({type:s.GeneralTypes.WEBSOCKET_SUCCESS,timestamp:Date.now()}),Object(j.c)(),Object.values(Y).forEach(e=>{e&&"function"==typeof e&&e()});const t=B();if(t.entities.teams.currentTeamId){const e=Object(b.getCurrentChannelId)(t),a=Object(f.getMostRecentPostIdInChannel)(t,e),n=Object(f.getPost)(t,a);F(Object(O.d)()),F(n?Object(w.n)(e,n.create_at):Object(l.getPosts)(e)),M.a(),F(d.getMyTeamUnreads())}t.websocket.lastDisconnectAt&&F(Object(m.checkForModifiedUsers)()),F(Object(y.b)()),F(Object(c.clearErrors)())}let J="";const X=9e5;function $(){clearInterval(J),J=setInterval(()=>{null!=Object(p.getCurrentUser)(B())&&Z(!1)},X)}function ee(){clearInterval(J)}function te(e,t,a){V[e]||(V[e]={}),V[e][t]=a}function ae(e,t){const a=V[e];a&&Reflect.deleteProperty(a,t)}function ne(e){Reflect.deleteProperty(V,e)}function se(){F(Object(n.batchActions)([{type:s.GeneralTypes.WEBSOCKET_SUCCESS,timestamp:Date.now()},Object(c.clearErrors)()]))}function ie(e){e>G&&F(Object(c.logError)({type:"critical",message:R.g.WEBSOCKET_PORT_ERROR},!0)),F(Object(n.batchActions)([{type:s.GeneralTypes.WEBSOCKET_FAILURE,timestamp:Date.now()},Object(y.a)()]))}function oe(t){switch(t.event){case R.F.POSTED:case R.F.EPHEMERAL_MESSAGE:re(t);break;case R.F.POST_EDITED:!function(e){const t=JSON.parse(e.data.post);F(Object(l.receivedPost)(t)),Object(l.getProfilesAndStatusesForPosts)([t],F,B);const a=Object(b.getCurrentChannelId)(B());a===e.broadcast.channel_id&&window.isActive&&F(Object(o.viewChannel)(a))}(t);break;case R.F.POST_DELETED:!function(e){const t=JSON.parse(e.data.post);F(Object(l.postDeleted)(t))}(t);break;case R.F.LEAVE_TEAM:!function(t){const a=B();F(Object(n.batchActions)([{type:s.UserTypes.RECEIVED_PROFILE_NOT_IN_TEAM,data:{id:t.data.team_id,user_id:t.data.user_id}},{type:s.TeamTypes.REMOVE_MEMBER_FROM_TEAM,data:{team_id:t.data.team_id,user_id:t.data.user_id}}])),Object(p.getCurrentUserId)(a)===t.data.user_id&&(F({type:s.TeamTypes.LEAVE_TEAM,data:{id:t.data.team_id}}),Object(h.getCurrentTeamId)(a)===t.data.team_id&&(e.location.pathname.startsWith("/admin_console")||S.f()))}(t);break;case R.F.UPDATE_TEAM:!function(e){F({type:s.TeamTypes.UPDATED_TEAM,data:JSON.parse(e.data.team)})}(t);break;case R.F.DELETE_TEAM:!function(e){const t=JSON.parse(e.data.team),a=I.a.getState(),{teams:i}=a.entities.teams;if(t&&i&&i[t.id]&&0===i[t.id].delete_at){const{currentUserId:e}=a.entities.users,{currentTeamId:i,myMembers:o}=a.entities.teams,r=Object.values(o),l=r.find(t=>t.user_id===e&&t.team_id===i);let c="";if(t&&l&&t.id===l.team_id){const e={};Object(h.getMyTeams)(a).forEach(t=>{e[t.id]=t});for(let a=0;a<r.length;a++){const n=r[a].team_id;if(e&&e[n]&&0===e[n].delete_at&&t.id!==n){c=n;break}}}if(F(Object(n.batchActions)([{type:s.TeamTypes.RECEIVED_TEAM_DELETED,data:{id:t.id}},{type:s.TeamTypes.UPDATED_TEAM,data:t}])),c){F({type:s.TeamTypes.SELECT_TEAM,data:c});const e=B(),t=Object(b.getRedirectChannelNameForTeam)(e,c);T.a.push("".concat(Object(h.getCurrentTeamUrl)(e),"/channels/").concat(t))}else T.a.push("/")}}(t);break;case R.F.ADDED_TO_TEAM:!async function(e){await F(d.getTeam(e.data.team_id)),await F(d.getMyTeamMembers()),await F(d.getMyTeamUnreads())}(t);break;case R.F.USER_ADDED:!function(e){const t=Object(b.getCurrentChannelId)(B());t===e.broadcast.channel_id&&(F(Object(o.getChannelStats)(t)),F({type:s.UserTypes.RECEIVED_PROFILE_IN_CHANNEL,data:{id:e.broadcast.channel_id,user_id:e.data.user_id}}));const a=Object(h.getCurrentTeamId)(B()),n=Object(p.getCurrentUserId)(B());a===e.data.team_id&&n===e.data.user_id&&F(Object(o.getChannelAndMyMember)(e.broadcast.channel_id))}(t);break;case R.F.USER_REMOVED:!function(e){const t=B(),a=Object(b.getCurrentChannel)(t)||{},r=Object(p.getCurrentUserId)(t);if(e.broadcast.user_id===r){F(Object(O.d)());const n=Object(_.n)(t);if(e.data.channel_id===n&&F(Object(C.b)()),e.data.channel_id===a.id)if(e.data.remover_id===e.broadcast.user_id)T.a.push(Object(h.getCurrentRelativeTeamUrl)(t));else{const n=Object(p.getUser)(t,e.data.remover_id)||{};F(Object(v.b)({modalId:R.s.REMOVED_FROM_CHANNEL,dialogType:x.a,dialogProps:{channelName:a.display_name,remover:n.username}}))}F({type:s.ChannelTypes.LEAVE_CHANNEL,data:{id:e.data.channel_id,user_id:e.broadcast.user_id}})}else e.broadcast.channel_id===a.id&&(F(Object(o.getChannelStats)(a.id)),F({type:s.UserTypes.RECEIVED_PROFILE_NOT_IN_CHANNEL,data:{id:e.broadcast.channel_id,user_id:e.data.user_id}}));const l=e.broadcast.channel_id||e.data.channel_id,c=e.broadcast.user_id||e.data.user_id,d=Object(b.getChannel)(t,l);!d||Object(E.haveISystemPermission)(t,{permission:i.Permissions.VIEW_MEMBERS})||Object(E.haveITeamPermission)(t,{permission:i.Permissions.VIEW_MEMBERS,team:d.team_id})||F(Object(n.batchActions)([{type:s.UserTypes.RECEIVED_PROFILE_NOT_IN_TEAM,data:{id:d.team_id,user_id:c}},{type:s.TeamTypes.REMOVE_MEMBER_FROM_TEAM,data:{team_id:d.team_id,user_id:c}}]))}(t);break;case R.F.USER_UPDATED:!function(e){const t=Object(p.getCurrentUser)(B()),a=e.data.user;t.id===a.id?a.update_at>t.update_at&&Object(m.getMe)()(F,B):F({type:s.UserTypes.RECEIVED_PROFILE,data:a})}(t);break;case R.F.ROLE_ADDED:!function(e){const t=JSON.parse(e.data.role);F({type:s.RoleTypes.RECEIVED_ROLE,data:t})}(t);break;case R.F.ROLE_REMOVED:!function(e){const t=JSON.parse(e.data.role);F({type:s.RoleTypes.ROLE_DELETED,data:t})}(t);break;case R.F.MEMBERROLE_UPDATED:!function(e){F({type:s.TeamTypes.RECEIVED_MY_TEAM_MEMBER,data:JSON.parse(e.data.member)})}(t);break;case R.F.ROLE_UPDATED:!function(e){const t=JSON.parse(e.data.role);F({type:s.RoleTypes.RECEIVED_ROLE,data:t})}(t);break;case R.F.CHANNEL_CREATED:!function(e){const t=e.data.channel_id,a=e.data.team_id,n=B();Object(h.getCurrentTeamId)(n)!==a||Object(b.getChannel)(n,t)||F(Object(o.getChannelAndMyMember)(t))}(t);break;case R.F.CHANNEL_DELETED:!function(e){const t=B(),a="true"===Object(g.getConfig)(t).ExperimentalViewArchivedChannels;if(Object(b.getCurrentChannelId)(t)===e.data.channel_id&&!a){const e=Object(h.getCurrentRelativeTeamUrl)(t),a=Object(h.getCurrentTeamId)(t),n=Object(b.getRedirectChannelNameForTeam)(t,a);T.a.push(e+"/channels/"+n)}F({type:s.ChannelTypes.RECEIVED_CHANNEL_DELETED,data:{id:e.data.channel_id,team_id:e.broadcast.team_id,deleteAt:e.data.delete_at,viewArchivedChannels:a}})}(t);break;case R.F.CHANNEL_CONVERTED:!function(e){const t=e.data.channel_id;if(t){const e=Object(b.getChannel)(B(),t);e&&F({type:s.ChannelTypes.RECEIVED_CHANNEL,data:q({},e,{type:i.General.PRIVATE_CHANNEL})})}}(t);break;case R.F.CHANNEL_UPDATED:F(function(e){return(t,a)=>{const n=JSON.parse(e.data.channel);t({type:s.ChannelTypes.RECEIVED_CHANNEL,data:n});const i=a();n.id===Object(b.getCurrentChannelId)(i)&&T.a.replace("".concat(Object(h.getCurrentRelativeTeamUrl)(i),"/channels/").concat(n.name))}}(t));break;case R.F.CHANNEL_MEMBER_UPDATED:!function(e){const t=JSON.parse(e.data.channelMember);F({type:s.ChannelTypes.RECEIVED_MY_CHANNEL_MEMBER,data:t})}(t);break;case R.F.DIRECT_ADDED:!function(e){F(Object(o.getChannelAndMyMember)(e.broadcast.channel_id))}(t);break;case R.F.PREFERENCE_CHANGED:!function(e){const t=JSON.parse(e.data.preference);F({type:s.PreferenceTypes.RECEIVED_PREFERENCES,data:[t]}),le(t)&&Object(N.j)()}(t);break;case R.F.PREFERENCES_CHANGED:!function(e){const t=JSON.parse(e.data.preferences);F({type:s.PreferenceTypes.RECEIVED_PREFERENCES,data:t}),-1!==t.findIndex(le)&&Object(N.j)()}(t);break;case R.F.PREFERENCES_DELETED:!function(e){const t=JSON.parse(e.data.preferences);F({type:s.PreferenceTypes.DELETED_PREFERENCES,data:t})}(t);break;case R.F.TYPING:F(function(e){return(t,a)=>{const n=a(),s=Object(g.getConfig)(n),o=Object(p.getCurrentUserId)(n),r=e.data.user_id,l={id:e.broadcast.channel_id+e.data.parent_id,userId:r,now:Date.now()};t({type:i.WebsocketEvents.TYPING,data:l}),setTimeout(()=>{t({type:i.WebsocketEvents.STOP_TYPING,data:l})},parseInt(s.TimeBetweenUserTypingUpdatesMilliseconds,10)),r!==o&&t(Object(m.getMissingProfilesByIds)([r]));const c=Object(p.getStatusForUserId)(n,r);c!==i.General.ONLINE&&t(Object(m.getStatusesByIds)([r]))}}(t));break;case R.F.STATUS_CHANGED:!function(e){F({type:s.UserTypes.RECEIVED_STATUSES,data:[{user_id:e.data.user_id,status:e.data.status}]})}(t);break;case R.F.HELLO:!function(e){Object(r.setServerVersion)(e.data.server_version)(F,B)}(t);break;case R.F.REACTION_ADDED:!function(e){const t=JSON.parse(e.data.reaction);F(Object(l.getCustomEmojiForReaction)(t.emoji_name)),F({type:s.PostTypes.RECEIVED_REACTION,data:t})}(t);break;case R.F.REACTION_REMOVED:!function(e){const t=JSON.parse(e.data.reaction);F({type:s.PostTypes.REACTION_DELETED,data:t})}(t);break;case R.F.EMOJI_ADDED:!function(e){const t=JSON.parse(e.data.emoji);F({type:s.EmojiTypes.RECEIVED_CUSTOM_EMOJI,data:t})}(t);break;case R.F.CHANNEL_VIEWED:!function(e){window.isActive&&Object(b.getCurrentChannelId)(B())===e.data.channel_id||Object(p.getCurrentUserId)(B())!==e.broadcast.user_id||F(Object(o.markChannelAsRead)(e.data.channel_id,"",!1))}(t);break;case R.F.PLUGIN_ENABLED:!function(e){const t=e.data.manifest;Object(j.b)(t).catch(e=>{console.error(e.message)})}(t);break;case R.F.PLUGIN_DISABLED:!function(e){const t=e.data.manifest;Object(j.d)(t)}(t);break;case R.F.USER_ROLE_UPDATED:!function(t){const a=I.a.getState().entities.users.profiles[t.data.user_id];if(a){const n=t.data.roles,i=a.roles.includes(R.i.PERMISSIONS_SYSTEM_ADMIN)&&!n.includes(R.i.PERMISSIONS_SYSTEM_ADMIN);I.a.dispatch({type:s.UserTypes.RECEIVED_PROFILE,data:q({},a,{roles:n})}),i&&e.location.pathname.startsWith("/admin_console")&&S.f()}}(t);break;case R.F.CONFIG_CHANGED:!function(e){I.a.dispatch({type:s.GeneralTypes.CLIENT_CONFIG_RECEIVED,data:e.data.config})}(t);break;case R.F.LICENSE_CHANGED:!function(e){I.a.dispatch({type:s.GeneralTypes.CLIENT_LICENSE_RECEIVED,data:e.data.license})}(t);break;case R.F.PLUGIN_STATUSES_CHANGED:!function(e){I.a.dispatch({type:s.AdminTypes.RECEIVED_PLUGIN_STATUSES,data:e.data.plugin_statuses})}(t);break;case R.F.OPEN_DIALOG:!function(e){const t=e.data&&e.data.dialog||{},a=JSON.parse(t);I.a.dispatch({type:s.IntegrationTypes.RECEIVED_DIALOG,data:a});const n=B().entities.integrations.dialogTriggerId;if(a.trigger_id!==n)return;I.a.dispatch(Object(v.b)({modalId:R.s.INTERACTIVE_DIALOG,dialogType:D.a}))}(t)}Object.values(V).forEach(e=>{e&&e.hasOwnProperty(t.event)&&"function"==typeof e[t.event]&&e[t.event](t)})}const re=function(e){let t,a=[],i=0;const o=()=>{t=null,a.length>0&&F(function(e){return(t,a)=>{const s=e.map(e=>JSON.parse(e.data.post)),i=s.map(l.receivedNewPost);t(Object(n.batchActions)(i)),t(Object(l.getThreadsForPosts)(s)),Object(l.getProfilesAndStatusesForPosts)(s,t,a)}}(a)),a=[],i=0};return function(n){t&&i>2?(a.push(n)>200&&(a=[],console.log("channel broken because of too many incoming messages")),clearTimeout(t),t=setTimeout(o,e)):(i+=1,F(function(e){return(t,a)=>{const n=JSON.parse(e.data.post);t(Object(P.e)(n,e)),Object(l.getProfilesAndStatusesForPosts)([n],t,a),n.user_id===Object(p.getCurrentUserId)(a())||Object(k.e)(n)||t({type:s.UserTypes.RECEIVED_STATUSES,data:[{user_id:n.user_id,status:R.O.ONLINE}]})}}(n)),clearTimeout(t),t=setTimeout(o,e))}}(100);function le(e){return e.category===R.i.Preferences.CATEGORY_DIRECT_CHANNEL_SHOW&&"true"===e.value}}).call(this,a(26))}}]);
//# sourceMappingURL=4.43f339222552dd3c9a0e.js.map