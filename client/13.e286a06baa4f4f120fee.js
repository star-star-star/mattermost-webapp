(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{1023:function(e,a,t){"use strict";t.d(a,"a",function(){return r});var n=t(5),s=t.n(n),i=t(28);class r extends s.a.PureComponent{render(){return s.a.createElement(i.c,{id:"generic_icons.logout",defaultMessage:"Logout Icon"},e=>s.a.createElement("i",{className:"fa fa-1x fa-angle-left",title:e}))}}},1843:function(e,a,t){"use strict";t.r(a);var n=t(223),s=t(6),i=t(887),r=t(160),o=t(129),l=t(15),c=t(12),m=t(51),u=t(17),d=t(11),p=t(975),g=t(14),f=(t(21),t(39),t(30),t(16)),E=t.n(f),h=t(5),_=t.n(h),b=t(28),T=t(886),v=t(900),N=t(20),C=t(0),M=t(916),P=t.n(M),R=t(967),y=t(911),k=t(899),I=t(968),j=t(979),w=t(1023),S=t(896),O=(t(159),t(8),t(1180)),x=t(1177);class U extends _.a.PureComponent{render(){return _.a.createElement("span",this.props,_.a.createElement(b.c,{id:"generic_icons.info",defaultMessage:"Info Icon"},e=>_.a.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 20 20",style:A,role:"icon","aria-label":e},_.a.createElement("g",{transform:"matrix(1.17647,0,0,1.17647,-1.55431e-15,-1.00573e-14)"},_.a.createElement("path",{d:"M8.5,0C3.797,0 0,3.797 0,8.5C0,13.203 3.797,17 8.5,17C13.203,17 17,13.203 17,8.5C17,3.797 13.203,0 8.5,0ZM10,8.5C10,7.672 9.328,7 8.5,7C7.672,7 7,7.672 7,8.5L7,12.45C7,13.278 7.672,13.95 8.5,13.95C9.328,13.95 10,13.278 10,12.45L10,8.5ZM8.5,3C9.328,3 10,3.672 10,4.5C10,5.328 9.328,6 8.5,6C7.672,6 7,5.328 7,4.5C7,3.672 7.672,3 8.5,3Z"})))))}}const A={fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:1.41421};function J(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}class L extends _.a.PureComponent{constructor(...e){super(...e),J(this,"handleTeamClick",e=>{e.preventDefault(),this.props.onTeamClick(this.props.team)}),J(this,"renderDescriptionTooltip",()=>{const e=this.props.team;if(!e.description)return null;const a=_.a.createElement(O.a,{id:"team-description__tooltip"},e.description);return _.a.createElement(x.a,{delayShow:1e3,placement:"top",overlay:a,ref:"descriptionOverlay",rootClose:!0,container:this},_.a.createElement(U,{className:"icon icon--info"}))})}render(){const{formatMessage:e}=this.context.intl,{canJoinPublicTeams:a,canJoinPrivateTeams:t,loading:n,team:s}=this.props;let i;i=n?_.a.createElement("span",{className:"fa fa-refresh fa-spin right signup-team__icon",title:e({id:"generic_icons.loading",defaultMessage:"Loading Icon"})}):_.a.createElement("span",{className:"fa fa-angle-right right signup-team__icon",title:e({id:"select_team.join.icon",defaultMessage:"Join Team Icon"})});const r=s.allow_open_invite&&a||!s.allow_open_invite&&t;return _.a.createElement("div",{className:"signup-team-dir"},this.renderDescriptionTooltip(),_.a.createElement("a",{href:"#",id:g.h(s.display_name),onClick:r?this.handleTeamClick:null,className:r?"":"disabled"},_.a.createElement("span",{className:"signup-team-dir__name"},s.display_name),!s.allow_open_invite&&_.a.createElement("span",{className:"fa fa-lock light",title:e({id:"select_team.private.icon",defaultMessage:"Private team"})}),r&&i))}}function q(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}J(L,"propTypes",{team:E.a.object.isRequired,onTeamClick:E.a.func.isRequired,loading:E.a.bool.isRequired,canJoinPublicTeams:E.a.bool.isRequired,canJoinPrivateTeams:E.a.bool.isRequired}),J(L,"contextTypes",{intl:b.i.isRequired});const D=200,Y="api.team.add_members.user_denied";class G extends _.a.Component{constructor(e){super(e),q(this,"handleTeamClick",async e=>{const{siteURL:a,currentUserRoles:t}=this.props;this.setState({loadingTeamId:e.id});const{data:n,error:s}=await this.props.actions.addUserToTeam(e.id,this.props.currentUserId);if(n)this.props.history.push("/".concat(e.name,"/channels/").concat(C.Q.DEFAULT_CHANNEL));else if(s){let e=s.message;s.server_error_id===Y&&(e=t.includes(C.Q.PERMISSIONS_SYSTEM_ADMIN)?_.a.createElement(S.b,{id:"join_team_group_constrained_denied_admin",defaultMessage:"You need to be a member of a linked group to join this team. You can add a group to this team [here](".concat(a,"/admin_console/user_management/groups)."),values:{siteURL:a}}):_.a.createElement(S.b,{id:"join_team_group_constrained_denied",defaultMessage:"You need to be a member of a linked group to join this team."})),this.setState({error:e,loadingTeamId:""})}}),q(this,"handleLogoutClick",e=>{e.preventDefault(),Object(v.e)("/login")}),q(this,"clearError",e=>{e.preventDefault(),this.setState({error:null})}),this.state={loadingTeamId:"",error:null}}componentDidMount(){this.props.actions.getTeams(0,D)}UNSAFE_componentWillMount(){const{actions:e,currentUserRoles:a}=this.props;e.loadRolesIfNeeded(a.split(" "))}render(){const{currentUserIsGuest:e,canManageSystem:a,customDescriptionText:t,isMemberOfTeam:n,listableTeams:s,siteName:i,canCreateTeams:r,canJoinPublicTeams:o,canJoinPrivateTeams:l}=this.props;let m;if(this.state.loadingTeamId)m=_.a.createElement(k.a,null);else if(this.state.error)m=_.a.createElement("div",{className:"signup__content"},_.a.createElement("div",{className:"form-group has-error"},_.a.createElement("label",{className:"control-label"},this.state.error)));else if(e)m=_.a.createElement("div",{className:"signup__content"},_.a.createElement("div",{className:"form-group has-error"},_.a.createElement("label",{className:"control-label"},_.a.createElement(b.c,{id:"signup_team.guest_without_channels",defaultMessage:"Your guest account has no channels assigned. Please contact an administrator."}))));else{let e=[];s.forEach(a=>{(a.allow_open_invite&&o||!a.allow_open_invite&&l)&&e.push(_.a.createElement(L,{key:"team_"+a.name,team:a,onTeamClick:this.handleTeamClick,loading:this.state.loadingTeamId===a.id,canJoinPublicTeams:o,canJoinPrivateTeams:l}))}),0===e.length&&(r||a)?e=_.a.createElement("div",{className:"signup-team-dir-err"},_.a.createElement("div",null,_.a.createElement(b.c,{id:"signup_team.no_open_teams_canCreate",defaultMessage:"No teams are available to join. Please create a new team or ask your administrator for an invite."}))):0===e.length&&(e=_.a.createElement("div",{className:"signup-team-dir-err"},_.a.createElement("div",null,_.a.createElement(I.a,{permissions:[c.Permissions.CREATE_TEAM]},_.a.createElement(b.c,{id:"signup_team.no_open_teams_canCreate",defaultMessage:"No teams are available to join. Please create a new team or ask your administrator for an invite."})),_.a.createElement(I.a,{permissions:[c.Permissions.CREATE_TEAM],invert:!0},_.a.createElement(b.c,{id:"signup_team.no_open_teams",defaultMessage:"No teams are available to join. Please ask your administrator for an invite."}))))),m=_.a.createElement("div",{id:"teamsYouCanJoinContent",className:"signup__content"},_.a.createElement("h4",null,_.a.createElement(b.c,{id:"signup_team.join_open",defaultMessage:"Teams you can join: "})),_.a.createElement("div",{className:"signup-team-all"},e))}const u=_.a.createElement(I.a,{permissions:[c.Permissions.CREATE_TEAM]},_.a.createElement("div",{className:"margin--extra"},_.a.createElement(T.a,{id:"createNewTeamLink",to:"/create_team",className:"signup-team-login"},_.a.createElement(b.c,{id:"login.createTeam",defaultMessage:"Create a new team"}))));let d,p;return N.n()||(d=_.a.createElement(I.a,{permissions:[c.Permissions.MANAGE_SYSTEM]},_.a.createElement("div",{className:"margin--extra hidden-xs"},_.a.createElement(T.a,{to:"/admin_console",className:"signup-team-login"},_.a.createElement(b.c,{id:"signup_team_system_console",defaultMessage:"Go to System Console"}))))),p=this.state.error?_.a.createElement(y.a,{onClick:this.clearError}):n?_.a.createElement(y.a,null):_.a.createElement("div",{className:"signup-header"},_.a.createElement("a",{href:"#",id:"logout",onClick:this.handleLogoutClick},_.a.createElement(w.a,null),_.a.createElement(b.c,{id:"web.header.logout",defaultMessage:"Logout"}))),_.a.createElement("div",null,_.a.createElement(R.a,null),p,_.a.createElement("div",{className:"col-sm-12"},_.a.createElement("div",{className:"signup-team__container"},_.a.createElement("img",{alt:"signup team logo",className:"signup-team-logo",src:P.a}),_.a.createElement(j.a,{customDescriptionText:t,siteName:i}),m,u,d)))}}q(G,"propTypes",{currentUserId:E.a.string.isRequired,currentUserRoles:E.a.string,currentUserIsGuest:E.a.bool,customDescriptionText:E.a.string,isMemberOfTeam:E.a.bool.isRequired,listableTeams:E.a.array,siteName:E.a.string,canCreateTeams:E.a.bool.isRequired,canManageSystem:E.a.bool.isRequired,canJoinPublicTeams:E.a.bool.isRequired,canJoinPrivateTeams:E.a.bool.isRequired,history:E.a.object,siteURL:E.a.string,actions:E.a.shape({getTeams:E.a.func.isRequired,loadRolesIfNeeded:E.a.func.isRequired,addUserToTeam:E.a.func.isRequired}).isRequired});a.default=Object(i.g)(Object(n.connect)(function(e){const a=Object(l.getConfig)(e),t=Object(d.getCurrentUser)(e),n=Object.values(Object(u.getTeamMemberships)(e));return{currentUserId:t.id,currentUserRoles:t.roles||"",currentUserIsGuest:Object(g.W)(t),customDescriptionText:a.CustomDescriptionText,isMemberOfTeam:n&&n.length>0,listableTeams:Object(u.getSortedListableTeams)(e,t.locale),siteName:a.SiteName,canCreateTeams:Object(m.haveISystemPermission)(e,{permission:c.Permissions.CREATE_TEAM}),canManageSystem:Object(m.haveISystemPermission)(e,{permission:c.Permissions.MANAGE_SYSTEM}),canJoinPublicTeams:Object(m.haveISystemPermission)(e,{permission:c.Permissions.JOIN_PUBLIC_TEAMS}),canJoinPrivateTeams:Object(m.haveISystemPermission)(e,{permission:c.Permissions.JOIN_PRIVATE_TEAMS}),siteURL:a.SiteURL}},function(e){return{actions:Object(s.bindActionCreators)({getTeams:r.getTeams,loadRolesIfNeeded:o.loadRolesIfNeeded,addUserToTeam:p.a},e)}})(G))},911:function(e,a,t){"use strict";t.d(a,"a",function(){return m});var n=t(16),s=t.n(n),i=t(5),r=t.n(i),o=t(28),l=t(886);function c(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}class m extends r.a.PureComponent{render(){return r.a.createElement("div",{id:"back_button",className:"signup-header"},r.a.createElement(l.a,{onClick:this.props.onClick,to:this.props.url},r.a.createElement(o.c,{id:"generic_icons.back",defaultMessage:"Back Icon"},e=>r.a.createElement("span",{id:"back_button_icon",className:"fa fa-1x fa-angle-left",title:e})),r.a.createElement(o.c,{id:"web.header.back",defaultMessage:"Back"})))}}c(m,"propTypes",{url:s.a.string,onClick:s.a.func}),c(m,"defaultProps",{url:"/"})},916:function(e,a,t){e.exports=t.p+"files/a03442cd2c7f4902febc7202b961fad9.png"},979:function(e,a,t){"use strict";t.d(a,"a",function(){return c});var n=t(16),s=t.n(n),i=t(5),r=t.n(i),o=t(28);function l(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}class c extends r.a.PureComponent{render(){const{customDescriptionText:e,siteName:a}=this.props;let t=null;return t=e||r.a.createElement(o.c,{id:"web.root.signup_info",defaultMessage:"All team communication in one place, searchable and accessible anywhere"}),r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{id:"site_name"},a),r.a.createElement("h4",{id:"site_description",className:"color--light"},t))}}l(c,"propTypes",{customDescriptionText:s.a.string,siteName:s.a.string}),l(c,"defaultProps",{siteName:"Vue"})}}]);
//# sourceMappingURL=13.e286a06baa4f4f120fee.js.map