(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{1022:function(e,a,t){"use strict";t.d(a,"a",function(){return u});t(47),t(41);var r=t(16),s=t.n(r),o=t(5),l=t.n(o),i=t(28),n=t(14),c=t(29),m=t(931),p=t(905);function d(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}class u extends l.a.PureComponent{constructor(e){super(e),d(this,"handleChange",e=>{e.preventDefault();const a=e.target.value.trim().replace(/\s/g,"");a!==this.state.token&&this.setState({token:a})}),d(this,"handleSubmit",e=>{e.preventDefault();const a={serverError:"",saving:!0};this.setState(a),this.props.submit(this.props.loginId,this.props.password,this.state.token)}),this.state={saving:!1,token:"",serverError:""}}render(){let e,a="";return this.state.serverError&&(e=l.a.createElement("label",{className:"control-label"},this.state.serverError),a=" has-error"),l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement("div",{className:"signup__email-container"},l.a.createElement("p",null,l.a.createElement(i.c,{id:"login_mfa.enterToken",defaultMessage:"To complete the sign in process, please enter a token from your smartphone's authenticator"})),l.a.createElement("div",{className:"form-group"+a},e),l.a.createElement("div",{className:"form-group"+a},l.a.createElement(p.a,{type:"text",className:"form-control",name:"token",placeholder:{id:Object(c.b)("login_mfa.token"),defaultMessage:"MFA Token"},spellCheck:"false",autoComplete:"off",autoFocus:!0,onChange:this.handleChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement(m.a,{saving:this.state.saving,disabled:this.state.saving,onClick:this.handleSubmit,defaultMessage:Object(n.fb)("login_mfa.submit","Submit"),savingMessage:Object(n.fb)("login_mfa.submitting","Submitting...")}))))}}d(u,"propTypes",{loginId:s.a.string.isRequired,password:s.a.string.isRequired,submit:s.a.func.isRequired})},1838:function(e,a,t){"use strict";t.r(a);var r=t(223),s=t(6),o=t(22),l=t(15),i=t(14),n=(t(95),t(109),t(8),t(568),t(16)),c=t.n(n),m=t(5),p=t.n(m),d=t(887),u=t(916),h=t.n(u),f=t(911),w=t(224),E=t.n(w),b=t(28),g=t(901),_=t(0),v=t(29),y=t(905);function N(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}class P extends p.a.PureComponent{constructor(e){super(e),N(this,"submit",e=>{e.preventDefault();const a={},t=E.a.findDOMNode(this.refs.password).value;if(!t)return a.error=i.fb("claim.oauth_to_email.enterPwd","Please enter a password."),void this.setState(a);const{valid:r,error:s}=i.cb(t,this.props.passwordConfig);if(!r&&s)return void this.setState({error:s});const o=E.a.findDOMNode(this.refs.passwordconfirm).value;if(!o||t!==o)return a.error=i.fb("claim.oauth_to_email.pwdNotMatch","Passwords do not match."),void this.setState(a);a.error=null,this.setState(a),Object(g.w)(this.props.currentType,this.props.email,t,e=>{e.follow_link&&(window.location.href=e.follow_link)},e=>{this.setState({error:e.message})})}),this.state={}}render(){var e=null;this.state.error&&(e=p.a.createElement("div",{className:"form-group has-error"},p.a.createElement("label",{className:"control-label"},this.state.error)));var a="form-group";e&&(a+=" has-error");const t="".concat(this.props.currentType===_.Q.SAML_SERVICE?_.Q.SAML_SERVICE.toUpperCase():i.pb(this.props.currentType)," SSO");return p.a.createElement("div",null,p.a.createElement("h3",null,p.a.createElement(b.c,{id:"claim.oauth_to_email.title",defaultMessage:"Switch {type} Account to Email",values:{type:t}})),p.a.createElement("form",{onSubmit:this.submit},p.a.createElement("p",null,p.a.createElement(b.c,{id:"claim.oauth_to_email.description",defaultMessage:"Upon changing your account type, you will only be able to login with your email and password."})),p.a.createElement("p",null,p.a.createElement(b.c,{id:"claim.oauth_to_email.enterNewPwd",defaultMessage:"Enter a new password for your {site} email account",values:{site:this.props.siteName}})),p.a.createElement("div",{className:a},p.a.createElement(y.a,{type:"password",className:"form-control",name:"password",ref:"password",placeholder:{id:Object(v.b)("claim.oauth_to_email.newPwd"),defaultMessage:"New Password"},spellCheck:"false"})),p.a.createElement("div",{className:a},p.a.createElement(y.a,{type:"password",className:"form-control",name:"passwordconfirm",ref:"passwordconfirm",placeholder:{id:Object(v.b)("claim.oauth_to_email.confirm"),defaultMessage:"Confirm Password"},spellCheck:"false"})),e,p.a.createElement("button",{type:"submit",className:"btn btn-primary"},p.a.createElement(b.c,{id:"claim.oauth_to_email.switchTo",defaultMessage:"Switch {type} to email and password",values:{type:t}}))))}}N(P,"propTypes",{currentType:c.a.string,email:c.a.string,siteName:c.a.string,passwordConfig:c.a.object});var S=t(1022);function M(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}class k extends p.a.PureComponent{constructor(e){super(e),M(this,"preSubmit",e=>{e.preventDefault();var a={},t=E.a.findDOMNode(this.refs.password).value;if(!t)return a.error=i.fb("claim.email_to_oauth.pwdError","Please enter your password."),void this.setState(a);this.setState({password:t}),a.error=null,this.setState(a),this.submit(this.props.email,t,"")}),M(this,"submit",(e,a,t)=>{Object(g.l)(e,a,t,this.props.newType,e=>{e.follow_link&&(window.location.href=e.follow_link)},e=>{this.state.showMfa||"mfa.validate_token.authenticate.app_error"!==e.server_error_id?this.setState({error:e.message,showMfa:!1}):this.setState({showMfa:!0})})}),this.state={showMfa:!1,password:""}}render(){var e=null;this.state.error&&(e=p.a.createElement("div",{className:"form-group has-error"},p.a.createElement("label",{className:"control-label"},this.state.error)));var a="form-group";e&&(a+=" has-error");const t=this.props.newType===_.Q.SAML_SERVICE?_.Q.SAML_SERVICE.toUpperCase():i.pb(this.props.newType),r="".concat(t," SSO");let s;return s=this.state.showMfa?p.a.createElement(S.a,{loginId:this.props.email,password:this.state.password,submit:this.submit}):p.a.createElement("form",{onSubmit:this.preSubmit},p.a.createElement("p",null,p.a.createElement(b.c,{id:"claim.email_to_oauth.ssoType",defaultMessage:"Upon claiming your account, you will only be able to login with {type} SSO",values:{type:t}})),p.a.createElement("p",null,p.a.createElement(b.c,{id:"claim.email_to_oauth.ssoNote",defaultMessage:"You must already have a valid {type} account",values:{type:t}})),p.a.createElement("p",null,p.a.createElement(b.c,{id:"claim.email_to_oauth.enterPwd",defaultMessage:"Enter the password for your {site} account",values:{site:this.props.siteName}})),p.a.createElement("div",{className:a},p.a.createElement(y.a,{type:"password",className:"form-control",name:"password",ref:"password",placeholder:{id:Object(v.b)("claim.email_to_oauth.pwd"),defaultMessage:"Password"},spellCheck:"false"})),e,p.a.createElement("button",{type:"submit",className:"btn btn-primary"},p.a.createElement(b.c,{id:"claim.email_to_oauth.switchTo",defaultMessage:"Switch account to {uiType}",values:{uiType:r}}))),p.a.createElement("div",null,p.a.createElement("h3",null,p.a.createElement(b.c,{id:"claim.email_to_oauth.title",defaultMessage:"Switch Email/Password Account to {uiType}",values:{uiType:r}})),s)}}M(k,"propTypes",{newType:c.a.string,email:c.a.string,siteName:c.a.string});t(42);function C(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}class D extends p.a.Component{constructor(e){super(e),C(this,"preSubmit",e=>{e.preventDefault();var a={passwordError:"",confirmError:"",ldapPasswordError:"",serverError:""};const t=this.refs.ldappassword.value;if(!t)return a.ldapPasswordError=i.fb("claim.ldap_to_email.ldapPasswordError","Please enter your AD/LDAP password."),void this.setState(a);const r=this.refs.password.value;if(!r)return a.passwordError=i.fb("claim.ldap_to_email.pwdError","Please enter your password."),void this.setState(a);const{valid:s,error:o}=i.cb(r,this.props.passwordConfig);if(!s&&o)return void this.setState({passwordError:o});const l=this.refs.passwordconfirm.value;if(!l||r!==l)return a.confirmError=i.fb("claim.ldap_to_email.pwdNotMatch","Passwords do not match."),void this.setState(a);a.password=r,a.ldapPassword=t,this.setState(a),this.submit(this.props.email,r,"",t)}),C(this,"submit",(e,a,t,r)=>{this.props.switchLdapToEmail(r||this.state.ldapPassword,this.props.email,a,t).then(({data:e,error:a})=>{e&&e.follow_link?window.location.href=e.follow_link:a&&(a.server_error_id.startsWith("model.user.is_valid.pwd")?this.setState({passwordError:a.message,showMfa:!1}):"ent.ldap.do_login.invalid_password.app_error"===a.server_error_id?this.setState({ldapPasswordError:a.message,showMfa:!1}):this.state.showMfa||"mfa.validate_token.authenticate.app_error"!==a.server_error_id?this.setState({serverError:a.message,showMfa:!1}):this.setState({showMfa:!0}))})}),this.state={passwordError:"",confirmError:"",ldapPasswordError:"",serverError:""}}render(){let e=null,a="form-group";this.state.serverError&&(e=p.a.createElement("div",{className:"form-group has-error"},p.a.createElement("label",{className:"control-label"},this.state.serverError)),a+=" has-error");let t=null,r="form-group";this.state.passwordError&&(t=p.a.createElement("div",{className:"form-group has-error"},p.a.createElement("label",{className:"control-label"},this.state.passwordError)),r+=" has-error");let s=null,o="form-group";this.state.ldapPasswordError&&(s=p.a.createElement("div",{className:"form-group has-error"},p.a.createElement("label",{className:"control-label"},this.state.ldapPasswordError)),o+=" has-error");let l=null,n="form-group";this.state.confirmError&&(l=p.a.createElement("div",{className:"form-group has-error"},p.a.createElement("label",{className:"control-label"},this.state.confirmError)),n+=" has-error");const c=i.fb("claim.ldap_to_email.ldapPwd","AD/LDAP Password");let m;return m=this.state.showMfa?p.a.createElement(S.a,{loginId:this.props.email,password:this.state.password,submit:this.submit}):p.a.createElement("form",{onSubmit:this.preSubmit,className:a},p.a.createElement("p",null,p.a.createElement(b.c,{id:"claim.ldap_to_email.email",defaultMessage:"After switching your authentication method, you will use {email} to login. Your AD/LDAP credentials will no longer allow access to Vue.",values:{email:this.props.email}})),p.a.createElement("p",null,p.a.createElement(b.c,{id:"claim.ldap_to_email.enterLdapPwd",defaultMessage:"{ldapPassword}:",values:{ldapPassword:c}})),p.a.createElement("div",{className:o},p.a.createElement("input",{type:"password",className:"form-control",name:"ldapPassword",ref:"ldappassword",placeholder:c,spellCheck:"false"})),s,p.a.createElement("p",null,p.a.createElement(b.c,{id:"claim.ldap_to_email.enterPwd",defaultMessage:"New email login password:"})),p.a.createElement("div",{className:r},p.a.createElement(y.a,{type:"password",className:"form-control",name:"password",ref:"password",placeholder:{id:Object(v.b)("claim.ldap_to_email.pwd"),defaultMessage:"Password"},spellCheck:"false"})),t,p.a.createElement("div",{className:n},p.a.createElement(y.a,{type:"password",className:"form-control",name:"passwordconfirm",ref:"passwordconfirm",placeholder:{id:Object(v.b)("claim.ldap_to_email.confirm"),defaultMessage:"Confirm Password"},spellCheck:"false"})),l,p.a.createElement("button",{type:"submit",className:"btn btn-primary"},p.a.createElement(b.c,{id:"claim.ldap_to_email.switchTo",defaultMessage:"Switch account to email/password"})),e),p.a.createElement("div",null,p.a.createElement("h3",null,p.a.createElement(b.c,{id:"claim.ldap_to_email.title",defaultMessage:"Switch AD/LDAP Account to Email/Password"})),m)}}C(D,"propTypes",{email:c.a.string,passwordConfig:c.a.object,switchLdapToEmail:c.a.func.isRequired});t(41);function L(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}class A extends p.a.Component{constructor(e){super(e),L(this,"preSubmit",e=>{e.preventDefault();var a={passwordError:"",ldapError:"",ldapPasswordError:"",serverError:""};const t=this.refs.emailpassword.value;if(!t)return a.passwordError=i.fb("claim.email_to_ldap.pwdError","Please enter your password."),void this.setState(a);const r=this.refs.ldapid.value.trim();if(!r)return a.ldapError=i.fb("claim.email_to_ldap.ldapIdError","Please enter your AD/LDAP ID."),void this.setState(a);const s=this.refs.ldappassword.value;if(!s)return a.ldapPasswordError=i.fb("claim.email_to_ldap.ldapPasswordError","Please enter your AD/LDAP password."),void this.setState(a);a.password=t,a.ldapId=r,a.ldapPassword=s,this.setState(a),this.submit(this.props.email,t,"",r,s)}),L(this,"submit",(e,a,t,r,s)=>{Object(g.k)(e,a,t,r||this.state.ldapId,s||this.state.ldapPassword,e=>{e.follow_link&&(window.location.href=e.follow_link)},e=>{if(this.state.showMfa||"mfa.validate_token.authenticate.app_error"!==e.server_error_id)switch(e.id){case"ent.ldap.do_login.user_not_registered.app_error":case"ent.ldap.do_login.user_filtered.app_error":case"ent.ldap.do_login.matched_to_many_users.app_error":this.setState({ldapError:e.message,showMfa:!1});break;case"ent.ldap.do_login.invalid_password.app_error":this.setState({ldapPasswordError:e.message,showMfa:!1});break;case"api.user.check_user_password.invalid.app_error":this.setState({passwordError:e.message,showMfa:!1});break;default:this.setState({serverError:e.message,showMfa:!1})}else this.setState({showMfa:!0})})}),this.state={passwordError:"",ldapError:"",ldapPasswordError:"",serverError:"",showMfa:!1}}render(){let e=null,a="form-group";this.state.serverError&&(e=p.a.createElement("div",{className:"form-group has-error"},p.a.createElement("label",{className:"control-label"},this.state.serverError)),a+=" has-error");let t=null,r="form-group";this.state.passwordError&&(t=p.a.createElement("div",{className:"form-group has-error"},p.a.createElement("label",{className:"control-label"},this.state.passwordError)),r+=" has-error");let s=null,o="form-group";this.state.ldapError&&(s=p.a.createElement("div",{className:"form-group has-error"},p.a.createElement("label",{className:"control-label"},this.state.ldapError)),o+=" has-error");let l,n,c=null,m="form-group";return this.state.ldapPasswordError&&(c=p.a.createElement("div",{className:"form-group has-error"},p.a.createElement("label",{className:"control-label"},this.state.ldapPasswordError)),m+=" has-error"),l=this.props.ldapLoginFieldName?this.props.ldapLoginFieldName:i.fb("claim.email_to_ldap.ldapId","AD/LDAP ID"),n=this.state.showMfa?p.a.createElement(S.a,{loginId:this.props.email,password:this.state.password,submit:this.submit}):p.a.createElement("form",{onSubmit:this.preSubmit,className:a},p.a.createElement("p",null,p.a.createElement(b.c,{id:"claim.email_to_ldap.ssoType",defaultMessage:"Upon claiming your account, you will only be able to login with AD/LDAP"})),p.a.createElement("p",null,p.a.createElement(b.c,{id:"claim.email_to_ldap.ssoNote",defaultMessage:"You must already have a valid AD/LDAP account"})),p.a.createElement("p",null,p.a.createElement(b.c,{id:"claim.email_to_ldap.enterPwd",defaultMessage:"Enter the password for your {site} email account",values:{site:this.props.siteName}})),p.a.createElement("input",{type:"text",style:T.usernameInput,name:"fakeusernameremembered"}),p.a.createElement("div",{className:r},p.a.createElement(y.a,{type:"password",className:"form-control",name:"emailPassword",ref:"emailpassword",autoComplete:"off",placeholder:{id:Object(v.b)("claim.email_to_ldap.pwd"),defaultMessage:"Password"},spellCheck:"false"})),t,p.a.createElement("p",null,p.a.createElement(b.c,{id:"claim.email_to_ldap.enterLdapPwd",defaultMessage:"Enter the ID and password for your AD/LDAP account"})),p.a.createElement("div",{className:o},p.a.createElement("input",{type:"text",className:"form-control",name:"ldapId",ref:"ldapid",autoComplete:"off",placeholder:l,spellCheck:"false"})),s,p.a.createElement("div",{className:m},p.a.createElement(y.a,{type:"password",className:"form-control",name:"ldapPassword",ref:"ldappassword",autoComplete:"off",placeholder:{id:Object(v.b)("claim.email_to_ldap.ldapPwd"),defaultMessage:"AD/LDAP Password"},spellCheck:"false"})),c,p.a.createElement("button",{type:"submit",className:"btn btn-primary"},p.a.createElement(b.c,{id:"claim.email_to_ldap.switchTo",defaultMessage:"Switch account to AD/LDAP"})),e),p.a.createElement("div",null,p.a.createElement("h3",null,p.a.createElement(b.c,{id:"claim.email_to_ldap.title",defaultMessage:"Switch Email/Password Account to AD/LDAP"})),n)}}L(A,"propTypes",{email:c.a.string,siteName:c.a.string,ldapLoginFieldName:c.a.string});const T={usernameInput:{display:"none"}};class O extends p.a.PureComponent{render(){const e=new URLSearchParams(this.props.location.search).get("email"),a=new URLSearchParams(this.props.location.search).get("new_type"),t=new URLSearchParams(this.props.location.search).get("old_type");return p.a.createElement("div",null,p.a.createElement(f.a,null),p.a.createElement("div",{className:"col-sm-12"},p.a.createElement("div",{className:"signup-team__container"},p.a.createElement("img",{alt:"signup logo",className:"signup-team-logo",src:h.a}),p.a.createElement("div",{id:"claim"},p.a.createElement(d.d,null,p.a.createElement(d.b,{path:"".concat(this.props.match.url,"/oauth_to_email"),render:()=>p.a.createElement(P,{currentType:t,email:e,siteName:this.props.siteName,passwordConfig:this.props.passwordConfig})}),p.a.createElement(d.b,{path:"".concat(this.props.match.url,"/email_to_oauth"),render:()=>p.a.createElement(k,{newType:a,email:e,siteName:this.props.siteName})}),p.a.createElement(d.b,{path:"".concat(this.props.match.url,"/ldap_to_email"),render:()=>p.a.createElement(D,{email:e,passwordConfig:this.props.passwordConfig,switchLdapToEmail:this.props.actions.switchLdapToEmail})}),p.a.createElement(d.b,{path:"".concat(this.props.match.url,"/email_to_ldap"),render:()=>p.a.createElement(A,{email:e,siteName:this.props.siteName,ldapLoginFieldName:this.props.ldapLoginFieldName})}))))))}}var j,I,R;j=O,I="propTypes",R={location:c.a.object.isRequired,siteName:c.a.string,ldapLoginFieldName:c.a.string,passwordConfig:c.a.object,match:c.a.shape({url:c.a.string.isRequired}).isRequired,actions:c.a.shape({switchLdapToEmail:c.a.func.isRequired}).isRequired},I in j?Object.defineProperty(j,I,{value:R,enumerable:!0,configurable:!0,writable:!0}):j[I]=R;a.default=Object(r.connect)(function(e){const a=Object(l.getConfig)(e);return{siteName:a.SiteName,ldapLoginFieldName:a.LdapLoginFieldName,passwordConfig:Object(i.E)(a)}},function(e){return{actions:Object(s.bindActionCreators)({switchLdapToEmail:o.switchLdapToEmail},e)}})(O)},911:function(e,a,t){"use strict";t.d(a,"a",function(){return m});var r=t(16),s=t.n(r),o=t(5),l=t.n(o),i=t(28),n=t(886);function c(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}class m extends l.a.PureComponent{render(){return l.a.createElement("div",{id:"back_button",className:"signup-header"},l.a.createElement(n.a,{onClick:this.props.onClick,to:this.props.url},l.a.createElement(i.c,{id:"generic_icons.back",defaultMessage:"Back Icon"},e=>l.a.createElement("span",{id:"back_button_icon",className:"fa fa-1x fa-angle-left",title:e})),l.a.createElement(i.c,{id:"web.header.back",defaultMessage:"Back"})))}}c(m,"propTypes",{url:s.a.string,onClick:s.a.func}),c(m,"defaultProps",{url:"/"})},916:function(e,a,t){e.exports=t.p+"files/a03442cd2c7f4902febc7202b961fad9.png"}}]);
//# sourceMappingURL=14.f190a29c44615762f4cf.js.map